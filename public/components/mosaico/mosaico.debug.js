(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Mosaico = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
function log(){}function info(){console.log.apply(console,arguments)}function warn(){console.log.apply(console,arguments)}function error(){console.warn.apply(console,arguments)}function time(e){times[e]=Date.now()}function timeEnd(e){var t=times[e];if(!t)throw new Error("No such label: "+e);var o=Date.now()-t;console.log(e+": "+o+"ms")}function trace(){var e=new Error;e.name="Trace",e.message=util.format.apply(null,arguments),console.error(e.stack)}function dir(e){console.log(util.inspect(e)+"\n")}function assert(e){if(!e){var t=slice.call(arguments,1);assert.ok(!1,util.format.apply(null,t))}}var util=require("util"),assert=require("assert"),slice=Array.prototype.slice,console,times={};console="undefined"!=typeof global&&global.console?global.console:"undefined"!=typeof window&&window.console?window.console:{};for(var functions=[[log,"log"],[info,"info"],[warn,"warn"],[error,"error"],[time,"time"],[timeEnd,"timeEnd"],[trace,"trace"],[dir,"dir"],[assert,"assert"]],i=0;i<functions.length;i++){var tuple=functions[i],f=tuple[0],name=tuple[1];console[name]||(console[name]=f)}module.exports=console;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"assert":21,"util":26}],2:[function(require,module,exports){
!function(e){var t=0,o=window.navigator.userAgent,n=o.indexOf("MSIE ")>0,i=n?"-ie":"",a=n?!1:/mozilla/.test(o.toLowerCase())&&!/webkit/.test(o.toLowerCase()),r=[],l=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],s=["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"],d=["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],u=[["003366","336699","3366cc","003399","000099","0000cc","000066"],["006666","006699","0099cc","0066cc","0033cc","0000ff","3333ff","333399"],["669999","009999","33cccc","00ccff","0099ff","0066ff","3366ff","3333cc","666699"],["339966","00cc99","00ffcc","00ffff","33ccff","3399ff","6699ff","6666ff","6600ff","6600cc"],["339933","00cc66","00ff99","66ffcc","66ffff","66ccff","99ccff","9999ff","9966ff","9933ff","9900ff"],["006600","00cc00","00ff00","66ff99","99ffcc","ccffff","ccccff","cc99ff","cc66ff","cc33ff","cc00ff","9900cc"],["003300","009933","33cc33","66ff66","99ff99","ccffcc","ffffff","ffccff","ff99ff","ff66ff","ff00ff","cc00cc","660066"],["333300","009900","66ff33","99ff66","ccff99","ffffcc","ffcccc","ff99cc","ff66cc","ff33cc","cc0099","993399"],["336600","669900","99ff33","ccff66","ffff99","ffcc99","ff9999","ff6699","ff3399","cc3399","990099"],["666633","99cc00","ccff33","ffff66","ffcc66","ff9966","ff6666","ff0066","d60094","993366"],["a58800","cccc00","ffff00","ffcc00","ff9933","ff6600","ff0033","cc0066","660033"],["996633","cc9900","ff9900","cc6600","ff3300","ff0000","cc0000","990033"],["663300","996600","cc3300","993300","990000","800000","993333"]],c="#0000ffff",f=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},p=function(e){return f(Number(e))},b=function(e){var t=f(e);return t+t+t},m=function(e){if(e.length>10){var t=1+e.indexOf("("),o=e.indexOf(")"),n=e.substring(t,o).split(",");return["#",p(n[0]),p(n[1]),p(n[2])].join("")}return e};e.widget("evol.colorpicker",{version:"3.2.1",options:{color:null,showOn:"both",hideButton:!1,displayIndicator:!0,transparentColor:!1,history:!0,defaultPalette:"theme",strings:"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet."},_active:!1,_create:function(){var o=this;switch(this._paletteIdx="theme"==this.options.defaultPalette?1:2,this._id="evo-cp"+t++,this._enabled=!0,this.options.showOn=this.options.hideButton?"focus":this.options.showOn,this.element.get(0).tagName){case"INPUT":var r=this.options.color,l=this.element,s=("focus"===this.options.showOn?"":"evo-pointer ")+"evo-colorind"+(a?"-ff":i)+(this.options.hideButton?" evo-hidden-button":""),d="";if(this._isPopup=!0,this._palette=null,null!==r)l.val(r);else{var u=l.val();""!==u&&(r=this.options.color=u)}r===c?s+=" evo-transparent":d=null!==r?"background-color:"+r:"",l.addClass("colorPicker "+this._id).wrap('<div style="width:'+(this.options.hideButton?this.element.width():this.element.width()+32)+"px;"+(n?"margin-bottom:-21px;":"")+(a?"padding:1px 0;":"")+'"></div>').after('<div class="'+s+'" style="'+d+'"></div>').on("keyup onpaste",function(){var t=e(this).val();t!=o.options.color&&o._setValue(t,!0)});var f=this.options.showOn;("both"===f||"focus"===f)&&l.on("focus",function(){o.showPalette()}),("both"===f||"button"===f)&&l.next().on("click",function(e){return e.stopPropagation(),o.showPalette(),!1});break;default:this._isPopup=!1,this._palette=this.element.html(this._paletteHTML()).attr("aria-haspopup","true"),this._bindColors()}if(this.options.history&&(r&&this._add2History(r),this.options.initialHistory)){var p=this.options.initialHistory;for(var b in p)this._add2History(p[b])}},_paletteHTML:function(){var e=this._paletteIdx=Math.abs(this._paletteIdx),t=this.options,o=t.strings.split(","),n='<div class="evo-pop'+i+' ui-widget ui-widget-content ui-corner-all"'+(this._isPopup?' style="position:absolute"':"")+"><span>"+this["_paletteHTML"+e]()+'</span><div class="evo-more"><a href="javascript:void(0)">'+o[1+e]+"</a>";return t.history&&(n+='<a href="javascript:void(0)" class="evo-hist">'+o[5]+"</a>"),n+="</div>",t.displayIndicator&&(n+=this._colorIndHTML(this.options.color)+this._colorIndHTML("")),n+="</div>"},_colorIndHTML:function(e){var t=n?"evo-colorbox-ie ":"",o="";return e?e===c?t+="evo-transparent":o="background-color:"+e:o="display:none",'<div class="evo-color" style="float:left"><div style="'+o+'" class="'+t+'"></div><span>'+(e?e:"")+"</span></div>"},_paletteHTML1:function(){for(var e=this.options,t=e.strings.split(","),o='<td style="background-color:#',a=n?'"><div style="width:2px;"></div></td>':'"><span/></td>',r='<tr><th colspan="10" class="ui-widget-content">',u='<table class="evo-palette'+i+'">'+r+t[0]+"</th></tr><tr>",c=0;10>c;c++)u+=o+l[c]+a;for(u+="</tr>",n||(u+='<tr><th colspan="10"></th></tr>'),u+='<tr class="top">',c=0;10>c;c++)u+=o+s[c]+a;for(var f=1;4>f;f++)for(u+='</tr><tr class="in">',c=0;10>c;c++)u+=o+s[10*f+c]+a;for(u+='</tr><tr class="bottom">',c=40;50>c;c++)u+=o+s[c]+a;for(u+="</tr>"+r,e.transparentColor&&(u+='<div class="evo-transparent evo-tr-box"></div>'),u+=t[1]+"</th></tr><tr>",c=0;10>c;c++)u+=o+d[c]+a;return u+="</tr></table>"},_paletteHTML2:function(){for(var e,t,o='<td style="background-color:#',a=n?'"><div style="width:5px;"></div></td>':'"><span/></td>',r='<table class="evo-palette2'+i+'"><tr>',l="</tr></table>",s='<div class="evo-palcenter">',d=0,c=u.length;c>d;d++){s+=r;var f=u[d];for(e=0,t=f.length;t>e;e++)s+=o+f[e]+a;s+=l}s+='<div class="evo-sep"/>';var p="";for(s+=r,e=255;e>10;e-=10)s+=o+b(e)+a,e-=10,p+=o+b(e)+a;return s+=l+r+p+l+"</div>"},_switchPalette:function(t){if(this._enabled){var o,n,i,a=this.options.strings.split(",");if(e(t).hasClass("evo-hist")){var l=['<table class="evo-palette"><tr><th class="ui-widget-content">',a[5],"</th></tr></tr></table>",'<div class="evo-cHist">'];if(0===r.length)l.push("<p>&nbsp;",a[6],"</p>");else for(var s=r.length-1;s>-1;s--)9===r[s].length?l.push('<div class="evo-transparent"></div>'):l.push('<div style="background-color:',r[s],'"></div>');l.push("</div>"),o=-this._paletteIdx,n=l.join(""),i=a[4]}else this._paletteIdx<0?(o=-this._paletteIdx,this._palette.find(".evo-hist").show()):o=2==this._paletteIdx?1:2,n=this["_paletteHTML"+o](),i=a[o+1],this._paletteIdx=o;this._paletteIdx=o;var d=this._palette.find(".evo-more").prev().html(n).end().children().eq(0).html(i);0>o&&d.next().hide()}},_downOrUpPositioning:function(){for(var e=this.element,t=0;null!==e&&100>t;){if("visible"!=e.css("overflow")){var o=this._palette.offset().top+this._palette.height(),n=e.offset().top+e.height(),i=this._palette.offset().top-this._palette.height()-this.element.outerHeight(),a=e.offset().top,r=o>n&&i>a;r?this._palette.css({bottom:this.element.outerHeight()+"px"}):this._palette.css({bottom:"auto"});break}if("HTML"==e[0].tagName)break;e=e.offsetParent(),t++}},showPalette:function(){if(this._enabled&&(this._active=!0,e(".colorPicker").not("."+this._id).colorpicker("hidePalette"),null===this._palette)){this._palette=this.element.next().after(this._paletteHTML()).next().on("click",function(e){return e.stopPropagation(),!1}),this._bindColors();var t=this;this._isPopup&&(this._downOrUpPositioning(),e(document.body).on("click."+t._id,function(e){e.target!=t.element.get(0)&&t.hidePalette()}).on("keyup."+t._id,function(e){27===e.keyCode&&t.hidePalette()}))}return this},hidePalette:function(){if(this._isPopup&&this._palette){e(document.body).off("click."+this._id);var t=this;this._palette.off("mouseover click","td,.evo-transparent").fadeOut(function(){t._palette.remove(),t._palette=t._cTxt=null}).find(".evo-more a").off("click")}return this},_bindColors:function(){var t=this,o=this.options,n=this._palette.find("div.evo-color"),i=o.history?"td,.evo-cHist>div":"td";o.transparentColor&&(i+=",.evo-transparent"),this._cTxt1=n.eq(0).children().eq(0),this._cTxt2=n.eq(1).children().eq(0),this._palette.on("click",i,function(){if(t._enabled){var o=e(this);t._setValue(o.hasClass("evo-transparent")?c:m(o.attr("style").substring(17))),t._active=!1}}).on("mouseover",i,function(){if(t._enabled){var o=e(this),n=o.hasClass("evo-transparent")?c:m(o.attr("style").substring(17));t.options.displayIndicator&&t._setColorInd(n,2),t._active&&t.element.trigger("mouseover.color",n)}}).find(".evo-more a").on("click",function(){t._switchPalette(this)})},val:function(e){return"undefined"==typeof e?this.options.color:(this._setValue(e),this)},_setValue:function(e,t){e=e.replace(/ /g,""),this.options.color=e,this._isPopup?(t||this.hidePalette(),this._setBoxColor(this.element.val(e).next(),e)):this._setColorInd(e,1),this.options.history&&this._paletteIdx>0&&this._add2History(e),this.element.trigger("change.color",e)},_setColorInd:function(e,t){var o=this["_cTxt"+t];this._setBoxColor(o,e),o.next().html(e)},_setBoxColor:function(e,t){t===c?e.addClass("evo-transparent").removeAttr("style"):e.removeClass("evo-transparent").attr("style","background-color:"+t)},_setOption:function(e,t){"color"==e?this._setValue(t,!0):this.options[e]=t},_add2History:function(e){for(var t=r.length,o=0;t>o;o++)if(e==r[o])return;t>27&&r.shift(),r.push(e)},clear:function(){this.hidePalette().val("")},enable:function(){var e=this.element;return this._isPopup?e.removeAttr("disabled"):e.css({opacity:"1","pointer-events":"auto"}),"focus"!==this.options.showOn&&this.element.next().addClass("evo-pointer"),e.removeAttr("aria-disabled"),this._enabled=!0,this},disable:function(){var e=this.element;return this._isPopup?e.attr("disabled","disabled"):(this.hidePalette(),e.css({opacity:"0.3","pointer-events":"none"})),"focus"!==this.options.showOn&&this.element.next().removeClass("evo-pointer"),e.attr("aria-disabled","true"),this._enabled=!1,this},isDisabled:function(){return!this._enabled},destroy:function(){e(document.body).off("click."+this._id),this._palette&&(this._palette.off("mouseover click","td,.evo-cHist>div,.evo-transparent").find(".evo-more a").off("click"),this._isPopup&&this._palette.remove(),this._palette=this._cTxt=null),this._isPopup&&this.element.next().off("click").remove().end().off("focus").unwrap(),this.element.removeClass("colorPicker "+this.id).empty(),e.Widget.prototype.destroy.call(this)}})}(jQuery);

},{}],3:[function(require,module,exports){
!function(e){"use strict";var t="Compound",o="Identifier",n="MemberExpression",r="Literal",i="ThisExpression",a="CallExpression",l="UnaryExpression",s="BinaryExpression",d="LogicalExpression",u="ConditionalExpression",c="ArrayExpression",f=46,p=44,b=39,m=34,g=40,h=41,v=91,y=93,k=63,w=59,x=58,_=function(e,t){var o=new Error(e+" at character "+t);throw o.index=t,o.description=e,o},S=!0,O={"-":S,"!":S,"~":S,"+":S},C={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},$=function(e){var t,o=0;for(var n in e)(t=n.length)>o&&e.hasOwnProperty(n)&&(o=t);return o},T=$(O),E=$(C),A={"true":!0,"false":!1,"null":null},D="this",M=function(e){return C[e]||0},j=function(e,t,o){var n="||"===e||"&&"===e?d:s;return{type:n,operator:e,left:t,right:o}},P=function(e){return e>=48&&57>=e},B=function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=128&&!C[String.fromCharCode(e)]},H=function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||e>=128&&!C[String.fromCharCode(e)]},q=function(e){for(var s,d,S=0,$=e.charAt,q=e.charCodeAt,I=function(t){return $.call(e,t)},R=function(t){return q.call(e,t)},U=e.length,N=function(){for(var e=R(S);32===e||9===e;)e=R(++S)},L=function(){var e,t,o=V();return N(),R(S)!==k?o:(S++,e=L(),e||_("Expected expression",S),N(),R(S)===x?(S++,t=L(),t||_("Expected expression",S),{type:u,test:o,consequent:e,alternate:t}):(_("Expected :",S),void 0))},F=function(){N();for(var t=e.substr(S,E),o=t.length;o>0;){if(C.hasOwnProperty(t))return S+=o,t;t=t.substr(0,--o)}return!1},V=function(){var e,t,o,n,r,i,a,l;if(i=z(),t=F(),!t)return i;for(r={value:t,prec:M(t)},a=z(),a||_("Expected expression after "+t,S),n=[i,r,a];(t=F())&&(o=M(t),0!==o);){for(r={value:t,prec:o};n.length>2&&o<=n[n.length-2].prec;)a=n.pop(),t=n.pop().value,i=n.pop(),e=j(t,i,a),n.push(e);e=z(),e||_("Expected expression after "+t,S),n.push(r,e)}for(l=n.length-1,e=n[l];l>1;)e=j(n[l-1].value,n[l-2],e),l-=2;return e},z=function(){var t,o,n;if(N(),t=R(S),P(t)||t===f)return G();if(t===b||t===m)return W();if(B(t)||t===g)return Z();if(t===v)return Q();for(o=e.substr(S,T),n=o.length;n>0;){if(O.hasOwnProperty(o))return S+=n,{type:l,operator:o,argument:z(),prefix:!0};o=o.substr(0,--n)}return!1},G=function(){for(var e,t,o="";P(R(S));)o+=I(S++);if(R(S)===f)for(o+=I(S++);P(R(S));)o+=I(S++);if(e=I(S),"e"===e||"E"===e){for(o+=I(S++),e=I(S),("+"===e||"-"===e)&&(o+=I(S++));P(R(S));)o+=I(S++);P(R(S-1))||_("Expected exponent ("+o+I(S)+")",S)}return t=R(S),B(t)?_("Variable names cannot start with a number ("+o+I(S)+")",S):t===f&&_("Unexpected period",S),{type:r,value:parseFloat(o),raw:o}},W=function(){for(var e,t="",o=I(S++),n=!1;U>S;){if(e=I(S++),e===o){n=!0;break}if("\\"===e)switch(e=I(S++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="";break;default:t+="\\"+e}else t+=e}return n||_('Unclosed quote after "'+t+'"',S),{type:r,value:t,raw:o+t+o}},J=function(){var t,n=R(S),a=S;for(B(n)?S++:_("Unexpected "+I(S),S);U>S&&(n=R(S),H(n));)S++;return t=e.slice(a,S),A.hasOwnProperty(t)?{type:r,value:A[t],raw:t}:t===D?{type:i}:{type:o,name:t}},Y=function(e){for(var o,n,r=[],i=!1;U>S;){if(N(),o=R(S),o===e){i=!0,S++;break}o===p?S++:(n=L(),n&&n.type!==t||_("Expected comma",S),r.push(n))}return i||_("Expected "+String.fromCharCode(e),S),r},Z=function(){var e,t;for(e=R(S),t=e===g?X():J(),N(),e=R(S);e===f||e===v||e===g;)S++,e===f?(N(),t={type:n,computed:!1,object:t,property:J()}):e===v?(t={type:n,computed:!0,object:t,property:L()},N(),e=R(S),e!==y&&_("Unclosed [",S),S++):e===g&&(t={type:a,arguments:Y(h),callee:t}),N(),e=R(S);return t},X=function(){S++;var e=L();return N(),R(S)===h?(S++,e):(_("Unclosed (",S),void 0)},Q=function(){return S++,{type:c,elements:Y(y)}},K=[];U>S;)s=R(S),s===w||s===p?S++:(d=L())?K.push(d):U>S&&_('Unexpected "'+I(S)+'"',S);return 1===K.length?K[0]:{type:t,body:K}};if(q.version="<%= version %>",q.toString=function(){return"JavaScript Expression Parser (JSEP) v"+q.version},q.addUnaryOp=function(e){return T=Math.max(e.length,T),O[e]=S,this},q.addBinaryOp=function(e,t){return E=Math.max(e.length,E),C[e]=t,this},q.addLiteral=function(e,t){return A[e]=t,this},q.removeUnaryOp=function(e){return delete O[e],e.length===T&&(T=$(O)),this},q.removeBinaryOp=function(e){return delete C[e],e.length===E&&(E=$(C)),this},q.removeLiteral=function(e){return delete A[e],this},"undefined"==typeof exports){var I=e.jsep;e.jsep=q,q.noConflict=function(){return e.jsep===q&&(e.jsep=I),q}}else"undefined"!=typeof module&&module.exports?exports=module.exports=q:exports.parse=q}(this);

},{}],4:[function(require,module,exports){
"use strict";var utils=require("./utils");module.exports=function(e){function t(t,i,r){function l(o){for(var i=o[0],l=o[1],s=new utils.Selector(i),d=s.parsed(),c=n(d),u=0;u<d.length;++u){var p=d[u];if(p.pseudos)for(var m=0;m<p.pseudos.length;++m){var g=p.pseudos[m];if(e.ignoredPseudos.indexOf(g.name)>=0)return}}if(c){var h=d[d.length-1],v=h.pseudos;h.pseudos=a(h.pseudos),i=d.toString(),h.pseudos=v}var y;try{y=t(i)}catch(k){return}y.each(function(){function o(t,o){for(var i=0,a=t.length;a>i;i++)if("property"==t[i].type){var l=t[i].name,s=t[i].value,d=null!==t[i].value.match(/!important$/);d&&!r.preserveImportant&&(s=s.replace(/\s*!important$/,""));var c=[t[i].position.start.line,t[i].position.start.col],u=new utils.Property(l,s,o,d?2:0,c),p=n.styleProps[l];e.excludedProperties.indexOf(l)<0&&(p&&p.compare(u)===u||!p)&&(p&&p.selector!==o?delete n.styleProps[l]:p&&(u.nextProp=p),n.styleProps[l]=u)}}var n=this;if(!(n.name&&e.nonVisualElements.indexOf(n.name.toUpperCase())>=0)){if(c){var i="pseudo"+c,a=n[i];a||(a=n[i]=t("<span />").get(0),a.pseudoElementType=c,a.pseudoElementParent=n,n[i]=a),n=a}if(!n.styleProps){if(n.styleProps={},t(n).attr(b)){var d="* { "+t(n).attr(b)+" } ";o(utils.parseCSS(d)[0][1],new utils.Selector("<style>",!0))}f.push(n)}o(l,s)}})}function s(e){Object.keys(e.styleProps).length;var o=[];Object.keys(e.styleProps).forEach(function(t){for(var n=e.styleProps[t];"undefined"!=typeof n;)o.push(n),n=n.nextProp}),o.sort(function(e,t){return e.compareFunc(t)});var n=o.filter(function(e){return"content"!==e.prop}).map(function(e){return e.prop+": "+e.value.replace(/["]/g,"'")+";"}).join(" ");n&&t(e).attr(b,n)}function d(e){if(e.pseudoElementType&&e.styleProps.content){var n=o(e.styleProps.content.value);n.img?(e.name="img",t(e).attr("src",n.img)):t(e).text(n);var i=e.pseudoElementParent;"before"===e.pseudoElementType?t(i).prepend(e):t(i).append(e)}}function c(o,n){if(o.name){var i=o.name.toUpperCase();if(e[n+"Elements"].indexOf(i)>-1)for(var a in o.styleProps)if(o.styleProps[a].prop===n){if(o.styleProps[a].value.match(/px/)){var r=o.styleProps[a].value.replace("px","");return t(o).attr(n,r),void 0}if(e.tableElements.indexOf(i)>-1&&o.styleProps[a].value.match(/\%/))return t(o).attr(n,o.styleProps[a].value),void 0}}}function u(o){if(o.name){var n=o.name.toUpperCase(),i=Object.keys(e.styleToAttribute);if(e.tableElements.indexOf(n)>-1)for(var a in o.styleProps)i.indexOf(o.styleProps[a].prop)>-1&&t(o).attr(e.styleToAttribute[o.styleProps[a].prop],o.styleProps[a].value)}}r=r||{};var p=utils.parseCSS(i),f=[],b="style";if(r.styleAttributeName&&(b=r.styleAttributeName),p.forEach(l),f.forEach(s),r.inlinePseudoElements&&f.forEach(d),r.applyWidthAttributes&&f.forEach(function(e){c(e,"width")}),r.applyHeightAttributes&&f.forEach(function(e){c(e,"height")}),r.applyAttributesTableElements&&f.forEach(u),r.insertPreservedExtraCss&&r.extraCss){var m=utils.getPreservedText(r.extraCss,{mediaQueries:r.preserveMediaQueries,fontFaces:r.preserveFontFaces});if(m){var g=null;r.insertPreservedExtraCss!==!0?g=t(r.insertPreservedExtraCss):(g=t("head"),g.length||(g=t("body")),g.length||(g=t.root())),g.first().append("<style>"+m+"</style>")}}}function o(e){if("none"===e||"normal"===e)return"";var t=e.match(/^\s*url\s*\(\s*(.*?)\s*\)\s*$/i);if(t){var o=t[1].replace(/^['"]|['"]$/g,"");return{img:o}}return e=e.slice(1,e.length-1),e=e.replace(/\\/g,"")}function n(e){if(0!==e.length){var t=e[e.length-1].pseudos;if(t)for(var o=0;o<t.length;o++)if(i(t[o]))return t[o].name}}function i(e){return"before"===e.name||"after"===e.name}function a(e){return e.filter(function(e){return!i(e)})}function r(e,o){o=utils.getDefaultOptions(o);var n=s(e,o);return n+="\n"+o.extraCss,t(e,n,o),e}function l(e,t){var o,n,i,a=[],r=e("style");return r.each(function(){if(i=this,o=i.childNodes,1===o.length){if(n=o[0].data,t.applyStyleTags&&void 0===e(i).attr("data-embed")&&a.push(n),t.removeStyleTags&&void 0===e(i).attr("data-embed")){var r=utils.getPreservedText(i.childNodes[0].nodeValue,{mediaQueries:t.preserveMediaQueries,fontFaces:t.preserveFontFaces});r?i.childNodes[0].nodeValue=r:e(i).remove()}e(i).removeAttr("data-embed")}}),a}function s(e,t){var o=l(e,t),n=o.join("\n");return n}return e.ignoredPseudos=["hover","active","focus","visited","link"],e.widthElements=["TABLE","TD","IMG"],e.heightElements=["TABLE","TD","IMG"],e.tableElements=["TABLE","TD","TH","TR","TD","CAPTION","COLGROUP","COL","THEAD","TBODY","TFOOT"],e.nonVisualElements=["HEAD","TITLE","BASE","LINK","STYLE","META","SCRIPT","NOSCRIPT"],e.styleToAttribute={"background-color":"bgcolor","background-image":"background","text-align":"align","vertical-align":"valign"},e.excludedProperties=[],e.juiceDocument=r,e.inlineDocument=t,e};

},{"./utils":7}],5:[function(require,module,exports){
"use strict";function Property(e,t,o,n,i){this.prop=e,this.value=t,this.selector=o,this.priority=n||0,this.additionalPriority=i||[]}module.exports=exports=Property;var utils=require("./utils");Property.prototype.compareFunc=function(e){var t=[];t.push.apply(t,this.selector.specificity()),t.push.apply(t,this.additionalPriority),t[0]+=this.priority;var o=[];return o.push.apply(o,e.selector.specificity()),o.push.apply(o,e.additionalPriority),o[0]+=e.priority,utils.compareFunc(t,o)},Property.prototype.compare=function(e){var t=this.compareFunc(e);return 1===t?this:e},Property.prototype.toString=function(){return this.prop+": "+this.value.replace(/['"]+/g,"")+";"};

},{"./utils":7}],6:[function(require,module,exports){
"use strict";function Selector(e,t){this.text=e,this.spec=void 0,this.styleAttribute=t||!1}function parse(e){try{return parser(e)[0]}catch(t){return[]}}var parser=require("./../../slick/parser");module.exports=exports=Selector,Selector.prototype.parsed=function(){return this.tokens||(this.tokens=parse(this.text)),this.tokens},Selector.prototype.specificity=function(){function e(o,n){for(var i=n||parse(o),r=[t?1:0,0,0,0],a=[],l=0;l<i.length;l++){var s=i[l],d=s.pseudos;if(s.id&&r[1]++,s.attributes&&(r[2]+=s.attributes.length),s.classList&&(r[2]+=s.classList.length),s.tag&&"*"!==s.tag&&r[3]++,d){r[3]+=d.length;for(var u=0;u<d.length;u++)"not"===d[u].name&&(a.push(d[u].value),r[3]--)}}for(var c=a.length;c--;)for(var f=e(a[c]),p=4;p--;)r[p]+=f[p];return r}var t=this.styleAttribute;return this.spec||(this.spec=e(this.text,this.parsed())),this.spec};

},{"./../../slick/parser":17}],7:[function(require,module,exports){
"use strict";var mensch=require("./../../mensch/index.js"),own={}.hasOwnProperty,os=require("os"),Selector=require("./selector"),Property=require("./property");exports.Selector=Selector,exports.Property=Property,exports.extract=function(e){for(var t=0,o=[],n="",i=0,r=e.length;r>i;i++){var a=e.charAt(i);t?(("]"===a||")"===a)&&t--,n+=a):","===a?(o.push(n),n=""):(("["===a||"("===a)&&t++,(n.length||","!==a&&"\n"!==a&&" "!==a)&&(n+=a))}return n.length&&o.push(n),o},exports.parseCSS=function(e){for(var t=mensch.parse(e,{position:!0,comments:!0}),o="undefined"!=typeof t.stylesheet&&t.stylesheet.rules?t.stylesheet.rules:[],n=[],i=0,r=o.length;r>i;i++)if("rule"==o[i].type)for(var a=o[i],l=a.selectors,s=0,d=l.length;d>s;s++)n.push([l[s],a.declarations]);return n},exports.getPreservedText=function(e,t){for(var o=mensch.parse(e,{position:!0,comments:!0}),n="undefined"!=typeof o.stylesheet&&o.stylesheet.rules?o.stylesheet.rules:[],i=[],r=null,a=n.length-1;a>=0;a--)(t.fontFaces&&"font-face"===n[a].type||t.mediaQueries&&"media"===n[a].type)&&i.push(mensch.stringify({stylesheet:{rules:[n[a]]}},{comments:!1,indentation:"  "})),r=n[a].position.start;return 0===i.length?!1:os.EOL+i.join(os.EOL)+os.EOL},exports.normalizeLineEndings=function(e){return e.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n")},exports.compareFunc=function(e,t){for(var o=Math.min(e.length,t.length),n=0;o>n;n++)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return e.length-t.length},exports.compare=function(e,t){return 1==exports.compareFunc(e,t)?e:t},exports.extend=function(e,t){for(var o in t)own.call(t,o)&&(e[o]=t[o]);return e},exports.getDefaultOptions=function(e){var t=exports.extend({extraCss:"",insertPreservedExtraCss:!0,applyStyleTags:!0,removeStyleTags:!0,preserveMediaQueries:!0,preserveFontFaces:!0,applyWidthAttributes:!0,applyHeightAttributes:!0,applyAttributesTableElements:!0,url:""},e);return t.webResources=t.webResources||{},t};

},{"./../../mensch/index.js":12,"./property":5,"./selector":6,"os":22}],8:[function(require,module,exports){
(function (global){
!function(e){if("function"==typeof define&&define.amd)define(["knockout","jquery","jquery-ui/sortable","jquery-ui/draggable"],e);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var t=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),o=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null);(typeof window !== "undefined" ? window['jQuery']['ui']['sortable'] : typeof global !== "undefined" ? global['jQuery']['ui']['sortable'] : null),(typeof window !== "undefined" ? window['jQuery']['ui']['draggable'] : typeof global !== "undefined" ? global['jQuery']['ui']['draggable'] : null),e(t,o)}else e(window.ko,window.jQuery)}(function(e,t){var o="ko_sortItem",a="ko_sourceIndex",i="ko_sortList",l="ko_parentList",n="ko_dragItem",r=e.utils.unwrapObservable,d=e.utils.domData.get,s=e.utils.domData.set,c=t.ui&&t.ui.version,u=c&&c.indexOf("1.6.")&&c.indexOf("1.7.")&&(c.indexOf("1.8.")||"1.8.24"===c),p=function(t,a){e.utils.arrayForEach(t,function(e){1===e.nodeType&&(s(e,o,a),s(e,l,d(e.parentNode,i)))})},b=function(t,o){var a,i={},l=r(t())||{};return l.data?(i[o]=l.data,i.name=l.template):i[o]=t(),e.utils.arrayForEach(["afterAdd","afterRender","as","beforeRemove","includeDestroyed","templateEngine","templateOptions","nodes"],function(t){l.hasOwnProperty(t)?i[t]=l[t]:e.bindingHandlers.sortable.hasOwnProperty(t)&&(i[t]=e.bindingHandlers.sortable[t])}),"foreach"===o&&(i.afterRender?(a=i.afterRender,i.afterRender=function(e,t){p.call(t,e,t),a.call(t,e,t)}):i.afterRender=p),i},m=function(e,t){var o=r(t);if(o)for(var a=0;e>a;a++)o[a]&&r(o[a]._destroy)&&e++;return e},f=function(o,a){var i,l;a?(l=document.getElementById(a),l&&(i=new e.templateSources.domElement(l),i.text(t.trim(i.text())))):t(o).contents().each(function(){this&&1!==this.nodeType&&o.removeChild(this)})};e.bindingHandlers.sortable={init:function(c,p,g,h,v){var k,y,w=t(c),$=r(p())||{},x=b(p,"foreach"),S={};f(c,x.name),t.extend(!0,S,e.bindingHandlers.sortable),$.options&&S.options&&(e.utils.extend(S.options,$.options),delete $.options),e.utils.extend(S,$),S.connectClass&&(e.isObservable(S.allowDrop)||"function"==typeof S.allowDrop)?e.computed({read:function(){var t=r(S.allowDrop),o="function"==typeof t?t.call(this,x.foreach):t;e.utils.toggleDomNodeCssClass(c,S.connectClass,o)},disposeWhenNodeIsRemoved:c},this):e.utils.toggleDomNodeCssClass(c,S.connectClass,S.allowDrop),e.bindingHandlers.template.init(c,function(){return x},g,h,v),k=S.options.start,y=S.options.update,S.options.helper||(S.options.helper=function(e,o){return o.is("tr")&&o.children().each(function(){t(this).width(t(this).width())}),o});var C=setTimeout(function(){var p,b=S.options.receive;w.sortable(e.utils.extend(S.options,{start:function(t,o){var i=o.item[0];s(i,a,e.utils.arrayIndexOf(o.item.parent().children(),i)),o.item.find("input:focus").change(),k&&k.apply(this,arguments)},receive:function(e,t){"function"==typeof b&&b.call(this,e,t),p=d(t.item[0],n),p&&(p.clone&&(p=p.clone()),S.dragged&&(p=S.dragged.call(this,p,e,t)||p))},update:function(n,c){var b,f,g,h,v,k=c.item[0],w=c.item.parent()[0],$=d(k,o)||p;if($||t(k).remove(),p=null,$&&this===w||!u&&t.contains(this,w)){if(b=d(k,l),g=d(k,a),f=d(k.parentNode,i),h=e.utils.arrayIndexOf(c.item.parent().children(),k),x.includeDestroyed||(g=m(g,b),h=m(h,f)),(S.beforeMove||S.afterMove)&&(v={item:$,sourceParent:b,sourceParentNode:b&&c.sender||k.parentNode,sourceIndex:g,targetParent:f,targetIndex:h,cancelDrop:!1},S.beforeMove&&S.beforeMove.call(this,v,n,c)),b?t(b===f?this:c.sender||this).sortable("cancel"):t(k).remove(),v&&v.cancelDrop)return;if(S.hasOwnProperty("strategyMove")&&S.strategyMove!==!1){if(h>=0)if(b)if(b!==f)b.splice(g,1),f.splice(h,0,$),s(k,o,null),c.item.remove();else{var C=r(b);b.valueWillMutate&&b.valueWillMutate(),C.splice(g,1),C.splice(h,0,$),b.valueHasMutated&&b.valueHasMutated()}else f.splice(h,0,$),s(k,o,null),c.item.remove()}else h>=0&&(b&&(b.splice(g,1),e.processAllDeferredBindingUpdates&&e.processAllDeferredBindingUpdates(),e.options&&e.options.deferUpdates&&e.tasks.runEarly()),f.splice(h,0,$)),s(k,o,null);e.processAllDeferredBindingUpdates&&e.processAllDeferredBindingUpdates(),S.afterMove&&S.afterMove.call(this,v,n,c)}y&&y.apply(this,arguments)},connectWith:S.connectClass?"."+S.connectClass:!1})),void 0!==S.isEnabled&&e.computed({read:function(){w.sortable(r(S.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:c})},0);return e.utils.domNodeDisposal.addDisposeCallback(c,function(){(w.data("ui-sortable")||w.data("sortable"))&&w.sortable("destroy"),e.utils.toggleDomNodeCssClass(c,S.connectClass,!1),clearTimeout(C)}),{controlsDescendantBindings:!0}},update:function(t,o,a,l,n){var r=b(o,"foreach");s(t,i,r.foreach),e.bindingHandlers.template.update(t,function(){return r},a,l,n)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},e.bindingHandlers.draggable={init:function(o,a,i,l,d){var c=r(a())||{},u=c.options||{},p=e.utils.extend({},e.bindingHandlers.draggable.options),m=b(a,"data"),f=c.connectClass||e.bindingHandlers.draggable.connectClass,g=void 0!==c.isEnabled?c.isEnabled:e.bindingHandlers.draggable.isEnabled;return c="data"in c?c.data:c,s(o,n,c),e.utils.extend(p,u),p.connectToSortable=f?"."+f:!1,t(o).draggable(p),void 0!==g&&e.computed({read:function(){t(o).draggable(r(g)?"enable":"disable")},disposeWhenNodeIsRemoved:o}),e.utils.domNodeDisposal.addDisposeCallback(o,function(){t(o).draggable("destroy")}),e.bindingHandlers.template.init(o,function(){return m},i,l,d)},update:function(t,o,a,i,l){var n=b(o,"data");return e.bindingHandlers.template.update(t,function(){return n},a,i,l)},connectClass:e.bindingHandlers.sortable.connectClass,options:{helper:"clone"}}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],9:[function(require,module,exports){
(function (global){
!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e((typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),require("./../knockoutjs-reactor/src/knockout.reactor.js")):"function"==typeof define&&define.amd?define(["knockout","knockoutjs-reactor","exports"],e):e(ko,ko.watch)}(function(e,t){var o=function(o,n){var i,a=e.observableArray(),r=e.observableArray(),l=0,s=1,d=2,c=l,u=0,p=1,f=2,b=3,g=u,m={levels:100,undoLabel:"undo (#COUNT#)",redoLabel:"redo (#COUNT#)"};n="object"==typeof n?e.utils.extend(m,n):m;var h=function(e){c==s?k(e,r):c==d?k(e,a):c==l&&(k(e,a),r.removeAll())},v=function(e,t){return"undefined"!=typeof e.mergedAction?e.mergedAction(t):null},k=function(e,t){if(t().length>0){var o=v(t()[t().length-1],e);if(null!==o)return t()[t().length-1]=o,void 0}t().length>=n.levels&&t.shift(),i=t,t.push(e)},y=function(t,o,n){return{name:e.computed(function(){return e.utils.unwrapObservable(t).replace(/#COUNT#/,n().length)}),enabled:e.computed(function(){return 0!==n().length}),execute:function(){var e=n.pop();if(e){var t=c;c=o;var a=g;g=b,e(),w(i),g=a,c=t}return!0}}},w=function(e){if("undefined"==typeof e)throw"Unexpected operation: stack cleaner called with undefined stack";e().length>0&&"undefined"!=typeof e()[e().length-1].mergedAction&&delete e()[e().length-1].mergedAction},x=function(e,t){var o=function(e,t){e(),t()}.bind(void 0,e,t);return"undefined"!=typeof e.mergedAction&&(o.mergedAction=e.mergedAction),o},$=function(e,t,o){if("undefined"!=typeof t)e(t);else{if(!o)throw"Unexpected condition: no item and no child.oldValues!";if("deleted"==o.status)e.splice(o.index,0,o.value);else{if("added"!=o.status)throw"Unsupproted item.status: "+o.status;e.splice(o.index,1)}}},_=function(e,t,o,n,i){return e.bind(void 0,o,n,i)},S=_,C=function(e,t,o){var n="undefined"!=typeof t.oldValues?t.oldValues[0]:void 0,i=S($,e,t,n,o);g!=p&&(g==b?"undefined"!=typeof i&&(i.mergedAction=function(e){return"undefined"!=typeof e.mergeMe&&e.mergeMe?x(e,this):null},i.mergeMe=!0):"undefined"!=typeof i&&(t.oldValues&&g==f&&(i.mergedAction=function(e,t,o){return"object"==typeof o.mergeableAction&&e==o.mergeableAction.child?this:null}.bind(i,t,o),i.mergeableAction={child:t,item:o}),o&&"deleted"==o.status&&(i.mergedAction=function(e,t,o){return"object"==typeof o.mergeableMove&&t.value==o.mergeableMove.item.value?x(o,this):(console.log("UR","not mergeable",typeof o.mergeableMove),null)}.bind(i,t,o)),o&&"added"==o.status&&(i.mergeableMove={child:t,item:o})),"undefined"!=typeof i&&h(i))},H={depth:-1,oldValues:1,mutable:!0,tagFields:!0},M={},q="function"==typeof t?t:e.watch,O=q(o,H,C,M);return{push:h,undoCommand:y(n.undoLabel,s,a),redoCommand:y(n.redoLabel,d,r),reset:function(){a.removeAll(),r.removeAll()},setModeOnce:function(){g=f,w(a)},setModeMerge:function(){g=b,w(a)},setModeNormal:function(){g=u,w(a)},setModeIgnore:function(){g=p,w(a)},setUndoActionMaker:function(e){S=e},dispose:function(){O.dispose()}}};return o});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../knockoutjs-reactor/src/knockout.reactor.js":11}],10:[function(require,module,exports){
(function (global){
!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e((typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.wrap={})}(function(e,t){function o(e){var t=typeof e;return"object"===t&&(e?e.constructor==Date?t="date":"[object Array]"==Object.prototype.toString.call(e)&&(t="array"):t="null"),t}function n(t){var o={};for(var n in t){var i=t[n];e.isComputed(i)||(o[n]=r(i))}return o}function i(e){var t=[];if(!e||0==e.length)return t;for(var o=0,n=e.length;n>o;++o)t.push(r(e[o]));return t}function r(t){var a=e.isObservable(t);if(a){var l=t();return r(l)}return"array"==o(t)?i(t):"object"==o(t)?n(t):t}function a(){f=[{obj:null,wrapped:null,lvl:""}]}function l(t,o,n){for(var i=0;i<f.length;++i)if(f[i].obj===t)return f[i].wrapped;var r={};for(var a in t){var l=t[a];f.push({obj:t,wrapped:r,lvl:d()+"/"+a}),r[a]=u(l,o,n),f.pop()}return o&&o[d()]&&(r=o[d()](r)),c()&&e.track(r),n?e.observable(r):r}function s(t,o,n){var i=e.observableArray();if(!t||0==t.length)return i;for(var r=0,a=t.length;a>r;++r)i.push(u(t[r],o,n));return i}function d(){return f[f.length-1].lvl}function u(t,n,i){if("array"==o(t))return s(t,n,i);if("object"==o(t))return l(t,n,i);if(c()||"function"==typeof t)return t;var r=e.observable();return r(t),r}function c(){return null!=e.track}t.fromJS=function(e,t,o){return a(),u(e,t,o)},t.updateFromJS=function(t,o,n,i){return a(),t(e.utils.unwrapObservable(u(o,n,i)))},t.fromJSON=function(o,n,i){var r=e.utils.parseJson(o);return arguments[0]=r,t.fromJS.apply(this,n,i)},t.toJS=function(e){return r(e)},t.toJSON=function(o){var n=t.toJS(o);return e.utils.stringifyJson(n)};var f});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],11:[function(require,module,exports){
(function (global){
!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e((typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null)):"function"==typeof define&&define.amd?define(["knockout"],e):e(window.ko)}(function(e){e.subscribable.fn.watch=function(t,o,n,i){var a=typeof t;return"boolean"===a||"undefined"===a?e.watch(this,{enabled:t!==!1}):"function"!==a||e.isSubscribable(t)?e.watch(t,o,n,i||this):e.watch(this,o||{},t,i||this),this},e.watch=function(t,o,n,i){function a(s,d,u,c,f,p){if(s&&0!==o.depth&&(-1===o.depth||u.length<(o.depth||1))){if(o.watchedOnly&&!s.watchable&&s!=t)return;if((o.enabled===!1||o.enabled===!0)&&(s.watchable=o.enabled),s.watchable===!1)return;o.seal===!0&&(s.watchable=!1);var b=typeof s;if("object"===b||"function"===b){if(s._watcher===i)return;if(o.hide&&e.utils.arrayIndexOf(o.hide,s)>-1)return;var m=[].concat(u,d&&d!==t?d:[]);if("function"!==b){if("[object Object]"===Object.prototype.toString.call(s))e.utils.objectForEach(s,function(t,n){if(n=o.getter?o.getter.call(i,m,s,t):n){if(o.wrap){var r=Object.prototype.toString.call(n);"[object Function]"!==r&&"[object Object]"!==r&&(o.beforeWrap&&o.beforeWrap.call(i,m,s,n)===!1||(n=s[t]="[object Array]"===r?e.observableArray(n):e.observable(n)))}o.unloop&&(n._watcher=c?void 0:i);var l=a(n,f?null:s,m,c,null,t);o.tagFields&&void 0===n._fieldName&&(l||"parentsOnly"!==o.tagFields&&"function"==typeof n||"object"==typeof n)&&(n._fieldName=t)}});else if(o.hideArrays!==!0)for(var g=0;g<s.length;g++)a(s[g],f?null:s,m,c);return!0}if("function"==typeof s.notifySubscribers&&n){if(o.enabled===!0&&s.watchable===!1)return;if(c||!o.beforeWatch||o.beforeWatch.call(i,m,s,p)!==!1){var h="function"==typeof s.pop;if(c?r(s):l(s,h,m,f),h)return a(s(),f?null:s,m,c,!0),!0;if(o.hideWrappedValues!==!0)return a(s(),f?null:s,m,c,!0)}}}}}function r(e){var t=e[s];if(!t)throw"Subscriptions field (."+s+") not defined for observable child "+(e._fieldName||"");if(t.change)for(var n=t.change.length-1;n>=0;n--)t.change[n]._watcher===i&&t.change[n].dispose();if(t.beforeChange&&(o.mutable||o.oldValues>0))for(var n=t.beforeChange.length-1;n>=0;n--)t.beforeChange[n]._watcher===i&&t.beforeChange[n].dispose();if(t.arrayChange)for(var n=t.arrayChange.length-1;n>=0;n--)t.arrayChange[n]._watcher===i&&t.arrayChange[n].dispose()}function l(t,r,l,s){r?t.subscribe(function(o){e.utils.arrayForEach(o,function(e){var o=n.call(i,l,t,e);void 0!==o&&i(o),e.moved||setTimeout(function(){a(e.value,s?null:t,l,"deleted"===e.status)},0)})},void 0,"arrayChange")._watcher=i:(t.subscribe(function(){if(t.watchable!==!1){var e=n.call(i,l,t);void 0!==e&&i(e),o.mutable&&"object"==typeof t()&&a(t(),s?null:t,l)}},null,"change")._watcher=i,(o.oldValues>0||o.mutable)&&(t.subscribe(function(e){if(o.oldValues>0){var n=t.oldValues?t.oldValues:t.oldValues=[];for(n.unshift(e);n.length>o.oldValues;)n.pop()}o.mutable&&"object"==typeof e&&a(e,s?null:t,l,!1,!0)},null,"beforeChange")._watcher=i))}"function"==typeof o&&(i=i||n,n=o,o={}),i=i||this;var s;switch("function"==typeof e.subscription||e.version){case!0:s="_subscriptions";break;case"3.0.0":s="F";break;case"3.1.0":s="H";break;case"3.2.0":s="M";break;case"3.3.0":s="G";break;case"3.4.0":s="K";break;case"3.4.1":s="K";break;default:throw"Unsupported Knockout version. Only v3.0.0 to v3.4.1 are supported when minified. Current version is "+e.version}return"function"!=typeof t||e.isSubscribable(t)?(a(t,null,[]),{dispose:function(){a(t,null,[],!0)}}):e.computed(t,n,o)}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],12:[function(require,module,exports){
module.exports={lex:require("./lib/lexer"),parse:require("./lib/parser"),stringify:require("./lib/stringify")};

},{"./lib/lexer":14,"./lib/parser":15,"./lib/stringify":16}],13:[function(require,module,exports){
(function (process){
function debug(e){return _debug.bind(null,e)}function _debug(e){var t=[].slice.call(arguments,1);t.unshift("["+e+"]"),process.stderr.write(t.join(" ")+"\n")}exports=module.exports=debug;

}).call(this,require('_process'))

},{"_process":23}],14:[function(require,module,exports){
function lex(e){function t(){return u(),e[h]}function o(e){return e?w[w.length-1-e]:k}function n(t){var o=h+1;return t===e.slice(o,o+t.length)}function i(t){var o=e.slice(h).indexOf(t);return o>0?o:!1}function r(e){return e===a(1)}function a(t){return e[h+(t||1)]}function l(){var e=w.pop();return k=w[w.length-1],e}function s(e){return k=e,w.push(k),w.length}function d(e){var t=k;return w[w.length-1]=k=e,t}function u(t){if(1==(t||1))"\n"==e[h]?(y++,g=1):g++,h++;else{var o=e.slice(h,h+t).split("\n");o.length>1&&(y+=o.length-1,g=1),g+=o[o.length-1].length,h+=t}}function c(){_.end={line:y,col:g},DEBUG&&debug("addToken:",JSON.stringify(_,null,2)),x.push(_),m="",_={}}function f(e){_={type:e,start:{line:y,col:g}}}var p,b,m="",g=0,h=-1,v=0,y=1,k="before-selector",w=[k],_={},x=[],S=["media","keyframes",{name:"-webkit-keyframes",type:"keyframes",prefix:"-webkit-"},{name:"-moz-keyframes",type:"keyframes",prefix:"-moz-"},{name:"-ms-keyframes",type:"keyframes",prefix:"-ms-"},{name:"-o-keyframes",type:"keyframes",prefix:"-o-"},"font-face",{name:"import",state:"before-at-value"},{name:"charset",state:"before-at-value"},"supports","viewport",{name:"namespace",state:"before-at-value"},"document",{name:"-moz-document",type:"document",prefix:"-moz-"},"page"];for(TIMER&&(p=Date.now());b=t();)switch(DEBUG&&debug(b,o()),b){case" ":switch(o()){case"selector":case"value":case"value-paren":case"at-group":case"at-value":case"comment":case"double-string":case"single-string":m+=b}break;case"\n":case"	":case"\r":case"\f":switch(o()){case"value":case"value-paren":case"at-group":case"comment":case"single-string":case"double-string":case"selector":m+=b;break;case"at-value":"\n"===b&&(_.value=m.trim(),c(),l())}break;case":":switch(o()){case"name":_.name=m.trim(),m="",d("before-value");break;case"before-selector":m+=b,f("selector"),s("selector");break;case"before-value":d("value"),m+=b;break;default:m+=b}break;case";":switch(o()){case"name":case"before-value":case"value":m.trim().length>0&&(_.value=m.trim(),c()),d("before-name");break;case"value-paren":m+=b;break;case"at-value":_.value=m.trim(),c(),l();break;case"before-name":break;default:m+=b}break;case"{":switch(o()){case"selector":if("\\"===a(-1)){m+=b;break}_.text=m.trim(),c(),d("before-name"),v+=1;break;case"at-group":switch(_.name=m.trim(),_.type){case"font-face":case"viewport":case"page":s("before-name");break;default:s("before-selector")}c(),v+=1;break;case"name":case"at-rule":_.name=m.trim(),c(),s("before-name"),v+=1;break;case"comment":case"double-string":case"single-string":m+=b;break;case"before-value":d("value"),m+=b}break;case"}":switch(o()){case"before-name":case"name":case"before-value":case"value":m&&(_.value=m.trim()),_.name&&_.value&&c(),f("end"),c(),l(),"at-group"===o()&&(f("at-group-end"),c(),l()),v>0&&(v-=1);break;case"at-group":case"before-selector":case"selector":if("\\"===a(-1)){m+=b;break}v>0&&"at-group"===o(1)&&(f("at-group-end"),c()),v>1&&l(),v>0&&(v-=1);break;case"double-string":case"single-string":case"comment":m+=b}break;case'"':case"'":switch(o()){case"double-string":'"'===b&&"\\"!==a(-1)&&l();break;case"single-string":"'"===b&&"\\"!==a(-1)&&l();break;case"before-at-value":d("at-value"),s('"'===b?"double-string":"single-string");break;case"before-value":d("value"),s('"'===b?"double-string":"single-string");break;case"comment":break;default:"\\"!==a(-1)&&s('"'===b?"double-string":"single-string")}m+=b;break;case"/":switch(o()){case"comment":case"double-string":case"single-string":m+=b;break;case"before-value":case"selector":case"name":case"value":if(r("*")){var O=i("*/");O&&u(O+1)}else"before-value"==o()&&d("value"),m+=b;break;default:r("*")?(f("comment"),s("comment"),u()):m+=b}break;case"*":switch(o()){case"comment":r("/")?(_.text=m,u(),c(),l()):m+=b;break;case"before-selector":m+=b,f("selector"),s("selector");break;case"before-value":d("value"),m+=b;break;default:m+=b}break;case"@":switch(o()){case"comment":case"double-string":case"single-string":m+=b;break;case"before-value":d("value"),m+=b;break;default:for(var C,$,T=!1,A=0,E=S.length;!T&&E>A;++A)$=S[A],C=$.name||$,n(C)&&(T=!0,f(C),s($.state||"at-group"),u(C.length),$.prefix&&(_.prefix=$.prefix),$.type&&(_.type=$.type));T||(m+=b)}break;case"(":switch(o()){case"value":s("value-paren");break;case"before-value":d("value")}m+=b;break;case")":switch(o()){case"value-paren":l();break;case"before-value":d("value")}m+=b;break;default:switch(o()){case"before-selector":f("selector"),s("selector");break;case"before-name":f("property"),d("name");break;case"before-value":d("value");break;case"before-at-value":d("at-value")}m+=b}return TIMER&&debug("ran in",Date.now()-p+"ms"),x}var DEBUG=!1,TIMER=!1,debug=require("./debug")("lex");exports=module.exports=lex;

},{"./debug":13}],15:[function(require,module,exports){
function parse(e,t){var o;t||(t={}),_comments=!!t.comments,_position=!!t.position,_depth=0,_tokens=Array.isArray(e)?e.slice():lex(e);var n,r,i=[];for(TIMER&&(o=Date.now());r=next();)n=parseToken(r),n&&i.push(n);return TIMER&&debug("ran in",Date.now()-o+"ms"),{type:"stylesheet",stylesheet:{rules:i}}}function astNode(e,t){t||(t={});for(var o,n=["type","name","value"],r={},i=0;i<n.length;++i)o=n[i],e[o]&&(r[o]=t[o]||e[o]);for(n=Object.keys(t),i=0;i<n.length;++i)o=n[i],r[o]||(r[o]=t[o]);return _position&&(r.position={start:e.start,end:e.end}),DEBUG&&debug("astNode:",JSON.stringify(r,null,2)),r}function next(){var e=_tokens.shift();return DEBUG&&debug("next:",JSON.stringify(e,null,2)),e}function parseAtGroup(e){_depth+=1;var t={};switch(e.type){case"font-face":case"viewport":t.declarations=parseDeclarations();break;case"page":t.prefix=e.prefix,t.declarations=parseDeclarations();break;default:t.prefix=e.prefix,t.rules=parseRules()}return astNode(e,t)}function parseAtImport(e){return astNode(e)}function parseCharset(e){return astNode(e)}function parseComment(e){return astNode(e,{text:e.text})}function parseNamespace(e){return astNode(e)}function parseProperty(e){return astNode(e)}function parseSelector(e){function t(e){return e.trim()}return astNode(e,{type:"rule",selectors:e.text.split(",").map(t),declarations:parseDeclarations(e)})}function parseToken(e){switch(e.type){case"property":return parseProperty(e);case"selector":return parseSelector(e);case"at-group-end":return _depth-=1,void 0;case"media":case"keyframes":return parseAtGroup(e);case"comment":if(_comments)return parseComment(e);break;case"charset":return parseCharset(e);case"import":return parseAtImport(e);case"namespace":return parseNamespace(e);case"font-face":case"supports":case"viewport":case"document":case"page":return parseAtGroup(e)}DEBUG&&debug("parseToken: unexpected token:",JSON.stringify(e))}function parseTokensWhile(e){for(var t,o,n=[];(o=next())&&e&&e(o);)t=parseToken(o),t&&n.push(t);return o&&"end"!==o.type&&_tokens.unshift(o),n}function parseDeclarations(){return parseTokensWhile(function(e){return"property"===e.type||"comment"===e.type})}function parseRules(){return parseTokensWhile(function(){return _depth})}var DEBUG=!1,TIMER=!1,debug=require("./debug")("parse"),lex=require("./lexer");exports=module.exports=parse;var _comments,_depth,_position,_tokens;

},{"./debug":13,"./lexer":14}],16:[function(require,module,exports){
function stringify(e,t){var o;t||(t={}),_indentation=t.indentation||"",_compress=!!t.compress,_comments=!!t.comments,_compress?_n=_s="":(_n="\n",_s=" "),TIMER&&(o=Date.now());var n=reduce(e.stylesheet.rules,stringifyNode).join("\n").trim();return TIMER&&debug("ran in",Date.now()-o+"ms"),n}function indent(e){return this.level||(this.level=1),e?(this.level+=e,void 0):_compress?"":Array(this.level).join(_indentation||"")}function stringifyAtRule(e){return"@"+e.type+" "+e.value+";"+_n}function stringifyAtGroup(e){var t="",o=e.prefix||"";e.name&&(t=" "+e.name);var n="page"!==e.type;return"@"+o+e.type+t+_s+stringifyBlock(e,n)+_n}function stringifyComment(e){return _comments?"/*"+(e.text||"")+"*/"+_n:""}function stringifyRule(e){var t;return e.selectors?t=e.selectors.join(","+_n):(t="@"+e.type,t+=e.name?" "+e.name:""),indent()+t+_s+stringifyBlock(e)+_n}function reduce(e,t){return e.reduce(function(e,o){var n="comment"===o.type?stringifyComment(o):t(o);return n&&e.push(n),e},[])}function stringifyBlock(e,t){var o=e.declarations,n=stringifyDeclaration;return e.rules&&(o=e.rules,n=stringifyRule),o=stringifyChildren(o,n),o&&(o=_n+o+(t?"":_n)),"{"+o+indent()+"}"}function stringifyChildren(e,t){if(!e)return"";indent(1);var o=reduce(e,t);return indent(-1),o.length?o.join(_n):""}function stringifyDeclaration(e){return"property"===e.type?stringifyProperty(e):(DEBUG&&debug("stringifyDeclaration: unexpected node:",JSON.stringify(e)),void 0)}function stringifyNode(e){switch(e.type){case"rule":return stringifyRule(e);case"media":case"keyframes":return stringifyAtGroup(e);case"comment":return stringifyComment(e);case"import":case"charset":case"namespace":return stringifyAtRule(e);case"font-face":case"supports":case"viewport":case"document":case"page":return stringifyAtGroup(e)}DEBUG&&debug("stringifyNode: unexpected node: "+JSON.stringify(e))}function stringifyProperty(e){var t=e.name?e.name+":"+_s:"";return indent()+t+e.value+";"}var DEBUG=!1,TIMER=!1,debug=require("./debug")("stringify"),_comments,_compress,_indentation,_n,_s;exports=module.exports=stringify;

},{"./debug":13}],17:[function(require,module,exports){
"use strict";var escapeRe=/([-.*+?^${}()|[\]\/\\])/g,unescapeRe=/\\/g,escape=function(e){return(e+"").replace(escapeRe,"\\$1")},unescape=function(e){return(e+"").replace(unescapeRe,"")},slickRe=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+escape(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),Part=function(e){this.combinator=e||" ",this.tag="*"};Part.prototype.toString=function(){if(!this.raw){var e,t,o="";if(o+=this.tag||"*",this.id&&(o+="#"+this.id),this.classes&&(o+="."+this.classList.join(".")),this.attributes)for(e=0;t=this.attributes[e++];)o+="["+t.name+(t.operator?t.operator+'"'+t.value+'"':"")+"]";if(this.pseudos)for(e=0;t=this.pseudos[e++];)o+=":"+t.name,t.value&&(o+="("+t.value+")");this.raw=o}return this.raw};var Expression=function(){this.length=0};Expression.prototype.toString=function(){if(!this.raw){for(var e,t="",o=0;e=this[o++];)1!==o&&(t+=" ")," "!==e.combinator&&(t+=e.combinator+" "),t+=e;this.raw=t}return this.raw};var replacer=function(e,t,o,n,r,i,a,l,s,d,u,c,f,p,b,m){var g,h;if((t||!this.length)&&(g=this[this.length++]=new Expression,t))return"";if(g||(g=this[this.length-1]),(o||n||!g.length)&&(h=g[g.length++]=new Part(o)),h||(h=g[g.length-1]),r)h.tag=unescape(r);else if(i)h.id=unescape(i);else if(a){var v=unescape(a),y=h.classes||(h.classes={});if(!y[v]){y[v]=escape(a);var k=h.classList||(h.classList=[]);k.push(v),k.sort()}}else f?(m=m||b,(h.pseudos||(h.pseudos=[])).push({type:1==c.length?"class":"element",name:unescape(f),escapedName:escape(f),value:m?unescape(m):null,escapedValue:m?escape(m):null})):l&&(u=u?escape(u):null,(h.attributes||(h.attributes=[])).push({operator:s,name:unescape(l),escapedName:escape(l),value:u?unescape(u):null,escapedValue:u?escape(u):null}));return""},Expressions=function(e){this.length=0;for(var t,o=this,n=e;e;){if(t=e.replace(slickRe,function(){return replacer.apply(o,arguments)}),t===e)throw new Error(n+" is an invalid expression");e=t}};Expressions.prototype.toString=function(){if(!this.raw){for(var e,t=[],o=0;e=this[o++];)t.push(e);this.raw=t.join(", ")}return this.raw};var cache={},parse=function(e){return null==e?null:(e=(""+e).replace(/^\s+|\s+$/g,""),cache[e]||(cache[e]=new Expressions(e)))};module.exports=parse;

},{}],18:[function(require,module,exports){
!function(e){function t(e,i){if(e=e?e:"",i=i||{},e instanceof t)return e;if(!(this instanceof t))return new t(e,i);var n=o(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=R(100*this._a)/100,this._format=i.format||n.format,this._gradientType=i.gradientType,this._r<1&&(this._r=R(this._r)),this._g<1&&(this._g=R(this._g)),this._b<1&&(this._b=R(this._b)),this._ok=n.ok,this._tc_id=L++}function o(e){var t={r:0,g:0,b:0},o=1,n=null,r=null,s=null,d=!1,c=!1;return"string"==typeof e&&(e=D(e)),"object"==typeof e&&(I(e.r)&&I(e.g)&&I(e.b)?(t=i(e.r,e.g,e.b),d=!0,c="%"===String(e.r).substr(-1)?"prgb":"rgb"):I(e.h)&&I(e.s)&&I(e.v)?(n=E(e.s),r=E(e.v),t=l(e.h,n,r),d=!0,c="hsv"):I(e.h)&&I(e.s)&&I(e.l)&&(n=E(e.s),s=E(e.l),t=a(e.h,n,s),d=!0,c="hsl"),e.hasOwnProperty("a")&&(o=e.a)),o=S(o),{ok:d,format:e.format||c,r:N(255,z(t.r,0)),g:N(255,z(t.g,0)),b:N(255,z(t.b,0)),a:o}}function i(e,t,o){return{r:255*C(e,255),g:255*C(t,255),b:255*C(o,255)}}function n(e,t,o){e=C(e,255),t=C(t,255),o=C(o,255);var i,n,a=z(e,t,o),r=N(e,t,o),l=(a+r)/2;if(a==r)i=n=0;else{var s=a-r;switch(n=l>.5?s/(2-a-r):s/(a+r),a){case e:i=(t-o)/s+(o>t?6:0);break;case t:i=(o-e)/s+2;break;case o:i=(e-t)/s+4}i/=6}return{h:i,s:n,l:l}}function a(e,t,o){function i(e,t,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?e+6*(t-e)*o:.5>o?t:2/3>o?e+6*(t-e)*(2/3-o):e}var n,a,r;if(e=C(e,360),t=C(t,100),o=C(o,100),0===t)n=a=r=o;else{var l=.5>o?o*(1+t):o+t-o*t,s=2*o-l;n=i(s,l,e+1/3),a=i(s,l,e),r=i(s,l,e-1/3)}return{r:255*n,g:255*a,b:255*r}}function r(e,t,o){e=C(e,255),t=C(t,255),o=C(o,255);var i,n,a=z(e,t,o),r=N(e,t,o),l=a,s=a-r;if(n=0===a?0:s/a,a==r)i=0;else{switch(a){case e:i=(t-o)/s+(o>t?6:0);break;case t:i=(o-e)/s+2;break;case o:i=(e-t)/s+4}i/=6}return{h:i,s:n,v:l}}function l(t,o,i){t=6*C(t,360),o=C(o,100),i=C(i,100);var n=e.floor(t),a=t-n,r=i*(1-o),l=i*(1-a*o),s=i*(1-(1-a)*o),d=n%6,c=[i,l,r,r,s,i][d],u=[s,i,i,l,r,r][d],p=[r,r,s,i,i,l][d];return{r:255*c,g:255*u,b:255*p}}function s(e,t,o,i){var n=[M(R(e).toString(16)),M(R(t).toString(16)),M(R(o).toString(16))];return i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function d(e,t,o,i,n){var a=[M(R(e).toString(16)),M(R(t).toString(16)),M(R(o).toString(16)),M(B(i))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function c(e,t,o,i){var n=[M(B(i)),M(R(e).toString(16)),M(R(t).toString(16)),M(R(o).toString(16))];return n.join("")}function u(e,o){o=0===o?0:o||10;var i=t(e).toHsl();return i.s-=o/100,i.s=H(i.s),t(i)}function p(e,o){o=0===o?0:o||10;var i=t(e).toHsl();return i.s+=o/100,i.s=H(i.s),t(i)}function f(e){return t(e).desaturate(100)}function b(e,o){o=0===o?0:o||10;var i=t(e).toHsl();return i.l+=o/100,i.l=H(i.l),t(i)}function g(e,o){o=0===o?0:o||10;var i=t(e).toRgb();return i.r=z(0,N(255,i.r-R(255*-(o/100)))),i.g=z(0,N(255,i.g-R(255*-(o/100)))),i.b=z(0,N(255,i.b-R(255*-(o/100)))),t(i)}function m(e,o){o=0===o?0:o||10;var i=t(e).toHsl();return i.l-=o/100,i.l=H(i.l),t(i)}function h(e,o){var i=t(e).toHsl(),n=(i.h+o)%360;return i.h=0>n?360+n:n,t(i)}function v(e){var o=t(e).toHsl();return o.h=(o.h+180)%360,t(o)}function k(e){var o=t(e).toHsl(),i=o.h;return[t(e),t({h:(i+120)%360,s:o.s,l:o.l}),t({h:(i+240)%360,s:o.s,l:o.l})]}function y(e){var o=t(e).toHsl(),i=o.h;return[t(e),t({h:(i+90)%360,s:o.s,l:o.l}),t({h:(i+180)%360,s:o.s,l:o.l}),t({h:(i+270)%360,s:o.s,l:o.l})]}function w(e){var o=t(e).toHsl(),i=o.h;return[t(e),t({h:(i+72)%360,s:o.s,l:o.l}),t({h:(i+216)%360,s:o.s,l:o.l})]}function x(e,o,i){o=o||6,i=i||30;var n=t(e).toHsl(),a=360/i,r=[t(e)];for(n.h=(n.h-(a*o>>1)+720)%360;--o;)n.h=(n.h+a)%360,r.push(t(n));return r}function $(e,o){o=o||6;for(var i=t(e).toHsv(),n=i.h,a=i.s,r=i.v,l=[],s=1/o;o--;)l.push(t({h:n,s:a,v:r})),r=(r+s)%1;return l}function _(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[e[o]]=o);return t}function S(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function C(t,o){T(t)&&(t="100%");var i=O(t);return t=N(o,z(0,parseFloat(t))),i&&(t=parseInt(t*o,10)/100),e.abs(t-o)<1e-6?1:t%o/parseFloat(o)}function H(e){return N(1,z(0,e))}function q(e){return parseInt(e,16)}function T(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function O(e){return"string"==typeof e&&-1!=e.indexOf("%")}function M(e){return 1==e.length?"0"+e:""+e}function E(e){return 1>=e&&(e=100*e+"%"),e}function B(t){return e.round(255*parseFloat(t)).toString(16)}function A(e){return q(e)/255}function I(e){return!!J.CSS_UNIT.exec(e)}function D(e){e=e.replace(P,"").replace(F,"").toLowerCase();var t=!1;if(V[e])e=V[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var o;return(o=J.rgb.exec(e))?{r:o[1],g:o[2],b:o[3]}:(o=J.rgba.exec(e))?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=J.hsl.exec(e))?{h:o[1],s:o[2],l:o[3]}:(o=J.hsla.exec(e))?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=J.hsv.exec(e))?{h:o[1],s:o[2],v:o[3]}:(o=J.hsva.exec(e))?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=J.hex8.exec(e))?{r:q(o[1]),g:q(o[2]),b:q(o[3]),a:A(o[4]),format:t?"name":"hex8"}:(o=J.hex6.exec(e))?{r:q(o[1]),g:q(o[2]),b:q(o[3]),format:t?"name":"hex"}:(o=J.hex4.exec(e))?{r:q(o[1]+""+o[1]),g:q(o[2]+""+o[2]),b:q(o[3]+""+o[3]),a:A(o[4]+""+o[4]),format:t?"name":"hex8"}:(o=J.hex3.exec(e))?{r:q(o[1]+""+o[1]),g:q(o[2]+""+o[2]),b:q(o[3]+""+o[3]),format:t?"name":"hex"}:!1}function j(e){var t,o;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),o=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==o&&"large"!==o&&(o="small"),{level:t,size:o}}var P=/^\s+/,F=/\s+$/,L=0,R=e.round,N=e.min,z=e.max,U=e.random;t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,o,i,n,a,r,l=this.toRgb();return t=l.r/255,o=l.g/255,i=l.b/255,n=.03928>=t?t/12.92:e.pow((t+.055)/1.055,2.4),a=.03928>=o?o/12.92:e.pow((o+.055)/1.055,2.4),r=.03928>=i?i/12.92:e.pow((i+.055)/1.055,2.4),.2126*n+.7152*a+.0722*r},setAlpha:function(e){return this._a=S(e),this._roundA=R(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=R(360*e.h),o=R(100*e.s),i=R(100*e.v);return 1==this._a?"hsv("+t+", "+o+"%, "+i+"%)":"hsva("+t+", "+o+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=n(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=n(this._r,this._g,this._b),t=R(360*e.h),o=R(100*e.s),i=R(100*e.l);return 1==this._a?"hsl("+t+", "+o+"%, "+i+"%)":"hsla("+t+", "+o+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return s(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return d(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:R(this._r),g:R(this._g),b:R(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+R(this._r)+", "+R(this._g)+", "+R(this._b)+")":"rgba("+R(this._r)+", "+R(this._g)+", "+R(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:R(100*C(this._r,255))+"%",g:R(100*C(this._g,255))+"%",b:R(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+R(100*C(this._r,255))+"%, "+R(100*C(this._g,255))+"%, "+R(100*C(this._b,255))+"%)":"rgba("+R(100*C(this._r,255))+"%, "+R(100*C(this._g,255))+"%, "+R(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:W[s(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var o="#"+c(this._r,this._g,this._b,this._a),i=o,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=t(e);i="#"+c(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+o+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var o=!1,i=this._a<1&&this._a>=0,n=!t&&i&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return n?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(o=this.toRgbString()),"prgb"===e&&(o=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(o=this.toHexString()),"hex3"===e&&(o=this.toHexString(!0)),"hex4"===e&&(o=this.toHex8String(!0)),"hex8"===e&&(o=this.toHex8String()),"name"===e&&(o=this.toName()),"hsl"===e&&(o=this.toHslString()),"hsv"===e&&(o=this.toHsvString()),o||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(e,t){var o=e.apply(null,[this].concat([].slice.call(t)));return this._r=o._r,this._g=o._g,this._b=o._b,this.setAlpha(o._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(f,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination($,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(y,arguments)}},t.fromRatio=function(e,o){if("object"==typeof e){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]="a"===n?e[n]:E(e[n]));e=i}return t(e,o)},t.equals=function(e,o){return e&&o?t(e).toRgbString()==t(o).toRgbString():!1},t.random=function(){return t.fromRatio({r:U(),g:U(),b:U()})},t.mix=function(e,o,i){i=0===i?0:i||50;var n=t(e).toRgb(),a=t(o).toRgb(),r=i/100,l={r:(a.r-n.r)*r+n.r,g:(a.g-n.g)*r+n.g,b:(a.b-n.b)*r+n.b,a:(a.a-n.a)*r+n.a};return t(l)},t.readability=function(o,i){var n=t(o),a=t(i);return(e.max(n.getLuminance(),a.getLuminance())+.05)/(e.min(n.getLuminance(),a.getLuminance())+.05)},t.isReadable=function(e,o,i){var n,a,r=t.readability(e,o);switch(a=!1,n=j(i),n.level+n.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7}return a},t.mostReadable=function(e,o,i){var n,a,r,l,s=null,d=0;i=i||{},a=i.includeFallbackColors,r=i.level,l=i.size;for(var c=0;c<o.length;c++)n=t.readability(e,o[c]),n>d&&(d=n,s=t(o[c]));return t.isReadable(e,s,{level:r,size:l})||!a?s:(i.includeFallbackColors=!1,t.mostReadable(e,["#fff","#000"],i))};var V=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},W=t.hexNames=_(V),J=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",o="(?:"+t+")|(?:"+e+")",i="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?",n="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?";return{CSS_UNIT:new RegExp(o),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.tinycolor=t}(Math);

},{}],19:[function(require,module,exports){
(function (global){
!function(e){e(["jquery"],function(e){return function(){function t(e,t,o){return b({type:w.error,iconClass:m().iconClasses.error,message:e,optionsOverride:o,title:t})}function o(t,o){return t||(t=m()),h=e("#"+t.containerId),h.length?h:(o&&(h=u(t)),h)}function n(e,t,o){return b({type:w.info,iconClass:m().iconClasses.info,message:e,optionsOverride:o,title:t})}function i(e){v=e}function a(e,t,o){return b({type:w.success,iconClass:m().iconClasses.success,message:e,optionsOverride:o,title:t})}function r(e,t,o){return b({type:w.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:o,title:t})}function l(e,t){var n=m();h||o(n),c(e,n,t)||d(n)}function s(t){var n=m();return h||o(n),t&&0===e(":focus",t).length?(g(t),void 0):(h.children().length&&h.remove(),void 0)}function d(t){for(var o=h.children(),n=o.length-1;n>=0;n--)c(e(o[n]),t)}function c(t,o,n){var i=n&&n.force?n.force:!1;return t&&(i||0===e(":focus",t).length)?(t[o.hideMethod]({duration:o.hideDuration,easing:o.hideEasing,complete:function(){g(t)}}),!0):!1}function u(t){return h=e("<div/>").attr("id",t.containerId).addClass(t.positionClass),h.appendTo(e(t.target)),h}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function f(e){v&&v(e)}function b(t){function n(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(){s(),c(),u(),p(),b(),v(),d(),a()}function a(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}E.attr("aria-live",e)}function r(){S.closeOnHover&&E.hover(_,$),!S.onclick&&S.tapToDismiss&&E.click(x),S.closeButton&&A&&A.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),S.onCloseClick&&S.onCloseClick(e),x(!0)}),S.onclick&&E.click(function(e){S.onclick(e),x()})}function l(){E.hide(),E[S.showMethod]({duration:S.showDuration,easing:S.showEasing,complete:S.onShown}),S.timeOut>0&&(O=setTimeout(x,S.timeOut),D.maxHideTime=parseFloat(S.timeOut),D.hideEta=(new Date).getTime()+D.maxHideTime,S.progressBar&&(D.intervalId=setInterval(C,10)))}function s(){t.iconClass&&E.addClass(S.toastClass).addClass(T)}function d(){S.newestOnTop?h.prepend(E):h.append(E)}function c(){if(t.title){var e=t.title;S.escapeHtml&&(e=n(t.title)),H.append(e).addClass(S.titleClass),E.append(H)}}function u(){if(t.message){var e=t.message;S.escapeHtml&&(e=n(t.message)),M.append(e).addClass(S.messageClass),E.append(M)}}function p(){S.closeButton&&(A.addClass(S.closeClass).attr("role","button"),E.prepend(A))}function b(){S.progressBar&&(q.addClass(S.progressClass),E.prepend(q))}function v(){S.rtl&&E.addClass("rtl")}function w(e,t){if(e.preventDuplicates){if(t.message===y)return!0;y=t.message}return!1}function x(t){var o=t&&S.closeMethod!==!1?S.closeMethod:S.hideMethod,n=t&&S.closeDuration!==!1?S.closeDuration:S.hideDuration,i=t&&S.closeEasing!==!1?S.closeEasing:S.hideEasing;return!e(":focus",E).length||t?(clearTimeout(D.intervalId),E[o]({duration:n,easing:i,complete:function(){g(E),clearTimeout(O),S.onHidden&&"hidden"!==I.state&&S.onHidden(),I.state="hidden",I.endTime=new Date,f(I)}})):void 0}function $(){(S.timeOut>0||S.extendedTimeOut>0)&&(O=setTimeout(x,S.extendedTimeOut),D.maxHideTime=parseFloat(S.extendedTimeOut),D.hideEta=(new Date).getTime()+D.maxHideTime)}function _(){clearTimeout(O),D.hideEta=0,E.stop(!0,!0)[S.showMethod]({duration:S.showDuration,easing:S.showEasing})}function C(){var e=100*((D.hideEta-(new Date).getTime())/D.maxHideTime);q.width(e+"%")}var S=m(),T=t.iconClass||S.iconClass;if("undefined"!=typeof t.optionsOverride&&(S=e.extend(S,t.optionsOverride),T=t.optionsOverride.iconClass||T),!w(S,t)){k++,h=o(S,!0);var O=null,E=e("<div/>"),H=e("<div/>"),M=e("<div/>"),q=e("<div/>"),A=e(S.closeHtml),D={intervalId:null,hideEta:null,maxHideTime:null},I={toastId:k,state:"visible",startTime:new Date,options:S,map:t};return i(),l(),r(),f(I),S.debug&&console&&console.log(I),E}}function m(){return e.extend({},p(),x.options)}function g(e){h||(h=o()),e.is(":visible")||(e.remove(),e=null,0===h.children().length&&(h.remove(),y=void 0))}var h,v,y,k=0,w={error:"error",info:"info",success:"success",warning:"warning"},x={clear:l,remove:s,error:t,getContainer:o,info:n,options:{},subscribe:i,success:a,version:"2.1.3",warning:r};return x}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t((typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null)):window.toastr=t(window.jQuery)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],20:[function(require,module,exports){
var templateSystem=require("../src/js/bindings/choose-template.js");document.addEventListener("DOMContentLoaded",function(){templateSystem.addTemplate("array","<!-- ko foreach: $data --><!-- ko block: $data --><!-- /ko --><!-- /ko -->"),templateSystem.addTemplate("block-show","<!-- ko block: $data, scrollIntoView: $root.selectedBlock() === $data --><!-- /ko -->"),templateSystem.addTemplate("block-wysiwyg",'<div class="editable block" data-drop-content="Drop here" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, click: function(obj, evt) { $root.selectBlock(obj); return true }, clickBubble: false, css: { selected: $root.selectedBlock() === $data }, scrollIntoView: $root.selectedBlock() === $data">  <div class="mo-blockselectionhelper"></div>  <div class="tools" data-bind="tooltips: {}">    <!-- ko if: typeof $index != \'undefined\' -->    <div title="Drag this handle to move the block" data-bind="attr: { title: $root.t(\'Drag this handle to move the block\') }" class="tool handle"><i class="fa fa-fw fa-sort"></i></div>    <!-- ko if: $index() > 0 -->    <div title="Move this block upside" data-bind="attr: { title: $root.t(\'Move this block upside\') }" class="tool moveup"><i class="fa fa-fw fa-sort-asc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, true)\'></i></div>    <!-- /ko -->    <!-- ko if: $index() < $parent.blocks().length -1 -->    <div title="Move this block downside" data-bind="attr: { title: $root.t(\'Move this block downside\') }" class="tool movedown"><i class="fa fa-fw fa-sort-desc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, false)\'></i></div>    <!-- /ko -->    <div title="Delete block" class="tool delete" data-bind="attr: { title: $root.t(\'Delete block\') }, click: $root.removeBlock.bind($element, $rawData, $parent)"><i class="fa fa-fw fa-trash-o"></i></div>    <div title="Duplicate block" class="tool clone" data-bind="attr: { title: $root.t(\'Duplicate block\') }, click: $root.duplicateBlock.bind($element, $index, $parent)"><i class="fa fa-fw fa-files-o"></i></div>    <!-- /ko -->    <!-- ko if: typeof $data._nextVariant != \'undefined\' --><div title="Switch block variant" class="tool variant" data-bind="attr: { title: $root.t(\'Switch block variant\') }, click: $data._nextVariant"><i class="fa fa-fw fa-magic"></i></div><!-- /ko -->  </div>  <!-- ko block: $data --><!-- /ko --></div>'),templateSystem.addTemplate("blocks-show","<!-- ko template: { name: 'block-show', foreach: blocks } --><!-- /ko -->"),templateSystem.addTemplate("blocks-wysiwyg","<div class=\"sortable-blocks-edit\" data-drop-content=\"Drop here\" data-empty-content=\"Drop here blocks from the Blocks tab\" data-bind=\"attr: { 'data-drop-content': $root.t('Drop here'), 'data-empty-content': $root.t('Drop here blocks from the &quot;Blocks&quot; tab') }, css: { 'empty': ko.utils.unwrapObservable(blocks).length == 0 }, extsortable: { connectClass: 'sortable-blocks-edit', template: 'block-wysiwyg', data: blocks, dragging: $root.dragging, beforeMove: $root.startMultiple, afterMove: $root.stopMultiple, options: { handle: '.handle', placeholder: $root.placeholderHelper } }\"></div>"),templateSystem.addTemplate("customstyle",'<div class="customStyleHelp" data-bind="html: $root.t(\'Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class=&quot;customStyled&quot;><span>&quot;small cube&quot; </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul>\')">Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class="customStyled"><span>"small cube" </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul></div>'),templateSystem.addTemplate("empty",""),templateSystem.addTemplate("error",'[<div style="background-color: #fff0f0" data-bind="text: ko.toJS($data)"></div>]'),templateSystem.addTemplate("gallery-images",'<div data-bind="foreach: items.currentPageData">  <div class="draggable-item" data-bind="if: typeof thumbnailUrl != \'undefined\'">    <div class="draggable image" data-bind="click: $root.addImage, extdraggable: { data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.draggingImage, \'options\': { \'appendTo\': \'#page\' } }, style: { backgroundImage: \'url(\\\'\' + thumbnailUrl + \'\\\')\' }">      <img title="Drag this image and drop it on any template image placeholder" style="display: block;" data-bind="tooltips: {}, attr: { src: thumbnailUrl, \'title\': $root.t(\'Drag this image and drop it on any template image placeholder\') }"/>    </div>  </div></div><!-- ko if: items.pageCount() > 1 --><div class="galleryPager" data-bind="buttonset: {}">  <a href="javascript:void(0)" data-bind="click: items.moveFirst, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-fast-backward\' }, text: false }">First</a>  <a href="javascript:void(0)" data-bind="click: items.movePrevious, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-backward\' }, text: false }">Previous</a>  <span data-bind="button: { disabled: true, text: true, label: \' \'+items.currentPage()+\' di \'+items.pageCount()+\' \' }"> X di Y </span>  <a href="javascript:void(0)" data-bind="click: items.moveNext, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-forward\' }, text: false }">Next</a>  <a href="javascript:void(0)" data-bind="click: items.moveLast, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-fast-forward\' }, text: false }">Last</a></div><!-- /ko -->'),templateSystem.addTemplate("img-wysiwyg",'<table tabfocus="0" cellspacing="0" cellpadding="0" data-drop-content="Drop here" data-bind="style: _stylebind, click: function(obj, evt) { $root.selectItem(_item, _data); return true; }, clickBubble: false, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, droppable: { options: { accept: \'.image\', activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, data: _src, dragged: $root.fileToImage }, css: { selecteditem: $root.isSelectedItem(_item) }, scrollIntoView: $root.isSelectedItem(_item), attr: { \'data-drop-content\': $root.t(\'Drop here\'), width: _width, height: _height, align: _align }"  class="img-wysiwyg selectable-img" style="display: table;"><tr><td class="uploadzone">  <div class="mo-imgselectionhelper"></div>  <div class="mo-uploadzone"></div>  <div class="img-size" data-bind="text: _size">size</div>  <div class="midtools" data-bind="tooltips: {}">    <!-- ko if: _src() != \'\' -->    <div title="Remove image" class="tool delete" data-bind="attr: { title: $root.t(\'Remove image\') }, click: _src.bind(_src, \'\'), clickBubble: false"><i class="fa fa-fw fa-trash-o"></i></div>    <!-- ko if: typeof $root.editImage !== \'undefined\' -->    <div title="Open the image editing tool" class="tool edit" data-bind="attr: { title: $root.t(\'Open the image editing tool\') }, click: $root.editImage.bind($element, _src), clickBubble: false"><i class="fa fa-fw fa-pencil"></i></div>    <!-- /ko -->    <!-- /ko -->    <!-- ko if: _src() == \'\' -->    <div title="Upload a new image" data-bind="attr: { title: $root.t(\'Upload a new image\') }" class="tool upload" style="position: relative; overflow: hidden;"><i class="fa fa-fw fa-upload"></i>      <input class="fileupload nofile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadImage, canvasPreview: true }" style="z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    </div>    <!-- /ko -->  </div>  <!-- ko template: _template --><!-- /ko -->  <!-- ko if: _src() == \'\' -->    <!--    <img style="display: block;" class="imgplaceholder" width="200" src="" alt="Insert an image here" data-bind="wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />    -->    <span class="fileuploadtext" style="text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"><span class="textMiddle" style=" text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;" data-bind="text: $root.t(\'Drop an image here\')">Drop an image here</span></span>  <!-- /ko -->  <!-- ko if: _src() != \'\' -->  <!--    <img style="display: block;" width="200" src="" data-bind="preloader: _src, wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />    -->  <!-- /ko -->  <!-- pulsante per la cancellazione -->  <div title="Drop an image here or click the upload button" data-bind="attr: { title: $root.t(\'Drop an image here or click the upload button\') }, tooltips: {}" class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">    <!-- ko if: _src.preloaded && _src() != _src.preloaded() -->PRELOADING....<!-- /ko -->    <!-- ko if: _src() != \'\' -->      <input class="fileupload withfile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.galleryRecent.unshift.bind($root.galleryRecent), canvasPreview: true }" style="z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    <!-- /ko -->    <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">      <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>    </div>  </div></table>'),templateSystem.addTemplate("main",'<div id="page" style="display: none;" data-bind="visible: true, css: { withToolbox: $root.showToolbox, withPreviewFrame: showPreviewFrame }">  <div id="main-edit-area" data-bind="click: function(obj, evt) { $root.selectBlock(null); return true; }, clickBubble: false">    <!-- ko withProperties: { templateMode: \'wysiwyg\', templateModeFallback: \'show\' } -->    <div id="main-wysiwyg-area" data-bind="wysiwygScrollfix: true, scrollable: true, fudroppable: { active: draggingImage }, css: { isdragging: dragging, isdraggingimg: draggingImage }, block: content"></div>    <!-- /ko -->  </div>  <div id="toolbar" class="mo" data-bind="tooltips: {}">    <!-- ko if: typeof $root.undo != \'undefined\' -->    <span data-bind="buttonset: { }" class="leftButtons">    <a title="Undo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Undo last operation\') }, click: $root.undo.execute, clickBubble: false, button: { disabled: !$root.undo.enabled(), icons: { primary: \'fa fa-reply\' }, label: $root.undo.name, text: true }">UNDO</a>    <a title="Redo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Redo last operation\') }, click: $root.redo.execute, clickBubble: false, button: { disabled: !$root.redo.enabled(), icons: { primary: \'fa fa-share\' }, label: $root.redo.name, text: true }">REDO</a>    </span>    <!-- ko if: $root.debug -->    <a href="javascript:void(0)" data-bind="click: $root.undoReset, clickBubble: false, button: { disabled: !$root.undo.enabled() && !$root.redo.enabled(), label: \'reset\', text: true }">RESET</a>    <!-- /ko -->    <!-- /ko -->    <span>    <input id="showGallery" type="checkbox" data-bind="checked: $root.showGallery, button: { refreshOn: $root.showGallery,     icons: { primary: \'fa fa-fw fa-picture-o\', secondary: null }, text: true, label: $root.t(\'Gallery\') }"><label title="Show image gallery" for="showGallery" data-bind="attr: { title: $root.t(\'Show image gallery\') }">show gallery</label></input>    </span>    <input id="previewFrameToggle" type="checkbox" data-bind="checked: $root.showPreviewFrame, button: { refreshOn: $root.showPreviewFrame, icons: { primary: \'fa fa-fw fa-tablet\', secondary: null }, text: false, label: $root.t(\'Preview\') }"><label title="Show live preview" for="previewFrameToggle" data-bind="attr: { title: $root.t(\'Show live preview\') }">PREVIEW</label></input>    <!-- ko if: $root.debug -->    <a href="javascript:void(0)" data-bind="click: $root.export, clickBubble: false, button: { label: \'export\', text: true }">EXPORT</a>    <input type="checkbox" data-bind="checked: $root.debug" /> debug    <a href="javascript:void(0)" data-bind="click: $root.loadDefaultBlocks, clickBubble: false, button: { icons: { primary: \'fa fa-fw fa-upload\' }, label: \'Default\', text: true }">LOAD BLOCKS</a>    [<a id="subscriptionsCount" href="javascript:viewModel.loopSubscriptionsCount()">subs</a>]    <!-- /ko -->    <span data-bind="visible: false">    <input type="checkbox" data-bind="checked: $root.showToolbox" /> toolbox    </span>    <div class="rightButtons">    <!-- ko if: typeof $root.save !== \'undefined\' -->    <a title="Save template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Save template\') }, click: $root.save.execute, clickBubble: false, button: { disabled: !$root.save.enabled(), icons: { primary: \'fa fa-fw fa-cloud-upload\' }, label: $root.t($root.save.name), text: true }">SALVA</a>    <!-- /ko -->    <!-- ko if: typeof $root.test !== \'undefined\' -->    <a title="Show preview and send test" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show preview and send test\') }, click: $root.test.execute, clickBubble: false, button: { disabled: !$root.test.enabled(), icons: { primary: \'fa fa-fw fa-paper-plane\' }, label: $root.t($root.test.name), text: true }">TEST</a>    <!-- /ko -->    <!-- ko if: typeof $root.download !== \'undefined\' -->    <form id="downloadForm" action="#" method="POST">    <input type="hidden" name="action" value="download" />    <input type="hidden" name="filename" value="email.html" />    <input type="hidden" name="html" id="downloadHtmlTextarea" />    <a title="Download template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Download template\') }, click: $root.download.execute, clickBubble: false, button: { disabled: !$root.download.enabled(), icons: { primary: \'fa fa-fw fa-download\' }, label: $root.t($root.download.name), text: true }">DOWNLOAD</a>    </form>    <!-- /ko -->    </div>  </div>  <!-- ko if: $root.showToolbox -->  <div id="main-toolbox" class="mo" data-bind="scrollable: true, withProperties: { templateMode: \'edit\' }">    <div data-bind="template: { name: \'toolbox\' }"></div>  </div>  <!-- /ko -->    <div id="main-preview" class="mo" data-bind="scrollable: true, if: $root.showPreviewFrame">    <div id="preview-toolbar">      <div data-bind="visible: $root.showPreviewFrame, buttonset: { }" style="display: inline-block">        <input id="previewLarge" type="radio" name="previewMode" value="large" data-bind="checked: $root.previewMode, button: { text: false, label: \'large\', icons: { primary: \'fa fa-fw fa-desktop\' } }" />        <label for="previewLarge" title="Large screen" data-bind="attr: { title: $root.t(\'Large screen\') }">Large screen</label>        <input id="previewDesktop" type="radio" name="previewMode" value="desktop" data-bind="checked: $root.previewMode, button: { text: false, label: \'desktop\', icons: { primary: \'fa fa-fw fa-tablet\' } }" />        <label for="previewDesktop" title="Tablet" data-bind="attr: { title: $root.t(\'Tablet\') }">Tablet</label>        <input id="previewMobile" type="radio" name="previewMode" value="mobile" data-bind="checked: $root.previewMode, button: { text: false, label: \'mobile\', icons: { primary: \'fa fa-fw fa-mobile\' } }" />        <label for="previewMobile" title="Smartphone" data-bind="attr: { title: $root.t(\'Smartphone\') }">Smartphone</label>      </div>    </div>    <div id="frame-container" data-bind="css: { desktop: $root.previewMode() == \'desktop\', mobile: $root.previewMode() == \'mobile\', large: $root.previewMode() == \'large\' }">      <iframe data-bind="bindIframe: $data"></iframe>    </div>  </div>  <div class="mo" id="mo-body"></div>  <!-- TODO REMOVE ME  <div id="incompatible-browser" title="Unsupported browser" style="display: none" data-bind="attr: { title: $root.t(\'Usupported browser\') }, html: \'<p>Your browser is not supported.</p><p>Use a different browser or try updaring your browser.</p><p>Supported browsers: <ul><li>Internet Explorer &gt;= 10</li><li>Google Chrome &gt;= 30</li><li>Apple Safari &gt;= 5</li><li>Mozilla Firefix &gt;= 20</li></ul></p>\'">    Unsupported browser  </div>  -->  <div id="incompatible-template" title="Saved model is obsolete" style="display: none" data-bind="attr: { title: $root.t(\'Saved model is obsolete\') }, html: $root.t(\'<p>The saved model has been created with a previous, non completely compatible version, of the template</p><p>Some content or style in the model <b>COULD BE LOST</b> if you will <b>save</b></p><p>Contact us for more informations!</p>\')">    Incompatible template  </div>  <div id="fake-image-editor" title="Fake image editor" style="display: none" data-bind="attr: { title: $root.t(\'Fake image editor\') }, html: $root.t(\'<p>Fake image editor</p>\')">    <p>Fake image editor</p>  </div></div><!-- ko if: $root.logoPath --><div id="loading" class="loading" style="display: block; width: 300px; text-align: center; height: 32px; position: absolute; top:0; bottom: 0; left: 0; right: 0;  margin: auto;" data-bind="attr: { style: \'position: absolute; top: 5px; left: 6px; z-index: 150;\'}, css: { loading: false }">  <a href="/" data-bind="attr: { href: $root.logoUrl, alt: $root.logoAlt }"><img data-bind="attr: { src: $root.logoPath }" width="32" height="32" alt="mosaico" border="0" /></a>  <div style="opacity: 0" data-bind="visible: false">Oppps... !!</div></div><!-- /ko -->'),templateSystem.addTemplate("toolbox",'<div id="tooltabs" class="tabs_horizontal button_color" data-bind="tabs: { active: $root.selectedTool }">  <ul>    <li data-bind="tooltips: {}"><a title="Blocks ready to be added to the template" data-local="true" href="#toolblocks" data-bind="attr: { title: $root.t(\'Blocks ready to be added to the template\') }"><i class="fa fa-fw fa-cubes"></i> <span data-bind="html: $root.t(\'Blocks\')">Blocks</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit content options" href="#toolcontents" data-local="true" data-bind="attr: { title: $root.t(\'Edit content options\') }"><i class="fa fa-fw fa-pencil"></i> <span data-bind="html: $root.t(\'Content\')">Content</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit style options" href="#toolstyles" data-local="true" data-bind="attr: { title: $root.t(\'Edit style options\') }"><i class="fa fa-fw fa-paint-brush"></i> <span data-bind="html: $root.t(\'Style\')">Style</span></a></li>  </ul>  <div id="toolblocks" data-bind="scrollable: true">    <div class="block-list" data-bind="foreach: blockDefs" style="text-align: center">      <div class="draggable-item" data-bind="withProperties: { templateMode: \'show\' }">        <div class="block" data-bind="extdraggable: { connectClass: \'sortable-blocks-edit\', data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.dragging, \'options\': { handle: \'.handle\', distance: 10, \'appendTo\': \'#page\' } }, click: $root.addBlock" style="position: relative;">          <div title="Click or drag to add this block to the template" class="handle" data-bind="attr: { title: $root.t(\'Click or drag to add this block to the template\') }, tooltips: {}"></div>          <img data-bind="attr: { alt: $root.t(\'Block __name__\', { name: ko.utils.unwrapObservable(type) }), src: $root.templatePath(\'edres/\'+ko.utils.unwrapObservable(type)+\'.png\') }" alt="Block __name__" />        </div>        <a href="javascript:void(0)" class="addblockbutton" data-bind="click: $root.addBlock, button: { label: $root.t(\'Add\') }">Add</a>      </div>    </div>  </div>  <div id="toolcontents" data-bind="scrollable: true">    <!-- ko if: $root.selectedBlock() !== null -->    <div data-bind="block: $root.selectedBlock"></div>    <!-- /ko -->    <!-- ko if: $root.selectedBlock() == null -->    <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and content options, if any, will show here\')">By clicking on message parts you will select a block and content options, if any, will show here</div>    <!-- /ko -->    <!-- ko block: content --><!-- /ko -->  </div>    <div id="toolstyles" data-bind="scrollable: true, withProperties: { templateMode: \'styler\' }">    <!-- ko if: typeof $root.content().theme === \'undefined\' || typeof $root.content().theme().scheme === \'undefined\' || $root.content().theme().scheme() === \'custom\' -->      <!-- ko if: $root.selectedBlock() !== null -->      <div data-bind="block: $root.selectedBlock, css: { workLocal: $root.selectedBlock().customStyle, workGlobal: typeof $root.selectedBlock().customStyle === \'undefined\' || !$root.selectedBlock().customStyle() }"></div>      <!-- /ko -->      <!-- ko if: $root.selectedBlock() == null -->      <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and style options, if available, will show here\')">By clicking on message parts you will select a block and style options, if available, will show here</div>      <!-- /ko -->      <div class="workGlobalContent">      <!-- ko block: content --><!-- /ko -->      </div>    <!-- /ko -->  </div></div>        <div id="toolimages" class="slidebar" data-bind="scrollable: true, css: { hidden: $root.showGallery() === false }">  <div class="close" data-bind="click: $root.showGallery.bind($element, false);">X</div>  <span class="pane-title" data-bind="text: $root.t(\'Gallery:\')">Gallery:</span>  <div data-drop-content="Drop here" class="img-dropzone pane uploadzone" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }">  <div class="mo-uploadzone" style="position: relative; padding: 2em; border: 2px dotted #808080">     <input class="fileupload" type="file" multiple name="files[]" data-bind="fileupload: { onerror: $root.notifier.error, onfile: $root.loadImage }" style="z-index: 10; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">     <span data-bind="text: $root.t(\'Click or drag files here\')">Click or drag files here</span>     <div class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">       <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">         <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>       </div>     </div>  </div>  </div>  <!-- ko if: $root.showGallery() -->  <div id="toolimagestab" class="tabs_horizontal" data-bind="tabs: { active: $root.selectedImageTab }">    <ul>      <li data-bind="tooltips: {}"><a title="Session images" data-local="true" href="#toolimagesrecent" data-bind="attr: { title: $root.t(\'Session images\') }, text: $root.t(\'Recents\')">Recents</a></li>      <li data-bind="tooltips: {}"><a title="Remote gallery" data-local="true" href="#toolimagesgallery" data-bind="attr: { title: $root.t(\'Remote gallery\') }, text: $root.t(\'Gallery\')">Gallery</a></li>    </ul>    <div id="toolimagesrecent">      <!-- ko if: galleryRecent().length == 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'No images uploaded, yet\')">No images uploaded, yet</div><!-- /ko -->      <!-- ko template: {name: \'gallery-images\', data: { items: galleryRecent } } --># recent gallery #<!-- /ko -->    </div>    <div id="toolimagesgallery" style="text-align: center">    <!-- ko if: $root.galleryLoaded() === false --><a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadGallery, button: { disabled: $root.galleryLoaded, icons: { primary: \'fa fa-fw fa-picture-o\' }, label: $root.galleryLoaded() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }"># load gally #</a><!-- /ko -->    <!-- ko if: $root.galleryLoaded() === \'loading\' --><div class="galleryEmpty" data-bind="text: $root.t(\'Loading gallery...\')">Loading gallery...</div><!-- /ko -->    <!-- ko if: $root.galleryLoaded() === 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'The gallery is empty\')">The gallery is empty</div><!-- /ko -->    <!-- ko template: {name: \'gallery-images\', data: { items: galleryRemote } } --># remote gallery #<!-- /ko -->    </div>  </div>  <!-- /ko --></div><div id="tooldebug" class="slidebar" data-bind="css: { hidden: $root.debug() === false }">  <div class="close" data-bind="click: $root.debug.bind($element, false);">X</div>    <!-- ko if: $root.debug -->  Content:  <pre data-bind=\'text: ko.toJSON(content, null, 2)\' style="overflow: auto; height: 20%"></pre>  BlockDefs:  <pre data-bind=\'text: ko.toJSON(blockDefs, null, 2)\' style="overflow: auto; height: 20%"></pre>  <!-- /ko -->  <a href="javascript:void(0)" data-bind="click: $root.exportHTMLtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Generate\' }">Output</a>  <a href="javascript:void(0)" data-bind="click: $root.exportJSONtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Export\' }">Export</a>  <a href="javascript:void(0)" data-bind="click: $root.importJSONfromTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Import\' }">Import</a>  <textarea id="outputhtml" rows="10" style="width: 100%;"></textarea></div><div id="tooltheme" class="ui-widget slidebar" data-bind="css: { hidden: $root.showTheme() === false }">  <div class="close" data-bind="click: $root.showTheme.bind($element, false);">X</div>    <!-- ko withProperties: { templateMode: \'styler\' } -->    <!-- ko if: $root.showTheme -->      <!-- ko block: $root.content().theme --><!-- /ko -->    <!-- /ko -->  <!-- /ko --></div>')});

},{"../src/js/bindings/choose-template.js":30}],21:[function(require,module,exports){
// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
//
// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
//
// Originally from narwhal.js (http://narwhaljs.org)
// Copyright (c) 2009 Thomas Robinson <280north.com>
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

// when used in node, this will actually load the util module we depend on
// versus loading the builtin util module as happens otherwise
// this is a bug in node module loading as far as I am concerned
var util = require('util/');

var pSlice = Array.prototype.slice;
var hasOwn = Object.prototype.hasOwnProperty;

// 1. The assert module provides functions that throw
// AssertionError's when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.AssertionError({ message: message,
//                             actual: actual,
//                             expected: expected })

assert.AssertionError = function AssertionError(options) {
  this.name = 'AssertionError';
  this.actual = options.actual;
  this.expected = options.expected;
  this.operator = options.operator;
  if (options.message) {
    this.message = options.message;
    this.generatedMessage = false;
  } else {
    this.message = getMessage(this);
    this.generatedMessage = true;
  }
  var stackStartFunction = options.stackStartFunction || fail;

  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, stackStartFunction);
  }
  else {
    // non v8 browsers so we can have a stacktrace
    var err = new Error();
    if (err.stack) {
      var out = err.stack;

      // try to strip useless frames
      var fn_name = stackStartFunction.name;
      var idx = out.indexOf('\n' + fn_name);
      if (idx >= 0) {
        // once we have located the function frame
        // we need to strip out everything before it (and its line)
        var next_line = out.indexOf('\n', idx + 1);
        out = out.substring(next_line + 1);
      }

      this.stack = out;
    }
  }
};

// assert.AssertionError instanceof Error
util.inherits(assert.AssertionError, Error);

function replacer(key, value) {
  if (util.isUndefined(value)) {
    return '' + value;
  }
  if (util.isNumber(value) && !isFinite(value)) {
    return value.toString();
  }
  if (util.isFunction(value) || util.isRegExp(value)) {
    return value.toString();
  }
  return value;
}

function truncate(s, n) {
  if (util.isString(s)) {
    return s.length < n ? s : s.slice(0, n);
  } else {
    return s;
  }
}

function getMessage(self) {
  return truncate(JSON.stringify(self.actual, replacer), 128) + ' ' +
         self.operator + ' ' +
         truncate(JSON.stringify(self.expected, replacer), 128);
}

// At present only the three keys mentioned above are used and
// understood by the spec. Implementations or sub modules can pass
// other keys to the AssertionError's constructor - they will be
// ignored.

// 3. All of the following functions must throw an AssertionError
// when a corresponding condition is not met, with a message that
// may be undefined if not provided.  All assertion methods provide
// both the actual and expected values to the assertion error for
// display purposes.

function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
}

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.equal(true, !!guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!value) fail(value, true, message, '==', assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
// ==.
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '==', assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.notEqual(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.deepEqual(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'deepEqual', assert.deepEqual);
  }
};

function _deepEqual(actual, expected) {
  // 7.1. All identical values are equivalent, as determined by ===.
  if (actual === expected) {
    return true;

  } else if (util.isBuffer(actual) && util.isBuffer(expected)) {
    if (actual.length != expected.length) return false;

    for (var i = 0; i < actual.length; i++) {
      if (actual[i] !== expected[i]) return false;
    }

    return true;

  // 7.2. If the expected value is a Date object, the actual value is
  // equivalent if it is also a Date object that refers to the same time.
  } else if (util.isDate(actual) && util.isDate(expected)) {
    return actual.getTime() === expected.getTime();

  // 7.3 If the expected value is a RegExp object, the actual value is
  // equivalent if it is also a RegExp object with the same source and
  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).
  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {
    return actual.source === expected.source &&
           actual.global === expected.global &&
           actual.multiline === expected.multiline &&
           actual.lastIndex === expected.lastIndex &&
           actual.ignoreCase === expected.ignoreCase;

  // 7.4. Other pairs that do not both pass typeof value == 'object',
  // equivalence is determined by ==.
  } else if (!util.isObject(actual) && !util.isObject(expected)) {
    return actual == expected;

  // 7.5 For all other Object pairs, including Array objects, equivalence is
  // determined by having the same number of owned properties (as verified
  // with Object.prototype.hasOwnProperty.call), the same set of keys
  // (although not necessarily the same order), equivalent values for every
  // corresponding key, and an identical 'prototype' property. Note: this
  // accounts for both named and indexed properties on Arrays.
  } else {
    return objEquiv(actual, expected);
  }
}

function isArguments(object) {
  return Object.prototype.toString.call(object) == '[object Arguments]';
}

function objEquiv(a, b) {
  if (util.isNullOrUndefined(a) || util.isNullOrUndefined(b))
    return false;
  // an identical 'prototype' property.
  if (a.prototype !== b.prototype) return false;
  // if one is a primitive, the other must be same
  if (util.isPrimitive(a) || util.isPrimitive(b)) {
    return a === b;
  }
  var aIsArgs = isArguments(a),
      bIsArgs = isArguments(b);
  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))
    return false;
  if (aIsArgs) {
    a = pSlice.call(a);
    b = pSlice.call(b);
    return _deepEqual(a, b);
  }
  var ka = objectKeys(a),
      kb = objectKeys(b),
      key, i;
  // having the same number of owned properties (keys incorporates
  // hasOwnProperty)
  if (ka.length != kb.length)
    return false;
  //the same set of keys (although not necessarily the same order),
  ka.sort();
  kb.sort();
  //~~~cheap key test
  for (i = ka.length - 1; i >= 0; i--) {
    if (ka[i] != kb[i])
      return false;
  }
  //equivalent values for every corresponding key, and
  //~~~possibly expensive deep test
  for (i = ka.length - 1; i >= 0; i--) {
    key = ka[i];
    if (!_deepEqual(a[key], b[key])) return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.notDeepEqual(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
};

// 9. The strict equality assertion tests strict equality, as determined by ===.
// assert.strictEqual(actual, expected, message_opt);

assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
};

function expectedException(actual, expected) {
  if (!actual || !expected) {
    return false;
  }

  if (Object.prototype.toString.call(expected) == '[object RegExp]') {
    return expected.test(actual);
  } else if (actual instanceof expected) {
    return true;
  } else if (expected.call({}, actual) === true) {
    return true;
  }

  return false;
}

function _throws(shouldThrow, block, expected, message) {
  var actual;

  if (util.isString(expected)) {
    message = expected;
    expected = null;
  }

  try {
    block();
  } catch (e) {
    actual = e;
  }

  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +
            (message ? ' ' + message : '.');

  if (shouldThrow && !actual) {
    fail(actual, expected, 'Missing expected exception' + message);
  }

  if (!shouldThrow && expectedException(actual, expected)) {
    fail(actual, expected, 'Got unwanted exception' + message);
  }

  if ((shouldThrow && actual && expected &&
      !expectedException(actual, expected)) || (!shouldThrow && actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.throws(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws.apply(this, [true].concat(pSlice.call(arguments)));
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/message) {
  _throws.apply(this, [false].concat(pSlice.call(arguments)));
};

assert.ifError = function(err) { if (err) {throw err;}};

var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    if (hasOwn.call(obj, key)) keys.push(key);
  }
  return keys;
};

},{"util/":26}],22:[function(require,module,exports){
exports.endianness = function () { return 'LE' };

exports.hostname = function () {
    if (typeof location !== 'undefined') {
        return location.hostname
    }
    else return '';
};

exports.loadavg = function () { return [] };

exports.uptime = function () { return 0 };

exports.freemem = function () {
    return Number.MAX_VALUE;
};

exports.totalmem = function () {
    return Number.MAX_VALUE;
};

exports.cpus = function () { return [] };

exports.type = function () { return 'Browser' };

exports.release = function () {
    if (typeof navigator !== 'undefined') {
        return navigator.appVersion;
    }
    return '';
};

exports.networkInterfaces
= exports.getNetworkInterfaces
= function () { return {} };

exports.arch = function () { return 'javascript' };

exports.platform = function () { return 'browser' };

exports.tmpdir = exports.tmpDir = function () {
    return '/tmp';
};

exports.EOL = '\n';

},{}],23:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],24:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],25:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],26:[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./support/isBuffer":25,"_process":23,"inherits":24}],27:[function(require,module,exports){
(function (global){
"use strict";function _canonicalize(e){var t=global.document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}var templateLoader=require("./template-loader.js"),console=require("./../../bower_components/console-browserify/index.js"),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null);require("./ko-bindings.js");var performanceAwareCaller=require("./timed-call.js").timedCall,addUndoStackExtensionMaker=require("./undomanager/undomain.js"),colorPlugin=require("./ext/color.js"),inlinerPlugin=require("./ext/inliner.js"),localStorageLoader=require("./ext/localstorage.js");if("undefined"==typeof ko)throw"Cannot find knockout.js library!";if("undefined"==typeof $)throw"Cannot find jquery library!";var applyBindingOptions=function(e,t){t.bindingHandlers.wysiwygSrc.convertedUrl=function(t,o,a,i){var l=e.imgProcessorBackend?e.imgProcessorBackend:"./upload",d=l.match(/^(https?:\/\/[^\/]*\/).*$/),r=t.match(/^(https?:\/\/[^\/]*\/).*$/);if(null===d||null!==r&&d[1]==r[1]){var s=l+"?src="+t+"&method="+o+"&params="+a+","+i;return s}console.log("Cannot apply backend image resizing to non-local resources ",t,o,a,i,d,r);var n=t+"?method="+o+"&width="+a+(null!==i?"&height="+i:"");return n},t.bindingHandlers.wysiwygSrc.placeholderUrl=function(t,o){var a=e.imgProcessorBackend+"?method="+"placeholder"+"&params="+t+","+o;return a},e&&e.tinymceConfig&&(t.bindingHandlers.wysiwyg.standardOptions=e.tinymceConfig),e&&e.tinymceConfigFull&&(t.bindingHandlers.wysiwyg.fullOptions=e.tinymceConfigFull)},start=function(e,t,o,a,i){templateLoader.fixPageEvents();var l=function(t){var o={messages:{unknownError:t.t("Unknown error"),uploadedBytes:t.t("Uploaded bytes exceed file size"),maxNumberOfFiles:t.t("Maximum number of files exceeded"),acceptFileTypes:t.t("File type not allowed"),maxFileSize:t.t("File is too large"),minFileSize:t.t("File is too small"),post_max_size:t.t("The uploaded file exceeds the post_max_size directive in php.ini"),max_file_size:t.t("File is too big"),min_file_size:t.t("File is too small"),accept_file_types:t.t("Filetype not allowed"),max_number_of_files:t.t("Maximum number of files exceeded"),max_width:t.t("Image exceeds maximum width"),min_width:t.t("Image requires a minimum width"),max_height:t.t("Image exceeds maximum height"),min_height:t.t("Image requires a minimum height"),abort:t.t("File upload aborted"),image_resize:t.t("Failed to resize image"),generic:t.t("Unexpected upload error")}};e&&e.fileuploadConfig&&(o=$.extend(!0,o,e.fileuploadConfig)),ko.bindingHandlers.fileupload.extendOptions=o},d=function(t){e&&e.strings&&(t.t=function(o,a){var i=e.strings[o];return"undefined"==typeof i&&(console.warn("Missing translation string for",o,": using default string"),i=o),t.tt(i,a)})},r=[d,addUndoStackExtensionMaker(performanceAwareCaller),colorPlugin,inlinerPlugin];if("undefined"!=typeof i)for(var s=0;s<i.length;s++)r.push(i[s]);r.push(l);var n=e.fileuploadConfig?e.fileuploadConfig.url:"/upload/";applyBindingOptions(e,ko),$("<!-- ko template: 'main' --><!-- /ko -->").appendTo(global.document.body),"undefined"==typeof t&&"undefined"!=typeof o&&(t=o.template),templateLoader.load(performanceAwareCaller,t,o,a,r,n)},initFromLocalStorage=function(e,t,o){try{var a=localStorageLoader(t,e.emailProcessorBackend),i="undefined"!=typeof o?o:[];i.push(a.extension);var l=_canonicalize(a.metadata.template);start(e,l,a.metadata,a.model,i)}catch(d){console.error("TODO not found ",t,d)}},init=function(e,t){var o=global.location.hash?global.location.href.split("#")[1]:void 0;if(e&&(e.template||e.data))if(e.data){var a=JSON.parse(e.data);start(e,void 0,a.metadata,a.content,t)}else start(e,e.template,void 0,void 0,t);else if(o&&7==o.length)initFromLocalStorage(e,o,t);else{if(!o)return!1;start(e,_canonicalize(o),void 0,void 0,t)}return!0};module.exports={isCompatible:templateLoader.isCompatible,init:init,start:start};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../bower_components/console-browserify/index.js":1,"./ext/color.js":59,"./ext/inliner.js":60,"./ext/localstorage.js":61,"./ko-bindings.js":62,"./template-loader.js":63,"./timed-call.js":64,"./undomanager/undomain.js":65}],28:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js"),addScriptTemplate=function(e,t,o){var a=e.createElement("script");return a.setAttribute("type","text/html"),a.setAttribute("id",t),a.text=o,e.body.appendChild(a),a};ko.bindingHandlers.bindIframe={tpl:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n</head>\r\n<body><div data-bind="block: content"></div></body>\r\n</html>\r\n',init:function(e,t){function o(o){try{var a=e.contentDocument;a.open(),a.write(ko.bindingHandlers.bindIframe.tpl),a.close();try{var i=a.body;if(i){for(var n=e.contentWindow.parent.document.getElementsByTagName("script"),l=0;l<n.length;l++)"text/html"==n[l].getAttribute("type")&&n[l].getAttribute("id")&&addScriptTemplate(a,n[l].getAttribute("id"),n[l].innerHTML);var r=a.getElementsByTagName("HTML");ko.utils.domNodeDisposal.addDisposeCallback(e,function(){ko.cleanNode(r[0]||i)}),ko.applyBindings(t(),r[0]||i)}else console.log("no iframedoc",o)}catch(d){throw console.log("error reading iframe.body",d,o),d}}catch(d){throw console.log("error reading iframe contentDocument",d,o),d}}o("first call")}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],29:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.withProperties={init:function(e,t,o,a,i){var n=i.createChildContext(i.$rawData,null,function(e){ko.utils.extend(e,t())});return ko.applyBindingsToDescendants(n,e),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.withProperties=!0,ko.bindingHandlers.log={init:function(e,t){console.log("log",t())}},ko.bindingHandlers.block={templateExists:function(e){var t=global.document.getElementById(e);return t?!0:!1},_chooseTemplate:function(e,t,o,a){var i=t+"-"+o;if(ko.bindingHandlers.block.templateExists(i))return i;if("undefined"!=typeof a&&null!==a)return ko.bindingHandlers.block._chooseTemplate(e,t,a);var n=e?"array":"object-"+o;if(ko.bindingHandlers.block.templateExists(n))return n;throw"cannot find template for "+i+"/"+n},_displayMode:function(e,t){var o="undefined"!=typeof e.type?ko.utils.unwrapObservable(e.type):"notablock-"+typeof e,a="undefined"!=typeof e.splice,i=t.templateMode?t.templateMode:"show";return ko.bindingHandlers.block._chooseTemplate(a,o,i,t.templateModeFallback)},_makeTemplateValueAccessor:function(e,t){return function(){var o,a,i=e(),n=ko.utils.peekObservable(i);if(!n||"object"!=typeof n.data&&"function"!=typeof n.data)o=i;else if(o=n.data,"undefined"!=typeof n.template){var l=ko.utils.unwrapObservable(n.template),r=t.templateMode?t.templateMode:"show";a=ko.bindingHandlers.block._chooseTemplate(!1,l,r,t.templateModeFallback)}var d=ko.utils.unwrapObservable(o);if(ko.isObservable(d)&&console.log("doubleObservable",d),"undefined"==typeof a)if(void 0===o)a="empty";else try{a=ko.bindingHandlers.block._displayMode(d,t)}catch(s){throw console.log(s,d,t.$data,t.templateMode),s}return{name:a,data:o,templateEngine:ko.nativeTemplateEngine.instance}}},init:function(e,t,o,a,i){"undefined"==typeof t()&&console.log("found a null block: check ending commas in arrays defs in IE");var n=ko.bindingHandlers.block._makeTemplateValueAccessor(t,i);return ko.bindingHandlers.template.init(e,n)},update:function(e,t,o,a,i){var n=ko.bindingHandlers.block._makeTemplateValueAccessor(t,i);return ko.bindingHandlers.template.update(e,n,o,a,i)}},ko.expressionRewriting.bindingRewriteValidators.block=!1,ko.virtualElements.allowedBindings.block=!0;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],30:[function(require,module,exports){
"use strict";module.exports=require("./string-template.js");

},{"./string-template.js":44}],31:[function(require,module,exports){
(function (global){
"use strict";require("./../../../bower_components/evol-colorpicker/js/evol.colorpicker.min.js");var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),kojqui=(typeof window !== "undefined" ? window['kojqui'] : typeof global !== "undefined" ? global['kojqui'] : null),ColorPicker=function(){kojqui.BindingHandler.call(this,"colorpicker")};ColorPicker.prototype=kojqui.utils.createObject(kojqui.BindingHandler.prototype),ColorPicker.prototype.constructor=ColorPicker,ColorPicker.prototype.init=function(e,t,o){var a=t(),i=a.color,n=ko.computed({read:i,write:i,disposeWhenNodeIsRemoved:e}),l=function(){return n};ko.bindingHandlers.value.init(e,l,o);var r=function(e,t){"undefined"!=typeof t&&n(t)};$(e).on("change.color",r),ko.computed({read:function(){var t={color:ko.utils.unwrapObservable(n),showOn:"button"};for(var o in a)"color"!==o&&a.hasOwnProperty(o)&&(t[o]=ko.utils.unwrapObservable(a[o]));$(e).colorpicker(t)},disposeWhenNodeIsRemoved:e}),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("change.color",r),$(e).colorpicker("destroy")})},kojqui.utils.register(ColorPicker);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/evol-colorpicker/js/evol.colorpicker.min.js":2}],32:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null);ko.bindingHandlers.cssText={update:function(e,t){var o=ko.utils.unwrapObservable(t());try{e.innerText=o}catch(a){e.styleSheet||(e.innerHTML="a{}"),e.styleSheet.cssText=o}}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],33:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null);!function(e){e(ko,$)}(function(e,t){var o="ko_sortItem",a="ko_dragItem",i=(e.utils.unwrapObservable,e.utils.domData.get);e.utils.domData.set,e.bindingHandlers.droppable={init:function(n,l){var r,d=t(n),s=e.utils.unwrapObservable(l())||{},c={};t.extend(!0,c,e.bindingHandlers.droppable),s.data?(s.options&&c.options&&(e.utils.extend(c.options,s.options),delete s.options),e.utils.extend(c,s)):c.data=s,r=c.options.drop,d.droppable(e.utils.extend(c.options,{drop:function(e,t){var n=t.draggable[0],l=i(n,o)||i(n,a);l&&(l.clone&&(l=l.clone()),c.dragged&&(l=c.dragged.call(this,l,e,t)||l),c.data&&c.data(l)),r&&r.apply(this,arguments)}})),void 0!==c.isEnabled&&e.computed({read:function(){d.droppable(e.utils.unwrapObservable(c.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:n})},update:function(){},targetIndex:null,afterMove:null,beforeMove:null,options:{}}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],34:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.focusable={focus:function(){},blur:function(){},init:function(e){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("focusin",ko.bindingHandlers.focusable.focus),$(e).off("focusout",ko.bindingHandlers.focusable.blur)}),$(e).on("focusin",ko.bindingHandlers.focusable.focus),$(e).on("focusout",ko.bindingHandlers.focusable.blur)}},ko.bindingHandlers.scrollable={scroll:function(){},init:function(e){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("scroll",ko.bindingHandlers.scrollable.scroll)}),$(e).on("scroll",ko.bindingHandlers.scrollable.scroll)}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],35:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null);ko.extenders.paging=function(e,t){var o=ko.observable(t||10),i=ko.observable(1);return e.pageSize=ko.computed({read:o,write:function(e){e>0?o(e):o(10)}}),e.currentPage=ko.computed({read:i,write:function(t){t>e.pageCount()?i(e.pageCount()):0>=t?i(1):i(t)}}),e.pageCount=ko.computed(function(){return Math.ceil(e().length/e.pageSize())||1}),e.currentPageData=ko.computed(function(){var t=o(),n=i(),a=t*(n-1),r=t*n;return e().slice(a,r)}),e.moveFirst=function(){e.currentPage(1)},e.movePrevious=function(){e.currentPage(e.currentPage()-1)},e.moveNext=function(){e.currentPage(e.currentPage()+1)},e.moveLast=function(){e.currentPage(e.pageCount())},e};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],36:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),sortable=(typeof window !== "undefined" ? window['jQuery']['ui']['sortable'] : typeof global !== "undefined" ? global['jQuery']['ui']['sortable'] : null),draggable=(typeof window !== "undefined" ? window['jQuery']['ui']['draggable'] : typeof global !== "undefined" ? global['jQuery']['ui']['draggable'] : null),console=require("./../../../bower_components/console-browserify/index.js");if(require("./../../../bower_components/knockout-sortable/build/knockout-sortable.min.js"),"undefined"==typeof sortable)throw"Cannot find jquery-ui sortable widget dependency!";if("undefined"==typeof draggable)throw"Cannot find jquery-ui sortable widget dependency!";var isDraggingHelper=function(e,t){e()?t.type==e()+"stop"&&e(!1):("dragstart"==t.type||"sortstart"==t.type)&&e(t.type.substring(0,4))},makeExtendedValueAccessor=function(e){return function(){var t=e();ko.utils.peekObservable(t),ko.utils.unwrapObservable(t),"undefined"==t.options&&(t.options={});var o=t.options.start;t.options.start=function(e,i){return"undefined"!=typeof t.dragging&&ko.isWritableObservable(t.dragging)&&isDraggingHelper(t.dragging,e),"undefined"!=typeof t.dropContainer&&(t.scrollInterval=global.setInterval(function(){var e=$(t.dropContainer).scrollTop();$(t.dropContainer).scrollTop(e+t.adding)},20)),"undefined"!=typeof o?o(e,i):void 0};var i=t.options.stop;t.options.stop=function(e,o){return"undefined"!=typeof t.dragging&&ko.isWritableObservable(t.dragging)&&isDraggingHelper(t.dragging,e),"undefined"!=typeof t.dropContainer&&global.clearInterval(t.scrollInterval),"undefined"!=typeof i?i(e,o):void 0};var n=t.options.drag;return t.options.drag=function(e,o){if("undefined"!=typeof t.dropContainer){var i=e.pageY-$(t.dropContainer).offset().top,a=i-$(t.dropContainer).height();t.adding=-20>i?-20:0>i?-10:10>i?-5:a>20?20:a>0?10:a>-10?5:0}return"undefined"!=typeof n?n(e,o):void 0},t}};ko.bindingHandlers.extsortable={init:function(e,t,o,i,n){return ko.bindingHandlers.sortable.init(e,makeExtendedValueAccessor(t),o,i,n)},update:function(e,t,o,i,n){return ko.bindingHandlers.sortable.update(e,makeExtendedValueAccessor(t),o,i,n)}},ko.bindingHandlers.extdraggable={init:function(e,t,o,i,n){return ko.bindingHandlers.draggable.init(e,makeExtendedValueAccessor(t),o,i,n)},update:function(e,t,o,i,n){return ko.bindingHandlers.draggable.update(e,makeExtendedValueAccessor(t),o,i,n)}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/knockout-sortable/build/knockout-sortable.min.js":8}],37:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.preloader={init:function(e,t){var o=t();if("undefined"==typeof o.preloaded){o.preloaded=ko.observable("");var a=function(e){if(e!=o.preloaded())if(""!==e){var t=new Image;t.onload=function(){o.preloaded(e)},t.onerror=function(){o.preloaded(e)},t.src=e}else o.preloaded(e)};o.subscribe(a),a(o())}}},ko.bindingHandlers.advattr={init:function(e,t){var o=ko.utils.unwrapObservable(t()||{});ko.utils.objectForEach(o,function(t,o){var a=e.getAttribute(t);if(ko.isWriteableObservable(o)){var i=o();i!=a&&(o(a),null!==i&&console.log("AdvAttr found a value different from the default",t,i,a))}})},update:function(e,t){var o=ko.utils.unwrapObservable(t())||{};ko.utils.objectForEach(o,function(t,o){o=ko.utils.unwrapObservable(o);var a=o===!1||null===o||void 0===o;a?e.removeAttribute(t):e.setAttribute(t,o.toString())})}},ko.bindingHandlers.advstyle={init:function(e,t){var o=ko.utils.unwrapObservable(t()||{});ko.utils.objectForEach(o,function(t,o){var a;if(t.match(/Px$/)?(t=t.substr(0,t.length-2),a=e.style[t],a.match(/px$/)?a=a.replace(/px$/,""):console.log("AdvStyle binding found an unexpected default value",t,a,e)):a=e.style[t],ko.isWriteableObservable(o)){var i=o();i!=a&&(o(a),null!==i&&console.log("AdvStyle found a value different from the default",t,i,a))}})},update:function(e,t){var o=ko.utils.unwrapObservable(t()||{});ko.utils.objectForEach(o,function(t,o){o=ko.utils.unwrapObservable(o),(null===o||"undefined"==typeof o||o===!1)&&(o=""),t.match(/Px$/)&&(t=t.substr(0,t.length-2),o+="px"),e.style[t]=o})}},ko.bindingHandlers.domlog={init:function(e){console.log("initialized",e),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){console.log("disposed",e)})}},ko.bindingHandlers.fudroppable={init:function(e,t){var o=t()||{},a={},i=function(e,t,o,a,i,n){e[t]?global.clearTimeout(e[t]):("undefined"!=typeof a&&o.classList.add(a),ko.isWriteableObservable(i)&&!i()&&i(!0));var l=function(){e[t]=null,"undefined"!=typeof a&&o.classList.remove(a),ko.isWriteableObservable(i)&&i()&&i(!1)};"dragleave"==n.type?l():e[t]=global.setTimeout(l,500)};(o.active||o.activeClass)&&ko.utils.registerEventHandler(global,"dragover",i.bind(void 0,a,"activeTimeout",e,o.activeClass,o.active)),o.hoverClass&&ko.utils.registerEventHandler(e,"dragover dragenter dragleave",i.bind(void 0,a,"hoverTimeout",e,o.hoverClass,void 0))}},ko.bindingHandlers.fileupload={extendOptions:{},remoteFilePreprocessor:function(e){return e},init:function(e){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).fileupload("destroy")}),global.webkitURL?$(e).attr("title"," "):$(e).attr("title","")},update:function(e,t){var o=t()||{},a=$(e),i=a.parents(".uploadzone"),n=o.data;o.data=void 0;var l=o.canvasPreview;ko.utils.extend(o,{url:"/upload/",dataType:"json",dropZone:i.find(".mo-uploadzone")[0],autoUpload:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,maxFileSize:1048576,disableImageResize:/Android(?!.*Chrome)|Opera/.test(global.navigator.userAgent),previewMaxWidth:200,previewMaxHeight:200,previewCrop:!1,replaceFileInput:!1,messages:{unknownError:"Unknown error",uploadedBytes:"Uploaded bytes exceed file size",maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small",post_max_size:"The uploaded file exceeds the post_max_size directive in php.ini",max_file_size:"File is too big",min_file_size:"File is too small",accept_file_types:"Filetype not allowed",max_number_of_files:"Maximum number of files exceeded",max_width:"Image exceeds maximum width",min_width:"Image requires a minimum width",max_height:"Image exceeds maximum height",min_height:"Image requires a minimum height",abort:"File upload aborted",image_resize:"Failed to resize image",generic:"Unexpected upload error"}}),ko.utils.extend(o,ko.bindingHandlers.fileupload.extendOptions);var r=0,d="",s=function(){0===--r&&(n&&n(d),d="",l&&(i.find("img").show(),i.find("canvas").remove()),i.removeClass("uploading"),i.find(".progress-bar").css("width",0))},c=function(e){if("object"==typeof o.messages&&null!==o.messages){var t=e.match(/^([^ ]+)(.*)$/);if(t&&"undefined"!=typeof o.messages[t[1]])return o.messages[t[1]]+t[2]}return e};a.fileupload(o);for(var u=["fileuploadadd","fileuploadprocessalways","fileuploadprogressall","fileuploaddone","fileuploadfail"],p=function(e,t){if("fileuploadadd"==e.type&&r++,"fileuploadfail"==e.type&&(console.log("fileuploadfail",e,t),o.onerror&&(""===t.errorThrown&&"error"==t.textStatus?o.onerror(c("generic")):o.onerror(c("generic ("+t.errorThrown+")"))),s()),"fileuploaddone"==e.type)if("undefined"!=typeof t.result.files[0].url){if(o.onfile)for(var a=0;a<t.result.files.length;a++)t.result.files[a]=ko.bindingHandlers.fileupload.remoteFilePreprocessor(t.result.files[a]),o.onfile(t.result.files[a]);if(""===d&&(d=t.result.files[0].url),l){var n=new Image;n.onload=s,n.onerror=s,n.src=t.result.files[0].url}else s()}else"undefined"!=typeof t.result.files[0].error?(console.log("remote error",e,t),o.onerror&&o.onerror(c(t.result.files[0].error)),s()):(console.log("unexpected error",e,t),o.onerror&&o.onerror(c("generic (Unexpected Error retrieving uploaded file)")),s());if("fileuploadprocessalways"==e.type){var u=t.index,p=t.files[u];if(p.preview&&0===u&&0===i.find("canvas").length){if(l){var b=$(p.preview).css("width","100%");i.find("img").hide(),i.prepend(b)}i.addClass("uploading"),i.find(".progress-bar").css("width",0)}p.error&&(o.onerror&&o.onerror(c(p.error)),s())}if("fileuploadprogressall"==e.type){var f=parseInt(100*(t.loaded/t.total),10);i.find(".progress-bar").css("width",f+"%")}},b=u.length-1;b>=0;b--){var f=u[b];a.on(f,p)}$.support.fileInput||a.prop("disabled",!0).parent().addClass("disabled")}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],38:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.ifSubs={cloneNodes:function(e,t){for(var o=0,i=e.length,a=[];i>o;o++){var n=e[o].cloneNode(!0);a.push(t?ko.cleanNode(n):n)}return a},init:function(e,t,o,i,a){var n,r,l=t();return"undefined"==typeof l.data.subsCount&&ko.extenders.subscriptionsCount(l.data),ko.computed(function(){var o,i,s,d=ko.utils.unwrapObservable(t().data.subsCount),c=!r;s=-("undefined"!=typeof t().gutter?t().gutter:1),o=d+(n?s:0)>=ko.utils.unwrapObservable(l.threshold),"undefined"!=typeof t().not&&t().not&&(o=!o),i=c||o!==n,i&&(c&&ko.computedContext.getDependenciesCount()&&(r=ko.bindingHandlers.ifSubs.cloneNodes(ko.virtualElements.childNodes(e),!0)),o?(c||ko.virtualElements.setDomNodeChildren(e,ko.bindingHandlers.ifSubs.cloneNodes(r)),ko.applyBindingsToDescendants(a,e)):ko.virtualElements.emptyNode(e),n=o)},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.ifSubs=!0;var beforeSubscriptionProp,afterSubscriptionProp;if("function"==typeof ko.subscription&&"undefined"!=typeof ko.isWritableObservable)beforeSubscriptionProp="beforeSubscriptionAdd",afterSubscriptionProp="afterSubscriptionRemove";else if("3.2.0"==ko.version)beforeSubscriptionProp="va",afterSubscriptionProp="nb";else if("3.3.0"==ko.version)beforeSubscriptionProp="ja",afterSubscriptionProp="ua";else if("3.4.0"==ko.version)beforeSubscriptionProp="sa",afterSubscriptionProp="Ia";else{if("3.4.1"!=ko.version)throw"Unsupported minimized Knockout version "+ko.version+" (supported DEBUG or minimized 3.2.0 ... 3.4.1)";beforeSubscriptionProp="sa",afterSubscriptionProp="Ia"}ko.extenders.subscriptionsCount=function(e,t,o){if("undefined"==typeof e.subsCount){e.subsCount=ko.observable(e.getSubscriptionsCount()).extend({notify:"always"});var i=e[beforeSubscriptionProp],a=e[afterSubscriptionProp];e[beforeSubscriptionProp]=function(a){i&&i.call(e,a);var n=e.getSubscriptionsCount()+1;("undefined"==typeof t||n==t||"undefined"==typeof o||n==o)&&e.subsCount(n)},e[afterSubscriptionProp]=function(i){a&&a.call(e,i);var n=e.getSubscriptionsCount();("undefined"==typeof t||n==t||"undefined"==typeof o||n==o)&&e.subsCount(n)}}else console.log("already applied subscriptionCount to observable");return null};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],39:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),spinner=(typeof window !== "undefined" ? window['jQuery']['ui']['spinner'] : typeof global !== "undefined" ? global['jQuery']['ui']['spinner'] : null),console=require("./../../../bower_components/console-browserify/index.js");if("undefined"==typeof spinner)throw"Cannot find jquery-ui spinner widget dependency!";$.widget("ui.spinner",spinner,{_adjustValue:function(e){this._super(e);var t=this.options;return e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&e<t.min?t.min:e}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],40:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),console=require("./../../../bower_components/console-browserify/index.js"),tabs=(typeof window !== "undefined" ? window['jQuery']['ui']['tabs'] : typeof global !== "undefined" ? global['jQuery']['ui']['tabs'] : null);if("undefined"==typeof tabs)throw"Cannot find jquery-ui tabs widget dependency!";$.widget("ui.tabs",tabs,{_isLocal:function(e){return"true"==e.getAttribute("data-local")?!0:this._superApply(arguments)}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],41:[function(require,module,exports){
(function (global){
"use strict";function pushTemplate(e,t){var o=global.document.createElement("script");o.setAttribute("type","text/html"),o.setAttribute("id",e),o.text=t,global.document.body.appendChild(o)}function removeTemplate(e){var t=global.document.getElementById(e);t&&t.parentNode.removeChild(t)}function init(){}function getTemplateContent(e){var t=global.document.getElementById(e);return t?t.innerHTML:void 0}module.exports={init:init,addTemplate:pushTemplate,removeTemplate:removeTemplate,getTemplateContent:getTemplateContent};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],42:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),console=require("./../../../bower_components/console-browserify/index.js"),tinymce=(typeof window !== "undefined" ? window['tinymce'] : typeof global !== "undefined" ? global['tinymce'] : null),timeout,render=function(){timeout=void 0,"undefined"!=typeof tinymce.activeEditor&&null!==tinymce.activeEditor&&"undefined"!=typeof tinymce.activeEditor.theme&&null!==tinymce.activeEditor.theme&&"undefined"!=typeof tinymce.activeEditor.theme.panel&&null!==tinymce.activeEditor.theme.panel&&"undefined"!=typeof tinymce.activeEditor.theme.panel.visible&&(("undefined"!=typeof tinymce.activeEditor.theme.panel._visible&&tinymce.activeEditor.theme.panel._visible&&tinymce.activeEditor.theme.panel._fixed||"undefined"!=typeof tinymce.activeEditor.theme.panel.state&&tinymce.activeEditor.theme.panel.state.get("visible")&&tinymce.activeEditor.theme.panel.state.get("fixed"))&&tinymce.activeEditor.theme.panel.fixed(!1),tinymce.activeEditor.nodeChanged(),tinymce.activeEditor.theme.panel.visible(!0),tinymce.activeEditor.theme.panel.layoutRect().y<=40&&tinymce.activeEditor.theme.panel.moveBy(0,40-tinymce.activeEditor.theme.panel.layoutRect().y))};ko.bindingHandlers.wysiwygScrollfix={scroll:function(){timeout&&global.clearTimeout(timeout),timeout=global.setTimeout(render,50)},init:function(e){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("scroll",ko.bindingHandlers.wysiwygScrollfix.scroll)}),$(e).on("scroll",ko.bindingHandlers.wysiwygScrollfix.scroll)}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],43:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js"),_scrollIntoView=function(e,t,o,i){var n=o.scrollTop(),a=n-i-(t?20:-20),r="undefined"!=typeof o[0].nodeType;if(r){var l={scrollTop:""+Math.round(a)+"px"},s=Math.round(Math.abs(a-n));o.stop().animate(l,s)}else o.scrollTop(a)};ko.bindingHandlers.scrollIntoView={update:function(e,t){var o=ko.utils.unwrapObservable(t());if(o)try{for(;8===e.nodeType;)e=e.nextSibling;if(8!==e.nodeType){var i,n=$(e).scrollParent(),a=!1;9==n[0].nodeType?(n=$(n[0].defaultView),i=0,a=!0):i=n.offset().top;var r=n.height(),l=n.scrollTop(),s=i+r,d=$(e),c=d.offset().top;a&&(c-=l);var u=d.height(),p=c+u;c>i&&s>c+u||(r>u?(i>c&&_scrollIntoView(e,!0,n,i-c),p>s&&_scrollIntoView(e,!1,n,s-p)):(i>c&&s>p&&_scrollIntoView(e,!1,n,s-p),c>i&&p>s&&_scrollIntoView(e,!0,n,i-c)))}}catch(f){console.log("TODO exception scrolling into view",f)}}},ko.virtualElements.allowedBindings.scrollIntoView=!0;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],44:[function(require,module,exports){
(function (global){
"use strict";function createStringTemplateEngine(e){var t=e.makeTemplateSource;return e.makeTemplateSource=function(e){return"undefined"!=typeof templates[e]?new ko.templateSources.stringTemplate(e,templates[e]):t(e)},e}function pushTemplate(e,t){templates[e]=t}function removeTemplate(e){"undefined"!=typeof templates[e]?templates[e]=void 0:origTemplateSystem.removeTemplate(e)}function init(){ko.setTemplateEngine(createStringTemplateEngine(new ko.nativeTemplateEngine))}function getTemplateContent(e){return"undefined"!=typeof templates[e]?templates[e]:origTemplateSystem.getTemplateContent(e)}var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),origTemplateSystem=require("./script-template.js"),templates={};ko.templateSources.stringTemplate=function(e,t){this.templateName=e,this.template=t,this._data={}},ko.utils.extend(ko.templateSources.stringTemplate.prototype,{data:function(e,t){return 1===arguments.length?this._data[e]:(this._data[e]=t,void 0)},text:function(e){return 0===arguments.length?this.template:(this.template=e,void 0)}}),module.exports={init:init,addTemplate:pushTemplate,removeTemplate:removeTemplate,getTemplateContent:getTemplateContent};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./script-template.js":41}],45:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),kojqui=(typeof window !== "undefined" ? window['kojqui'] : typeof global !== "undefined" ? global['kojqui'] : null),console=require("./../../../bower_components/console-browserify/index.js"),extendValueAccessor=function(e,t){return function(){return ko.utils.extend(t,e()),t}},options={show:{delay:500},track:!0,items:'[title][title!=""][title!=" "]'};ko.bindingHandlers.tooltips={init:function(e,t,o,i,n){return"undefined"!=typeof $.fn.tooltip&&"undefined"!=typeof ko.bindingHandlers.tooltip?ko.bindingHandlers.tooltip.init(e,extendValueAccessor(t,options),o,i,n):void 0},update:function(e,t,o,i,n){return"undefined"!=typeof $.fn.tooltip&&"undefined"!=typeof ko.bindingHandlers.tooltip?ko.bindingHandlers.tooltip.update(e,extendValueAccessor(t,options),o,i,n):void 0}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],46:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.validatedValue={init:function(e,t,o){var i=t;if("undefined"!=typeof e.pattern){var n=new RegExp("^(?:"+e.pattern+")$"),a=ko.computed({read:function(){var o=ko.utils.unwrapObservable(t()),i=null===o||""===o||n.test(o);return i?e.classList.remove("invalid"):e.classList.add("invalid"),o},write:ko.isWriteableObservable(t())&&function(o){ko.selectExtensions.writeValue(e,o);var i=ko.selectExtensions.readValue(e);t()(i)},disposeWhenNodeIsRemoved:e});i=function(){return a}}ko.bindingHandlers.value.init(e,i,o)}},ko.expressionRewriting._twoWayBindings.validatedValue=!0;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],47:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.uniqueId={currentIndex:0,init:function(e,t){var o=ko.utils.unwrapObservable(t())||{};if(""===o.id()){var a,i,n;n="ko_"+("undefined"!=typeof o.type?ko.utils.unwrapObservable(o.type):"block");do a=n+"_"+ ++ko.bindingHandlers.uniqueId.currentIndex,i=global.document.getElementById(a);while(i);o.id(a)}}},ko.virtualElements.allowedBindings.uniqueId=!0,ko.bindingHandlers.virtualAttr={update:function(e,t){8!==e.nodeType&&ko.bindingHandlers.attr.update(e,t)}},ko.virtualElements.allowedBindings.virtualAttr=!0,ko.bindingHandlers.virtualAttrStyle={update:function(e,t,o,a,i){if(8!==e.nodeType){var n="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode,l=["style"];n&&l.push("replacedstyle");for(var r=ko.utils.unwrapObservable(t()),d=0;d<l.length;d++){var s=l[d],c=r===!1||null===r||void 0===r;c?e.removeAttribute(s):e.setAttribute(s,r.toString())}}}},ko.virtualElements.allowedBindings.virtualAttrStyle=!0,ko.bindingHandlers.virtualStyle={update:function(e,t){8!==e.nodeType&&ko.bindingHandlers.style.update(e,t)}},ko.virtualElements.allowedBindings.virtualStyle=!0,ko.bindingHandlers.virtualHtml={init:ko.bindingHandlers.html.init,update:function(e,t){if(8===e.nodeType){var o=ko.utils.unwrapObservable(t());if(ko.virtualElements.emptyNode(e),null!==o&&void 0!==o){"string"!=typeof o&&(o=o.toString());var a=ko.utils.parseHtmlFragment(o);if(a)for(var i=e.nextSibling,n=0,l=a.length;l>n;n++)i.parentNode.insertBefore(a[n],i)}}else ko.bindingHandlers.html.update(e,t);return{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.virtualHtml=!0;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],48:[function(require,module,exports){
(function (global){
"use strict";var tinymce=(typeof window !== "undefined" ? window['tinymce'] : typeof global !== "undefined" ? global['tinymce'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");require("./eventable.js"),ko.bindingHandlers.wysiwygOrHtml={init:function(e,t,o,i,a){var n="undefined"==typeof a.templateMode||"wysiwyg"!=a.templateMode;return n?ko.bindingHandlers.virtualHtml.init():ko.bindingHandlers.wysiwyg.init(e,t,o,i,a)},update:function(e,t,o,i,a){var n="undefined"==typeof a.templateMode||"wysiwyg"!=a.templateMode;return n?ko.bindingHandlers.virtualHtml.update(e,t,o,i,a):void 0}},ko.virtualElements.allowedBindings.wysiwygOrHtml=!0,ko.bindingHandlers.wysiwygHref={init:function(e,t,o,i,a){if(8!==e.nodeType){t();var n="undefined"==typeof a.templateMode||"wysiwyg"!=a.templateMode;if(n)e.setAttribute("target","_new");else{var l=o();"undefined"!=typeof l.wysiwygOrHtml?e.setAttribute("href","javascript:void(0)"):(e.removeAttribute("href"),e.setAttribute("disabledhref","#"))}}},update:function(e,t,o,i,a){if(8!==e.nodeType){var n="undefined"==typeof a.templateMode||"wysiwyg"!=a.templateMode,l=ko.utils.unwrapObservable(t());n&&(l===!1||null===l||void 0===l?e.removeAttribute("href"):e.setAttribute("href",l.toString()))}}},ko.virtualElements.allowedBindings.wysiwygHref=!0,ko.bindingHandlers.wysiwygSrc={convertedUrl:function(e,t,o,i){var a=e+"?method="+t+"&width="+o+(null!==i?"&height="+i:"");return console.log("basic converterUrl",a),a},placeholderUrl:function(e,t,o){},update:function(e,t){var o=ko.utils.unwrapObservable(t()),i=ko.utils.unwrapObservable(o.src),a=ko.utils.unwrapObservable(o.placeholder),n=ko.utils.unwrapObservable(o.width),l=ko.utils.unwrapObservable(o.height);if(i===!1||null===i||void 0===i||""===i)"object"==typeof a&&null!==a?e.setAttribute("src",ko.bindingHandlers.wysiwygSrc.placeholderUrl(a.width,a.height,a.text)):e.removeAttribute("src");else{var r=ko.utils.unwrapObservable(o.method);r||(r=n>0&&l>0?"cover":"resize");var d=ko.bindingHandlers.wysiwygSrc.convertedUrl(i.toString(),r,n,l);e.setAttribute("src",d)}"undefined"!=typeof n&&null!==n?e.setAttribute("width",n):e.removeAttribute("width"),"undefined"!=typeof l&&null!==l?e.setAttribute("height",l):e.removeAttribute("height")}},ko.bindingHandlers.wysiwygId={init:function(e,t,o,i,a){var n="undefined"==typeof a.templateMode||"wysiwyg"!=a.templateMode;n||e.setAttribute("id",ko.utils.unwrapObservable(t()))},update:function(e,t,o,i,a){var n="undefined"==typeof a.templateMode||"wysiwyg"!=a.templateMode;n||e.setAttribute("id",ko.utils.unwrapObservable(t()))}},ko.virtualElements.allowedBindings.wysiwygId=!0,ko.bindingHandlers.wysiwygClick={init:function(e,t,o,i,a){var n="undefined"==typeof a.templateMode||"wysiwyg"!=a.templateMode;n||ko.bindingHandlers.click.init(e,t,o,i,a)}},ko.virtualElements.allowedBindings.wysiwygClick=!0,ko.bindingHandlers.wysiwygCss={update:function(e,t,o,i,a){var n="undefined"==typeof a.templateMode||"wysiwyg"!=a.templateMode;n||ko.bindingHandlers.css.update(e,t,o,i,a)}},ko.virtualElements.allowedBindings.wysiwygCss=!0,ko.bindingHandlers.wysiwygImg={makeTemplateValueAccessor:function(e,t){return function(){var o="undefined"!=typeof t.templateMode&&"wysiwyg"==t.templateMode,i=e(),a=ko.utils.peekObservable(i);return ko.utils.unwrapObservable(i),{name:o?a._editTemplate:a._template,templateEngine:ko.nativeTemplateEngine.instance}}},init:function(e,t,o,i,a){return ko.bindingHandlers.template.init(e,ko.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,a))},update:function(e,t,o,i,a){return a=a.extend(t()),ko.bindingHandlers.template.update(e,ko.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,a),o,i,a)}},ko.virtualElements.allowedBindings.wysiwygImg=!0,ko.bindingHandlers.wysiwyg={currentIndex:0,standardOptions:{},fullOptions:{toolbar1:"bold italic forecolor backcolor hr styleselect removeformat | link unlink | pastetext code",plugins:["link hr paste lists textcolor code"]},init:function(e,t){ko.bindingHandlers.focusable.init(e),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){tinymce.remove("#"+e.getAttribute("id"))});var o=t();if(!ko.isObservable(o))throw"Wysiwyg binding called with non observable";if(8===e.nodeType)throw"Wysiwyg binding called on virtual node, ignoring...."+e.innerHTML;var i=e.getAttribute("id");i||(i="wysiwyg_"+ ++ko.bindingHandlers.wysiwyg.currentIndex,e.setAttribute("id",i));var a,n="DIV"==e.tagName||"TD"==e.tagName,l=!1,r=!1,d={selector:"#"+i,inline:!0,hidden_input:!1,plugins:["paste"],toolbar1:"bold italic",toolbar2:"",preview_styles:!1,paste_as_text:!0,language:"en",schema:"html5",extended_valid_elements:"strong/b,em/i,*[*]",menubar:!1,skin:"gray-flat",setup:function(e){e.on("change redo undo",function(){l||(r=!0,o(e.getContent({format:"raw"})),r=!1)}),e.on("focus",function(){e.nodeChanged(),e.getElement().click()}),e.on("BeforeSetContent",function(e){e.initial&&(e.format="raw")}),a=e}};return ko.utils.extend(d,ko.bindingHandlers.wysiwyg.standardOptions),n&&ko.utils.extend(d,ko.bindingHandlers.wysiwyg.fullOptions),global.setTimeout(function(){tinymce.init(d)}),ko.computed(function(){var o=ko.utils.unwrapObservable(t());if(!r){try{l=!0,"undefined"!=typeof a?a.setContent(o,{format:"raw"}):ko.utils.setHtml(e,o)}catch(i){console.log("TODO exception setting content to editable element",typeof a,i)}l=!1}},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./eventable.js":34}],49:[function(require,module,exports){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),checkModel=function(e,t,o,n,i){var a,r,l,s=0;if("undefined"==typeof i&&(i=!1),"undefined"!=typeof t&&"function"==typeof t.splice)for(a={},r=0;r<t.length;r++)a[t[r].type]=t[r];else a=t;for(var d in e)if(e.hasOwnProperty(d))if(l="undefined"!=typeof n?n+"."+d:d,o.hasOwnProperty(d))if(typeof o[d]!=typeof e[d])null!==o[d]&&null!==e[d]&&("string"==typeof o[d]?String(e[d])!=e[d]&&(console.log("TODO Different type 1 ",l,typeof o[d],typeof e[d],o[d],e[d]),s=Math.max(s,2)):"number"==typeof o[d]?Number(e[d])!=e[d]&&(console.log("TODO Different type 2 ",l,typeof o[d],typeof e[d],o[d],e[d]),s=Math.max(s,2)):(console.log("TODO Different type 3 ",l,typeof o[d],typeof e[d],o[d],e[d]),s=Math.max(s,2)));else if("object"==typeof e[d])if(null!==e[d])if("undefined"!=typeof e[d].splice){if(e[d].length>0)if(o[d].length>0){var u=0;for(r=0;r<o[d].length;r++)if("string"==typeof o[d][r].type){for(;u<e[d].length&&e[d][u].type!==o[d][r].type;)console.log("ignoring ",l,e[d][u].type," block type in reference not found in model"),u++;if(u>=e[d].length){console.log("WARN cannot find ",l,o[d][r].type," block in reference"),s=Math.max(s,2);break}s=Math.max(s,checkModel(e[d][u],void 0,o[d][r],l+"["+r+"."+o[d][r].type+"]"))}}else for(r=0;r<e[d].length;r++)"string"!=typeof e[d][r].type?(console.log("TODO found an object with no type",l,e[d][r]),s=Math.max(s,2)):a.hasOwnProperty(e[d][r].type)?s=Math.max(s,checkModel(a[e[d][r].type],a,e[d][r],l+"["+r+"."+e[d][r].type+"]")):(console.warn("TODO the model uses a block type not defined by the template. REMOVING IT!!",l,e[d][r]),e[d].splice(r,1),r--,s=Math.max(s,2))}else null===o[d]?i?(console.log("WARN Null object in model ",l,"instead of",e[d],"deleting it"),s=Math.max(s,2),delete e[d]):(console.log("INFO Null object in model ",l,"instead of",e[d],"cloning it from the reference"),s=Math.max(s,1),o[d]=e[d]):s=Math.max(s,checkModel(e[d],a,o[d],l,i));else null!==o[d]&&(console.log("TODO Null in reference but not null in model",l,o[d]),s=Math.max(s,2));else"string"!=typeof e[d]&&"boolean"!=typeof e[d]&&"number"!=typeof e[d]&&(console.log("TODO unsupported type",l,typeof e[d]),s=Math.max(s,2));else i?(console.warn("WARN Property ",l,"found in model is not defined by template: removing it!"),s=Math.max(s,2),delete e[d]):(console.log("INFO Property ",l,"missing in model, cloning from reference!"),s=Math.max(s,1),o[d]=e[d]);return i||(s=Math.max(s,checkModel(o,t,e,"undefined"!=typeof n?n+"!R":"!R",!0))),s};module.exports=checkModel;

},{"./../../../bower_components/console-browserify/index.js":1}],50:[function(require,module,exports){
"use strict";var converterUtils=require("./utils.js"),cssParse=require("./../../../bower_components/mensch/lib/parser.js"),console=require("./../../../bower_components/console-browserify/index.js"),domutils=require("./domutils.js"),_declarationValueLookup=function(e,t,o){for(var n=e.length-1;n>=0;n--)if("property"==e[n].type&&e[n].name==t)return _declarationValueUrlPrefixer(e[n].value,o);return null},_propToCamelCase=function(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})},_declarationValueUrlPrefixer=function(e,t){if(e.match(/url\(.*\)/)){var o=e.replace(/(url\()([^\)]*)(\))/g,function(e,o,n,i){var r=n.trim(),a=n.trim().charAt(0);"'"==a||'"'==a?r=r.substr(1,r.length-2):a="";var l=t(r);return null!==l?o+a+l+a+i:e});return o}return e},elaborateDeclarations=function(e,t,o,n,i,r,a){var l="object"==typeof r&&null!==r?r:{},s=null,d=0;if("undefined"==typeof t){var u=cssParse("#{\n"+e+"}",{comments:!0,position:!0});t=u.stylesheet.rules[0].declarations,d=1}for(var c=t.length-1;c>=0;c--)if("property"==t[c].type)if(a===!0&&"display"==t[c].name&&"none"==t[c].value)null===s&&(s=e),s=converterUtils.removeStyle(s,t[c].position.start,t[c].position.end,d,0,0,"");else{var f=t[c].name.match(/^-ko-(bind-|attr-)?([a-z0-9-]*?)(-if|-ifnot)?$/);if(null!==f){null===s&&"undefined"!=typeof e&&(s=e);var p,b,m,g="attr-"==f[1],h="bind-"==f[1],v=f[2],y="-if"==f[3]||"-ifnot"==f[3];if(y){p=t[c].name.substr(0,t[c].name.length-f[3].length);var k=_declarationValueLookup(t,p,o);if(null===k)throw"Unable to find declaration "+p+" for "+t[c].name}else{if((g||h)&&"undefined"==typeof i&&"undefined"!=typeof e)throw"Attributes and bind declarations are only allowed in inline styles!";var w,_=!0;if(g?(m=domutils.getAttribute(i,v),_=!1,w="virtualAttr"):h?(w=null,"text"==v?"undefined"!=typeof i?m=domutils.getInnerText(i):_=!1:"html"==v?"undefined"!=typeof i?m=domutils.getInnerHtml(i):_=!1:_=!1):(_="undefined"!=typeof e,_&&(m=_declarationValueLookup(t,v,o)),w="virtualStyle"),_&&null===m)throw console.error("Cannot find default value for",t[c].name,t),"Cannot find default value for "+t[c].name+": "+t[c].value+" in "+i+" ("+typeof e+"/"+v+")";var x=m,O=_propToCamelCase(v);try{b=converterUtils.expressionBinding(t[c].value,n,x)}catch(S){throw console.error("Model ensure path failed",S.stack,"name",t[c].name,"value",t[c].value,"default",m,"element",i),S}null!==w&&"undefined"==typeof l[w]&&(l[w]={}),"virtualAttr"==w&&"href"==O&&(w=null,O="wysiwygHref","undefined"!=typeof i&&null!==i&&domutils.removeAttribute(i,"href"));var $=_declarationValueLookup(t,t[c].name+"-if",o),C=!1;if(null===$)$=_declarationValueLookup(t,t[c].name+"-ifnot",o),C=!0;else if(null!==_declarationValueLookup(t,t[c].name+"-ifnot",o))throw"Unexpected error: cannot use both -if and -ifnot property conditions";if(null!==$)try{var T=converterUtils.conditionBinding($,n);b=(C?"!":"")+"("+T+") ? "+b+" : null"}catch(S){throw console.error("Unable to deal with -ko style binding condition",$,t[c].name),S}null!==w?l[w][O]=b:l[O]=b}if(null!==s)try{if("undefined"!=typeof i&&null!==i)s=converterUtils.removeStyle(s,t[c].position.start,t[c].position.end,d,0,0,"");else{var A="";y||(A=v+": <!-- ko text: "+b+" -->"+m+"<!-- /ko -->"),s=converterUtils.removeStyle(s,t[c].position.start,t[c].position.end,d,0,0,A)}}catch(S){throw console.warn("Remove style failed",S,"name",t[c]),S}}else{var E=_declarationValueUrlPrefixer(t[c].value,o);if(E!=t[c].value&&(null===s&&"undefined"!=typeof e&&(s=e),null!==s))try{s=converterUtils.removeStyle(s,t[c].position.start,t[c].position.end,d,0,0,t[c].name+": "+E)}catch(S){throw console.log("Remove style failed replacing url",S,"name",t[c]),S}var M=_propToCamelCase(t[c].name),j="virtualAttrStyle",D="undefined"!=typeof l.virtualStyle?l.virtualStyle[M]:void 0,P=" ";"undefined"==typeof l[j]&&(l[j]="''",P=""),"undefined"!=typeof D?(l[j]="'"+t[c].name+": '+("+D+")+';"+P+"'+"+l[j],delete l.virtualStyle[M]):l[j]="'"+t[c].name+": "+converterUtils.addSlashes(E)+";"+P+"'+"+l[j]}}if("undefined"!=typeof i&&null!==i){for(var H in l.virtualStyle)if(l.virtualStyle.hasOwnProperty(H))throw console.log("Unexpected virtualStyle binding after conversion to virtualAttr.style",H,l.virtualStyle[H],e),"Unexpected virtualStyle binding after conversion to virtualAttr.style for "+H;delete l.virtualStyle;var B=domutils.getAttribute(i,"data-bind"),q=(null!==B?B+", ":"")+_bindingSerializer(l);domutils.setAttribute(i,"data-bind",q)}if("undefined"==typeof e){var I=!1;for(var R in l.virtualStyle)if(l.virtualStyle.hasOwnProperty(R)){I=!0;break}if(I){if("undefined"!=typeof l.virtualAttrStyle){var F=l.virtualAttrStyle;delete l.virtualAttrStyle,l.virtualAttrStyle=F}}else delete l.virtualStyle;return _bindingSerializer(l)}return s},_bindingSerializer=function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&("object"==typeof e[o]?t.push(o+": "+"{ "+_bindingSerializer(e[o])+" }"):t.push(o+": "+e[o]));return t.reverse().join(", ")};module.exports=elaborateDeclarations;

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/mensch/lib/parser.js":15,"./domutils.js":51,"./utils.js":57}],51:[function(require,module,exports){
(function (global){
"use strict";function _extend(e,t){if(t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),objExtend=function(e,t){return"function"==typeof $.extend?$.extend(!0,e,t):_extend(e,JSON.parse(JSON.stringify(t)))},getAttribute=function(e,t){var o=$(e).attr(t);return"undefined"==typeof o&&(o=null),o},setAttribute=function(e,t,o){$(e).attr(t,o)},removeAttribute=function(e,t){$(e).removeAttr(t)},getInnerText=function(e){return $(e).text()},getInnerHtml=function(e){return $(e).html()},getLowerTagName=function(e){return""===e.tagName&&"string"==typeof e.name?e.name.toLowerCase():""!==e.tagName?e.tagName.toLowerCase():$(e).prop("tagName").toLowerCase()},setContent=function(e,t){$(e).html(t)},replaceHtml=function(e,t){$(e).replaceWith(t)},removeElements=function(e,t){t&&"undefined"!=typeof e.detach&&e.detach(),e.remove()};module.exports={getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,getInnerText:getInnerText,getInnerHtml:getInnerHtml,getLowerTagName:getLowerTagName,setContent:setContent,replaceHtml:replaceHtml,removeElements:removeElements,objExtend:objExtend};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],52:[function(require,module,exports){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),elaborateDeclarations=require("./declarations.js"),utils=require("./utils.js"),modelDef=require("./model.js"),_getOptionsObject=function(e){for(var t=e.split("|"),o={},n=0;n<t.length;n++){var i=t[n].split("=");o[i[0]]=i.length>1?i[1]:i[0]}return o},_filterProps=function(e,t,o){var n=[];for(var i in e)if(!i.match(/^customStyle$/)&&!i.match(/^_/)&&e.hasOwnProperty(i)){var a=null!==e[i]&&"undefined"!=typeof e[i]._category&&"style"==e[i]._category;if("id"==i||"type"==i||i.match(/Blocks$/));else if("styler"==t)(a||o>0)&&n.push(i);else if("edit"==t){var r=null!==e[i]&&"undefined"!=typeof e[i]._category&&"content"==e[i]._category&&("undefined"==typeof e[i]._context||"block"!=e[i]._context);r&&n.push(i)}else"undefined"==typeof t&&n.push(i)}return n},_propInput=function(e,t,o,n,i){var a,r="";if(null!==e&&"undefined"!=typeof e._widget&&(a=e._widget),"undefined"==typeof a)throw"Unknown data type for "+t;var l="focusable: true";if("edit"==n&&(l+=", event: { focus: function(ui, event) { $($element).click(); } } "),r+='<label class="data-'+a+'"'+("boolean"==a?" data-bind=\"event: { mousedown: function(ui, evt) { if (evt.button == 0) { var input = $($element).find('input'); var ch = input.prop('checked'); setTimeout(function() { input.click(); input.prop('checked', !ch); input.trigger('change'); }, 0); } } }, click: function(ui, evt) { evt.preventDefault(); }, clickBubble: false\"":"")+">","undefined"!=typeof i&&"undefined"!=typeof i[a]){var s=i[a],d={};if("undefined"!=typeof s.parameters)for(var u in s.parameters)s.parameters.hasOwnProperty(u)&&"undefined"!=typeof e["_"+u]&&(d[u]=e["_"+u]);r+=s.html(o,l,d)}else if("boolean"==a)r+='<input type="checkbox" value="nothing" data-bind="checked: '+o+", "+l+'" />',r+='<span class="checkbox-replacer" ></span>';else if("color"==a)r+='<input size="7" type="text" data-bind="colorpicker: { color: '+o+", strings: $root.t('Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.') }, "+", "+l+'" />';else if("select"==a){if("undefined"!=typeof e._options){var c=_getOptionsObject(e._options);r+='<select data-bind="value: '+o+", "+l+'">';for(var p in c)c.hasOwnProperty(p)&&(r+='<option value="'+p+"\" data-bind=\"text: $root.ut('template', '"+utils.addSlashes(c[p])+"')\">"+c[p]+"</option>");r+="</select>"}}else if("font"==a)r+='<select type="text" data-bind="value: '+o+", "+l+'">',r+='<optgroup label="Sans-Serif Fonts">',r+='<option value="Arial,Helvetica,sans-serif">Arial</option>',r+="<option value=\"'Comic Sans MS',cursive,sans-serif\">Comic Sans MS</option>",r+='<option value="Impact,Charcoal,sans-serif">Impact</option>',r+="<option value=\"'Trebuchet MS',Helvetica,sans-serif\">Trebuchet MS</option>",r+='<option value="Verdana,Geneva,sans-serif">Verdana</option>',r+="</optgroup>",r+='<optgroup label="Serif Fonts">',r+='<option value="Georgia,serif">Georgia</option>',r+="<option value=\"'Times New Roman',Times,serif\">Times New Roman</option>",r+="</optgroup>",r+='<optgroup label="Monospace Fonts">',r+="<option value=\"'Courier New',Courier,monospace\">Courier New</option>",r+="</optgroup>",r+="</select>";else if("url"==a)r+='<div class="ui-textbutton">',r+='<input class="ui-textbutton-input" size="7" type="url" pattern="(mailto:.+@.+|https?://.+\\..+|\\[.*\\].*)" value="nothing" data-bind="css: { withButton: typeof $root.linkDialog !== \'undefined\' }, validatedValue: '+o+", "+l+'" />',r+="<a class=\"ui-textbutton-button\" data-bind=\"visible: typeof $root.linkDialog !== 'undefined', click: typeof $root.linkDialog !== 'undefined' ? $root.linkDialog.bind($element.previousSibling) : false, button: { icons: { primary: 'fa fa-fw fa-ellipsis-h' }, label: 'Opzioni', text: false }\">Opzioni</a>",r+="</div>";else if("integer"==a){var f=0,b=1e3;null!==e&&"undefined"!=typeof e._max&&(b=e._max),null!==e&&"undefined"!=typeof e._min&&(f=e._min);var m=b-f>=100?10:1,g=5*m;r+='<input class="number-spinner" size="7" step="'+m+'" type="number" value="-1" data-bind="spinner: { min: '+f+", max: "+b+", page: "+g+", value: "+o+" }, valueUpdate: ['change', 'spin']"+", "+l+'" />'}else r+='<input size="7" type="text" value="nothing" data-bind="value: '+o+", "+l+'" />';return r+="</label>"},_getGlobalStyleProp=function(e,t,o,n){var i;return("object"!=typeof t||null===t||"undefined"!=typeof t._widget)&&"undefined"!=typeof o&&"undefined"!=typeof n&&n.length>0&&"object"==typeof e&&"undefined"!=typeof e[n]&&(i=e[n]),i},_propEditor=function(e,t,o,n,i,a,r,l,s,d,u,c,p,f,b){if("undefined"==typeof s&&(s=0),"undefined"!=typeof r&&"object"==typeof n&&null!==n&&"undefined"==typeof n._usecount)return console.log("TODO EDITOR ignoring",a,"property because it is not used by the template","prop:",r,"type:",l,"level:",s,e._templateName),"";var m,g="undefined"!=typeof c?r+"._defaultComputed":r,h="",v=g,y=1,k=1;if("object"==typeof n&&null!==n&&"undefined"==typeof n._widget||"undefined"==typeof c&&(y+=1),"undefined"==typeof c&&"undefined"!=typeof d&&(k+=d),"undefined"!=typeof r&&p&&(h+="<!-- ko ifSubs: { data: "+v+", threshold: "+k+", gutter: "+y+" } -->"),"undefined"==typeof r||null!==n&&"undefined"!=typeof n._name||console.log("TODO WARN Missing label for property ",r),"undefined"==typeof r&&null!==n&&"undefined"==typeof n._name&&console.log("TODO WARN Missing label for object ",n.type),"object"==typeof n&&null!==n&&"undefined"==typeof n._widget){var w=_filterProps(n,l,s),_="styler"==l&&null!==n&&"undefined"!=typeof n.customStyle&&"undefined"!=typeof c,x="",$="";"undefined"!=typeof r&&"edit"==l&&(x=", click: function(obj, evt) { $root.selectItem("+r+", $data); return false }, clickBubble: false, css: { selecteditem: $root.isSelectedItem("+r+") }, scrollIntoView: $root.isSelectedItem("+r+"), ",$+=" selectable"),_&&($+=" supportsCustomStyles"),h+='<div class="objEdit level'+s+$+'" data-bind="tooltips: {}'+x+'">';var S=null!==n&&"undefined"!=typeof n._name?n._name:"undefined"!=typeof r?"["+r+"]":"";if(_){var O="Stile";"undefined"!=typeof i&&null!==i&&"undefined"!=typeof i._name?O=i._name:console.log("TODO missing label for theme section ",r,null!==n?n.type:"-"),S="<span class=\"blockSelectionMethod\" data-bind=\"text: customStyle() ? $root.ut('template', '"+utils.addSlashes(S)+"') : $root.ut('template', '"+utils.addSlashes(O)+"')\">Block</span>"}else S="<span data-bind=\"text: $root.ut('template', '"+utils.addSlashes(S)+"')\">"+S+"</span>";if(m=null!==n&&"undefined"!=typeof n._help?' title="'+utils.addSlashes(n._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+utils.addSlashes(n._help)+"') }\"":"",h+="<span"+m+' class="objLabel level'+s+'">'+S+"</span>","edit"==l&&"undefined"!=typeof n._blockDescription&&(h+="<div class=\"blockDescription\" data-bind=\"html: $root.ut('template', '"+utils.addSlashes(n._blockDescription)+"')\">"+n._blockDescription+"</div>"),_&&(h+='<label class="data-boolean blockCheck" data-bind="tooltips: { }">',h+='<input type="checkbox" value="nothing" data-bind="focusable: true, checked: customStyle" />',h+='<span title="Switch between global and block level styles editing" data-bind="attr: { title: $root.t(\'Switch between global and block level styles editing\') }" class="checkbox-replacer checkbox-replacer-onoff"></span>',h+="</label>",h+="<!-- ko template: { name: 'customstyle', if: customStyle } --><!-- /ko -->"),"undefined"!=typeof r&&(h+="<!-- ko with: "+r+" -->",1==s&&"undefined"!=typeof r&&"undefined"!=typeof n._previewBindings&&"undefined"!=typeof e)){"undefined"!=typeof f&&(h+='<!-- ko with: $root.content() --><div class="objPreview" data-bind="'+f+'"></div><!-- /ko -->'),"undefined"!=typeof b&&(h+='<!-- ko with: $parent --><div class="objPreview" data-bind="'+b+'"></div><!-- /ko -->');var C=elaborateDeclarations(void 0,n._previewBindings,o,e.bind(this,a+"."));h+='<div class="objPreview"><div class="objPreviewInner" data-bind="'+C+'"></div></div>'}var T;0===s&&"undefined"!=typeof n._previewBindings&&(T=elaborateDeclarations(void 0,n._previewBindings,o,e.bind(this,a.length>0?a+".":"")));var E,A,D,M,H=h.length;for(E=0;E<w.length;E++)A=a.length>0?a+"."+w[E]:w[E],("object"!=typeof n[w[E]]||null===n[w[E]]||"undefined"!=typeof n[w[E]]._widget)&&(M=void 0,0===s&&"theme"==w[E]?h+=_propEditor(e,t,o,n[w[E]],D,A,w[E],l,0,d,void 0,void 0,p,f):(M=_getGlobalStyleProp(u,n[w[E]],w[E],A),h+=_propEditor(e,t,o,n[w[E]],D,A,w[E],l,s+1,d,u,M,p,f,T)));for(E=0;E<w.length;E++)A=a.length>0?a+"."+w[E]:w[E],"object"==typeof n[w[E]]&&null!==n[w[E]]&&"undefined"==typeof n[w[E]]._widget&&(M=void 0,0===s&&"theme"==w[E]?h+=_propEditor(e,t,o,n[w[E]],D,A,w[E],l,0,d,void 0,void 0,p,f):(M=_getGlobalStyleProp(u,n[w[E]],w[E],A),h+=_propEditor(e,t,o,n[w[E]],D,A,w[E],l,s+1,d,u,M,p,f,T)));var B=h.length-H;if(0===B){if("object"==typeof n&&null!==n&&"template"==n._context)return"";h+='<div class="objEmpty" data-bind="html: $root.t(\'Selected element has no editable properties\')">Selected element has no editable properties</div>'}"undefined"!=typeof r&&(h+="<!-- /ko -->"),h+="</div>"}else{var j=!0;if("undefined"==typeof u&&(j=!1),null===n||"object"!=typeof n||"undefined"!=typeof n._widget){var q=[];"undefined"!=typeof c&&q.push("css: { notnull: "+r+"() !== null }"),m=null!==n&&"undefined"!=typeof n._help?' title="'+utils.addSlashes(n._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+utils.addSlashes(n._help)+"') }\"":"",m.length>0&&q.push("tooltips: {}");var P=q.length>0?'data-bind="'+utils.addSlashes(q.join())+'"':"";h+='<div class="propEditor '+(j?"checkboxes":"")+'"'+P+">";var I=null!==n&&"undefined"!=typeof n._name?n._name:"undefined"!=typeof r?"["+r+"]":"";I="<span data-bind=\"text: $root.ut('template', '"+utils.addSlashes(I)+"')\">"+I+"</span>",h+="<span"+m+' class="propLabel">'+I+"</span>",h+='<div class="propInput '+("undefined"!=typeof u?"local":"")+'" data-bind="css: { default: '+r+'() === null }">',h+=_propInput(n,r,g,l,t),h+="</div>","undefined"!=typeof c&&(h+='<div class="propInput global" data-bind="css: { overridden: '+r+'() !== null }">',h+=_propInput(n,r,c,l,t),h+="</div>",j&&(h+='<div class="propCheck"><label data-bind="tooltips: {}"><input type="checkbox" data-bind="focusable: true, click: function(evt, obj) { $root.localGlobalSwitch('+r+", "+c+"); return true; }, checked: "+r+'() !== null">',h+='<span class="checkbox-replacer" data-bind="css: { checked: '+r+"() !== null }, attr: { title: $root.t('This style is specific for this block: click here to remove the custom style and revert to the theme value') }\"></span>",h+="</label></div>")),h+="</div>"}else h+=null===n||"object"!=typeof n?'<div class="propEditor unknown">[A|'+r+"|"+typeof n+"]</div>":'<div class="propEditor unknown">[B|'+r+"|"+typeof n+"]</div>"}return"undefined"!=typeof r&&p&&(h+="<!-- /ko -->",h+="<!-- ko ifSubs: { not: true, data: "+v+", threshold: "+k+", gutter: 0 } -->",h+='<span class="label notused">('+r+")</span>",h+="<!-- /ko -->"),h},createBlockEditor=function(e,t,o,n,i,a,r,l,s,d,u,c){"undefined"==typeof u&&(u=!0);var p,f=modelDef.getDef(e,a),b=modelDef.getDef(e,i);"undefined"!=typeof b._previewBindings&&"thaeme"!=a&&"styler"==r&&(p=elaborateDeclarations(void 0,b._previewBindings,n,modelDef.getBindValue.bind(void 0,e,o,i,i,"")));var m,g="undefined"!=typeof d&&d?e[a]._globalStyles:void 0,h="undefined"!=typeof d&&d?e[a]._globalStyle:void 0;if("undefined"!=typeof h){var v=modelDef.getDef(e,"theme");m=v[h.replace(/^(\$theme|_theme_)\./,"")]}var y=modelDef.getBindValue.bind(void 0,e,o,i,a);y._templateName=a;var k='<div class="editor">';k+='<div class="blockType'+("undefined"!=typeof g?" withdefaults":"")+'">'+f.type+"</div>";var w=_propEditor(y,t,n,f,m,"",void 0,r,c,s,g,h,u,p);w.length>0&&(k+=w),k+="</div>",l(k,a,r)},createBlockEditors=function(e,t,o,n,i,a,r,l){createBlockEditor(e,t,o,n,i,a,"edit",r,l),createBlockEditor(e,t,o,n,i,a,"styler",r,l,!0)},generateEditors=function(e,t,o,n,i){var a,r=e._defs,l=e.templateName,s=e._blocks,d=[];for(a=0;a<s.length;a++)"undefined"!=typeof s[a].container&&d.push(modelDef.generateModel(r,s[a].block)),createBlockEditors(r,t,void 0,o,s[a].root,s[a].block,n,i);return"undefined"!=typeof r.theme&&createBlockEditor(r,t,void 0,o,l,"theme","styler",n,void 0,!1,!1,-1),d};module.exports=generateEditors;

},{"./../../../bower_components/console-browserify/index.js":1,"./declarations.js":50,"./model.js":54,"./utils.js":57}],53:[function(require,module,exports){
"use strict";var modelDef=require("./model.js"),wrappedResultModel=function(e){var t=e._defs,o=e.templateName,a=modelDef.getDef(t,o),i=modelDef.generateResultModel(e),l=require("./wrapper.js"),n=l(i,a,t);return n},translateTemplate=function(){var e=require("./parser.js");return e.apply(e,arguments)},generateEditors=function(){var e=require("./editor.js");return e.apply(e,arguments)},checkModel=function(){var e=require("./checkmodel.js");return e.apply(e,arguments)};module.exports={translateTemplate:translateTemplate,wrappedResultModel:wrappedResultModel,generateResultModel:modelDef.generateResultModel,generateEditors:generateEditors,checkModel:checkModel};

},{"./checkmodel.js":49,"./editor.js":52,"./model.js":54,"./parser.js":55,"./wrapper.js":58}],54:[function(require,module,exports){
"use strict";var objExtend=require("./domutils.js").objExtend,console=require("./../../../bower_components/console-browserify/index.js"),_valueSet=function(e,t,o,n){var i=o.indexOf(".");if(-1==i)if("undefined"==typeof t[o])console.log("Undefined prop "+o+" while setting value "+n+" in model._valueSet");else if(null===t[o])"object"==typeof n&&null!==n&&"undefined"==typeof n.push&&console.log("nullpropobjectvalue",o,n),t[o]=n;else if("object"==typeof t[o]&&"function"==typeof t[o].push){var r;if("string"==typeof n){var a=n.match(/^\[(.*)\]$/);if(null===a)throw"Unexpected default value for array property "+o+": "+n;r=a[1].split(",")}else{if("object"!=typeof n||"undefined"==typeof n.push)throw"Unexpected default value for array property "+o+": "+n+" typeof "+typeof n;r=n}for(var l=[],s=0;s<r.length;s++)"@"==r[s].substr(0,1)?l.push(_generateModel(e,r[s].substr(1))):r[s].length>0&&l.push(r[s]);t[o]=l}else"string"==typeof t[o]||"boolean"==typeof t[o]?t[o]=n:"object"==typeof t[o]&&null!==t[o]&&"undefined"!=typeof t[o]._widget?("object"==typeof n&&null!==n&&console.log("objectvalue",o,t[o]._widget,n),t[o]=n):console.log("setting",typeof t[o],t[o],o,n);else{var d=o.substr(0,i);_valueSet(e,t[d],o.substr(i+1),n)}},_modelCreateOrUpdateBlockDef=function(e,t,o,n){if("undefined"!=typeof e[t]&&e[t]._initialized&&!e[t]._writeable)throw console.log("_modelCreateOrUpdateBlockDef",e,t,o,n),"Trying to alter non writeable model: "+t+" / "+o;if("undefined"==typeof e[t]&&(e[t]={_writeable:!0},"undefined"==typeof n&&(n={}),"undefined"==typeof n.category&&"undefined"==typeof e[t]._category&&(n.category=t.match(/(^t|.T)heme$/)||t.match(/(^s|.S)tyle$/)||t.match(/(^c|.C)olor$/)||t.match(/(^r|.R)adius$/)?"style":"content")),"undefined"!=typeof n){if("undefined"!=typeof n.name&&(e[t]._name=n.name),"undefined"!=typeof n.themeOverride&&(e[t]._themeOverride=n.themeOverride),"undefined"!=typeof n.globalStyle){e[t]._globalStyle=n.globalStyle;var i=n.globalStyle.replace(/^(\$theme|_theme_)\./,""),r=i.indexOf("."),a=-1!=r?i.substr(0,r):i;_modelCreateOrUpdateBlockDef(e,"theme",a),("undefined"==typeof e[t]._themeOverride||e[t]._themeOverride)&&_modelCreateOrUpdateBlockDef(e,t,"customStyle=false")}"undefined"!=typeof n.contextName&&(e[t]._context=n.contextName,"block"==n.contextName&&"undefined"==typeof e[t]._globalStyle&&(e[t]._globalStyle="_theme_.bodyTheme",_modelCreateOrUpdateBlockDef(e,"theme","bodyTheme"),("undefined"==typeof e[t]._themeOverride||e[t]._themeOverride)&&_modelCreateOrUpdateBlockDef(e,t,"customStyle=false"))),"undefined"!=typeof n.extend&&(e[t].type=n.extend)}for(var l in n)n.hasOwnProperty(l)&&"undefined"!=typeof n[l]&&-1==["name","extend","contextName","globalStyle","themeOverride"].indexOf(l)&&(e[t]["_"+l]=n[l]);"undefined"!=typeof o&&o.length>0&&(e[t]._props="undefined"!=typeof e[t]._props&&e[t]._props.length>0?e[t]._props+" "+o:o)},_removePrefix=function(e){var t=e.match(/^[^A-Z]+([A-Z])(.*)$/);return null!==t?t[1].toLowerCase()+t[2]:null},_generateModelFromDef=function(e,t){var o={};for(var n in e)if(!n.match(/^_.*/)&&e.hasOwnProperty(n)){var i=e[n];if("object"==typeof i&&null!==i&&"undefined"!=typeof i._complex&&i._complex)o[n]=_generateModelFromDef(i,t);else if("type"==n)o[n]=i;else{if("object"!=typeof i)throw console.error("Unexpected model def",n,i,e),"Unexpected model def ["+n+"]="+i;o[n]=null}}if("undefined"!=typeof e._defaultValues){var r=e._defaultValues;for(var a in r)r.hasOwnProperty(a)&&_valueSet(t,o,a,r[a])}return o},_generateModel=function(e,t){var o=_getModelDef(e,t,!1,!0);return _generateModelFromDef(o,e)},_getDef=function(e,t){return _getModelDef(e,t,!1,!0)},_getModelDef=function(e,t,o,n){if("undefined"==typeof e[t]){if(-1!=t.indexOf(" "))return null;var i=_removePrefix(t);return null!==i?_getModelDef(e,i,o,n):null}var r=e[t];if("object"!=typeof r)throw"Block definition must be an object: found "+r+" for "+t;if("undefined"==typeof r._initialized){if("undefined"==typeof r.type&&(r.type=-1==t.indexOf(" ")?t:t.substr(t.indexOf(" ")+1)),r.type!=t&&"undefined"==typeof r._widget){var a=_getModelDef(e,r.type,!0),l=objExtend(a,r);r=l,e[t]=r}else"undefined"==typeof r._widget&&"undefined"==typeof r._props&&"undefined"==typeof r._complex;r._writeable=!0,r._initialized=!0}if("undefined"!=typeof r._props){var s=r._props;if(s=s.split(" "),s.length>0&&"undefined"==typeof r._writeable)throw console.error("Altering a non writable object ",t,s,r),"Altering a non writable object: "+t+" def: "+s;"undefined"==typeof r._processedDefs&&(r._processedDefs={}),"undefined"==typeof r._globalStyles&&(r._globalStyles={}),"undefined"==typeof r._defaultValues&&(r._defaultValues={});for(var d=0;d<s.length;d++){var u=s[d];if(0!==u.length){var c=u,f=null,p=u.match(/^([^=\[\]]+)(\[\])?(=?)(.*)$/);if(null!==p&&(u=p[1],"[]"==p[2]&&("undefined"==typeof r[u]&&(r[u]=[]),f=[]),"="==p[3]&&(f=u.match(/(^v|V)isible$/)?"true"==String(p[4]).toLowerCase():u.match(/^customStyle$/)?"true"==String(p[4]).toLowerCase():p[4])),null!==f&&"undefined"==typeof r._defaultValues[u]&&(r._defaultValues[u]=f),"undefined"==typeof r[u]){var b=_getModelDef(e,t+" "+u,!0);null===b&&(b=_getModelDef(e,u,!0)),r[u]=b}r._processedDefs[u]=c,r._complex=!0}}delete r._props}if(o){r._writeable=!1;var m=objExtend({},r);return m}if(n)return r._writeable=!1,r;if("undefined"==typeof r._writeable||r._writeable===!1)throw"Retrieving non writeable object definition: "+t;return r},_increaseUseCount=function(e,t){if(e){if("undefined"==typeof t._usecount)throw console.error("ERROR trying to bind an unused property while readonly",t),"ERROR trying to bind an unused property"}else"undefined"==typeof t._usecount&&(t._usecount=0),t._usecount++},ensureGlobalStyle=function(e,t,o,n,i,r,a,l){var s=o(r,a,l);if("undefined"==typeof e[n]._globalStyles[i]){if(t)throw"Cannot find _globalStyle for "+i+" in "+n+"!";(-1!=i.indexOf(".")||"object"==typeof e[n][i]&&"undefined"!=typeof e[n][i]._widget)&&(e[n]._globalStyles[i]=s)}else if(e[n]._globalStyles[i]!=s)throw"Unexpected conflicting globalStyle [2] for "+n+"/"+i+": old="+e[n]._globalStyles[i]+" new="+s},modelEnsurePathAndGetBindValue=function(e,t,o,n,i,r,a,l,s,d){var u,c,f;if("$"==a.substr(0,1)){console.warn("DEPRECATED $ in bindingProvider: ",a,i);var p=a.indexOf(".");if(-1==p)throw"Unexpected fullPath: "+a+"/"+r+"/"+i+"/"+l+"/"+s;if(u=a.substr(1,p-1),f=a.substr(p+1),"theme"!=u)throw"Unexpected $ sequence: "+u+" in "+a;var b=f.indexOf(".");u=f.substr(0,b),f=f.substr(b+1),c="$root.content().theme()."+u+"()."+f.replace(new RegExp("\\.","g"),"().")}else if("#"==a.substr(0,1))console.warn("DEPRECATED # in bindingProvider: ",a,i),u=n,f=a.substr(1),c="$root.content()."+f.replace(new RegExp("\\.","g"),"().");else if("_theme_."==a.substr(0,8)){var m=a.indexOf(".",8);u=a.substr(8,m-8),f=a.substr(m+1),c="$root.content().theme()."+u+"()."+f.replace(new RegExp("\\.","g"),"().")}else"_root_."==a.substr(0,7)?(u=n,f=a.substr(7),c="$root.content()."+f.replace(new RegExp("\\.","g"),"().")):(u=i,f=r+a,c=a.replace(new RegExp("\\.","g"),"()."));if("undefined"==typeof t[u])throw"Cannot find model def for ["+u+"]";var g=f.indexOf("."),h=-1==g?f:f.substr(0,g);if(-1!=u.indexOf("-"))throw console.error("ERROR cannot use - for block names",u),"ERROR unexpected char in block name: "+u;if(-1!=h.indexOf("-"))throw console.error("ERROR cannot use - for property names",h),"ERROR unexpected char in property name: "+u;if(e)return"undefined"!=typeof t[u]._globalStyle&&"undefined"!=typeof t[u][h]&&"style"==t[u][h]._category&&(c+="._defaultComputed"),c;var v;if(e){if("undefined"!=typeof l)throw"Cannot use defaultValue in readonly mode!";if(s)throw"Cannot use overrideDefault in readonly mode for "+u+"/"+f+"/"+s+"!";if("undefined"!=typeof d)throw"Cannot set category for "+u+"/"+f+"/"+d+" in readonly mode!";v=_getModelDef(t,u,!1,!0)}else t[u]._writeable===!1&&console.log("TODO debug use cases for this condition",u,f),v=_getModelDef(t,u,t[u]._writeable===!1);if(null===v)throw"Unexpected model for ["+u+"]";if("undefined"==typeof v[h]){if(e)throw"Cannot find path "+h+" for "+u+"!";_modelCreateOrUpdateBlockDef(t,u,h),v=_getModelDef(t,u,!1)}"undefined"!=typeof t[u]._globalStyle&&"undefined"!=typeof t[u][h]&&null!==t[u][h]&&"style"==t[u][h]._category&&(c+="._defaultComputed");var y=v;try{if(_increaseUseCount(e,y),-1!=g){var k=f;do{var w=k.substr(0,g);if("undefined"==typeof y[w])throw"Found an unexpected prop "+w+" for model "+u+" for "+f;y=y[w],_increaseUseCount(e,y),k=k.substr(g+1),g=k.indexOf(".")}while(-1!=g);if("undefined"==typeof y[k]||null===y[k])throw"Found an unexpected path termination "+k+" for model "+u+" for "+f;y=y[k]}else y=y[f];if("undefined"==typeof y||null===y)throw"Unexpected null model for "+u+"/"+r+"/"+a;"undefined"!=typeof d&&(y._category=d),_increaseUseCount(e,y)}catch(x){throw console.error("TODO ERROR Property lookup exception",x,u,f,i,a,t),x}if("undefined"!=typeof t[u]._globalStyle&&"object"==typeof t[u][h]&&null!==t[u][h]&&"undefined"!=typeof t[u][h]._category&&"style"==t[u][h]._category){var _=modelEnsurePathAndGetBindValue.bind(void 0,e,t,o,n,i,""),$=-1!=f.indexOf(".")?f.substr(f.indexOf(".")):"";if(-1!=$.indexOf(".",1))throw"TODO unsupported object nesting! "+f;var C=t[u]._globalStyle+"."+h;"object"==typeof t[u][h]&&null!==t[u][h]&&"undefined"!=typeof t[u][h]._globalStyle&&(C=t[u][h]._globalStyle),ensureGlobalStyle(t,e,_,u,h,C,void 0,!1);var S=C+$;if("undefined"==typeof l&&null!==t[u]._defaultValues[f]&&(l=t[u]._defaultValues[f]),ensureGlobalStyle(t,e,_,u,f,S,l,s),"undefined"!=typeof l){if(e)throw console.error("Cannot set a new theme default value",S.substr(7),l,"while in readonly mode"),"Cannot set a new theme default value ("+l+") for "+S.substr(7)+" while in readonly mode!";o("default",S.substr(7),l)}l=null}if("undefined"!=typeof l)if("undefined"==typeof t[u]._defaultValues[f]||"undefined"!=typeof s&&s){if(e)throw"Cannot set new _defaultValues [1] for "+f+" in "+u+"!";t[u]._defaultValues[f]=l}else if(null===l){if(e&&null!==t[u]._defaultValues[f])throw"Cannot set new _defaultValues [2] for "+f+" in "+u+"!";t[u]._defaultValues[f]=null}else if(t[u]._defaultValues[f]!=l)throw console.error("TODO error!!! Trying to set a new default value for "+u+" "+f+" while it already exists (current: "+t[u]._defaultValues[f]+", new: "+l+")"),"Trying to set a new default value for "+u+" "+f+" while it already exists (current: "+t[u].defaultValues[f]+", new: "+l+")";return c},generateResultModel=function(e){var t=e._defs,o=e.templateName,n=_generateModel(t,o);return"undefined"!=typeof t.theme&&(n.theme=_generateModel(t,"theme")),n};module.exports={ensurePathAndGetBindValue:modelEnsurePathAndGetBindValue.bind(void 0,!1),getBindValue:modelEnsurePathAndGetBindValue.bind(void 0,!0),generateModel:_generateModel,generateResultModel:generateResultModel,getDef:_getDef,createOrUpdateBlockDef:_modelCreateOrUpdateBlockDef};

},{"./../../../bower_components/console-browserify/index.js":1,"./domutils.js":51}],55:[function(require,module,exports){
(function (global){
"use strict";function conditional_replace(e){return e.replace(/<!--\[if ([^\]]*)\]>((?:(?!--)[\s\S])*?)<!\[endif\]-->/g,function(e,t,o){var n="<!-- cc:start -->";n+=o.replace(/<([A-Za-z:]+)/g,"<!-- cc:bo:$1 --><cc").replace(/<\/([A-Za-z:]+)>/g,"<!-- cc:bc:$1 --></cc><!-- cc:ac:$1 -->").replace(/\/>/g,"/><!-- cc:sc -->"),n+="<!-- cc:end -->";var i='<replacedcc condition="'+t+'" style="display: none">';return i+=$("<div>").append($(n)).html().replace(/^<!-- cc:start -->/,"").replace(/<!-- cc:end -->$/,""),i+="</replacedcc>"})}var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),console=require("./../../../bower_components/console-browserify/index.js"),converterUtils=require("./utils.js"),elaborateDeclarations=require("./declarations.js"),processStylesheetRules=require("./stylesheet.js"),modelDef=require("./model.js"),domutils=require("./domutils.js"),wrapElementWithCondition=function(e,t,o){var n=domutils.getAttribute(t,e);try{var i=converterUtils.conditionBinding(n,o);$(t).before("<!-- ko if: "+i+" -->"),$(t).after("<!-- /ko -->"),domutils.removeAttribute(t,e)}catch(r){throw console.warn("Model ensure path failed in if/variant",t,n,e),r}},replacedAttributes=function(e,t){domutils.setAttribute(e,t,domutils.getAttribute(e,"replaced"+t))},processStyle=function(e,t,o,n){var i,r=domutils.getAttribute(e,"replacedstyle"),a=null;n&&(i={uniqueId:"$data",attr:{id:"id"}});var l=null!==domutils.getAttribute(e,"data-ko-display");a=elaborateDeclarations(r,void 0,t,o,e,i,l),null===a?a=r:domutils.removeAttribute(e,"replacedstyle"),null!==a&&(a.trim().length>0?domutils.setAttribute(e,"style",a):domutils.removeAttribute(e,"style"))},_fixRelativePath=function(e,t,o,n){var i=domutils.getAttribute(n,e),r=t(i);null!==r&&domutils.setAttribute(n,e,r)},processBlock=function(e,t,o,n,i,r,a,l,s,d){try{var u;if("block"==r)u=domutils.getAttribute(e,"data-ko-block"),domutils.removeAttribute(e,"data-ko-block");else{if("template"!=r)throw"Unexpected context name while processing block: "+r;u=a}$("[data-ko-remove]",e).remove();for(var c=$("[data-ko-block]",e).replaceWith("<replacedblock>"),p=["href","src","data-ko-placeholder-src","background"],f=0;f<p.length;f++){var b=_fixRelativePath.bind(void 0,p[f],i);$("["+p[f]+"]",e).each(b)}var m=domutils.getAttribute(e,"data-ko-properties");null===m&&(m=""),$("[data-ko-properties]",e).each(function(e,t){m.length>0&&(m+=" "),m+=domutils.getAttribute(t,"data-ko-properties"),domutils.removeAttribute(t,"data-ko-properties")}),modelDef.createOrUpdateBlockDef(t,u,m,{contextName:r});var g=modelDef.ensurePathAndGetBindValue.bind(void 0,t,o,a,u,"");"block"==r&&g("id",""),$("style",e).each(function(e,n){var r=domutils.getInnerHtml(n),l=modelDef.createOrUpdateBlockDef.bind(void 0,t),s=modelDef.ensurePathAndGetBindValue.bind(void 0,t,o,a),c=processStylesheetRules(r,void 0,s,l,o,i,a,u);if(c!=r)if(""!==c.trim()){var p=d(c);domutils.setAttribute(n,"data-bind","template: { name: '"+p+"' }"),domutils.setContent(n,"")}else domutils.removeElements($(n))}),processStyle(e,i,g,s);for(var h=["data-ko-display","data-ko-editable","data-ko-wrap","href"],v=0;v<h.length;v++){var y=domutils.getAttribute(e,h[v]);if(y)throw console.warn("ERROR: Unsupported "+h[v]+" used together with data-ko-block",e),"ERROR: Unsupported "+h[v]+" used together with data-ko-block"}return $("[data-ko-link]",e).each(function(e,t){var o=domutils.getAttribute(t,"data-ko-link"),n=domutils.getAttribute(t,"replacedstyle");("undefined"==typeof n||null===n)&&(n=""),n=""!==n?"-ko-attr-href: @"+o+"; "+n:"-ko-attr-href: @"+o,domutils.setAttribute(t,"replacedstyle",n),domutils.setAttribute(t,"data-ko-wrap",o),domutils.removeAttribute(t,"data-ko-link")}),$("[replacedstyle]",e).each(function(e,t){processStyle(t,i,g,!1)}),$("[replacedhttp-equiv]",e).each(function(e,t){replacedAttributes(t,"http-equiv")}),$("[data-ko-display]",e).each(function(e,t){wrapElementWithCondition("data-ko-display",t,g)}),$("[data-ko-editable]",e).each(function(e,t){var o,n,i,r,a,l,s=domutils.getAttribute(t,"data-ko-editable");if(s.lastIndexOf(".")>0){var u=s.substr(0,s.lastIndexOf("."));a=g(u)}else a=g(s);if(l="wysiwygClick: function(obj, evt) { $root.selectItem("+a+", $data); return false }, clickBubble: false, wysiwygCss: { selecteditem: $root.isSelectedItem("+a+") }, scrollIntoView: $root.isSelectedItem("+a+")","img"!=domutils.getLowerTagName(t)){n=domutils.getInnerHtml(t);var c=g(s,n,!0,"wysiwyg");if(o="",domutils.getAttribute(t,"id")||(o+="wysiwygId: id()+'_"+s.replace(".","_")+"', "),"undefined"!=typeof l&&(o+=l+", "),o+="wysiwygOrHtml: "+c,"td"==domutils.getLowerTagName(t)){var p=$('<div data-ko-wrap="false" style="width: 100%; height: 100%"></div>')[0];domutils.setAttribute(p,"data-bind",o);var f=domutils.getInnerHtml($("<div></div>").append(p));domutils.setContent(t,f)}else i=domutils.getAttribute(t,"data-bind"),r=(null!==i?i+", ":"")+o,domutils.setAttribute(t,"data-bind",r),domutils.setContent(t,"");domutils.removeAttribute(t,"data-ko-editable")}else{var b=domutils.getAttribute(t,"width");if(""===b&&(b=null),null===b)throw console.error("ERROR: data-ko-editable images must declare a WIDTH attribute!",t),"ERROR: data-ko-editable images must declare a WIDTH attribute!";var m=domutils.getAttribute(t,"height");""===m&&(m=null);var h=domutils.getAttribute(t,"align");i=domutils.getAttribute(t,"data-bind");var v=i&&i.match(/virtualAttr: {[^}]* height: ([^,}]*)[,}]/);v&&(m=v[1]);var y=i&&i.match(/virtualAttr: {[^}]* width: ([^,}]*)[,}]/);y&&(b=y[1]);var k;n=domutils.getAttribute(t,"data-ko-placeholder-src");var w="";n?w=domutils.getAttribute(t,"src"):n=domutils.getAttribute(t,"src");var x;b&&m?x=b+"+'x'+"+m:m?b||(x="'h'+"+m+"+''"):x="'w'+"+b+"+''";var _,O=m||domutils.getAttribute(t,"data-ko-placeholder-height"),C=b||domutils.getAttribute(t,"data-ko-placeholder-width");if(domutils.removeAttribute(t,"src"),domutils.removeAttribute(t,"data-ko-editable"),domutils.removeAttribute(t,"data-ko-placeholder-height"),domutils.removeAttribute(t,"data-ko-placeholder-width"),domutils.removeAttribute(t,"data-ko-placeholder-src"),n&&(_="{ width: "+C+", height: "+O+", text: "+x+"}"),!C||!O)throw console.error("IMG data-ko-editable must declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height",t),"ERROR: IMG data-ko-editable MUST declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height";var S=g(s,w,!1,"wysiwyg");o="wysiwygSrc: { width: "+b+", height: "+m+", src: "+S+", placeholder: "+_+" }",r=(null!==i?i+", ":"")+o,domutils.setAttribute(t,"data-bind",r);var T=d(t),A="{ width: "+b;"left"==h?A+=", float: 'left'":"right"==h?A+=", float: 'right'":"center"==h?console.log("non so cosa fa align=center su una img e quindi non so come simularne l'editing"):"top"==h?A+=", verticalAlign: 'top'":"middle"==h?A+=", verticalAlign: 'middle'":"bottom"==h&&(A+=", verticalAlign: 'bottom'"),A+="}",$(t).before("<!-- ko wysiwygImg: { _data: $data, _item: "+a+", _template: '"+T+"', _editTemplate: 'img-wysiwyg', _src: "+S+", _width: "+b+", _height: "+m+", _align: "+(null===h?void 0:"'"+h+"'")+", _size: "+x+", _method: "+k+", _placeholdersrc: "+_+", _stylebind: "+A+" } -->"),$(t).after("<!-- /ko -->")}}),$("[href]",e).each(function(e,t){var o=domutils.getAttribute(t,"href"),n="wysiwygHref: '"+converterUtils.addSlashes(o)+"'",i=domutils.getAttribute(t,"data-bind"),r=(null!==i?i+", ":"")+n;domutils.setAttribute(t,"data-bind",r)}),$("replacedblock",e).each(function(e,r){var s=c[e],p=processBlock(s,t,o,n,i,"block",u,l,!0,d),f=modelDef.ensurePathAndGetBindValue(t,o,a,u,"",p);$(r).before("<!-- ko block: { data: "+converterUtils.addSlashes(f)+", template: 'block' } -->"),$(r).after("<!-- /ko -->"),$(r).remove()}),$($("[data-ko-wrap]",e).get().reverse(),e).each(function(e,t){var o=domutils.getAttribute(t,"data-ko-wrap");if("undefined"==typeof o||""===o||"true"===o)throw"Unsupported empty value for data-ko-wrap: use false value if you want to always remove the tag";var n,i,r=converterUtils.conditionBinding(o,g),a=domutils.getAttribute(t,"data-bind");if(""!==a&&null!==a&&a.match(/(block|wysiwygOrHtml):/)){var l="<!-- ko "+a+" -->"+domutils.getInnerHtml(t)+"<!-- /ko -->";n=d(l),domutils.removeAttribute(t,"data-ko-wrap"),i=d(t),domutils.replaceHtml(t,"<!-- ko template: /* special */ (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+r+" ? '"+i+"' : '"+n+"' --><!-- /ko -->")}else n=d(domutils.getInnerHtml(t)),domutils.removeAttribute(t,"data-ko-wrap"),domutils.setContent(t,"<!-- ko template: '"+n+"' --><!-- /ko -->"),i=d(t),domutils.replaceHtml(t,"<!-- ko template: (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+r+" ? '"+i+"' : '"+n+"' --><!-- /ko -->")}),d(e,u,"show"),n(a,u,r,l),u}catch(k){throw console.error("Exception while parsing the template",k,e),k}},translateTemplate=function(e,t,o,n){var i={},r=conditional_replace(t.replace(/(<[^>]+\s)(style|http-equiv)(="[^"]*"[^>]*>)/gi,function(e,t,o,n){return t+"replaced"+o+n})),a=$(r),l=a[0],s=[],d=function(e,t,o,n){s.push({root:e,block:t,context:o,container:n})},u=function(e,t,o){if("undefined"==typeof i.themes&&(i.themes={}),"undefined"==typeof i.themes[e]&&(i.themes[e]={}),"undefined"==typeof i.themes[e][t]||null===i.themes[e][t])i.themes[e][t]=o;else if("undefined"!=typeof o&&null!==o){var n=i.themes[e][t];n!=o&&console.log("Error setting a new default for property "+t+" in theme "+e+". old:"+n+" new:"+o+"!")}},c=$("[data-ko-container]",a),p={};c.each(function(e,t){var o=domutils.getAttribute(t,"data-ko-container")+"Blocks";domutils.removeAttribute(t,"data-ko-container"),domutils.setAttribute(t,"data-bind","block: "+o);var n=$("> [data-ko-block]",t);domutils.removeElements(n,!0),p[o]=n}),modelDef.createOrUpdateBlockDef(i,"id"),modelDef.createOrUpdateBlockDef(i,"bodyTheme"),modelDef.createOrUpdateBlockDef(i,"blocks","blocks[]"),modelDef.createOrUpdateBlockDef(i,"text"),processBlock(l,i,u,d,o,"template",e,void 0,!1,n);var f=function(t,r,a){processBlock(a,i,u,d,o,"block",e,t,!0,n)};for(var b in p)if(p.hasOwnProperty(b)){var m=p[b],g=b;modelDef.ensurePathAndGetBindValue(i,u,e,e,"",g+".blocks","[]"),m.each(f.bind(void 0,g))}var h={_defs:i,templateName:e,_blocks:s};return"undefined"!=typeof i[e]._version&&(h.version=i[e]._version),h};module.exports=translateTemplate;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./declarations.js":50,"./domutils.js":51,"./model.js":54,"./stylesheet.js":56,"./utils.js":57}],56:[function(require,module,exports){
"use strict";var cssParse=require("./../../../bower_components/mensch/lib/parser.js"),console=require("./../../../bower_components/console-browserify/index.js"),converterUtils=require("./utils.js"),elaborateDeclarations=require("./declarations.js"),_processStyleSheetRules_processBlockDef=function(e,t){for(var o,n,i,r=0;r<t.length;r++)if("rule"==t[r].type){for(var a=t[r].selectors,l=!1,s=!1,d=0;d<a.length;d++)a[d].match(/:preview$/)?s=!0:l=!0;if(s&&l)throw console.log("cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs ",a),"Cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs";if(!s&&!l)throw console.log("cannot find known selectors in @supports -ko-blockdefs ",a),"Cannot find known selectors in @supports -ko-blockdefs";if(l){o="",n={},i=t[r].declarations;for(var u=0;u<i.length;u++)"property"==i[u].type&&("label"==i[u].name?n.name=i[u].value:"context"==i[u].name?n.contextName=i[u].value:"properties"==i[u].name?o=i[u].value:"theme"==i[u].name?n.globalStyle="_theme_."+i[u].value:"themeOverride"==i[u].name?n.themeOverride="true"==String(i[u].value).toLowerCase():n[i[u].name]=i[u].value);for(var c=0;c<a.length;c++)e(a[c],o,n)}if(s)for(var f=0;f<a.length;f++){var p=a[f].substr(0,a[f].indexOf(":")),b=t[r].declarations;e(p,void 0,{previewBindings:b})}}},processStylesheetRules=function(e,t,o,n,i,r,a,l){var s=e,d=null;if("undefined"==typeof t){var u=cssParse(e,{comments:!0,position:!0});if("stylesheet"!=u.type||"undefined"==typeof u.stylesheet)throw console.log("unable to process styleSheet",u),"Unable to parse stylesheet";t=u.stylesheet.rules}for(var c,f=t.length-1;f>=0;f--){if("supports"==t[f].type&&"-ko-blockdefs"==t[f].name)_processStyleSheetRules_processBlockDef(n,t[f].rules),s=converterUtils.removeStyle(s,t[f].position.start,d,0,0,0,"");else if("media"==t[f].type||"supports"==t[f].type)s=processStylesheetRules(s,t[f].rules,o,n,i,r,a,l);else if("comment"==t[f].type);else if("rule"==t[f].type){for(var p=t[f].selectors,b="",m=null,g=0;g<p.length;g++){b.length>0&&(b+=", ");var h=p[g].match(/\[data-ko-block=([^ ]*)\]/);if(null!==h){if(null!==m&&m!=h[1])throw"Found multiple block-match attribute selectors: cannot translate it ("+m+" vs "+h[1]+")";m=h[1]}b+="<!-- ko text: templateMode =='wysiwyg' ? '#main-wysiwyg-area ' : '' --><!-- /ko -->"+p[g]}if(m){var v="<!-- ko foreach: $root.findObjectsOfType($data, '"+m+"') -->",y="<!-- /ko -->",k=d,w=" ";t[f].declarations.length>0&&(t[f].declarations[0].position.start.line!=t[f].position.end.line&&(w="\n"+new Array(t[f].position.start.col).join(" ")),k=t[f].declarations[t[f].declarations.length-1].position.end),null===k?s+=w+y:s=k==d?converterUtils.removeStyle(s,k,d,0,0,0,w+y):converterUtils.removeStyle(s,k,d,0,0,0,w+"}"+w+y),b=v+w+b.replace(new RegExp("\\[data-ko-block="+m+"\\]","g"),"<!-- ko text: '#'+id() -->"+m+"<!-- /ko -->"),n(m,"",{contextName:"block"})}var _=m?m:l;c=o.bind(this,_,"");var x=elaborateDeclarations(s,t[f].declarations,r,c);null!==x&&(s=x),s=converterUtils.removeStyle(s,t[f].position.start,t[f].position.end,0,0,0,b)}else console.log("Unknown rule type",t[f].type,"while parsing <style> rules");d=t[f].position.start}return s};module.exports=processStylesheetRules;

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/mensch/lib/parser.js":15,"./declarations.js":50,"./utils.js":57}],57:[function(require,module,exports){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),jsep=require("./../../../bower_components/jsep/src/jsep.js");jsep.addBinaryOp("or",1),jsep.addBinaryOp("and",2),jsep.addBinaryOp("eq",6),jsep.addBinaryOp("neq",6),jsep.addBinaryOp("lt",7),jsep.addBinaryOp("lte",7),jsep.addBinaryOp("gt",7),jsep.addBinaryOp("gte",7);var addSlashes=function(e){return e.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},removeStyle=function(e,t,o,n,i,r,a){for(var l=e.split("\n"),s=i,d=r,u=1+n;u<t.line;u++)s+=l[u-1-n].length+1;if(s+=t.col,null!==o){for(var c=1+n;c<o.line;c++)d+=l[c-1-n].length+1;d+=o.col}else d+=e.length+1;var f=e.substr(0,s-1)+a+e.substr(d-1);return f},expressionGenerator=function(e,t,o){function n(e){switch(e){case"or":return"||";case"and":return"&&";case"lt":return"<";case"lte":return"<=";case"gt":return">";case"gte":return">=";case"eq":return"==";case"neq":return"!=";default:return e}}function i(e,t,o,r){if("undefined"==typeof o&&(o=!0),"undefined"!=typeof r&&"Identifier"!==e.type&&"MemberExpression"!==e.type&&console.log("Cannot apply default value to variable when using expressions"),"BinaryExpression"===e.type||"LogicalExpression"===e.type)return"("+i(e.left,t,o)+" "+n(e.operator)+" "+i(e.right,t,o)+")";if("CallExpression"===e.type){var a=e.arguments.map(function(e){return i(e,t,o)});return i(e.callee,t,o)+"("+a.join(", ")+")"}if("UnaryExpression"===e.type)return e.operator+i(e.argument,t,o);if("MemberExpression"==e.type&&e.computed)throw"Unexpected computed member expression";if("MemberExpression"!=e.type||e.computed){if("Literal"===e.type)return e.raw;if("Identifier"===e.type){var l=e.name;return o?t(l,r)+"()":l}if("ConditionalExpression"===e.type)return"("+i(e.test,t,o)+" ? "+i(e.consequent,t,o)+" : "+i(e.alternate,t,o)+")";throw"Compound"===e.type?"Syntax error in expression: operator expected after "+i(e.body[0],t,!1):"Found an unsupported expression type: "+e.type}var s=i(e.object,t,!1)+"."+i(e.property,t,!1);return o&&"Math"!==e.object.name&&"Color"!==e.object.name?t(s,r)+"()":s}return i(e,t,void 0,o)},expressionBinding=function(e,t,o){var n;if("undefined"!=typeof o&&null!==o){var i=e.trim().replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b/g,"###var###");if(i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"###var###"==i)n=[null,o];else if(i="^"+i.replace(/###var###/g,"(.+)")+"$",n=o.trim().match(new RegExp(i)),!n)throw console.log("Cannot find matches",n,"for",o,e,i,e),"Cannot find default value for "+e+" in "+o}try{var r=0,a="'"+e.replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b|(')/g,function(e,o,i,a){if(a)return"\\"+a;r++;var l,s=o||i;if(n&&("undefined"!=typeof n[r]?l=n[r].trim():console.log("ABZZZ Cannot find default value for",s,"in",n,"as",r)),o){var d=jsep(o),u=expressionGenerator(d,t,l);return"'+"+u+"+'"}return"'+"+t(s,l)+"()+'"})+"'";return a=a.replace(/(^|[^\\])''\+/g,"$1").replace(/\+''/g,""),0===r&&"false"!==a&&"true"!==a&&console.error("Unexpected expression with no valid @variable references",e),a}catch(l){throw"Exception parsing expression "+e+" "+l}},conditionBinding=function(e,t){var o=jsep(e),n=expressionGenerator(o,t);return n};module.exports={addSlashes:addSlashes,removeStyle:removeStyle,conditionBinding:conditionBinding,expressionBinding:expressionBinding};

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/jsep/src/jsep.js":3}],58:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),kowrap=require("./../../../bower_components/knockout.wrap/knockout.wrap.js"),console=require("./../../../bower_components/console-browserify/index.js"),_getOptionsObject=function(e){for(var t=e.split("|"),o={},n=0;n<t.length;n++){var i=t[n].split("=");o[i[0]]=i.length>1?i[1]:i[0]}return o},_makeComputed=function(e,t,o,n,i,r){var a=ko.computed({read:function(){var o=e();if(null===o){var a=ko.utils.unwrapObservable(n);return"undefined"==typeof a||"custom"==a?ko.utils.unwrapObservable(t):r[a][i]}return o},write:function(a){var l,s=ko.utils.unwrapObservable(n);if(l="undefined"==typeof s||"custom"==s?ko.utils.peekObservable(t):r[s][i],o)a==l?e(null):e(a);else{var d=ko.utils.peekObservable(e);(a!=l||null!==d)&&e(a)}}});return a},_nextVariantFunction=function(e,t,o){for(var n,i=e.utils.unwrapObservable(t),r=0;r<o.length&&(n=e.utils.peekObservable(o[r]),n!=i);r++);r==o.length&&(console.warn("Didn't find a variant!",t,i,o),r=o.length-1);var a=r+1;a==o.length&&(a=0);var l=e.utils.peekObservable(o[a]);t(l)},_getVariants=function(e){var t,o=e._variant;if("object"!=typeof e[o]||"undefined"==typeof e[o]._widget||"string"!=typeof e[o]._options&&"boolean"!==e[o]._widget)throw console.error("Unexpected variant declaration",o,e[o]),"Unexpected variant declaration: cannot find property "+o+" or its _options string and it is not a boolean";return t="string"==typeof e[o]._options?Object.keys(_getOptionsObject(e[o]._options)):[!0,!1]},_makeComputedFunction=function(e,t,o,n,i,r,a){if("undefined"==typeof e){if("undefined"==typeof n.utils.unwrapObservable(a).type)throw console.log("TODO ERROR Found a non-typed def ",e,a),"Found a non-typed def "+e;var l=n.utils.unwrapObservable(n.utils.unwrapObservable(a).type);e=t[l],"object"!=typeof e&&console.log("TODO ERROR Found a non-object def ",e,"for",l)}"undefined"==typeof i&&"undefined"!=typeof r&&r&&(i=a);var s="$root.content().",d=e._globalStyles;if("undefined"!=typeof d)for(var u in d)if(d.hasOwnProperty(u)){var c,f,p,b="$root.content().theme().scheme";if(d[u].substr(0,s.length)!=s)throw"UNEXPECTED globalStyle path ("+d[u]+") outside selfPath ("+s+")";p=d[u].substr(s.length),f=i,b.substr(0,s.length)==s?c=b.substr(s.length):(console.log("IS THIS CORRECT?",b,s),c=b);for(var m=f,g=p.split("()."),h="",v=!0,y=0;y<g.length;y++)f=n.utils.unwrapObservable(f)[g[y]],v?"theme"==g[y]&&(v=!1):(h.length>0&&(h+="."),h+=g[y]);for(var k=c.split("()."),w=0;w<k.length;w++)m=n.utils.unwrapObservable(m)[k[w]];for(var x=!0,_=u.split("."),$=a,O=0;O<_.length;O++)$=n.utils.unwrapObservable($)[_[O]];if(!n.isObservable($))throw"Unexpected non observable target "+u+"/"+h;$._defaultComputed=_makeComputed($,f,x,m,h,o)}if("undefined"!=typeof e._variant){for(var C=e._variant.split("."),S=a,T=n.utils.unwrapObservable(a),E=0;E<C.length;E++)S=n.utils.unwrapObservable(S)[C[E]];if("undefined"!=typeof S._defaultComputed&&(console.log("Found variant on a style property: beware variants should be only used on content properties because they don't match the theme fallback behaviour",e._variant),S=S._defaultComputed),"undefined"==typeof S)throw console.log("ERROR looking for variant target",e._variant,a),"ERROR looking for variant target "+e._variant;T._nextVariant=_nextVariantFunction.bind(S,n,S,_getVariants(e))}for(var M in e)if(e.hasOwnProperty(M)){var D=e[M];if("object"==typeof D&&null!==D&&"undefined"!=typeof D._context&&"block"==D._context){var H=i[M](),A=_makeComputedFunction(t[M],t,o,n,i,r,H);a[M](A)}else if("object"==typeof D&&null!==D&&"blocks"==D.type){for(var q,j,P,B=i[M](),I=B.blocks(),R=0;R<I.length;R++)q=n.utils.unwrapObservable(I[R]),j=n.utils.unwrapObservable(q.type),P=_makeComputedFunction(t[j],t,o,n,i,r,q),I[R](P);var F=B.blocks;_augmentBlocksObservable(F,_blockInstrumentFunction.bind(B,void 0,t,o,n,void 0,i,r)),i[M]._wrap=_makeBlocksWrap.bind(i[M],F._instrumentBlock),i[M]._unwrap=_unwrap.bind(i[M])}}return a},_augmentBlocksObservable=function(e,t){e._instrumentBlock=t,"undefined"==typeof e.origPush&&(e.origPush=e.push,e.push=_makePush.bind(e),e.origSplice=e.splice,e.splice=_makeSplice.bind(e))},_makeBlocksWrap=function(e,t){var o=ko.toJS(t),n=o.blocks;o.blocks=[];var i=kowrap.fromJS(o,void 0,!0)();_augmentBlocksObservable(i.blocks,e);for(var r=0;r<n.length;r++){var a=ko.toJS(n[r]);a.id="block_"+r,i.blocks.push(a)}this(i)},_makePush=function(){if(arguments.length>1)throw"Array push with multiple arguments not implemented";if(arguments.length>0&&ko.isObservable(arguments[0])&&("function"==typeof arguments[0]._unwrap?arguments[0]=arguments[0]._unwrap():console.log("WARN: pushing observable with no _unwrap function (TODO remove me, expected condition)")),ko.isObservable(arguments[0]))return this.origPush.apply(this,arguments);var e=this._instrumentBlock(arguments[0]);return this.origPush.apply(this,[e])},_makeSplice=function(){if(arguments.length>3)throw"Array splice with multiple objects not implemented";if(arguments.length>2&&ko.isObservable(arguments[2])&&("function"==typeof arguments[2]._unwrap?arguments[2]=arguments[2]._unwrap():console.log("WARN: splicing observable with no _unwrap function (TODO remove me, expected condition)")),arguments.length>2&&!ko.isObservable(arguments[2])){var e=this._instrumentBlock(arguments[2]);return this.origSplice.apply(this,[arguments[0],arguments[1],e])}return this.origSplice.apply(this,arguments)},_blockInstrumentFunction=function(e,t,o,n,i,r,a,l){"undefined"==typeof i&&(i=l);var s;s={"":_makeComputedFunction.bind(i,e,t,o,n,r,a)};var d=kowrap.fromJS(i,s,!0);return d._unwrap=_unwrap.bind(d),d},_wrap=function(e,t){var o=ko.utils.unwrapObservable(e(ko,t,void 0,!0));this(o)},_unwrap=function(){return ko.toJS(this)},_modelInstrument=function(e,t,o){var n=_blockInstrumentFunction.bind(void 0,t,o,o.themes),i=n(ko,e,void 0,!0);return i._wrap=_wrap.bind(i,n),i._unwrap=_unwrap.bind(i),i};module.exports=_modelInstrument;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/knockout.wrap/knockout.wrap.js":10}],59:[function(require,module,exports){
(function (global){
function Color(e){this.getBrightness=function(t){return e(t).getBrightness()},this.isLight=function(t){return e(t).isLight()},this.isDark=function(t){return e(t).isDark()},this.getLuminance=function(t){return e(t).getLuminance()},this.lighten=function(t,o){return e(t).lighten(o).toHexString()},this.brighten=function(t,o){return e(t).brighten(o).toHexString()},this.darken=function(t,o){return e(t).darken(o).toHexString()},this.desaturate=function(t,o){return e(t).desaturate(o).toHexString()},this.saturate=function(t,o){return e(t).saturate(o).toHexString()},this.greyscale=function(t){return e(t).greyscale().toHexString()},this.spin=function(t,o){return e(t).spin(o).toHexString()},this.complement=function(t){return e(t).complement().toHexString()},this.mix=e.mix,this.readability=e.readability,this.isReadable=e.isReadable,this.mostReadable=e.mostReadable}var tinycolor=require("./../../../bower_components/tinycolor/tinycolor.js"),colorPlugin=function(){global.Color=new Color(tinycolor)};module.exports=colorPlugin;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/tinycolor/tinycolor.js":18}],60:[function(require,module,exports){
(function (global){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),inlineDocument=require("./../../../bower_components/juice/lib/inline")({}).inlineDocument,inlinerPlugin=function(e){e.inline=function(e){$("[style]:not([replacedstyle])",e).each(function(e,t){var o=$(t);o.attr("replacedstyle",o.attr("style"))});var t=[];$('style[data-inline="true"]',e).each(function(e,o){var a=$(o).html();a=a.replace(/<!-- ko ((?!--).)*? -->/g,""),a=a.replace(/<!-- \/ko -->/g,""),t.push(a),$(o).removeAttr("data-inline")});var o=t.join("\n"),a=function(t,o){return"undefined"==typeof o&&(o=e),$(t,o)};a.root=function(){return $(":root",e)},inlineDocument(a,o,{styleAttributeName:"replacedstyle"})}};module.exports=inlinerPlugin;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/juice/lib/inline":4}],61:[function(require,module,exports){
(function (global){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),lsLoader=function(e,t){var o=global.localStorage.getItem("metadata-"+e);if(null!==o){var a,i=global.localStorage.getItem("template-"+e);null!==i&&(a=JSON.parse(i));var l=JSON.parse(o);return{metadata:l,model:a,extension:lsCommandPluginFactory(l,t)}}throw"Cannot find stored data for "+e},lsCommandPluginFactory=function(e,t){var o=function(e,o,a){var i={name:"Save",enabled:ko.observable(!0)};i.execute=function(){i.enabled(!1),a.metadata.changed=Date.now(),"undefined"==typeof a.metadata.key&&(console.warn("Unable to find ket in metadata object...",a.metadata),a.metadata.key=e),global.localStorage.setItem("metadata-"+e,a.exportMetadata()),global.localStorage.setItem("template-"+e,a.exportJSON()),i.enabled(!0)};var l={name:"Test",enabled:ko.observable(!0)},n={name:"Download",enabled:ko.observable(!0)};l.execute=function(){l.enabled(!1);var i=global.localStorage.getItem("testemail");if((null===i||"null"==i)&&(i=a.t("Insert here the recipient email address")),i=global.prompt(a.t("Test email address"),i),i.match(/@/)){global.localStorage.setItem("testemail",i),console.log("TODO testing...",i);var n=t?t:"/dl/",r=$.post(n,{action:"email",rcpt:i,subject:"[test] "+e+" - "+o,html:a.exportHTML()},null,"html");r.fail(function(){console.log("fail",arguments),a.notifier.error(a.t("Unexpected error talking to server: contact us!"))}),r.success(function(){console.log("success",arguments),a.notifier.success(a.t("Test email sent..."))}),r.always(function(){l.enabled(!0)})}else global.alert(a.t("Invalid email address")),l.enabled(!0)},n.execute=function(){n.enabled(!1),a.notifier.info(a.t("Downloading...")),a.exportHTMLtoTextarea("#downloadHtmlTextarea");var e=t?t:"/dl/";global.document.getElementById("downloadForm").setAttribute("action",e),global.document.getElementById("downloadForm").submit(),n.enabled(!0)},a.save=i,a.test=l,a.download=n}.bind(void 0,e.key,e.name);return o};module.exports=lsLoader;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],62:[function(require,module,exports){
"use strict";require("./../../bower_components/knockout-sortable/build/knockout-sortable.min.js"),require("./bindings/jqueryui-spinner.js"),require("./bindings/jqueryui-tabs.js"),require("./bindings/colorpicker.js"),require("./bindings/blocks.js"),require("./bindings/csstext.js"),require("./bindings/bind-iframe.js"),require("./bindings/droppable.js"),require("./bindings/fileupload.js"),require("./bindings/virtuals.js"),require("./bindings/wysiwygs.js"),require("./bindings/scrollfix.js"),require("./bindings/if-subs.js"),require("./bindings/extsortables.js"),require("./bindings/eventable.js"),require("./bindings/tooltips.js"),require("./bindings/extender-pagination.js"),require("./bindings/validated-value.js"),require("./bindings/scrollintoview.js");

},{"./../../bower_components/knockout-sortable/build/knockout-sortable.min.js":8,"./bindings/bind-iframe.js":28,"./bindings/blocks.js":29,"./bindings/colorpicker.js":31,"./bindings/csstext.js":32,"./bindings/droppable.js":33,"./bindings/eventable.js":34,"./bindings/extender-pagination.js":35,"./bindings/extsortables.js":36,"./bindings/fileupload.js":37,"./bindings/if-subs.js":38,"./bindings/jqueryui-spinner.js":39,"./bindings/jqueryui-tabs.js":40,"./bindings/scrollfix.js":42,"./bindings/scrollintoview.js":43,"./bindings/tooltips.js":45,"./bindings/validated-value.js":46,"./bindings/virtuals.js":47,"./bindings/wysiwygs.js":48}],63:[function(require,module,exports){
(function (global){
"use strict";function _viewModelPluginInstance(e){var t;return{viewModel:function(o){t=e(o)},init:function(){"undefined"!=typeof t&&"undefined"!=typeof t.init&&t.init()},dispose:function(){"undefined"!=typeof t&&"undefined"!=typeof t.dispose&&t.dispose()}}}var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),kojqui=(typeof window !== "undefined" ? window['kojqui'] : typeof global !== "undefined" ? global['kojqui'] : null),templateConverter=require("./converter/main.js"),console=require("./../../bower_components/console-browserify/index.js"),initializeViewmodel=require("./viewmodel.js"),templateSystem=require("./bindings/choose-template.js"),pluginsCall=function(e,t,o,a){var i,l,d,r,n;n=[],"undefined"!=typeof a&&a?(i=e.length-1,l=0,d=-1):(i=0,l=e.length-1,d=1);for(var s=i;s!=l+d;s+=d)"undefined"!=typeof e[s][t]&&(r=e[s][t].apply(e[s],o),"undefined"!=typeof r&&n.push(r));return n},origDisposeCallback=ko.utils.domNodeDisposal.addDisposeCallback;ko.utils.domNodeDisposal.addDisposeCallback=function(e,t){var o=function(e){try{t(e)}catch(o){console.log("cought dispose callback exception",o)}};origDisposeCallback(e,o)};var bindingPluginMaker=function(e){return{viewModel:function(t){try{e("applyBindings",ko.applyBindings.bind(void 0,t))}catch(o){throw console.log(o,o.stack),o}},dispose:function(){try{e("unapplyBindings",ko.cleanNode.bind(this,global.document.body))}catch(t){throw console.log(t,t.stack),t}}}},templateCreator=function(e,t,o,a){var i=o;for("undefined"!=typeof o&&"undefined"!=typeof a&&("object"!=typeof t||"replacedhtml"!=t.tagName.toLowerCase())&&(i+="-"+a);"undefined"==typeof i||null===i||e.exists(i);)i="anonymous-"+Math.floor(1e5*Math.random()+1);if("object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()){var l=$(t),d=$("replacedhead",l),r=$("replacedbody",l);e.adder(i+"-head",d.html()||""),e.adder(i+"-show",r.html()||""),e.adder(i+"-preview",l.html()),e.adder(i+"-wysiwyg",l.html()),d.children().detach(),d.html("<!-- ko block: content --><!-- /ko -->"),d.before("<!-- ko withProperties: { templateMode: 'head' } -->"),d.after("<!-- /ko -->"),r.html("<!-- ko block: content --><!-- /ko -->"),e.adder(i+"-iframe",l[0].outerHTML)}else"object"==typeof t?e.adder(i,t.outerHTML):e.adder(i,t);return i},_templateUrlConverter=function(e,t){return t.match(/^[^\/]*:/)||t.match(/^\//)||t.match(/^\[/)||t.match(/^#?$/)?null:e+t},templateLoader=function(e,t,o,a,i,l){var d="string"==typeof t?t:o.template,r="./",n=d.lastIndexOf("/");-1!=n&&(r=d.substr(0,n+1));var s,c=_templateUrlConverter.bind(void 0,r);s="undefined"==typeof o?{template:d,name:"No name",created:Date.now()}:o,$.get(d,function(t){var o=templateCompiler(e,c,"template",t,a,s,i,l);o.init()})},templateCompiler=function(e,t,o,a,i,l,d,r){var n=a.match(/^([\S\s]*)([<]html[^>]*>[\S\s]*<\/html>)([\S\s]*)$/i);if(null===n)throw"Unable to find <html> opening and closing tags in the template";var s=n[1],c={"<html":0,"<head":0,"<body":0,"</html":0,"</body":0,"</head":0},p=n[2].replace(/(<\/?)(html|head|body)([^>]*>)/gi,function(e,t,o,a){return c[(t+o).toLowerCase()]+=1,t+"replaced"+o+a});for(var b in c)if(c.hasOwnProperty(b)&&1!=c[b]){if(0===c[b])throw"ERROR: missing mandatory element "+b+">";if(c[b]>1)throw"ERROR: multiple element "+b+"> occourences are not supported (found "+c[b]+" occourences)"}var m=n[3],u=[],f="+$root.contentListeners()",g=[];if("undefined"!=typeof d)for(var h=0;h<d.length;h++)"function"==typeof d[h]?g.push(_viewModelPluginInstance(d[h])):g.push(d[h]);var v=[],y={adder:function(e,t){if("string"!=typeof t)throw"Template system: cannot create new template "+e;var o=t.match(/(data)?-ko-[^ =:]*/g);o&&console.error("ERROR: found unexpected -ko- attribute in compiled template",e,", you probably mispelled it:",o),templateSystem.addTemplate(e,t),v.push(e)},exists:function(e){var t=templateSystem.getTemplateContent(e);return"undefined"!=typeof t?!0:!1},dispose:function(){for(var e=v.length-1;e>=0;e--)templateSystem.removeTemplate(v[e])}};ko.bindingHandlers.block.templateExists=y.exists;for(var k=templateCreator.bind(void 0,y),w=e("translateTemplate",templateConverter.translateTemplate.bind(void 0,o,p,t,k)),x=e("generateModel",templateConverter.wrappedResultModel.bind(void 0,w)),S={},C=pluginsCall(g,"widget",[$,ko,kojqui]),B=0;B<C.length;B++)S[C[B].widget]=C[B];u.push.apply(u,e("generateEditors",templateConverter.generateEditors.bind(void 0,w,S,t,k,f)));var _=!1;if("undefined"!=typeof i&&null!==i){var T;T="string"==typeof i?ko.utils.parseJson(i):i;var M=e("checkModel",templateConverter.checkModel.bind(void 0,x._unwrap(),u,T));2==M&&(console.error("Trying to compile an incompatible template version!",x._unwrap(),u,T),_=!0);try{x._wrap(T)}catch(D){console.error("Unable to inject model content!",D),_=!0}}var L=s+templateSystem.getTemplateContent(o+"-iframe").replace(/(<\/?)replaced(html|head|body)([^>]*>)/gi,function(e,t,o,a){return t+o+a})+m,F=ko.bindingHandlers.bindIframe.tpl;ko.bindingHandlers.bindIframe.tpl=L;var P={dispose:function(){ko.bindingHandlers.bindIframe.tpl=F}};g.push(P),g.push(y);var E=e("initializeViewmodel",initializeViewmodel.bind(this,x,u,t,r));E.metadata=l;var O="0.15.0";return"undefined"!=typeof E.metadata.editorversion&&E.metadata.editorversion!==O&&console.warn("The model being loaded has been created with an older editor version",E.metadata.editorversion,"vs",O),E.metadata.editorversion=O,"undefined"!=typeof w.version&&("undefined"!=typeof E.metadata.templateversion&&E.metadata.templateversion!==w.version&&console.error("The model being loaded has been created with a different template version",w.version,"vs",E.metadata.templateversion),E.metadata.templateversion=w.version),templateSystem.init(),g.push(bindingPluginMaker(e)),pluginsCall(g,"viewModel",[E]),_&&$("#incompatible-template").dialog({modal:!0,appendTo:"#mo-body",buttons:{Ok:function(){$(this).dialog("close")}}}),{model:E,init:function(){pluginsCall(g,"init",void 0,!0)},dispose:function(){pluginsCall(g,"dispose",void 0,!0)}}},checkFeature=function(e,t){if(!t())throw console.warn("Missing feature",e),"Missing feature "+e},isCompatible=function(){try{return checkFeature("matchMedia",function(){return"undefined"!=typeof global.matchMedia}),checkFeature("XMLHttpRequest 2",function(){return"XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}),checkFeature("ES5 strict",function(){return function(){return"undefined"==typeof this}()}),checkFeature("CSS borderRadius",function(){return"undefined"!=typeof global.document.body.style.borderRadius}),checkFeature("CSS boxShadow",function(){return"undefined"!=typeof global.document.body.style.boxShadow}),checkFeature("CSS boxSizing",function(){return"undefined"!=typeof global.document.body.style.boxSizing}),checkFeature("CSS backgroundSize",function(){return"undefined"!=typeof global.document.body.style.backgroundSize}),checkFeature("CSS backgroundOrigin",function(){return"undefined"!=typeof global.document.body.style.backgroundOrigin}),checkBadBrowserExtensions(),!0}catch(e){return!1}},checkBadBrowserExtensions=function(){var e="checkbadbrowsersframe",t=ko.bindingHandlers.bindIframe.tpl;ko.bindingHandlers.bindIframe.tpl='<!DOCTYPE html>\r\n<html>\r\n<head><title>A</title>\r\n</head>\r\n<body><p style="color: blue" align="right" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content"></div></body>\r\n</html>\r\n',$("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var o=global.document.getElementById(e);ko.applyBindings({content:"dummy content"},o);var a=o.contentWindow.document.doctype,i="<!DOCTYPE "+a.name+(a.publicId?' PUBLIC "'+a.publicId+'"':"")+(!a.publicId&&a.systemId?" SYSTEM":"")+(a.systemId?' "'+a.systemId+'"':"")+">",l=i+"\n"+o.contentWindow.document.documentElement.outerHTML;ko.cleanNode(o),ko.removeNode(o),ko.bindingHandlers.bindIframe.tpl=t;var d='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p align="right" style="color: red;" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',r='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p style="color: red;" data-bind="style: { color: \'red\' }" align="right">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',n='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p style="color: red;" align="right" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>';if(d!==l&&r!==l&&n!==l)throw console.log("BadBrowser.FrameContentCheck",l.length,d.length,r.length,n.length,l==d,l==r,l==n),console.log(l),"Unexpected frame content. Misbehaving browser: "+l.length+"/"+d.length+"/"+r.length+"/"+n.length},fixPageEvents=function(){global.addEventListener&&(global.addEventListener("drag",function(e){e=e||global.event,e.preventDefault()},!1),global.addEventListener("dragstart",function(e){e=e||global.event,e.preventDefault()},!1),global.addEventListener("dragover",function(e){e=e||global.event,e.preventDefault()},!1),global.addEventListener("drop",function(e){e=e||global.event,e.preventDefault()},!1),global.document.body.addEventListener("drop",function(e){e.preventDefault()},!1)),global.document.ondragstart&&(global.document.ondragstart=function(){return!1})};module.exports={compile:templateCompiler,load:templateLoader,isCompatible:isCompatible,fixPageEvents:fixPageEvents};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../bower_components/console-browserify/index.js":1,"./bindings/choose-template.js":30,"./converter/main.js":53,"./viewmodel.js":67}],64:[function(require,module,exports){
"use strict";var console=require("./../../bower_components/console-browserify/index.js"),_call=function(e){return e()},logs=[],_timedCall=function(e,t){var o,a=(new Date).getTime();"object"==typeof console&&console.time&&console.time(e),o=_call(t),"object"==typeof console&&console.time&&console.timeEnd(e);var i=(new Date).getTime()-a;return"object"!=typeof console||console.time||console.log(e,"took",i,"ms"),logs.push({name:e,time:i}),logs.length>100&&logs.unshift(),o};module.exports={timedCall:_timedCall,logs:logs};

},{"./../../bower_components/console-browserify/index.js":1}],65:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),undoManager=require("./../../../bower_components/knockout-undomanager/knockout-undomanager.js"),undoserializer=require("./undoserializer.js"),addUndoStackExtensionMaker=function(e){return function(t){t.contentListeners(t.contentListeners()+2);var o=undoManager(t.content,{levels:100,undoLabel:ko.computed(function(){return t.t("Undo (#COUNT#)")}),redoLabel:ko.computed(function(){return t.t("Redo")})});return t.undo=o.undoCommand,t.undo.execute=e.bind(t,"undo",t.undo.execute),t.redo=o.redoCommand,t.redo.execute=e.bind(t,"redo",t.redo.execute),t.undoReset=e.bind(t,"undoReset",o.reset),t.setUndoModeMerge=o.setModeMerge,t.setUndoModeOnce=o.setModeOnce,o.setModeIgnore(),o.setUndoActionMaker(undoserializer.makeUndoAction.bind(void 0,t.content)),undoserializer.watchEnabled(!0),{pause:function(){o.setModeIgnore()},run:function(){o.setModeOnce()},init:function(){o.setModeOnce()},dispose:function(){t.contentListeners(t.contentListeners()-2),undoserializer.watchEnabled(!1),o.dispose()}}}};module.exports=addUndoStackExtensionMaker;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/knockout-undomanager/knockout-undomanager.js":9,"./undoserializer.js":66}],66:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js"),_reference=function(e,t){for(var o,n,i=0,a=e;i<t.length;)switch(t.charAt(i)){case"(":")"==t.charAt(i+1)&&(a=a()),i+=2;break;case"[":n=t.indexOf("]",i),a=a[t.substring(i+1,n)],i=n+1;break;case".":o=t.indexOf("(",i),-1==o&&(o=t.length),n=t.indexOf("[",i),-1==n&&(n=t.length),n=Math.min(o,n),a=a[t.substring(i+1,n)],i=n}return a},_getPath=function(e,t){for(var o,n="",i=0;i<=e.length;i++)if(o=i<e.length?e[i]:t,ko.isObservable(o)&&(n+="()"),"undefined"!=typeof o._fieldName)n+="."+o._fieldName;else{if(!(i>0&&"function"==typeof e[i-1].pop))throw console.error("Unexpected parent with no _fieldName and no parent array",i,e),"Unexpected parent with no _fieldName and no parent array";var a=ko.isObservable(e[i-1])?ko.utils.peekObservable(e[i-1]):e[i-1],r=ko.utils.arrayIndexOf(a,o);if(-1==r)throw console.error("Unexpected object not found in parent array",a,o,i,e.length,ko.toJS(a),ko.utils.unwrapObservable(o)),"Unexpected object not found in parent array";n+="["+r+"]"}return n},makeDereferencedUndoAction=function(e,t,o,n,i){var a=_reference(t,o);e(a,n,i)},listener,_setListener=function(e){listener=e},makeUndoActionDereferenced=function(e,t,o,n,i,a){try{var r=_getPath(o,n);if(("object"==typeof i||"function"==typeof i)&&(i=ko.toJS(i)),"undefined"!=typeof a&&("object"==typeof a.value||"function"==typeof a.value)){var l=ko.toJS(a);a=l}if("undefined"!=typeof listener)try{listener(r,n,i,a)}catch(s){console.log("Undoserializer ignoring exception in listener callback")}return makeDereferencedUndoAction.bind(void 0,t,e,r,i,a)}catch(s){console.error("Exception processing undo",s,o,n,a)}},watchEnabled,_watchEnabled=function(e){return"undefined"==typeof e?watchEnabled:(watchEnabled=e,void 0)};module.exports={dereference:_getPath,reference:_reference,makeUndoAction:makeUndoActionDereferenced,setListener:_setListener,watchEnabled:_watchEnabled};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],67:[function(require,module,exports){
(function (global){
"use strict";function initializeEditor(e,t,o,a){function i(e){return e.replace(/<replacedcc[^>]* condition="([^"]*)"[^>]*>([\s\S]*?)<\/replacedcc>/g,function(e,t,o){var a="<!--[if "+t.replace(/&amp;/,"&")+"]>";return a+=o.replace(/<!-- cc:bc:([A-Za-z:]*) -->(<\/cc>)?<!-- cc:ac:\1 -->/g,"</$1>").replace(/><\/cc><!-- cc:sc -->/g,"/>").replace(/<!-- cc:bo:([A-Za-z:]*) --><cc/g,"<$1").replace(/^.*<!-- cc:start -->/,"").replace(/<!-- cc:end -->.*$/,""),a+="<![endif]-->"})}var l={galleryRecent:ko.observableArray([]).extend({paging:16}),galleryRemote:ko.observableArray([]).extend({paging:16}),selectedBlock:ko.observable(null),selectedItem:ko.observable(null),selectedTool:ko.observable(0),selectedImageTab:ko.observable(0),dragging:ko.observable(!1),draggingImage:ko.observable(!1),galleryLoaded:ko.observable(!1),showPreviewFrame:ko.observable(!1),previewMode:ko.observable("mobile"),showToolbox:ko.observable(!0),showTheme:ko.observable(!1),showGallery:ko.observable(!1),debug:ko.observable(!1),contentListeners:ko.observable(0),logoPath:"img/mosaico32.png",logoUrl:".",logoAlt:"mosaico"};return l.content=e,l.blockDefs=t,l.notifier=toastr,l.tt=function(e,t){if("undefined"!=typeof t)for(var o in t)t.hasOwnProperty(o)&&(e=e.replace(new RegExp("__"+o+"__","g"),t[o]));return e},l.t=l.tt,l.ut=function(e,t){return t},l.templatePath=o,l.remoteUrlProcessor=function(e){return e},l.remoteFileProcessor=function(e){return"undefined"!=typeof e.url&&(e.url=l.remoteUrlProcessor(e.url)),"undefined"!=typeof e.thumbnailUrl&&(e.thumbnailUrl=l.remoteUrlProcessor(e.thumbnailUrl)),e},l.loadGallery=function(){l.galleryLoaded("loading");var e=a?a:"/upload/";$.getJSON(e,function(e){for(var t=0;t<e.files.length;t++)e.files[t]=l.remoteFileProcessor(e.files[t]);l.galleryLoaded(e.files.length),l.galleryRemote(e.files.reverse())}).fail(function(){l.galleryLoaded(!1),l.notifier.error(l.t("Unexpected error listing files"))})},l.fileToImage=function(e){return e.url},l.removeBlock=function(e,t){ko.utils.unwrapObservable(l.selectedBlock)==ko.utils.unwrapObservable(e)&&l.selectBlock(null,!0);var o=t.blocks.remove(e);return l.notifier.info(l.t("Block removed: use undo button to restore it...")),o},l.duplicateBlock=function(e,t){var o=ko.utils.unwrapObservable(e),a=ko.toJS(ko.utils.unwrapObservable(t.blocks)[o]);"undefined"!=typeof a.id&&(a.id=""),t.blocks.splice(o+1,0,a)},l.moveBlock=function(e,t,o){var a=ko.utils.unwrapObservable(e),i=ko.utils.unwrapObservable(t.blocks);if(o&&a>0||!o&&a<i.length-1){var n=a+(o?-1:1),r=i[n];l.startMultiple(),t.blocks.splice(n,1),t.blocks.splice(a,0,r),l.stopMultiple()}},l.loadDefaultBlocks=function(){var e=ko.toJS(l.content().mainBlocks);e.blocks=[];for(var t=ko.utils.unwrapObservable(l.blockDefs),o=0;o<t.length;o++){var a=ko.toJS(t[o]);a.id="block_"+o,e.blocks.push(a)}performanceAwareCaller("setMainBlocks",l.content().mainBlocks._wrap.bind(l.content().mainBlocks,e))},l.addImage=function(e){var t=$("#main-wysiwyg-area .selectable-img.selecteditem");return 1==t.length&&"object"==typeof e&&"undefined"!=typeof e.url?(ko.contextFor(t[0])._src(e.url),!0):!1},l.addBlock=function(e){var t,o=l.selectedBlock();if(null!==o)for(var a=l.content().mainBlocks().blocks().length-1;a>=0;a--)if(l.content().mainBlocks().blocks()[a]()==o){t=a;break}var i;"undefined"!=typeof t?(i=t+1,l.content().mainBlocks().blocks.splice(i,0,e),l.notifier.info(l.t("New block added after the selected one (__pos__)",{pos:i}))):(l.content().mainBlocks().blocks.push(e),i=l.content().mainBlocks().blocks().length-1,l.notifier.info(l.t("New block added at the model bottom (__pos__)",{pos:i})));var n=l.content().mainBlocks().blocks()[i]();return l.selectBlock(n,!0),!1},l.findObjectsOfType=function(e,t){var o=[],a=ko.utils.unwrapObservable(e);for(var i in a)if(a.hasOwnProperty(i)){var l=ko.utils.unwrapObservable(a[i]);if(i.match(/Blocks$/))for(var n=ko.utils.unwrapObservable(l.blocks),r=0;r<n.length;r++){var d=ko.utils.unwrapObservable(n[r]);(null===t||ko.utils.unwrapObservable(d.type)==t)&&o.push(d)}else"object"==typeof l&&null!==l&&(null===t||ko.utils.unwrapObservable(l.type)==t)&&o.push(l)}return o},l.placeholderHelper={element:function(e){return $(e[0].outerHTML).removeClass("ui-draggable").addClass("sortable-placeholder").css("display","block").css("position","relative").css("width","100%").css("height","auto").css("opacity",".8")[0]},update:function(){}},l.startMultiple=function(){"undefined"!=typeof l.setUndoModeMerge&&l.setUndoModeMerge()},l.stopMultiple=function(){"undefined"!=typeof l.setUndoModeOnce&&l.setUndoModeOnce()},l.localGlobalSwitch=function(e,t){var o=e();return null===o?e(t()):e(null),!1},l.selectItem=function(e,t,o){var a=ko.utils.peekObservable(e);return"undefined"!=typeof o&&l.selectBlock(o,!1,!0),a!=t&&(e(t),null!==t&&0===l.selectedTool()&&l.selectedTool(1)),!1}.bind(l,l.selectedItem),l.isSelectedItem=function(e){return l.selectedItem()==e},l.selectBlock=function(e,t,o,a){var i=ko.utils.peekObservable(e);a||l.selectItem(null),i!=t&&(e(t),l.showGallery(!1),null===t||o||0!==l.selectedTool()||l.selectedTool(1))}.bind(l,l.selectedBlock),l.countSubscriptions=function(e,t){var o=0;for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];if(ko.isObservable(i)&&("undefined"!=typeof i._defaultComputed&&("undefined"!=typeof t&&console.log(t+"/"+a+"/_",i._defaultComputed.getSubscriptionsCount()),o+=i._defaultComputed.getSubscriptionsCount()),"undefined"!=typeof t&&console.log(t+"/"+a+"/-",i.getSubscriptionsCount()),o+=i.getSubscriptionsCount(),i=ko.utils.unwrapObservable(i)),"object"==typeof i&&null!==i){var n=l.countSubscriptions(i,"undefined"!=typeof t?t+"/"+a+"@":void 0);"undefined"!=typeof t&&console.log(t+"/"+a+"@",n),o+=n}}return o},l.loopSubscriptionsCount=function(){var e=l.countSubscriptions(l.content());global.document.getElementById("subscriptionsCount").innerHTML=e,global.setTimeout(l.loopSubscriptionsCount,1e3)},l.export=function(){var e=performanceAwareCaller("exportHTML",l.exportHTML);return e},l.exportHTML=function(){var e="exportframe";$("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var t=global.document.getElementById(e);ko.applyBindings(l,t),ko.cleanNode(t),l.inline&&l.inline(t.contentWindow.document);var o=t.contentWindow.document.doctype,a="<!DOCTYPE "+o.name+(o.publicId?' PUBLIC "'+o.publicId+'"':"")+(!o.publicId&&o.systemId?" SYSTEM":"")+(o.systemId?' "'+o.systemId+'"':"")+">",n=a+"\n"+t.contentWindow.document.documentElement.outerHTML;ko.removeNode(t),n=n.replace(/<script ([^>]* )?type="text\/html"[^>]*>[\s\S]*?<\/script>/gm,""),n=n.replace(/<!-- ko ((?!--).)*? -->/g,""),n=n.replace(/<!-- \/ko -->/g,""),n=n.replace(/ data-bind="[^"]*"/gm,""),n=n.replace(/ data-mce-(href|src|style)="[^"]*"/gm,""),n=n.replace(/ style="[^"]*"([^>]*) replaced(style="[^"]*")/gm,"$1 $2"),n=n.replace(/ replaced(style="[^"]*")([^>]*) style="[^"]*"/gm," $1$2"),n=n.replace(/ replaced(style="[^"]*")/gm," $1"),n=n.replace(/ http-equiv="[^"]*"([^>]*) replaced(http-equiv="[^"]*")/gm,"$1 $2"),n=n.replace(/ replaced(http-equiv="[^"]*")([^>]*) http-equiv="[^"]*"/gm," $1$2"),n=n.replace(/ replaced(http-equiv="[^"]*")/gm," $1"),n=i(n);var r=n.match(/ data-[^ =]+(="[^"]+")? /)||n.match(/ replaced([^= ]*=)/);return r&&console.warn("Output HTML contains unexpected data- attributes or replaced attributes",r),n},l.exportHTMLtoTextarea=function(e){$(e).val(l.exportHTML())},l.exportJSONtoTextarea=function(e){$(e).val(l.exportJSON())},l.importJSONfromTextarea=function(e){l.importJSON($(e).val())},l.exportMetadata=function(){var e=ko.toJSON(l.metadata);return e},l.exportJSON=function(){var e=ko.toJSON(l.content);return e},l.exportJS=function(){return ko.toJS(l.content)},l.importJSON=function(e){var t=ko.utils.parseJson(e);l.content._wrap(t)},l.exportTheme=function(){var e={},t=l.content().theme(),o=function(e,t,a){for(var i in a)if(a.hasOwnProperty(i)){var l=ko.utils.unwrapObservable(a[i]);null!==l&&"object"==typeof l?o(i+".",t,l):t[e+i]=l}};o("",e,t);var a="";for(var i in e)e.hasOwnProperty(i)&&"type"!=i&&(a+=i+": "+e[i]+";"+"\n");return a},l.loadImage=function(e){l.galleryRecent.unshift(e),l.selectedImageTab(0)},l.dialog=function(e,t){$(e).dialog(t)},l.log=function(){},l.selectedImageTab.subscribe(function(e){1==e&&l.galleryLoaded()===!1&&l.loadGallery()},l,"change"),l}var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../bower_components/console-browserify/index.js"),performanceAwareCaller=require("./timed-call.js").timedCall,toastr=require("./../../bower_components/toastr/toastr.js");toastr.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-full-width",target:"#mo-body",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},module.exports=initializeEditor;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../bower_components/console-browserify/index.js":1,"./../../bower_components/toastr/toastr.js":19,"./timed-call.js":64}]},{},[27,20])(27)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJib3dlcl9jb21wb25lbnRzL2NvbnNvbGUtYnJvd3NlcmlmeS9pbmRleC5qcyIsImJvd2VyX2NvbXBvbmVudHMvZXZvbC1jb2xvcnBpY2tlci9qcy9ldm9sLmNvbG9ycGlja2VyLm1pbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvanNlcC9zcmMvanNlcC5qcyIsImJvd2VyX2NvbXBvbmVudHMvanVpY2UvbGliL2lubGluZS5qcyIsImJvd2VyX2NvbXBvbmVudHMvanVpY2UvbGliL3Byb3BlcnR5LmpzIiwiYm93ZXJfY29tcG9uZW50cy9qdWljZS9saWIvc2VsZWN0b3IuanMiLCJib3dlcl9jb21wb25lbnRzL2p1aWNlL2xpYi91dGlscy5qcyIsImJvd2VyX2NvbXBvbmVudHMva25vY2tvdXQtc29ydGFibGUvYnVpbGQva25vY2tvdXQtc29ydGFibGUubWluLmpzIiwiYm93ZXJfY29tcG9uZW50cy9rbm9ja291dC11bmRvbWFuYWdlci9rbm9ja291dC11bmRvbWFuYWdlci5qcyIsImJvd2VyX2NvbXBvbmVudHMva25vY2tvdXQud3JhcC9rbm9ja291dC53cmFwLmpzIiwiYm93ZXJfY29tcG9uZW50cy9rbm9ja291dGpzLXJlYWN0b3Ivc3JjL2tub2Nrb3V0LnJlYWN0b3IuanMiLCJib3dlcl9jb21wb25lbnRzL21lbnNjaC9pbmRleC5qcyIsImJvd2VyX2NvbXBvbmVudHMvbWVuc2NoL2xpYi9kZWJ1Zy5qcyIsImJvd2VyX2NvbXBvbmVudHMvbWVuc2NoL2xpYi9sZXhlci5qcyIsImJvd2VyX2NvbXBvbmVudHMvbWVuc2NoL2xpYi9wYXJzZXIuanMiLCJib3dlcl9jb21wb25lbnRzL21lbnNjaC9saWIvc3RyaW5naWZ5LmpzIiwiYm93ZXJfY29tcG9uZW50cy9zbGljay9wYXJzZXIuanMiLCJib3dlcl9jb21wb25lbnRzL3Rpbnljb2xvci90aW55Y29sb3IuanMiLCJib3dlcl9jb21wb25lbnRzL3RvYXN0ci90b2FzdHIuanMiLCJidWlsZC90ZW1wbGF0ZXMuanMiLCJub2RlX21vZHVsZXMvYXNzZXJ0L2Fzc2VydC5qcyIsIm5vZGVfbW9kdWxlcy9vcy1icm93c2VyaWZ5L2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3V0aWwvbm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL2JpbmRpbmdzL2JpbmQtaWZyYW1lLmpzIiwic3JjL2pzL2JpbmRpbmdzL2Jsb2Nrcy5qcyIsInNyYy9qcy9iaW5kaW5ncy9jaG9vc2UtdGVtcGxhdGUuanMiLCJzcmMvanMvYmluZGluZ3MvY29sb3JwaWNrZXIuanMiLCJzcmMvanMvYmluZGluZ3MvY3NzdGV4dC5qcyIsInNyYy9qcy9iaW5kaW5ncy9kcm9wcGFibGUuanMiLCJzcmMvanMvYmluZGluZ3MvZXZlbnRhYmxlLmpzIiwic3JjL2pzL2JpbmRpbmdzL2V4dGVuZGVyLXBhZ2luYXRpb24uanMiLCJzcmMvanMvYmluZGluZ3MvZXh0c29ydGFibGVzLmpzIiwic3JjL2pzL2JpbmRpbmdzL2ZpbGV1cGxvYWQuanMiLCJzcmMvanMvYmluZGluZ3MvaWYtc3Vicy5qcyIsInNyYy9qcy9iaW5kaW5ncy9qcXVlcnl1aS1zcGlubmVyLmpzIiwic3JjL2pzL2JpbmRpbmdzL2pxdWVyeXVpLXRhYnMuanMiLCJzcmMvanMvYmluZGluZ3Mvc2NyaXB0LXRlbXBsYXRlLmpzIiwic3JjL2pzL2JpbmRpbmdzL3Njcm9sbGZpeC5qcyIsInNyYy9qcy9iaW5kaW5ncy9zY3JvbGxpbnRvdmlldy5qcyIsInNyYy9qcy9iaW5kaW5ncy9zdHJpbmctdGVtcGxhdGUuanMiLCJzcmMvanMvYmluZGluZ3MvdG9vbHRpcHMuanMiLCJzcmMvanMvYmluZGluZ3MvdmFsaWRhdGVkLXZhbHVlLmpzIiwic3JjL2pzL2JpbmRpbmdzL3ZpcnR1YWxzLmpzIiwic3JjL2pzL2JpbmRpbmdzL3d5c2l3eWdzLmpzIiwic3JjL2pzL2NvbnZlcnRlci9jaGVja21vZGVsLmpzIiwic3JjL2pzL2NvbnZlcnRlci9kZWNsYXJhdGlvbnMuanMiLCJzcmMvanMvY29udmVydGVyL2RvbXV0aWxzLmpzIiwic3JjL2pzL2NvbnZlcnRlci9lZGl0b3IuanMiLCJzcmMvanMvY29udmVydGVyL21haW4uanMiLCJzcmMvanMvY29udmVydGVyL21vZGVsLmpzIiwic3JjL2pzL2NvbnZlcnRlci9wYXJzZXIuanMiLCJzcmMvanMvY29udmVydGVyL3N0eWxlc2hlZXQuanMiLCJzcmMvanMvY29udmVydGVyL3V0aWxzLmpzIiwic3JjL2pzL2NvbnZlcnRlci93cmFwcGVyLmpzIiwic3JjL2pzL2V4dC9jb2xvci5qcyIsInNyYy9qcy9leHQvaW5saW5lci5qcyIsInNyYy9qcy9leHQvbG9jYWxzdG9yYWdlLmpzIiwic3JjL2pzL2tvLWJpbmRpbmdzLmpzIiwic3JjL2pzL3RlbXBsYXRlLWxvYWRlci5qcyIsInNyYy9qcy90aW1lZC1jYWxsLmpzIiwic3JjL2pzL3VuZG9tYW5hZ2VyL3VuZG9tYWluLmpzIiwic3JjL2pzL3VuZG9tYW5hZ2VyL3VuZG9zZXJpYWxpemVyLmpzIiwic3JjL2pzL3ZpZXdtb2RlbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUN3Q0EsUUFBUyxRQUVULFFBQVMsUUFDTCxRQUFRLElBQUksTUFBTSxRQUFTLFdBRy9CLFFBQVMsUUFDTCxRQUFRLElBQUksTUFBTSxRQUFTLFdBRy9CLFFBQVMsU0FDTCxRQUFRLEtBQUssTUFBTSxRQUFTLFdBR2hDLFFBQVMsTUFBSyxHQUNWLE1BQU0sR0FBUyxLQUFLLE1BR3hCLFFBQVMsU0FBUSxHQUNiLEdBQUksR0FBTyxNQUFNLEVBQ2pCLEtBQUssRUFDRCxLQUFNLElBQUksT0FBTSxrQkFBb0IsRUFHeEMsSUFBSSxHQUFXLEtBQUssTUFBUSxDQUM1QixTQUFRLElBQUksRUFBUSxLQUFPLEVBQVcsTUFHMUMsUUFBUyxTQUNMLEdBQUksR0FBTSxHQUFJLE1BQ2QsR0FBSSxLQUFPLFFBQ1gsRUFBSSxRQUFVLEtBQUssT0FBTyxNQUFNLEtBQU0sV0FDdEMsUUFBUSxNQUFNLEVBQUksT0FHdEIsUUFBUyxLQUFJLEdBQ1QsUUFBUSxJQUFJLEtBQUssUUFBUSxHQUFVLE1BR3ZDLFFBQVMsUUFBTyxHQUNaLElBQUssRUFBWSxDQUNiLEdBQUksR0FBTSxNQUFNLEtBQUssVUFBVyxFQUNoQyxRQUFPLElBQUcsRUFBTyxLQUFLLE9BQU8sTUFBTSxLQUFNLEtBakZqRCxHQUFJLE1BQU8sUUFBUSxRQUNmLE9BQVMsUUFBUSxVQUVqQixNQUFRLE1BQU0sVUFBVSxNQUN4QixRQUNBLFFBR0EsU0FEa0IsbUJBQVgsU0FBMEIsT0FBTyxRQUM5QixPQUFPLFFBQ1EsbUJBQVgsU0FBMEIsT0FBTyxRQUNyQyxPQUFPLFVBaUJyQixLQUFLLEdBWkQsYUFDQyxJQUFLLFFBQ0gsS0FBTSxTQUNOLEtBQU0sU0FDTixNQUFPLFVBQ1AsS0FBTSxTQUNOLFFBQVMsWUFDVCxNQUFPLFVBQ1AsSUFBSyxRQUNMLE9BQVEsV0FHTixFQUFJLEVBQUcsRUFBSSxVQUFVLE9BQVEsSUFBSyxDQUN2QyxHQUFJLE9BQVEsVUFBVSxHQUNsQixFQUFJLE1BQU0sR0FDVixLQUFPLE1BQU0sRUFFWixTQUFRLFFBQ1QsUUFBUSxNQUFRLEdBSXhCLE9BQU8sUUFBVTs7Ozs7Q0NqQ2hCLFNBQVMsR0FBSyxHQUFJLEdBQUUsRUFBRSxFQUFFLE9BQU8sVUFBVSxVQUFVLEVBQUUsRUFBRSxRQUFRLFNBQVMsRUFBRSxFQUFFLEVBQUUsTUFBTSxHQUFHLEVBQUUsR0FBRSxFQUFHLFVBQVUsS0FBSyxFQUFFLGlCQUFpQixTQUFTLEtBQUssRUFBRSxlQUFlLEtBQUssR0FBRyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxVQUFVLEdBQUcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxVQUFVLEdBQUcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsVUFBVSxJQUFJLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFdBQVcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFdBQVcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFdBQVcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFdBQVcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFdBQVcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFdBQVcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFdBQVcsRUFBRSxZQUFZLEVBQUUsU0FBUyxHQUFHLEdBQUksR0FBRSxFQUFFLFNBQVMsR0FBSSxPQUFPLElBQUcsRUFBRSxTQUFTLEVBQUUsSUFBSSxHQUFHLEdBQUcsRUFBRSxTQUFTLEdBQUcsTUFBTyxHQUFFLE9BQU8sS0FBSyxFQUFFLFNBQVMsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFHLE9BQU8sR0FBRSxFQUFFLEdBQUcsRUFBRSxTQUFTLEdBQUcsR0FBRyxFQUFFLE9BQU8sR0FBRyxDQUFDLEdBQUksR0FBRSxFQUFFLEVBQUUsUUFBUSxLQUFLLEVBQUUsRUFBRSxRQUFRLEtBQUssRUFBRSxFQUFFLFVBQVUsRUFBRSxHQUFHLE1BQU0sSUFBSyxRQUFPLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssS0FBSyxJQUFJLE1BQU8sR0FBRyxHQUFFLE9BQU8sb0JBQW9CLFFBQVEsUUFBUSxTQUFTLE1BQU0sS0FBSyxPQUFPLE9BQU8sWUFBVyxFQUFHLGtCQUFpQixFQUFHLGtCQUFpQixFQUFHLFNBQVEsRUFBRyxlQUFlLFFBQVEsUUFBUSxnR0FBZ0csU0FBUSxFQUFHLFFBQVEsV0FBVyxHQUFJLEdBQUUsSUFBSyxRQUFPLEtBQUssWUFBWSxTQUFTLEtBQUssUUFBUSxlQUFlLEVBQUUsRUFBRSxLQUFLLElBQUksU0FBUyxJQUFJLEtBQUssVUFBUyxFQUFHLEtBQUssUUFBUSxPQUFPLEtBQUssUUFBUSxXQUFXLFFBQVEsS0FBSyxRQUFRLE9BQU8sS0FBSyxRQUFRLElBQUksR0FBRyxTQUFTLElBQUksUUFBUSxHQUFJLEdBQUUsS0FBSyxRQUFRLE1BQU0sRUFBRSxLQUFLLFFBQVEsR0FBRyxVQUFVLEtBQUssUUFBUSxPQUFPLEdBQUcsZ0JBQWdCLGdCQUFnQixFQUFFLE1BQU0sSUFBSSxLQUFLLFFBQVEsV0FBVyxxQkFBcUIsSUFBSSxFQUFFLEVBQUcsSUFBRyxLQUFL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QUFZLEtBQUssU0FBUyxLQUFLLGFBQWEsUUFBUSxFQUFFLEdBQUcsS0FBSyxZQUFZLEVBQUUsRUFBRSxFQUFFLEtBQUssZUFBZSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsS0FBSyxZQUFZLENBQUUsTUFBSyxZQUFZLENBQUUsSUFBSSxHQUFFLEtBQUssU0FBUyxLQUFLLGFBQWEsT0FBTyxLQUFLLEdBQUcsTUFBTSxXQUFXLEdBQUcsR0FBRyxLQUFLLEVBQUcsR0FBRSxHQUFHLEVBQUUsT0FBTyxTQUFTLHFCQUFxQixXQUFXLElBQUksR0FBSSxHQUFFLEtBQUssUUFBUSxFQUFFLEVBQUUsT0FBTyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsV0FBVyxFQUFFLElBQUksWUFBWSxDQUFDLEdBQUksR0FBRSxLQUFLLFNBQVMsU0FBUyxJQUFJLEtBQUssU0FBUyxTQUFTLEVBQUUsRUFBRSxTQUFTLElBQUksRUFBRSxTQUFTLEVBQUUsS0FBSyxTQUFTLFNBQVMsSUFBSSxLQUFLLFNBQVMsU0FBUyxLQUFLLFFBQVEsY0FBYyxFQUFFLEVBQUUsU0FBUyxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBRSxHQUFFLEtBQUssU0FBUyxLQUFLLE9BQU8sS0FBSyxRQUFRLGNBQWMsT0FBTyxLQUFLLFNBQVMsS0FBSyxPQUFPLFFBQVMsT0FBTSxHQUFHLFFBQVEsRUFBRSxHQUFHLFFBQVEsS0FBTSxHQUFFLEVBQUUsZUFBZSxNQUFNLFlBQVksV0FBVyxHQUFHLEtBQUssV0FBVyxLQUFLLFNBQVEsRUFBRyxFQUFFLGdCQUFnQixJQUFJLElBQUksS0FBSyxLQUFLLFlBQVksZUFBZSxPQUFPLEtBQUssVUFBVSxDQUFDLEtBQUssU0FBUyxLQUFLLFFBQVEsT0FBTyxNQUFNLEtBQUssZ0JBQWdCLE9BQU8sR0FBRyxRQUFRLFNBQVMsR0FBRyxNQUFPLEdBQUUsbUJBQWtCLElBQUssS0FBSyxhQUFjLElBQUksR0FBRSxJQUFLLE1BQUssV0FBVyxLQUFLLHVCQUF1QixFQUFFLFNBQVMsTUFBTSxHQUFHLFNBQVMsRUFBRSxJ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LEVBQUUsY0FBYyxFQUFFLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxFQUFFLE1BQU0saUJBQWlCLEVBQUUsRUFBRSxNQUFNLFFBQVEsSUFBSSxFQUFFLEVBQUUsTUFBTSxRQUFRLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLFFBQVEsRUFBRSxHQUFHLEVBQUUsUUFBUSxTQUFTLEVBQUUsUUFBUSxVQUFVLEVBQUUsUUFBUSxTQUFTLFdBQVcsR0FBRyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxhQUFhLEVBQUUsU0FBUyxHQUFHLElBQUksRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFdBQVcsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxLQUFLLEVBQUUsRUFBRSxRQUFTLE9BQU8sR0FBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEdBQUcsSUFBSSxFQUFFLE1BQU0sY0FBYyxXQUFXLGNBQWMsS0FBSyxlQUFlLG1CQUFtQixpQkFBaUIsa0JBQWtCLFNBQVMsU0FBUyxHQUFHLEVBQUUsZUFBZSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxnQkFBZ0IsU0FBUyxlQUFlLEtBQUssRUFBRSxHQUFHLEVBQUUsZ0JBQWdCLFNBQVMsTUFBTSxZQUFZLElBQUksRUFBRSxhQUFhLEVBQUUsRUFBRSxZQUFZLEVBQUUsWUFBWSxTQUFTLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsWUFBWSxHQUFHLEdBQUcsRUFBRSxTQUFTLEVBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFHLElBQUcsRUFBRSxJQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsR0FBRyxXQUFXLEdBQUksT0FBTyxJQUFHLEVBQUUsU0FBUyxFQUFFLEdBQUcsR0FBSSxHQUFFLENBQUUsSUFBRyxFQUFFLFNBQVMsZUFBZSxHQUFHLElBQUksRUFBRSxHQUFJLEdBQUUsZ0JBQWdCLFdBQVcsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLEdBQUcsV0FBVyxLQUFLLFdBQVcsTUFBTSxJQUFJLEtBQUssVUFBVSxFQUFFLFlBQVksUUFBUyxHQUFFLGdCQUFnQixVQUFVLEtBQUssU0FBUyxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsV0FBVyxJQUFLLEdBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxRQUFPLEVBQUcsRUFBRSxFQUFFLGdCQUFnQixVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLE9BQU8sRUFBRSxRQUFRLEVBQUUsZUFBZ0IsR0FBRSxTQUFTLEVBQUUsTUFBTSxPQUFPLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsWUFBWSxrQkFBbUIsR0FBRSxXQUFXLEVBQUUsVUFBVSxLQUFLLFdBQVcsR0FBSSxHQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsa0JBQW1CLEdBQUUsRUFBRSxLQUFLLEtBQUssRUFBRSxTQUFTLENBQUUsR0FBRSxNQUFNLHNCQUFzQixFQUFFLEVBQUUsYUFBYSxJQUFJLHlCQUF5QixHQUFHLE1BQU0sRUFBRSxNQUFNLHNCQUFzQixFQUFFLEVBQUUsYUFBYSxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsU0FBUyxLQUFLLEVBQUUsV0FBVyxNQUFPLElBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLFFBQVEsTUFBTSxFQUFFLEVBQUUsUUFBUSxPQUFPLEVBQUUsUUFBUSxTQUFTLEVBQUUsUUFBUSxPQUFPLFNBQVMsRUFBRSxHQUFHLE1BQU8sR0FBRSxHQUFHLE9BQU8sRUFBRSxXQUFXLEtBQUssV0FBVyxFQUFFLE1BQU0sTUFBTSxFQUFFLE1BQU0sV0FBVyxHQUFJLElBQUksR0FBRSxXQUFXLFdBQVcsR0FBSSxHQUFFLEVBQUUsRUFBRSxRQUFRLE9BQVEsR0FBRSxTQUFTLEVBQUUsTUFBTSxPQUFPLEVBQUUsU0FBUyxNQUFNLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEtBQUssRUFBRyxHQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sYUFBYSxFQUFFLEtBQUssU0FBUyxXQUFXLElBQUksRUFBRSxLQUFLLEtBQUssZUFBZSxTQUFTLEdBQUcsRUFBRSxNQUFNLEtBQUssWUFBWSxRQUFRLFNBQVMsRUFBRSxHQUFHLGtCQUFtQixJQUFHLEVBQUUsS0FBSyxLQUFLLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEdBQUcsR0FBRyxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxFQUFFLFFBQVEsS0FBSyxLQUFLLEVBQUUsRUFBRSxJQUFJLEtBQUssT0FBTyxTQUFTLEVBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsS0FBSyxHQUFHLEVBQUUsRUFBRSxLQUFLLFNBQVMsR0FBRyxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUUsSUFBRyxHQUFHLEVBQUUsR0FBRyxTQUFTLEVBQUUsS0FBSyxHQUFHLE9BQU8sSUFBSSxHQUFHLEVBQUUsU0FBUyxLQUFLLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxXQUFXLEdBQUcsRUFBRSxFQUFFLE1BQU0sYUFBYSxFQUFFLEtBQUssU0FBUyxXQUFXLEdBQUcsRUFBRSxtQkFBbUIsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLGFBQWEsR0FBRyxLQUFLLEVBQUUsYUFBYSxFQUFFLGlCQUFpQixHQUFHLEVBQUUsUUFBUSxFQUFFLFdBQVcsWUFBWSxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsWUFBVyxHQUFJLEVBQUUsWUFBWSxFQUFFLFdBQVcsS0FBSyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLFFBQVEsTUFBTSxTQUFTLFVBQVUsRUFBRSxHQUFHLFNBQVMsR0FBRyxFQUFFLFdBQVcsTUFBTyxJQUFHLEVBQUUsZUFBZSxpQkFBaUIsRUFBRSxnQkFBZSxHQUFJLEdBQUcsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxhQUFhLENBQUMsR0FBSSxHQUFFLEVBQUUsRUFBRyxHQUFFLGlCQUFpQixFQUFFLGtCQUFrQixFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLGlCQUFpQixFQUFFLHNCQUF1QixHQUFFLE9BQU8sRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssYUFBYyxJQUFHLElBQUksSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsa0NBQWtDLEVBQUUsbUNBQW1DLEVBQUUsU0FBUyxFQUFFLFFBQVEsY0FBYyxFQUFFLE1BQU0sWUFBWSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsS0FBTSxHQUFFLGtDQUFrQyxFQUFFLG1DQUFtQyxFQUFFLFdBQVcsRUFBRSxVQUFVLEtBQUssS0FBSyxFQUFFLEVBQUUsR0FBRyxHQUFHLEVBQUUsTUFBTSxLQUFLLFlBQVksWUFBWSxFQUFFLGFBQWEsSUFBSSxFQUFFLGNBQWEsS0FBTSxTQUFTLEVBQUUsV0FBVyxFQUFFLFVBQVUsS0FBSyxXQUFXLEVBQUUsU0FBUyxFQUFFLEVBQUUsV0FBVyxTQUFTLFlBQVkseUJBQXlCLEtBQUssRUFBRyxPQUFPLEdBQUUsTUFBTSxnQkFBZ0IsbUJBQW1CLEVBQUUsWUFBWSxFQUFFLEtBQUssZ0JBQWdCLEVBQUUsS0FBSyxjQUFjLEVBQUUsU0FBUyxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsRUFBRSxFQUFFLGNBQWEsR0FBSSxhQUFhLE1BQU0sNEJBQTJCLElBQUssT0FBTyxTQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFFLFVBQVcsR0FBRSxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLFNBQVMsT0FBTyxFQUFFLFdBQVcsTUFBTyxJQUFHLEVBQUUsRUFBRSxJQUFJLGFBQWEsZUFBZSxXQUFVLEVBQUcsVUFBVSxLQUFLLFdBQVcsS0FBSyxZQUFZLEVBQUUsZ0JBQWdCLFdBQVcsS0FBSyxTQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxTQUFTLEVBQUUsRUFBRSxZQUFZLEVBQUUsRUFBRSxNQUFNLFVBQVUsRUFBRSxnQkFBZ0IsVUFBVSxTQUFTLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLGNBQWMsRUFBRSxnQkFBZ0IsVUFBVSxhQUFhLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsZ0JBQWdCLFVBQVUsU0FBVSxPQUFPLEdBQUUsUUFBUyxHQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxNQUFNLE9BQU8sRUFBRSxHQUFHLEVBQUUsa0JBQWtCLEVBQUUsSUFBSSxHQUFFLEVBQUcsRUFBRSxHQUFHLFVBQVUsR0FBRyxTQUFTLEdBQUcsRUFBRSxVQUFVLEtBQUssV0FBVyxFQUFFLEdBQUcsVUFBVSxFQUFFLEdBQUcsU0FBUyxZQUFZLHlCQUF5QixJQUFJLEVBQUUsTUFBTSxnQkFBZ0IsbUJBQW1CLEVBQUUsV0FBVyxFQUFFLEdBQUcsVUFBVSxhQUFhLEVBQUUsZ0JBQWdCLFNBQVMsS0FBSyxFQUFFLFdBQVcsTUFBTyxJQUFHLEVBQUUsRUFBRSxJQUFJLE9BQU8sU0FBUyxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBSSxHQUFFLEVBQUUsRUFBRSxPQUFRLE9BQU8sR0FBRSxnQkFBZ0IsU0FBUyxPQUFPLEVBQUUsV0FBVyxNQUFPLElBQUcsRUFBRSxFQUFFLElB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QVMsR0FBUSxHQUs5QixHQUFRLEdBQUksRUFBTSxFQUVsQixJQUFJLEdBQVMsRUFDYixLQUFLLEdBQUksS0FBUSxHQUNYLEVBQUssZUFBZSxJQUFpQixRQUFSLElBQy9CLEdBQVUsRUFBTyxLQUFPLEVBQUssR0FBUSxJQUFNLEtBRy9DLE9BQU8sSUFRVCxFQUFVLFVBQVksU0FBUyxHQUU3QixFQUFVLGNBQWMsUUFBUSxHQUVoQyxFQUFVLGlCQUFpQixJQUc3QixFQUFVLE9BQVMsU0FBUyxFQUFVLEdBQ3BDLEVBQUUsR0FBVSxPQUFPLElBSXJCLEVBQVUsSUFBTSxhQUtoQixFQUFVLGlCQUFpQixVQUFVLFNBQVMsR0FDNUIsR0FBWixHQUFpQixFQUFVLG1CQUFvQixHQUNqRCxFQUFVLGVBRVgsRUFBVyxVQUVQLEVBM2tCVCxHQUFJLEdBQUksUUFBUSxVQUNaLEdBQUssUUFBUSxZQUNiLFFBQVUsUUFBUSxXQUNsQix1QkFBeUIsUUFBUSxtQkFBbUIsVUFFcEQsT0FBUyxRQUFRLFNBQ3JCLFFBQU8sU0FDTCxhQUFlLEVBQ2YsT0FBUyxFQUNULGNBQWlCLDBCQUNqQixPQUFVLFdBQ1YsUUFBVyxLQUNYLGFBQWdCLE1BQ2hCLGFBQWdCLE9BQ2hCLFFBQVcsT0FDWCxnQkFBbUIsT0FDbkIsV0FBYyxRQUNkLFdBQWMsU0FDZCxXQUFjLFNBQ2QsV0FBYyxXQTRqQmhCLE9BQU8sUUFBVSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKmdsb2JhbCB3aW5kb3csIGdsb2JhbCovXG52YXIgdXRpbCA9IHJlcXVpcmUoXCJ1dGlsXCIpXG52YXIgYXNzZXJ0ID0gcmVxdWlyZShcImFzc2VydFwiKVxuXG52YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2VcbnZhciBjb25zb2xlXG52YXIgdGltZXMgPSB7fVxuXG5pZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY29uc29sZSkge1xuICAgIGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZVxufSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5jb25zb2xlKSB7XG4gICAgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlXG59IGVsc2Uge1xuICAgIGNvbnNvbGUgPSB7fVxufVxuXG52YXIgZnVuY3Rpb25zID0gW1xuICAgIFtsb2csIFwibG9nXCJdXG4gICAgLCBbaW5mbywgXCJpbmZvXCJdXG4gICAgLCBbd2FybiwgXCJ3YXJuXCJdXG4gICAgLCBbZXJyb3IsIFwiZXJyb3JcIl1cbiAgICAsIFt0aW1lLCBcInRpbWVcIl1cbiAgICAsIFt0aW1lRW5kLCBcInRpbWVFbmRcIl1cbiAgICAsIFt0cmFjZSwgXCJ0cmFjZVwiXVxuICAgICwgW2RpciwgXCJkaXJcIl1cbiAgICAsIFthc3NlcnQsIFwiYXNzZXJ0XCJdXG5dXG5cbmZvciAodmFyIGkgPSAwOyBpIDwgZnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHR1cGxlID0gZnVuY3Rpb25zW2ldXG4gICAgdmFyIGYgPSB0dXBsZVswXVxuICAgIHZhciBuYW1lID0gdHVwbGVbMV1cblxuICAgIGlmICghY29uc29sZVtuYW1lXSkge1xuICAgICAgICBjb25zb2xlW25hbWVdID0gZlxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb25zb2xlXG5cbmZ1bmN0aW9uIGxvZygpIHt9XG5cbmZ1bmN0aW9uIGluZm8oKSB7XG4gICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKVxufVxuXG5mdW5jdGlvbiB3YXJuKCkge1xuICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cylcbn1cblxuZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cylcbn1cblxuZnVuY3Rpb24gdGltZShsYWJlbCkge1xuICAgIHRpbWVzW2xhYmVsXSA9IERhdGUubm93KClcbn1cblxuZnVuY3Rpb24gdGltZUVuZChsYWJlbCkge1xuICAgIHZhciB0aW1lID0gdGltZXNbbGFiZWxdXG4gICAgaWYgKCF0aW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHN1Y2ggbGFiZWw6IFwiICsgbGFiZWwpXG4gICAgfVxuXG4gICAgdmFyIGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHRpbWVcbiAgICBjb25zb2xlLmxvZyhsYWJlbCArIFwiOiBcIiArIGR1cmF0aW9uICsgXCJtc1wiKVxufVxuXG5mdW5jdGlvbiB0cmFjZSgpIHtcbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKClcbiAgICBlcnIubmFtZSA9IFwiVHJhY2VcIlxuICAgIGVyci5tZXNzYWdlID0gdXRpbC5mb3JtYXQuYXBwbHkobnVsbCwgYXJndW1lbnRzKVxuICAgIGNvbnNvbGUuZXJyb3IoZXJyLnN0YWNrKVxufVxuXG5mdW5jdGlvbiBkaXIob2JqZWN0KSB7XG4gICAgY29uc29sZS5sb2codXRpbC5pbnNwZWN0KG9iamVjdCkgKyBcIlxcblwiKVxufVxuXG5mdW5jdGlvbiBhc3NlcnQoZXhwcmVzc2lvbikge1xuICAgIGlmICghZXhwcmVzc2lvbikge1xuICAgICAgICB2YXIgYXJyID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXG4gICAgICAgIGFzc2VydC5vayhmYWxzZSwgdXRpbC5mb3JtYXQuYXBwbHkobnVsbCwgYXJyKSlcbiAgICB9XG59XG4iLCIvKlxuICAgZXZvbC5jb2xvcnBpY2tlciAzLjIuMlxuICAgKGMpIDIwMTUgT2xpdmllciBHaXVsaWVyaVxuICAgaHR0cDovL2V2b2x1dGV1ci5naXRodWIuaW8vY29sb3JwaWNrZXIvXG4qL1xuIWZ1bmN0aW9uKGEsYil7dmFyIGM9MCxkPXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LGU9ZC5pbmRleE9mKFwiTVNJRSBcIik+MCxmPWU/XCItaWVcIjpcIlwiLGc9ZT8hMTovbW96aWxsYS8udGVzdChkLnRvTG93ZXJDYXNlKCkpJiYhL3dlYmtpdC8udGVzdChkLnRvTG93ZXJDYXNlKCkpLGg9W10saT1bXCJmZmZmZmZcIixcIjAwMDAwMFwiLFwiZWVlY2UxXCIsXCIxZjQ5N2RcIixcIjRmODFiZFwiLFwiYzA1MDRkXCIsXCI5YmJiNTlcIixcIjgwNjRhMlwiLFwiNGJhY2M2XCIsXCJmNzk2NDZcIl0saj1bXCJmMmYyZjJcIixcIjdmN2Y3ZlwiLFwiZGRkOWMzXCIsXCJjNmQ5ZjBcIixcImRiZTVmMVwiLFwiZjJkY2RiXCIsXCJlYmYxZGRcIixcImU1ZTBlY1wiLFwiZGJlZWYzXCIsXCJmZGVhZGFcIixcImQ4ZDhkOFwiLFwiNTk1OTU5XCIsXCJjNGJkOTdcIixcIjhkYjNlMlwiLFwiYjhjY2U0XCIsXCJlNWI5YjdcIixcImQ3ZTNiY1wiLFwiY2NjMWQ5XCIsXCJiN2RkZThcIixcImZiZDViNVwiLFwiYmZiZmJmXCIsXCIzZjNmM2ZcIixcIjkzODk1M1wiLFwiNTQ4ZGQ0XCIsXCI5NWIzZDdcIixcImQ5OTY5NFwiLFwiYzNkNjliXCIsXCJiMmEyYzdcIixcIjkyY2RkY1wiLFwiZmFjMDhmXCIsXCJhNWE1YTVcIixcIjI2MjYyNlwiLFwiNDk0NDI5XCIsXCIxNzM2NWRcIixcIjM2NjA5MlwiLFwiOTUzNzM0XCIsXCI3NjkyM2NcIixcIjVmNDk3YVwiLFwiMzE4NTliXCIsXCJlMzZjMDlcIixcIjdmN2Y3ZlwiLFwiMGMwYzBjXCIsXCIxZDFiMTBcIixcIjBmMjQzZVwiLFwiMjQ0MDYxXCIsXCI2MzI0MjNcIixcIjRmNjEyOFwiLFwiM2YzMTUxXCIsXCIyMDU4NjdcIixcIjk3NDgwNlwiXSxrPVtcImMwMDAwMFwiLFwiZmYwMDAwXCIsXCJmZmMwMDBcIixcImZmZmYwMFwiLFwiOTJkMDUwXCIsXCIwMGIwNTBcIixcIjAwYjBmMFwiLFwiMDA3MGMwXCIsXCIwMDIwNjBcIixcIjcwMzBhMFwiXSxsPVtbXCIwMDMzNjZcIixcIjMzNjY5OVwiLFwiMzM2NmNjXCIsXCIwMDMzOTlcIixcIjAwMDA5OVwiLFwiMDAwMGNjXCIsXCIwMDAwNjZcIl0sW1wiMDA2NjY2XCIsXCIwMDY2OTlcIixcIjAwOTljY1wiLFwiMDA2NmNjXCIsXCIwMDMzY2NcIixcIjAwMDBmZlwiLFwiMzMzM2ZmXCIsXCIzMzMzOTlcIl0sW1wiNjY5OTk5XCIsXCIwMDk5OTlcIixcIjMzY2NjY1wiLFwiMDBjY2ZmXCIsXCIwMDk5ZmZcIixcIjAwNjZmZlwiLFwiMzM2NmZmXCIsXCIzMzMzY2NcIixcIjY2NjY5OVwiXSxbXCIzMzk5NjZcIixcIjAwY2M5OVwiLFwiMDBmZmNjXCIsXCIwMGZmZmZcIixcIjMzY2NmZlwiLFwiMzM5OWZmXCIsXCI2Njk5ZmZcIixcIjY2NjZmZlwiLFwiNjYwMGZmXCIsXCI2NjAwY2NcIl0sW1wiMzM5OTMzXCIsXCIwMGNjNjZcIixcIjAwZmY5OVwiLFwiNjZmZmNjXCIsXCI2NmZmZmZcIixcIjY2Y2NmZlwiLFwiOTljY2ZmXCIsXCI5OTk5ZmZcIixcIjk5NjZmZlwiLFwiOTkzM2ZmXCIsXCI5OTAwZmZcIl0sW1wiMDA2NjAwXCIsXCIwMGNjMDBcIixcIjAwZmYwMFwiLFwiNjZmZjk5XCIsXCI5OWZmY2NcIixcImNjZmZmZlwiLFwiY2NjY2ZmXCIsXCJjYzk5ZmZcIixcImNjNjZmZlwiLFwiY2MzM2ZmXCIsXCJjYzAwZmZcIixcIjk5MDBjY1wiXSxbXCIwMDMzMDBcIixcIjAwOTkzM1wiLFwiMzNjYzMzXCIsXCI2NmZmNjZcIixcIjk5ZmY5OVwiLFwiY2NmZmNjXCIsXCJmZmZmZmZcIixcImZmY2NmZlwiLFwiZmY5OWZmXCIsXCJmZjY2ZmZcIixcImZmMDBmZlwiLFwiY2MwMGNjXCIsXCI2NjAwNjZcIl0sW1wiMzMzMzAwXCIsXCIwMDk5MDBcIixcIjY2ZmYzM1wiLFwiOTlmZjY2XCIsXCJjY2ZmOTlcIixcImZmZmZjY1wiLFwiZmZjY2NjXCIsXCJmZjk5Y2NcIixcImZmNjZjY1wiLFwiZmYzM2NjXCIsXCJjYzAwOTlcIixcIjk5MzM5OVwiXSxbXCIzMzY2MDBcIixcIjY2OTkwMFwiLFwiOTlmZjMzXCIsXCJjY2ZmNjZcIixcImZmZmY5OVwiLFwiZmZjYzk5XCIsXCJmZjk5OTlcIixcImZmNjY5OVwiLFwiZmYzMzk5XCIsXCJjYzMzOTlcIixcIjk5MDA5OVwiXSxbXCI2NjY2MzNcIixcIjk5Y2MwMFwiLFwiY2NmZjMzXCIsXCJmZmZmNjZcIixcImZmY2M2NlwiLFwiZmY5OTY2XCIsXCJmZjY2NjZcIixcImZmMDA2NlwiLFwiZDYwMDk0XCIsXCI5OTMzNjZcIl0sW1wiYTU4ODAwXCIsXCJjY2NjMDBcIixcImZmZmYwMFwiLFwiZmZjYzAwXCIsXCJmZjk5MzNcIixcImZmNjYwMFwiLFwiZmYwMDMzXCIsXCJjYzAwNjZcIixcIjY2MDAzM1wiXSxbXCI5OTY2MzNcIixcImNjOTkwMFwiLFwiZmY5OTAwXCIsXCJjYzY2MDBcIixcImZmMzMwMFwiLFwiZmYwMDAwXCIsXCJjYzAwMDBcIixcIjk5MDAzM1wiXSxbXCI2NjMzMDBcIixcIjk5NjYwMFwiLFwiY2MzMzAwXCIsXCI5OTMzMDBcIixcIjk5MDAwMFwiLFwiODAwMDAwXCIsXCI5OTMzMzNcIl1dLG09XCIjMDAwMGZmZmZcIixuPWZ1bmN0aW9uKGEpe3ZhciBiPWEudG9TdHJpbmcoMTYpO3JldHVybiAxPT1iLmxlbmd0aCYmKGI9XCIwXCIrYiksYn0sbz1mdW5jdGlvbihhKXtyZXR1cm4gbihOdW1iZXIoYSkpfSxwPWZ1bmN0aW9uKGEpe3ZhciBiPW4oYSk7cmV0dXJuIGIrYitifSxxPWZ1bmN0aW9uKGEpe2lmKGEubGVuZ3RoPjEwKXt2YXIgYj0xK2EuaW5kZXhPZihcIihcIiksYz1hLmluZGV4T2YoXCIpXCIpLGQ9YS5zdWJzdHJpbmcoYixjKS5zcGxpdChcIixcIik7cmV0dXJuW1wiI1wiLG8oZFswXSksbyhkWzFdKSxvKGRbMl0pXS5qb2luKFwiXCIpfXJldHVybiBhfTthLndpZGdldChcImV2b2wuY29sb3JwaWNrZXJcIix7dmVyc2lvbjpcIjMuMi4xXCIsb3B0aW9uczp7Y29sb3I6bnVsbCxzaG93T246XCJib3RoXCIsaGlkZUJ1dHRvbjohMSxkaXNwbGF5SW5kaWNhdG9yOiEwLHRyYW5zcGFyZW50Q29sb3I6ITEsaGlzdG9yeTohMCxkZWZhdWx0UGFsZXR0ZTpcInRoZW1lXCIsc3RyaW5nczpcIlRoZW1lIENvbG9ycyxTdGFuZGFyZCBDb2xvcnMsV2ViIENvbG9ycyxUaGVtZSBDb2xvcnMsQmFjayB0byBQYWxldHRlLEhpc3RvcnksTm8gaGlzdG9yeSB5ZXQuXCJ9LF9hY3RpdmU6ITEsX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXM7c3dpdGNoKHRoaXMuX3BhbGV0dGVJZHg9XCJ0aGVtZVwiPT10aGlzLm9wdGlvbnMuZGVmYXVsdFBhbGV0dGU/MToyLHRoaXMuX2lkPVwiZXZvLWNwXCIrYysrLHRoaXMuX2VuYWJsZWQ9ITAsdGhpcy5vcHRpb25zLnNob3dPbj10aGlzLm9wdGlvbnMuaGlkZUJ1dHRvbj9cImZvY3VzXCI6dGhpcy5vcHRpb25zLnNob3dPbix0aGlzLmVsZW1lbnQuZ2V0KDApLnRhZ05hbWUpe2Nhc2VcIklOUFVUXCI6dmFyIGQ9dGhpcy5vcHRpb25zLmNvbG9yLGg9dGhpcy5lbGVtZW50LGk9KFwiZm9jdXNcIj09PXRoaXMub3B0aW9ucy5zaG93T24/XCJcIjpcImV2by1wb2ludGVyIFwiKStcImV2by1jb2xvcmluZFwiKyhnP1wiLWZmXCI6ZikrKHRoaXMub3B0aW9ucy5oaWRlQnV0dG9uP1wiIGV2by1oaWRkZW4tYnV0dG9uXCI6XCJcIiksaj1cIlwiO2lmKHRoaXMuX2lzUG9wdXA9ITAsdGhpcy5fcGFsZXR0ZT1udWxsLG51bGwhPT1kKWgudmFsKGQpO2Vsc2V7dmFyIGs9aC52YWwoKTtcIlwiIT09ayYmKGQ9dGhpcy5vcHRpb25zLmNvbG9yPWspfWQ9PT1tP2krPVwiIGV2by10cmFuc3BhcmVudFwiOmo9bnVsbCE9PWQ/XCJiYWNrZ3JvdW5kLWNvbG9yOlwiK2Q6XCJcIixoLmFkZENsYXNzKFwiY29sb3JQaWNrZXIgXCIrdGhpcy5faWQpLndyYXAoJzxkaXYgc3R5bGU9XCJ3aWR0aDonKyh0aGlzLm9wdGlvbnMuaGlkZUJ1dHRvbj90aGlzLmVsZW1lbnQud2lkdGgoKTp0aGlzLmVsZW1lbnQud2lkdGgoKSszMikrXCJweDtcIisoZT9cIm1hcmdpbi1ib3R0b206LTIxcHg7XCI6XCJcIikrKGc/XCJwYWRkaW5nOjFweCAwO1wiOlwiXCIpKydcIj48L2Rpdj4nKS5hZnRlcignPGRpdiBjbGFzcz1cIicraSsnXCIgc3R5bGU9XCInK2orJ1wiPjwvZGl2PicpLm9uKFwia2V5dXAgb25wYXN0ZVwiLGZ1bmN0aW9uKGMpe3ZhciBkPWEodGhpcykudmFsKCk7ZCE9Yi5vcHRpb25zLmNvbG9yJiZiLl9zZXRWYWx1ZShkLCEwKX0pO3ZhciBsPXRoaXMub3B0aW9ucy5zaG93T247KFwiYm90aFwiPT09bHx8XCJmb2N1c1wiPT09bCkmJmgub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7Yi5zaG93UGFsZXR0ZSgpfSksKFwiYm90aFwiPT09bHx8XCJidXR0b25cIj09PWwpJiZoLm5leHQoKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RvcFByb3BhZ2F0aW9uKCksYi5zaG93UGFsZXR0ZSgpLCExfSk7YnJlYWs7ZGVmYXVsdDp0aGlzLl9pc1BvcHVwPSExLHRoaXMuX3BhbGV0dGU9dGhpcy5lbGVtZW50Lmh0bWwodGhpcy5fcGFsZXR0ZUhUTUwoKSkuYXR0cihcImFyaWEtaGFzcG9wdXBcIixcInRydWVcIiksdGhpcy5fYmluZENvbG9ycygpfWlmKHRoaXMub3B0aW9ucy5oaXN0b3J5JiYoZCYmdGhpcy5fYWRkMkhpc3RvcnkoZCksdGhpcy5vcHRpb25zLmluaXRpYWxIaXN0b3J5KSl7dmFyIG49dGhpcy5vcHRpb25zLmluaXRpYWxIaXN0b3J5O2Zvcih2YXIgbyBpbiBuKXRoaXMuX2FkZDJIaXN0b3J5KG5bb10pfX0sX3BhbGV0dGVIVE1MOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fcGFsZXR0ZUlkeD1NYXRoLmFicyh0aGlzLl9wYWxldHRlSWR4KSxiPXRoaXMub3B0aW9ucyxjPWIuc3RyaW5ncy5zcGxpdChcIixcIiksZD0nPGRpdiBjbGFzcz1cImV2by1wb3AnK2YrJyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiJysodGhpcy5faXNQb3B1cD8nIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGVcIic6XCJcIikrXCI+PHNwYW4+XCIrdGhpc1tcIl9wYWxldHRlSFRNTFwiK2FdKCkrJzwvc3Bhbj48ZGl2IGNsYXNzPVwiZXZvLW1vcmVcIj48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+JytjWzErYV0rXCI8L2E+XCI7cmV0dXJuIGIuaGlzdG9yeSYmKGQrPSc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgY2xhc3M9XCJldm8taGlzdFwiPicrY1s1XStcIjwvYT5cIiksZCs9XCI8L2Rpdj5cIixiLmRpc3BsYXlJbmRpY2F0b3ImJihkKz10aGlzLl9jb2xvckluZEhUTUwodGhpcy5vcHRpb25zLmNvbG9yKSt0aGlzLl9jb2xvckluZEhUTUwoXCJcIikpLGQrPVwiPC9kaXY+XCJ9LF9jb2xvckluZEhUTUw6ZnVuY3Rpb24oYSl7dmFyIGI9ZT9cImV2by1jb2xvcmJveC1pZSBcIjpcIlwiLGM9XCJcIjtyZXR1cm4gYT9hPT09bT9iKz1cImV2by10cmFuc3BhcmVudFwiOmM9XCJiYWNrZ3JvdW5kLWNvbG9yOlwiK2E6Yz1cImRpc3BsYXk6bm9uZVwiLCc8ZGl2IGNsYXNzPVwiZXZvLWNvbG9yXCIgc3R5bGU9XCJmbG9hdDpsZWZ0XCI+PGRpdiBzdHlsZT1cIicrYysnXCIgY2xhc3M9XCInK2IrJ1wiPjwvZGl2PjxzcGFuPicrKGE/YTpcIlwiKStcIjwvc3Bhbj48L2Rpdj5cIn0sX3BhbGV0dGVIVE1MMTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm9wdGlvbnMsYj1hLnN0cmluZ3Muc3BsaXQoXCIsXCIpLGM9Jzx0ZCBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IycsZD1lPydcIj48ZGl2IHN0eWxlPVwid2lkdGg6MnB4O1wiPjwvZGl2PjwvdGQ+JzonXCI+PHNwYW4vPjwvdGQ+JyxnPSc8dHI+PHRoIGNvbHNwYW49XCIxMFwiIGNsYXNzPVwidWktd2lkZ2V0LWNvbnRlbnRcIj4nLGg9Jzx0YWJsZSBjbGFzcz1cImV2by1wYWxldHRlJytmKydcIj4nK2crYlswXStcIjwvdGg+PC90cj48dHI+XCIsbD0wOzEwPmw7bCsrKWgrPWMraVtsXStkO2ZvcihoKz1cIjwvdHI+XCIsZXx8KGgrPSc8dHI+PHRoIGNvbHNwYW49XCIxMFwiPjwvdGg+PC90cj4nKSxoKz0nPHRyIGNsYXNzPVwidG9wXCI+JyxsPTA7MTA+bDtsKyspaCs9YytqW2xdK2Q7Zm9yKHZhciBtPTE7ND5tO20rKylmb3IoaCs9JzwvdHI+PHRyIGNsYXNzPVwiaW5cIj4nLGw9MDsxMD5sO2wrKyloKz1jK2pbMTAqbStsXStkO2ZvcihoKz0nPC90cj48dHIgY2xhc3M9XCJib3R0b21cIj4nLGw9NDA7NTA+bDtsKyspaCs9YytqW2xdK2Q7Zm9yKGgrPVwiPC90cj5cIitnLGEudHJhbnNwYXJlbnRDb2xvciYmKGgrPSc8ZGl2IGNsYXNzPVwiZXZvLXRyYW5zcGFyZW50IGV2by10ci1ib3hcIj48L2Rpdj4nKSxoKz1iWzFdK1wiPC90aD48L3RyPjx0cj5cIixsPTA7MTA+bDtsKyspaCs9YytrW2xdK2Q7cmV0dXJuIGgrPVwiPC90cj48L3RhYmxlPlwifSxfcGFsZXR0ZUhUTUwyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz0nPHRkIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojJyxkPWU/J1wiPjxkaXYgc3R5bGU9XCJ3aWR0aDo1cHg7XCI+PC9kaXY+PC90ZD4nOidcIj48c3Bhbi8+PC90ZD4nLGc9Jzx0YWJsZSBjbGFzcz1cImV2by1wYWxldHRlMicrZisnXCI+PHRyPicsaD1cIjwvdHI+PC90YWJsZT5cIixpPSc8ZGl2IGNsYXNzPVwiZXZvLXBhbGNlbnRlclwiPicsaj0wLGs9bC5sZW5ndGg7az5qO2orKyl7aSs9Zzt2YXIgbT1sW2pdO2ZvcihhPTAsYj1tLmxlbmd0aDtiPmE7YSsrKWkrPWMrbVthXStkO2krPWh9aSs9JzxkaXYgY2xhc3M9XCJldm8tc2VwXCIvPic7dmFyIG49XCJcIjtmb3IoaSs9ZyxhPTI1NTthPjEwO2EtPTEwKWkrPWMrcChhKStkLGEtPTEwLG4rPWMrcChhKStkO3JldHVybiBpKz1oK2crbitoK1wiPC9kaXY+XCJ9LF9zd2l0Y2hQYWxldHRlOmZ1bmN0aW9uKGIpe2lmKHRoaXMuX2VuYWJsZWQpe3ZhciBjLGQsZSxmPXRoaXMub3B0aW9ucy5zdHJpbmdzLnNwbGl0KFwiLFwiKTtpZihhKGIpLmhhc0NsYXNzKFwiZXZvLWhpc3RcIikpe3ZhciBnPVsnPHRhYmxlIGNsYXNzPVwiZXZvLXBhbGV0dGVcIj48dHI+PHRoIGNsYXNzPVwidWktd2lkZ2V0LWNvbnRlbnRcIj4nLGZbNV0sXCI8L3RoPjwvdHI+PC90cj48L3RhYmxlPlwiLCc8ZGl2IGNsYXNzPVwiZXZvLWNIaXN0XCI+J107aWYoMD09PWgubGVuZ3RoKWcucHVzaChcIjxwPiZuYnNwO1wiLGZbNl0sXCI8L3A+XCIpO2Vsc2UgZm9yKHZhciBpPWgubGVuZ3RoLTE7aT4tMTtpLS0pOT09PWhbaV0ubGVuZ3RoP2cucHVzaCgnPGRpdiBjbGFzcz1cImV2by10cmFuc3BhcmVudFwiPjwvZGl2PicpOmcucHVzaCgnPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6JyxoW2ldLCdcIj48L2Rpdj4nKTtnLnB1c2goXCI8L2Rpdj5cIiksYz0tdGhpcy5fcGFsZXR0ZUlkeCxkPWcuam9pbihcIlwiKSxlPWZbNF19ZWxzZSB0aGlzLl9wYWxldHRlSWR4PDA/KGM9LXRoaXMuX3BhbGV0dGVJZHgsdGhpcy5fcGFsZXR0ZS5maW5kKFwiLmV2by1oaXN0XCIpLnNob3coKSk6Yz0yPT10aGlzLl9wYWxldHRlSWR4PzE6MixkPXRoaXNbXCJfcGFsZXR0ZUhUTUxcIitjXSgpLGU9ZltjKzFdLHRoaXMuX3BhbGV0dGVJZHg9Yzt0aGlzLl9wYWxldHRlSWR4PWM7dmFyIGo9dGhpcy5fcGFsZXR0ZS5maW5kKFwiLmV2by1tb3JlXCIpLnByZXYoKS5odG1sKGQpLmVuZCgpLmNoaWxkcmVuKCkuZXEoMCkuaHRtbChlKTswPmMmJmoubmV4dCgpLmhpZGUoKX19LF9kb3duT3JVcFBvc2l0aW9uaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZWxlbWVudCxiPTA7bnVsbCE9PWEmJjEwMD5iOyl7aWYoXCJ2aXNpYmxlXCIhPWEuY3NzKFwib3ZlcmZsb3dcIikpe3ZhciBjPXRoaXMuX3BhbGV0dGUub2Zmc2V0KCkudG9wK3RoaXMuX3BhbGV0dGUuaGVpZ2h0KCksZD1hLm9mZnNldCgpLnRvcCthLmhlaWdodCgpLGU9dGhpcy5fcGFsZXR0ZS5vZmZzZXQoKS50b3AtdGhpcy5fcGFsZXR0ZS5oZWlnaHQoKS10aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSxmPWEub2Zmc2V0KCkudG9wLGc9Yz5kJiZlPmY7Zz90aGlzLl9wYWxldHRlLmNzcyh7Ym90dG9tOnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpK1wicHhcIn0pOnRoaXMuX3BhbGV0dGUuY3NzKHtib3R0b206XCJhdXRvXCJ9KTticmVha31pZihcIkhUTUxcIj09YVswXS50YWdOYW1lKWJyZWFrO2E9YS5vZmZzZXRQYXJlbnQoKSxiKyt9fSxzaG93UGFsZXR0ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2VuYWJsZWQmJih0aGlzLl9hY3RpdmU9ITAsYShcIi5jb2xvclBpY2tlclwiKS5ub3QoXCIuXCIrdGhpcy5faWQpLmNvbG9ycGlja2VyKFwiaGlkZVBhbGV0dGVcIiksbnVsbD09PXRoaXMuX3BhbGV0dGUpKXt0aGlzLl9wYWxldHRlPXRoaXMuZWxlbWVudC5uZXh0KCkuYWZ0ZXIodGhpcy5fcGFsZXR0ZUhUTUwoKSkubmV4dCgpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5zdG9wUHJvcGFnYXRpb24oKSwhMX0pLHRoaXMuX2JpbmRDb2xvcnMoKTt2YXIgYj10aGlzO3RoaXMuX2lzUG9wdXAmJih0aGlzLl9kb3duT3JVcFBvc2l0aW9uaW5nKCksYShkb2N1bWVudC5ib2R5KS5vbihcImNsaWNrLlwiK2IuX2lkLGZ1bmN0aW9uKGEpe2EudGFyZ2V0IT1iLmVsZW1lbnQuZ2V0KDApJiZiLmhpZGVQYWxldHRlKCl9KS5vbihcImtleXVwLlwiK2IuX2lkLGZ1bmN0aW9uKGEpezI3PT09YS5rZXlDb2RlJiZiLmhpZGVQYWxldHRlKCl9KSl9cmV0dXJuIHRoaXN9LGhpZGVQYWxldHRlOmZ1bmN0aW9uKCl7aWYodGhpcy5faXNQb3B1cCYmdGhpcy5fcGFsZXR0ZSl7YShkb2N1bWVudC5ib2R5KS5vZmYoXCJjbGljay5cIit0aGlzLl9pZCk7dmFyIGI9dGhpczt0aGlzLl9wYWxldHRlLm9mZihcIm1vdXNlb3ZlciBjbGlja1wiLFwidGQsLmV2by10cmFuc3BhcmVudFwiKS5mYWRlT3V0KGZ1bmN0aW9uKCl7Yi5fcGFsZXR0ZS5yZW1vdmUoKSxiLl9wYWxldHRlPWIuX2NUeHQ9bnVsbH0pLmZpbmQoXCIuZXZvLW1vcmUgYVwiKS5vZmYoXCJjbGlja1wiKX1yZXR1cm4gdGhpc30sX2JpbmRDb2xvcnM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9dGhpcy5vcHRpb25zLGQ9dGhpcy5fcGFsZXR0ZS5maW5kKFwiZGl2LmV2by1jb2xvclwiKSxlPWMuaGlzdG9yeT9cInRkLC5ldm8tY0hpc3Q+ZGl2XCI6XCJ0ZFwiO2MudHJhbnNwYXJlbnRDb2xvciYmKGUrPVwiLC5ldm8tdHJhbnNwYXJlbnRcIiksdGhpcy5fY1R4dDE9ZC5lcSgwKS5jaGlsZHJlbigpLmVxKDApLHRoaXMuX2NUeHQyPWQuZXEoMSkuY2hpbGRyZW4oKS5lcSgwKSx0aGlzLl9wYWxldHRlLm9uKFwiY2xpY2tcIixlLGZ1bmN0aW9uKGMpe2lmKGIuX2VuYWJsZWQpe3ZhciBkPWEodGhpcyk7Yi5fc2V0VmFsdWUoZC5oYXNDbGFzcyhcImV2by10cmFuc3BhcmVudFwiKT9tOnEoZC5hdHRyKFwic3R5bGVcIikuc3Vic3RyaW5nKDE3KSkpLGIuX2FjdGl2ZT0hMX19KS5vbihcIm1vdXNlb3ZlclwiLGUsZnVuY3Rpb24oYyl7aWYoYi5fZW5hYmxlZCl7dmFyIGQ9YSh0aGlzKSxlPWQuaGFzQ2xhc3MoXCJldm8tdHJhbnNwYXJlbnRcIik/bTpxKGQuYXR0cihcInN0eWxlXCIpLnN1YnN0cmluZygxNykpO2Iub3B0aW9ucy5kaXNwbGF5SW5kaWNhdG9yJiZiLl9zZXRDb2xvckluZChlLDIpLGIuX2FjdGl2ZSYmYi5lbGVtZW50LnRyaWdnZXIoXCJtb3VzZW92ZXIuY29sb3JcIixlKX19KS5maW5kKFwiLmV2by1tb3JlIGFcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7Yi5fc3dpdGNoUGFsZXR0ZSh0aGlzKX0pfSx2YWw6ZnVuY3Rpb24oYSl7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGE/dGhpcy5vcHRpb25zLmNvbG9yOih0aGlzLl9zZXRWYWx1ZShhKSx0aGlzKX0sX3NldFZhbHVlOmZ1bmN0aW9uKGEsYil7YT1hLnJlcGxhY2UoLyAvZyxcIlwiKSx0aGlzLm9wdGlvbnMuY29sb3I9YSx0aGlzLl9pc1BvcHVwPyhifHx0aGlzLmhpZGVQYWxldHRlKCksdGhpcy5fc2V0Qm94Q29sb3IodGhpcy5lbGVtZW50LnZhbChhKS5uZXh0KCksYSkpOnRoaXMuX3NldENvbG9ySW5kKGEsMSksdGhpcy5vcHRpb25zLmhpc3RvcnkmJnRoaXMuX3BhbGV0dGVJZHg+MCYmdGhpcy5fYWRkMkhpc3RvcnkoYSksdGhpcy5lbGVtZW50LnRyaWdnZXIoXCJjaGFuZ2UuY29sb3JcIixhKX0sX3NldENvbG9ySW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1tcIl9jVHh0XCIrYl07dGhpcy5fc2V0Qm94Q29sb3IoYyxhKSxjLm5leHQoKS5odG1sKGEpfSxfc2V0Qm94Q29sb3I6ZnVuY3Rpb24oYSxiKXtiPT09bT9hLmFkZENsYXNzKFwiZXZvLXRyYW5zcGFyZW50XCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKTphLnJlbW92ZUNsYXNzKFwiZXZvLXRyYW5zcGFyZW50XCIpLmF0dHIoXCJzdHlsZVwiLFwiYmFja2dyb3VuZC1jb2xvcjpcIitiKX0sX3NldE9wdGlvbjpmdW5jdGlvbihhLGIpe1wiY29sb3JcIj09YT90aGlzLl9zZXRWYWx1ZShiLCEwKTp0aGlzLm9wdGlvbnNbYV09Yn0sX2FkZDJIaXN0b3J5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1oLmxlbmd0aCxjPTA7Yj5jO2MrKylpZihhPT1oW2NdKXJldHVybjtiPjI3JiZoLnNoaWZ0KCksaC5wdXNoKGEpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuaGlkZVBhbGV0dGUoKS52YWwoXCJcIil9LGVuYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudDtyZXR1cm4gdGhpcy5faXNQb3B1cD9hLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTphLmNzcyh7b3BhY2l0eTpcIjFcIixcInBvaW50ZXItZXZlbnRzXCI6XCJhdXRvXCJ9KSxcImZvY3VzXCIhPT10aGlzLm9wdGlvbnMuc2hvd09uJiZ0aGlzLmVsZW1lbnQubmV4dCgpLmFkZENsYXNzKFwiZXZvLXBvaW50ZXJcIiksYS5yZW1vdmVBdHRyKFwiYXJpYS1kaXNhYmxlZFwiKSx0aGlzLl9lbmFibGVkPSEwLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnQ7cmV0dXJuIHRoaXMuX2lzUG9wdXA/YS5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpOih0aGlzLmhpZGVQYWxldHRlKCksYS5jc3Moe29wYWNpdHk6XCIwLjNcIixcInBvaW50ZXItZXZlbnRzXCI6XCJub25lXCJ9KSksXCJmb2N1c1wiIT09dGhpcy5vcHRpb25zLnNob3dPbiYmdGhpcy5lbGVtZW50Lm5leHQoKS5yZW1vdmVDbGFzcyhcImV2by1wb2ludGVyXCIpLGEuYXR0cihcImFyaWEtZGlzYWJsZWRcIixcInRydWVcIiksdGhpcy5fZW5hYmxlZD0hMSx0aGlzfSxpc0Rpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2VuYWJsZWR9LGRlc3Ryb3k6ZnVuY3Rpb24oKXthKGRvY3VtZW50LmJvZHkpLm9mZihcImNsaWNrLlwiK3RoaXMuX2lkKSx0aGlzLl9wYWxldHRlJiYodGhpcy5fcGFsZXR0ZS5vZmYoXCJtb3VzZW92ZXIgY2xpY2tcIixcInRkLC5ldm8tY0hpc3Q+ZGl2LC5ldm8tdHJhbnNwYXJlbnRcIikuZmluZChcIi5ldm8tbW9yZSBhXCIpLm9mZihcImNsaWNrXCIpLHRoaXMuX2lzUG9wdXAmJnRoaXMuX3BhbGV0dGUucmVtb3ZlKCksdGhpcy5fcGFsZXR0ZT10aGlzLl9jVHh0PW51bGwpLHRoaXMuX2lzUG9wdXAmJnRoaXMuZWxlbWVudC5uZXh0KCkub2ZmKFwiY2xpY2tcIikucmVtb3ZlKCkuZW5kKCkub2ZmKFwiZm9jdXNcIikudW53cmFwKCksdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sb3JQaWNrZXIgXCIrdGhpcy5pZCkuZW1wdHkoKSxhLldpZGdldC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfX0pfShqUXVlcnkpOyIsIi8vICAgICBKYXZhU2NyaXB0IEV4cHJlc3Npb24gUGFyc2VyIChKU0VQKSA8JT0gdmVyc2lvbiAlPlxuLy8gICAgIEpTRVAgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2Vcbi8vICAgICBodHRwOi8vanNlcC5mcm9tLnNvL1xuXG4vKmdsb2JhbCBtb2R1bGU6IHRydWUsIGV4cG9ydHM6IHRydWUsIGNvbnNvbGU6IHRydWUgKi9cbihmdW5jdGlvbiAocm9vdCkge1xuXHQndXNlIHN0cmljdCc7XG5cdC8vIE5vZGUgVHlwZXNcblx0Ly8gLS0tLS0tLS0tLVxuXHRcblx0Ly8gVGhpcyBpcyB0aGUgZnVsbCBzZXQgb2YgdHlwZXMgdGhhdCBhbnkgSlNFUCBub2RlIGNhbiBiZS5cblx0Ly8gU3RvcmUgdGhlbSBoZXJlIHRvIHNhdmUgc3BhY2Ugd2hlbiBtaW5pZmllZFxuXHR2YXIgQ09NUE9VTkQgPSAnQ29tcG91bmQnLFxuXHRcdElERU5USUZJRVIgPSAnSWRlbnRpZmllcicsXG5cdFx0TUVNQkVSX0VYUCA9ICdNZW1iZXJFeHByZXNzaW9uJyxcblx0XHRMSVRFUkFMID0gJ0xpdGVyYWwnLFxuXHRcdFRISVNfRVhQID0gJ1RoaXNFeHByZXNzaW9uJyxcblx0XHRDQUxMX0VYUCA9ICdDYWxsRXhwcmVzc2lvbicsXG5cdFx0VU5BUllfRVhQID0gJ1VuYXJ5RXhwcmVzc2lvbicsXG5cdFx0QklOQVJZX0VYUCA9ICdCaW5hcnlFeHByZXNzaW9uJyxcblx0XHRMT0dJQ0FMX0VYUCA9ICdMb2dpY2FsRXhwcmVzc2lvbicsXG5cdFx0Q09ORElUSU9OQUxfRVhQID0gJ0NvbmRpdGlvbmFsRXhwcmVzc2lvbicsXG5cdFx0QVJSQVlfRVhQID0gJ0FycmF5RXhwcmVzc2lvbicsXG5cblx0XHRQRVJJT0RfQ09ERSA9IDQ2LCAvLyAnLidcblx0XHRDT01NQV9DT0RFICA9IDQ0LCAvLyAnLCdcblx0XHRTUVVPVEVfQ09ERSA9IDM5LCAvLyBzaW5nbGUgcXVvdGVcblx0XHREUVVPVEVfQ09ERSA9IDM0LCAvLyBkb3VibGUgcXVvdGVzXG5cdFx0T1BBUkVOX0NPREUgPSA0MCwgLy8gKFxuXHRcdENQQVJFTl9DT0RFID0gNDEsIC8vIClcblx0XHRPQlJBQ0tfQ09ERSA9IDkxLCAvLyBbXG5cdFx0Q0JSQUNLX0NPREUgPSA5MywgLy8gXVxuXHRcdFFVTUFSS19DT0RFID0gNjMsIC8vID9cblx0XHRTRU1DT0xfQ09ERSA9IDU5LCAvLyA7XG5cdFx0Q09MT05fQ09ERSAgPSA1OCwgLy8gOlxuXG5cdFx0dGhyb3dFcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGluZGV4KSB7XG5cdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSArICcgYXQgY2hhcmFjdGVyICcgKyBpbmRleCk7XG5cdFx0XHRlcnJvci5pbmRleCA9IGluZGV4O1xuXHRcdFx0ZXJyb3IuZGVzY3JpcHRpb24gPSBtZXNzYWdlO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fSxcblxuXHQvLyBPcGVyYXRpb25zXG5cdC8vIC0tLS0tLS0tLS1cblx0XG5cdC8vIFNldCBgdGAgdG8gYHRydWVgIHRvIHNhdmUgc3BhY2UgKHdoZW4gbWluaWZpZWQsIG5vdCBnemlwcGVkKVxuXHRcdHQgPSB0cnVlLFxuXHQvLyBVc2UgYSBxdWlja2x5LWFjY2Vzc2libGUgbWFwIHRvIHN0b3JlIGFsbCBvZiB0aGUgdW5hcnkgb3BlcmF0b3JzXG5cdC8vIFZhbHVlcyBhcmUgc2V0IHRvIGB0cnVlYCAoaXQgcmVhbGx5IGRvZXNuJ3QgbWF0dGVyKVxuXHRcdHVuYXJ5X29wcyA9IHsnLSc6IHQsICchJzogdCwgJ34nOiB0LCAnKyc6IHR9LFxuXHQvLyBBbHNvIHVzZSBhIG1hcCBmb3IgdGhlIGJpbmFyeSBvcGVyYXRpb25zIGJ1dCBzZXQgdGhlaXIgdmFsdWVzIHRvIHRoZWlyXG5cdC8vIGJpbmFyeSBwcmVjZWRlbmNlIGZvciBxdWljayByZWZlcmVuY2U6XG5cdC8vIHNlZSBbT3JkZXIgb2Ygb3BlcmF0aW9uc10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9PcmRlcl9vZl9vcGVyYXRpb25zI1Byb2dyYW1taW5nX2xhbmd1YWdlKVxuXHRcdGJpbmFyeV9vcHMgPSB7XG5cdFx0XHQnfHwnOiAxLCAnJiYnOiAyLCAnfCc6IDMsICAnXic6IDQsICAnJic6IDUsXG5cdFx0XHQnPT0nOiA2LCAnIT0nOiA2LCAnPT09JzogNiwgJyE9PSc6IDYsXG5cdFx0XHQnPCc6IDcsICAnPic6IDcsICAnPD0nOiA3LCAgJz49JzogNywgXG5cdFx0XHQnPDwnOjgsICAnPj4nOiA4LCAnPj4+JzogOCxcblx0XHRcdCcrJzogOSwgJy0nOiA5LFxuXHRcdFx0JyonOiAxMCwgJy8nOiAxMCwgJyUnOiAxMFxuXHRcdH0sXG5cdC8vIEdldCByZXR1cm4gdGhlIGxvbmdlc3Qga2V5IGxlbmd0aCBvZiBhbnkgb2JqZWN0XG5cdFx0Z2V0TWF4S2V5TGVuID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0XHR2YXIgbWF4X2xlbiA9IDAsIGxlbjtcblx0XHRcdGZvcih2YXIga2V5IGluIG9iaikge1xuXHRcdFx0XHRpZigobGVuID0ga2V5Lmxlbmd0aCkgPiBtYXhfbGVuICYmIG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdFx0bWF4X2xlbiA9IGxlbjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1heF9sZW47XG5cdFx0fSxcblx0XHRtYXhfdW5vcF9sZW4gPSBnZXRNYXhLZXlMZW4odW5hcnlfb3BzKSxcblx0XHRtYXhfYmlub3BfbGVuID0gZ2V0TWF4S2V5TGVuKGJpbmFyeV9vcHMpLFxuXHQvLyBMaXRlcmFsc1xuXHQvLyAtLS0tLS0tLS0tXG5cdC8vIFN0b3JlIHRoZSB2YWx1ZXMgdG8gcmV0dXJuIGZvciB0aGUgdmFyaW91cyBsaXRlcmFscyB3ZSBtYXkgZW5jb3VudGVyXG5cdFx0bGl0ZXJhbHMgPSB7XG5cdFx0XHQndHJ1ZSc6IHRydWUsXG5cdFx0XHQnZmFsc2UnOiBmYWxzZSxcblx0XHRcdCdudWxsJzogbnVsbFxuXHRcdH0sXG5cdC8vIEV4Y2VwdCBmb3IgYHRoaXNgLCB3aGljaCBpcyBzcGVjaWFsLiBUaGlzIGNvdWxkIGJlIGNoYW5nZWQgdG8gc29tZXRoaW5nIGxpa2UgYCdzZWxmJ2AgYXMgd2VsbFxuXHRcdHRoaXNfc3RyID0gJ3RoaXMnLFxuXHQvLyBSZXR1cm5zIHRoZSBwcmVjZWRlbmNlIG9mIGEgYmluYXJ5IG9wZXJhdG9yIG9yIGAwYCBpZiBpdCBpc24ndCBhIGJpbmFyeSBvcGVyYXRvclxuXHRcdGJpbmFyeVByZWNlZGVuY2UgPSBmdW5jdGlvbihvcF92YWwpIHtcblx0XHRcdHJldHVybiBiaW5hcnlfb3BzW29wX3ZhbF0gfHwgMDtcblx0XHR9LFxuXHQvLyBVdGlsaXR5IGZ1bmN0aW9uIChnZXRzIGNhbGxlZCBmcm9tIG11bHRpcGxlIHBsYWNlcylcblx0Ly8gQWxzbyBub3RlIHRoYXQgYGEgJiYgYmAgYW5kIGBhIHx8IGJgIGFyZSAqbG9naWNhbCogZXhwcmVzc2lvbnMsIG5vdCBiaW5hcnkgZXhwcmVzc2lvbnNcblx0XHRjcmVhdGVCaW5hcnlFeHByZXNzaW9uID0gZnVuY3Rpb24gKG9wZXJhdG9yLCBsZWZ0LCByaWdodCkge1xuXHRcdFx0dmFyIHR5cGUgPSAob3BlcmF0b3IgPT09ICd8fCcgfHwgb3BlcmF0b3IgPT09ICcmJicpID8gTE9HSUNBTF9FWFAgOiBCSU5BUllfRVhQO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0b3BlcmF0b3I6IG9wZXJhdG9yLFxuXHRcdFx0XHRsZWZ0OiBsZWZ0LFxuXHRcdFx0XHRyaWdodDogcmlnaHRcblx0XHRcdH07XG5cdFx0fSxcblx0XHQvLyBgY2hgIGlzIGEgY2hhcmFjdGVyIGNvZGUgaW4gdGhlIG5leHQgdGhyZWUgZnVuY3Rpb25zXG5cdFx0aXNEZWNpbWFsRGlnaXQgPSBmdW5jdGlvbihjaCkge1xuXHRcdFx0cmV0dXJuIChjaCA+PSA0OCAmJiBjaCA8PSA1Nyk7IC8vIDAuLi45XG5cdFx0fSxcblx0XHRpc0lkZW50aWZpZXJTdGFydCA9IGZ1bmN0aW9uKGNoKSB7XG5cdFx0XHRyZXR1cm4gKGNoID09PSAzNikgfHwgKGNoID09PSA5NSkgfHwgLy8gYCRgIGFuZCBgX2Bcblx0XHRcdFx0XHQoY2ggPj0gNjUgJiYgY2ggPD0gOTApIHx8IC8vIEEuLi5aXG5cdFx0XHRcdFx0KGNoID49IDk3ICYmIGNoIDw9IDEyMikgfHwgLy8gYS4uLnpcbiAgICAgICAgICAgICAgICAgICAgKGNoID49IDEyOCAmJiAhYmluYXJ5X29wc1tTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKV0pOyAvLyBhbnkgbm9uLUFTQ0lJIHRoYXQgaXMgbm90IGFuIG9wZXJhdG9yXG5cdFx0fSxcblx0XHRpc0lkZW50aWZpZXJQYXJ0ID0gZnVuY3Rpb24oY2gpIHtcblx0XHRcdHJldHVybiAoY2ggPT09IDM2KSB8fCAoY2ggPT09IDk1KSB8fCAvLyBgJGAgYW5kIGBfYFxuXHRcdFx0XHRcdChjaCA+PSA2NSAmJiBjaCA8PSA5MCkgfHwgLy8gQS4uLlpcblx0XHRcdFx0XHQoY2ggPj0gOTcgJiYgY2ggPD0gMTIyKSB8fCAvLyBhLi4uelxuXHRcdFx0XHRcdChjaCA+PSA0OCAmJiBjaCA8PSA1NykgfHwgLy8gMC4uLjlcbiAgICAgICAgICAgICAgICAgICAgKGNoID49IDEyOCAmJiAhYmluYXJ5X29wc1tTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKV0pOyAvLyBhbnkgbm9uLUFTQ0lJIHRoYXQgaXMgbm90IGFuIG9wZXJhdG9yXG5cdFx0fSxcblxuXHRcdC8vIFBhcnNpbmdcblx0XHQvLyAtLS0tLS0tXG5cdFx0Ly8gYGV4cHJgIGlzIGEgc3RyaW5nIHdpdGggdGhlIHBhc3NlZCBpbiBleHByZXNzaW9uXG5cdFx0anNlcCA9IGZ1bmN0aW9uKGV4cHIpIHtcblx0XHRcdC8vIGBpbmRleGAgc3RvcmVzIHRoZSBjaGFyYWN0ZXIgbnVtYmVyIHdlIGFyZSBjdXJyZW50bHkgYXQgd2hpbGUgYGxlbmd0aGAgaXMgYSBjb25zdGFudFxuXHRcdFx0Ly8gQWxsIG9mIHRoZSBnb2JibGVzIGJlbG93IHdpbGwgbW9kaWZ5IGBpbmRleGAgYXMgd2UgbW92ZSBhbG9uZ1xuXHRcdFx0dmFyIGluZGV4ID0gMCxcblx0XHRcdFx0Y2hhckF0RnVuYyA9IGV4cHIuY2hhckF0LFxuXHRcdFx0XHRjaGFyQ29kZUF0RnVuYyA9IGV4cHIuY2hhckNvZGVBdCxcblx0XHRcdFx0ZXhwckkgPSBmdW5jdGlvbihpKSB7IHJldHVybiBjaGFyQXRGdW5jLmNhbGwoZXhwciwgaSk7IH0sXG5cdFx0XHRcdGV4cHJJQ29kZSA9IGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGNoYXJDb2RlQXRGdW5jLmNhbGwoZXhwciwgaSk7IH0sXG5cdFx0XHRcdGxlbmd0aCA9IGV4cHIubGVuZ3RoLFxuXG5cdFx0XHRcdC8vIFB1c2ggYGluZGV4YCB1cCB0byB0aGUgbmV4dCBub24tc3BhY2UgY2hhcmFjdGVyXG5cdFx0XHRcdGdvYmJsZVNwYWNlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBjaCA9IGV4cHJJQ29kZShpbmRleCk7XG5cdFx0XHRcdFx0Ly8gc3BhY2Ugb3IgdGFiXG5cdFx0XHRcdFx0d2hpbGUoY2ggPT09IDMyIHx8IGNoID09PSA5KSB7XG5cdFx0XHRcdFx0XHRjaCA9IGV4cHJJQ29kZSgrK2luZGV4KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBUaGUgbWFpbiBwYXJzaW5nIGZ1bmN0aW9uLiBNdWNoIG9mIHRoaXMgY29kZSBpcyBkZWRpY2F0ZWQgdG8gdGVybmFyeSBleHByZXNzaW9uc1xuXHRcdFx0XHRnb2JibGVFeHByZXNzaW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIHRlc3QgPSBnb2JibGVCaW5hcnlFeHByZXNzaW9uKCksXG5cdFx0XHRcdFx0XHRjb25zZXF1ZW50LCBhbHRlcm5hdGU7XG5cdFx0XHRcdFx0Z29iYmxlU3BhY2VzKCk7XG5cdFx0XHRcdFx0aWYoZXhwcklDb2RlKGluZGV4KSA9PT0gUVVNQVJLX0NPREUpIHtcblx0XHRcdFx0XHRcdC8vIFRlcm5hcnkgZXhwcmVzc2lvbjogdGVzdCA/IGNvbnNlcXVlbnQgOiBhbHRlcm5hdGVcblx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHRjb25zZXF1ZW50ID0gZ29iYmxlRXhwcmVzc2lvbigpO1xuXHRcdFx0XHRcdFx0aWYoIWNvbnNlcXVlbnQpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3dFcnJvcignRXhwZWN0ZWQgZXhwcmVzc2lvbicsIGluZGV4KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGdvYmJsZVNwYWNlcygpO1xuXHRcdFx0XHRcdFx0aWYoZXhwcklDb2RlKGluZGV4KSA9PT0gQ09MT05fQ09ERSkge1xuXHRcdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0XHRhbHRlcm5hdGUgPSBnb2JibGVFeHByZXNzaW9uKCk7XG5cdFx0XHRcdFx0XHRcdGlmKCFhbHRlcm5hdGUpIHtcblx0XHRcdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdFeHBlY3RlZCBleHByZXNzaW9uJywgaW5kZXgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogQ09ORElUSU9OQUxfRVhQLFxuXHRcdFx0XHRcdFx0XHRcdHRlc3Q6IHRlc3QsXG5cdFx0XHRcdFx0XHRcdFx0Y29uc2VxdWVudDogY29uc2VxdWVudCxcblx0XHRcdFx0XHRcdFx0XHRhbHRlcm5hdGU6IGFsdGVybmF0ZVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhyb3dFcnJvcignRXhwZWN0ZWQgOicsIGluZGV4KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRlc3Q7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFNlYXJjaCBmb3IgdGhlIG9wZXJhdGlvbiBwb3J0aW9uIG9mIHRoZSBzdHJpbmcgKGUuZy4gYCtgLCBgPT09YClcblx0XHRcdFx0Ly8gU3RhcnQgYnkgdGFraW5nIHRoZSBsb25nZXN0IHBvc3NpYmxlIGJpbmFyeSBvcGVyYXRpb25zICgzIGNoYXJhY3RlcnM6IGA9PT1gLCBgIT09YCwgYD4+PmApXG5cdFx0XHRcdC8vIGFuZCBtb3ZlIGRvd24gZnJvbSAzIHRvIDIgdG8gMSBjaGFyYWN0ZXIgdW50aWwgYSBtYXRjaGluZyBiaW5hcnkgb3BlcmF0aW9uIGlzIGZvdW5kXG5cdFx0XHRcdC8vIHRoZW4sIHJldHVybiB0aGF0IGJpbmFyeSBvcGVyYXRpb25cblx0XHRcdFx0Z29iYmxlQmluYXJ5T3AgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRnb2JibGVTcGFjZXMoKTtcblx0XHRcdFx0XHR2YXIgYmlvcCwgdG9fY2hlY2sgPSBleHByLnN1YnN0cihpbmRleCwgbWF4X2Jpbm9wX2xlbiksIHRjX2xlbiA9IHRvX2NoZWNrLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSh0Y19sZW4gPiAwKSB7XG5cdFx0XHRcdFx0XHRpZihiaW5hcnlfb3BzLmhhc093blByb3BlcnR5KHRvX2NoZWNrKSkge1xuXHRcdFx0XHRcdFx0XHRpbmRleCArPSB0Y19sZW47XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0b19jaGVjaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRvX2NoZWNrID0gdG9fY2hlY2suc3Vic3RyKDAsIC0tdGNfbGVuKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFRoaXMgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIGdvYmJsaW5nIGFuIGluZGl2aWR1YWwgZXhwcmVzc2lvbixcblx0XHRcdFx0Ly8gZS5nLiBgMWAsIGAxKzJgLCBgYSsoYioyKS1NYXRoLnNxcnQoMilgXG5cdFx0XHRcdGdvYmJsZUJpbmFyeUV4cHJlc3Npb24gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgY2hfaSwgbm9kZSwgYmlvcCwgcHJlYywgc3RhY2ssIGJpb3BfaW5mbywgbGVmdCwgcmlnaHQsIGk7XG5cblx0XHRcdFx0XHQvLyBGaXJzdCwgdHJ5IHRvIGdldCB0aGUgbGVmdG1vc3QgdGhpbmdcblx0XHRcdFx0XHQvLyBUaGVuLCBjaGVjayB0byBzZWUgaWYgdGhlcmUncyBhIGJpbmFyeSBvcGVyYXRvciBvcGVyYXRpbmcgb24gdGhhdCBsZWZ0bW9zdCB0aGluZ1xuXHRcdFx0XHRcdGxlZnQgPSBnb2JibGVUb2tlbigpO1xuXHRcdFx0XHRcdGJpb3AgPSBnb2JibGVCaW5hcnlPcCgpO1xuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgd2Fzbid0IGEgYmluYXJ5IG9wZXJhdG9yLCBqdXN0IHJldHVybiB0aGUgbGVmdG1vc3Qgbm9kZVxuXHRcdFx0XHRcdGlmKCFiaW9wKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbGVmdDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIHdlIG5lZWQgdG8gc3RhcnQgYSBzdGFjayB0byBwcm9wZXJseSBwbGFjZSB0aGUgYmluYXJ5IG9wZXJhdGlvbnMgaW4gdGhlaXJcblx0XHRcdFx0XHQvLyBwcmVjZWRlbmNlIHN0cnVjdHVyZVxuXHRcdFx0XHRcdGJpb3BfaW5mbyA9IHsgdmFsdWU6IGJpb3AsIHByZWM6IGJpbmFyeVByZWNlZGVuY2UoYmlvcCl9O1xuXG5cdFx0XHRcdFx0cmlnaHQgPSBnb2JibGVUb2tlbigpO1xuXHRcdFx0XHRcdGlmKCFyaWdodCkge1xuXHRcdFx0XHRcdFx0dGhyb3dFcnJvcihcIkV4cGVjdGVkIGV4cHJlc3Npb24gYWZ0ZXIgXCIgKyBiaW9wLCBpbmRleCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHN0YWNrID0gW2xlZnQsIGJpb3BfaW5mbywgcmlnaHRdO1xuXG5cdFx0XHRcdFx0Ly8gUHJvcGVybHkgZGVhbCB3aXRoIHByZWNlZGVuY2UgdXNpbmcgW3JlY3Vyc2l2ZSBkZXNjZW50XShodHRwOi8vd3d3LmVuZ3IubXVuLmNhL350aGVvL01pc2MvZXhwX3BhcnNpbmcuaHRtKVxuXHRcdFx0XHRcdHdoaWxlKChiaW9wID0gZ29iYmxlQmluYXJ5T3AoKSkpIHtcblx0XHRcdFx0XHRcdHByZWMgPSBiaW5hcnlQcmVjZWRlbmNlKGJpb3ApO1xuXG5cdFx0XHRcdFx0XHRpZihwcmVjID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YmlvcF9pbmZvID0geyB2YWx1ZTogYmlvcCwgcHJlYzogcHJlYyB9O1xuXG5cdFx0XHRcdFx0XHQvLyBSZWR1Y2U6IG1ha2UgYSBiaW5hcnkgZXhwcmVzc2lvbiBmcm9tIHRoZSB0aHJlZSB0b3Btb3N0IGVudHJpZXMuXG5cdFx0XHRcdFx0XHR3aGlsZSAoKHN0YWNrLmxlbmd0aCA+IDIpICYmIChwcmVjIDw9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDJdLnByZWMpKSB7XG5cdFx0XHRcdFx0XHRcdHJpZ2h0ID0gc3RhY2sucG9wKCk7XG5cdFx0XHRcdFx0XHRcdGJpb3AgPSBzdGFjay5wb3AoKS52YWx1ZTtcblx0XHRcdFx0XHRcdFx0bGVmdCA9IHN0YWNrLnBvcCgpO1xuXHRcdFx0XHRcdFx0XHRub2RlID0gY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihiaW9wLCBsZWZ0LCByaWdodCk7XG5cdFx0XHRcdFx0XHRcdHN0YWNrLnB1c2gobm9kZSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdG5vZGUgPSBnb2JibGVUb2tlbigpO1xuXHRcdFx0XHRcdFx0aWYoIW5vZGUpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3dFcnJvcihcIkV4cGVjdGVkIGV4cHJlc3Npb24gYWZ0ZXIgXCIgKyBiaW9wLCBpbmRleCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKGJpb3BfaW5mbywgbm9kZSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aSA9IHN0YWNrLmxlbmd0aCAtIDE7XG5cdFx0XHRcdFx0bm9kZSA9IHN0YWNrW2ldO1xuXHRcdFx0XHRcdHdoaWxlKGkgPiAxKSB7XG5cdFx0XHRcdFx0XHRub2RlID0gY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihzdGFja1tpIC0gMV0udmFsdWUsIHN0YWNrW2kgLSAyXSwgbm9kZSk7IFxuXHRcdFx0XHRcdFx0aSAtPSAyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbm9kZTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBBbiBpbmRpdmlkdWFsIHBhcnQgb2YgYSBiaW5hcnkgZXhwcmVzc2lvbjpcblx0XHRcdFx0Ly8gZS5nLiBgZm9vLmJhcihiYXopYCwgYDFgLCBgXCJhYmNcImAsIGAoYSAlIDIpYCAoYmVjYXVzZSBpdCdzIGluIHBhcmVudGhlc2lzKVxuXHRcdFx0XHRnb2JibGVUb2tlbiA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBjaCwgdG9fY2hlY2ssIHRjX2xlbjtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRnb2JibGVTcGFjZXMoKTtcblx0XHRcdFx0XHRjaCA9IGV4cHJJQ29kZShpbmRleCk7XG5cblx0XHRcdFx0XHRpZihpc0RlY2ltYWxEaWdpdChjaCkgfHwgY2ggPT09IFBFUklPRF9DT0RFKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGFyIGNvZGUgNDYgaXMgYSBkb3QgYC5gIHdoaWNoIGNhbiBzdGFydCBvZmYgYSBudW1lcmljIGxpdGVyYWxcblx0XHRcdFx0XHRcdHJldHVybiBnb2JibGVOdW1lcmljTGl0ZXJhbCgpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihjaCA9PT0gU1FVT1RFX0NPREUgfHwgY2ggPT09IERRVU9URV9DT0RFKSB7XG5cdFx0XHRcdFx0XHQvLyBTaW5nbGUgb3IgZG91YmxlIHF1b3Rlc1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdvYmJsZVN0cmluZ0xpdGVyYWwoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoaXNJZGVudGlmaWVyU3RhcnQoY2gpIHx8IGNoID09PSBPUEFSRU5fQ09ERSkgeyAvLyBvcGVuIHBhcmVudGhlc2lzXG5cdFx0XHRcdFx0XHQvLyBgZm9vYCwgYGJhci5iYXpgXG5cdFx0XHRcdFx0XHRyZXR1cm4gZ29iYmxlVmFyaWFibGUoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGNoID09PSBPQlJBQ0tfQ09ERSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdvYmJsZUFycmF5KCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRvX2NoZWNrID0gZXhwci5zdWJzdHIoaW5kZXgsIG1heF91bm9wX2xlbik7XG5cdFx0XHRcdFx0XHR0Y19sZW4gPSB0b19jaGVjay5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSh0Y19sZW4gPiAwKSB7XG5cdFx0XHRcdFx0XHRcdGlmKHVuYXJ5X29wcy5oYXNPd25Qcm9wZXJ0eSh0b19jaGVjaykpIHtcblx0XHRcdFx0XHRcdFx0XHRpbmRleCArPSB0Y19sZW47XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFVOQVJZX0VYUCxcblx0XHRcdFx0XHRcdFx0XHRcdG9wZXJhdG9yOiB0b19jaGVjayxcblx0XHRcdFx0XHRcdFx0XHRcdGFyZ3VtZW50OiBnb2JibGVUb2tlbigpLFxuXHRcdFx0XHRcdFx0XHRcdFx0cHJlZml4OiB0cnVlXG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0b19jaGVjayA9IHRvX2NoZWNrLnN1YnN0cigwLCAtLXRjX2xlbik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdC8vIFBhcnNlIHNpbXBsZSBudW1lcmljIGxpdGVyYWxzOiBgMTJgLCBgMy40YCwgYC41YC4gRG8gdGhpcyBieSB1c2luZyBhIHN0cmluZyB0b1xuXHRcdFx0XHQvLyBrZWVwIHRyYWNrIG9mIGV2ZXJ5dGhpbmcgaW4gdGhlIG51bWVyaWMgbGl0ZXJhbCBhbmQgdGhlbiBjYWxsaW5nIGBwYXJzZUZsb2F0YCBvbiB0aGF0IHN0cmluZ1xuXHRcdFx0XHRnb2JibGVOdW1lcmljTGl0ZXJhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBudW1iZXIgPSAnJywgY2gsIGNoQ29kZTtcblx0XHRcdFx0XHR3aGlsZShpc0RlY2ltYWxEaWdpdChleHBySUNvZGUoaW5kZXgpKSkge1xuXHRcdFx0XHRcdFx0bnVtYmVyICs9IGV4cHJJKGluZGV4KyspO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKGV4cHJJQ29kZShpbmRleCkgPT09IFBFUklPRF9DT0RFKSB7IC8vIGNhbiBzdGFydCB3aXRoIGEgZGVjaW1hbCBtYXJrZXJcblx0XHRcdFx0XHRcdG51bWJlciArPSBleHBySShpbmRleCsrKTtcblxuXHRcdFx0XHRcdFx0d2hpbGUoaXNEZWNpbWFsRGlnaXQoZXhwcklDb2RlKGluZGV4KSkpIHtcblx0XHRcdFx0XHRcdFx0bnVtYmVyICs9IGV4cHJJKGluZGV4KyspO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjaCA9IGV4cHJJKGluZGV4KTtcblx0XHRcdFx0XHRpZihjaCA9PT0gJ2UnIHx8IGNoID09PSAnRScpIHsgLy8gZXhwb25lbnQgbWFya2VyXG5cdFx0XHRcdFx0XHRudW1iZXIgKz0gZXhwckkoaW5kZXgrKyk7XG5cdFx0XHRcdFx0XHRjaCA9IGV4cHJJKGluZGV4KTtcblx0XHRcdFx0XHRcdGlmKGNoID09PSAnKycgfHwgY2ggPT09ICctJykgeyAvLyBleHBvbmVudCBzaWduXG5cdFx0XHRcdFx0XHRcdG51bWJlciArPSBleHBySShpbmRleCsrKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHdoaWxlKGlzRGVjaW1hbERpZ2l0KGV4cHJJQ29kZShpbmRleCkpKSB7IC8vZXhwb25lbnQgaXRzZWxmXG5cdFx0XHRcdFx0XHRcdG51bWJlciArPSBleHBySShpbmRleCsrKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKCFpc0RlY2ltYWxEaWdpdChleHBySUNvZGUoaW5kZXgtMSkpICkge1xuXHRcdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdFeHBlY3RlZCBleHBvbmVudCAoJyArIG51bWJlciArIGV4cHJJKGluZGV4KSArICcpJywgaW5kZXgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblxuXHRcdFx0XHRcdGNoQ29kZSA9IGV4cHJJQ29kZShpbmRleCk7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgdG8gbWFrZSBzdXJlIHRoaXMgaXNuJ3QgYSB2YXJpYWJsZSBuYW1lIHRoYXQgc3RhcnQgd2l0aCBhIG51bWJlciAoMTIzYWJjKVxuXHRcdFx0XHRcdGlmKGlzSWRlbnRpZmllclN0YXJ0KGNoQ29kZSkpIHtcblx0XHRcdFx0XHRcdHRocm93RXJyb3IoJ1ZhcmlhYmxlIG5hbWVzIGNhbm5vdCBzdGFydCB3aXRoIGEgbnVtYmVyICgnICtcblx0XHRcdFx0XHRcdFx0XHRcdG51bWJlciArIGV4cHJJKGluZGV4KSArICcpJywgaW5kZXgpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihjaENvZGUgPT09IFBFUklPRF9DT0RFKSB7XG5cdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdVbmV4cGVjdGVkIHBlcmlvZCcsIGluZGV4KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0dHlwZTogTElURVJBTCxcblx0XHRcdFx0XHRcdHZhbHVlOiBwYXJzZUZsb2F0KG51bWJlciksXG5cdFx0XHRcdFx0XHRyYXc6IG51bWJlclxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gUGFyc2VzIGEgc3RyaW5nIGxpdGVyYWwsIHN0YXJpbmcgd2l0aCBzaW5nbGUgb3IgZG91YmxlIHF1b3RlcyB3aXRoIGJhc2ljIHN1cHBvcnQgZm9yIGVzY2FwZSBjb2Rlc1xuXHRcdFx0XHQvLyBlLmcuIGBcImhlbGxvIHdvcmxkXCJgLCBgJ3RoaXMgaXNcXG5KU0VQJ2Bcblx0XHRcdFx0Z29iYmxlU3RyaW5nTGl0ZXJhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBzdHIgPSAnJywgcXVvdGUgPSBleHBySShpbmRleCsrKSwgY2xvc2VkID0gZmFsc2UsIGNoO1xuXG5cdFx0XHRcdFx0d2hpbGUoaW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdFx0XHRcdGNoID0gZXhwckkoaW5kZXgrKyk7XG5cdFx0XHRcdFx0XHRpZihjaCA9PT0gcXVvdGUpIHtcblx0XHRcdFx0XHRcdFx0Y2xvc2VkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoY2ggPT09ICdcXFxcJykge1xuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBmb3IgYWxsIG9mIHRoZSBjb21tb24gZXNjYXBlIGNvZGVzXG5cdFx0XHRcdFx0XHRcdGNoID0gZXhwckkoaW5kZXgrKyk7XG5cdFx0XHRcdFx0XHRcdHN3aXRjaChjaCkge1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ24nOiBzdHIgKz0gJ1xcbic7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ3InOiBzdHIgKz0gJ1xccic7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ3QnOiBzdHIgKz0gJ1xcdCc7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ2InOiBzdHIgKz0gJ1xcYic7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ2YnOiBzdHIgKz0gJ1xcZic7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ3YnOiBzdHIgKz0gJ1xceDBCJzsgYnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdCA6IHN0ciArPSAnXFxcXCcgKyBjaDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0c3RyICs9IGNoO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKCFjbG9zZWQpIHtcblx0XHRcdFx0XHRcdHRocm93RXJyb3IoJ1VuY2xvc2VkIHF1b3RlIGFmdGVyIFwiJytzdHIrJ1wiJywgaW5kZXgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBMSVRFUkFMLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHN0cixcblx0XHRcdFx0XHRcdHJhdzogcXVvdGUgKyBzdHIgKyBxdW90ZVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBHb2JibGVzIG9ubHkgaWRlbnRpZmllcnNcblx0XHRcdFx0Ly8gZS5nLjogYGZvb2AsIGBfdmFsdWVgLCBgJHgxYFxuXHRcdFx0XHQvLyBBbHNvLCB0aGlzIGZ1bmN0aW9uIGNoZWNrcyBpZiB0aGF0IGlkZW50aWZpZXIgaXMgYSBsaXRlcmFsOlxuXHRcdFx0XHQvLyAoZS5nLiBgdHJ1ZWAsIGBmYWxzZWAsIGBudWxsYCkgb3IgYHRoaXNgXG5cdFx0XHRcdGdvYmJsZUlkZW50aWZpZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgY2ggPSBleHBySUNvZGUoaW5kZXgpLCBzdGFydCA9IGluZGV4LCBpZGVudGlmaWVyO1xuXG5cdFx0XHRcdFx0aWYoaXNJZGVudGlmaWVyU3RhcnQoY2gpKSB7XG5cdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdVbmV4cGVjdGVkICcgKyBleHBySShpbmRleCksIGluZGV4KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR3aGlsZShpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Y2ggPSBleHBySUNvZGUoaW5kZXgpO1xuXHRcdFx0XHRcdFx0aWYoaXNJZGVudGlmaWVyUGFydChjaCkpIHtcblx0XHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZGVudGlmaWVyID0gZXhwci5zbGljZShzdGFydCwgaW5kZXgpO1xuXG5cdFx0XHRcdFx0aWYobGl0ZXJhbHMuaGFzT3duUHJvcGVydHkoaWRlbnRpZmllcikpIHtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IExJVEVSQUwsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBsaXRlcmFsc1tpZGVudGlmaWVyXSxcblx0XHRcdFx0XHRcdFx0cmF3OiBpZGVudGlmaWVyXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0gZWxzZSBpZihpZGVudGlmaWVyID09PSB0aGlzX3N0cikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHsgdHlwZTogVEhJU19FWFAgfTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogSURFTlRJRklFUixcblx0XHRcdFx0XHRcdFx0bmFtZTogaWRlbnRpZmllclxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gR29iYmxlcyBhIGxpc3Qgb2YgYXJndW1lbnRzIHdpdGhpbiB0aGUgY29udGV4dCBvZiBhIGZ1bmN0aW9uIGNhbGxcblx0XHRcdFx0Ly8gb3IgYXJyYXkgbGl0ZXJhbC4gVGhpcyBmdW5jdGlvbiBhbHNvIGFzc3VtZXMgdGhhdCB0aGUgb3BlbmluZyBjaGFyYWN0ZXJcblx0XHRcdFx0Ly8gYChgIG9yIGBbYCBoYXMgYWxyZWFkeSBiZWVuIGdvYmJsZWQsIGFuZCBnb2JibGVzIGV4cHJlc3Npb25zIGFuZCBjb21tYXNcblx0XHRcdFx0Ly8gdW50aWwgdGhlIHRlcm1pbmF0b3IgY2hhcmFjdGVyIGApYCBvciBgXWAgaXMgZW5jb3VudGVyZWQuXG5cdFx0XHRcdC8vIGUuZy4gYGZvbyhiYXIsIGJheilgLCBgbXlfZnVuYygpYCwgb3IgYFtiYXIsIGJhel1gXG5cdFx0XHRcdGdvYmJsZUFyZ3VtZW50cyA9IGZ1bmN0aW9uKHRlcm1pbmF0aW9uKSB7XG5cdFx0XHRcdFx0dmFyIGNoX2ksIGFyZ3MgPSBbXSwgbm9kZSwgY2xvc2VkID0gZmFsc2U7XG5cdFx0XHRcdFx0d2hpbGUoaW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdFx0XHRcdGdvYmJsZVNwYWNlcygpO1xuXHRcdFx0XHRcdFx0Y2hfaSA9IGV4cHJJQ29kZShpbmRleCk7XG5cdFx0XHRcdFx0XHRpZihjaF9pID09PSB0ZXJtaW5hdGlvbikgeyAvLyBkb25lIHBhcnNpbmdcblx0XHRcdFx0XHRcdFx0Y2xvc2VkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGNoX2kgPT09IENPTU1BX0NPREUpIHsgLy8gYmV0d2VlbiBleHByZXNzaW9uc1xuXHRcdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IGdvYmJsZUV4cHJlc3Npb24oKTtcblx0XHRcdFx0XHRcdFx0aWYoIW5vZGUgfHwgbm9kZS50eXBlID09PSBDT01QT1VORCkge1xuXHRcdFx0XHRcdFx0XHRcdHRocm93RXJyb3IoJ0V4cGVjdGVkIGNvbW1hJywgaW5kZXgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGFyZ3MucHVzaChub2RlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCFjbG9zZWQpIHtcblx0XHRcdFx0XHRcdHRocm93RXJyb3IoJ0V4cGVjdGVkICcgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKHRlcm1pbmF0aW9uKSwgaW5kZXgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gYXJncztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBHb2JibGUgYSBub24tbGl0ZXJhbCB2YXJpYWJsZSBuYW1lLiBUaGlzIHZhcmlhYmxlIG5hbWUgbWF5IGluY2x1ZGUgcHJvcGVydGllc1xuXHRcdFx0XHQvLyBlLmcuIGBmb29gLCBgYmFyLmJhemAsIGBmb29bJ2JhciddLmJhemBcblx0XHRcdFx0Ly8gSXQgYWxzbyBnb2JibGVzIGZ1bmN0aW9uIGNhbGxzOlxuXHRcdFx0XHQvLyBlLmcuIGBNYXRoLmFjb3Mob2JqLmFuZ2xlKWBcblx0XHRcdFx0Z29iYmxlVmFyaWFibGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgY2hfaSwgbm9kZTtcblx0XHRcdFx0XHRjaF9pID0gZXhwcklDb2RlKGluZGV4KTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmKGNoX2kgPT09IE9QQVJFTl9DT0RFKSB7XG5cdFx0XHRcdFx0XHRub2RlID0gZ29iYmxlR3JvdXAoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bm9kZSA9IGdvYmJsZUlkZW50aWZpZXIoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Z29iYmxlU3BhY2VzKCk7XG5cdFx0XHRcdFx0Y2hfaSA9IGV4cHJJQ29kZShpbmRleCk7XG5cdFx0XHRcdFx0d2hpbGUoY2hfaSA9PT0gUEVSSU9EX0NPREUgfHwgY2hfaSA9PT0gT0JSQUNLX0NPREUgfHwgY2hfaSA9PT0gT1BBUkVOX0NPREUpIHtcblx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHRpZihjaF9pID09PSBQRVJJT0RfQ09ERSkge1xuXHRcdFx0XHRcdFx0XHRnb2JibGVTcGFjZXMoKTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBNRU1CRVJfRVhQLFxuXHRcdFx0XHRcdFx0XHRcdGNvbXB1dGVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRvYmplY3Q6IG5vZGUsXG5cdFx0XHRcdFx0XHRcdFx0cHJvcGVydHk6IGdvYmJsZUlkZW50aWZpZXIoKVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKGNoX2kgPT09IE9CUkFDS19DT0RFKSB7XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogTUVNQkVSX0VYUCxcblx0XHRcdFx0XHRcdFx0XHRjb21wdXRlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRvYmplY3Q6IG5vZGUsXG5cdFx0XHRcdFx0XHRcdFx0cHJvcGVydHk6IGdvYmJsZUV4cHJlc3Npb24oKVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRnb2JibGVTcGFjZXMoKTtcblx0XHRcdFx0XHRcdFx0Y2hfaSA9IGV4cHJJQ29kZShpbmRleCk7XG5cdFx0XHRcdFx0XHRcdGlmKGNoX2kgIT09IENCUkFDS19DT0RFKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhyb3dFcnJvcignVW5jbG9zZWQgWycsIGluZGV4KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKGNoX2kgPT09IE9QQVJFTl9DT0RFKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEEgZnVuY3Rpb24gY2FsbCBpcyBiZWluZyBtYWRlOyBnb2JibGUgYWxsIHRoZSBhcmd1bWVudHNcblx0XHRcdFx0XHRcdFx0bm9kZSA9IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBDQUxMX0VYUCxcblx0XHRcdFx0XHRcdFx0XHQnYXJndW1lbnRzJzogZ29iYmxlQXJndW1lbnRzKENQQVJFTl9DT0RFKSxcblx0XHRcdFx0XHRcdFx0XHRjYWxsZWU6IG5vZGVcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGdvYmJsZVNwYWNlcygpO1xuXHRcdFx0XHRcdFx0Y2hfaSA9IGV4cHJJQ29kZShpbmRleCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBub2RlO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFJlc3BvbnNpYmxlIGZvciBwYXJzaW5nIGEgZ3JvdXAgb2YgdGhpbmdzIHdpdGhpbiBwYXJlbnRoZXNlcyBgKClgXG5cdFx0XHRcdC8vIFRoaXMgZnVuY3Rpb24gYXNzdW1lcyB0aGF0IGl0IG5lZWRzIHRvIGdvYmJsZSB0aGUgb3BlbmluZyBwYXJlbnRoZXNpc1xuXHRcdFx0XHQvLyBhbmQgdGhlbiB0cmllcyB0byBnb2JibGUgZXZlcnl0aGluZyB3aXRoaW4gdGhhdCBwYXJlbnRoZXNpcywgYXNzdW1pbmdcblx0XHRcdFx0Ly8gdGhhdCB0aGUgbmV4dCB0aGluZyBpdCBzaG91bGQgc2VlIGlzIHRoZSBjbG9zZSBwYXJlbnRoZXNpcy4gSWYgbm90LFxuXHRcdFx0XHQvLyB0aGVuIHRoZSBleHByZXNzaW9uIHByb2JhYmx5IGRvZXNuJ3QgaGF2ZSBhIGApYFxuXHRcdFx0XHRnb2JibGVHcm91cCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0dmFyIG5vZGUgPSBnb2JibGVFeHByZXNzaW9uKCk7XG5cdFx0XHRcdFx0Z29iYmxlU3BhY2VzKCk7XG5cdFx0XHRcdFx0aWYoZXhwcklDb2RlKGluZGV4KSA9PT0gQ1BBUkVOX0NPREUpIHtcblx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbm9kZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3dFcnJvcignVW5jbG9zZWQgKCcsIGluZGV4KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gUmVzcG9uc2libGUgZm9yIHBhcnNpbmcgQXJyYXkgbGl0ZXJhbHMgYFsxLCAyLCAzXWBcblx0XHRcdFx0Ly8gVGhpcyBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgaXQgbmVlZHMgdG8gZ29iYmxlIHRoZSBvcGVuaW5nIGJyYWNrZXRcblx0XHRcdFx0Ly8gYW5kIHRoZW4gdHJpZXMgdG8gZ29iYmxlIHRoZSBleHByZXNzaW9ucyBhcyBhcmd1bWVudHMuXG5cdFx0XHRcdGdvYmJsZUFycmF5ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0dHlwZTogQVJSQVlfRVhQLFxuXHRcdFx0XHRcdFx0ZWxlbWVudHM6IGdvYmJsZUFyZ3VtZW50cyhDQlJBQ0tfQ09ERSlcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdG5vZGVzID0gW10sIGNoX2ksIG5vZGU7XG5cdFx0XHRcdFxuXHRcdFx0d2hpbGUoaW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdFx0Y2hfaSA9IGV4cHJJQ29kZShpbmRleCk7XG5cblx0XHRcdFx0Ly8gRXhwcmVzc2lvbnMgY2FuIGJlIHNlcGFyYXRlZCBieSBzZW1pY29sb25zLCBjb21tYXMsIG9yIGp1c3QgaW5mZXJyZWQgd2l0aG91dCBhbnlcblx0XHRcdFx0Ly8gc2VwYXJhdG9yc1xuXHRcdFx0XHRpZihjaF9pID09PSBTRU1DT0xfQ09ERSB8fCBjaF9pID09PSBDT01NQV9DT0RFKSB7XG5cdFx0XHRcdFx0aW5kZXgrKzsgLy8gaWdub3JlIHNlcGFyYXRvcnNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBUcnkgdG8gZ29iYmxlIGVhY2ggZXhwcmVzc2lvbiBpbmRpdmlkdWFsbHlcblx0XHRcdFx0XHRpZigobm9kZSA9IGdvYmJsZUV4cHJlc3Npb24oKSkpIHtcblx0XHRcdFx0XHRcdG5vZGVzLnB1c2gobm9kZSk7XG5cdFx0XHRcdFx0Ly8gSWYgd2Ugd2VyZW4ndCBhYmxlIHRvIGZpbmQgYSBiaW5hcnkgZXhwcmVzc2lvbiBhbmQgYXJlIG91dCBvZiByb29tLCB0aGVuXG5cdFx0XHRcdFx0Ly8gdGhlIGV4cHJlc3Npb24gcGFzc2VkIGluIHByb2JhYmx5IGhhcyB0b28gbXVjaFxuXHRcdFx0XHRcdH0gZWxzZSBpZihpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdFx0dGhyb3dFcnJvcignVW5leHBlY3RlZCBcIicgKyBleHBySShpbmRleCkgKyAnXCInLCBpbmRleCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIHRoZXJlJ3Mgb25seSBvbmUgZXhwcmVzc2lvbiBqdXN0IHRyeSByZXR1cm5pbmcgdGhlIGV4cHJlc3Npb25cblx0XHRcdGlmKG5vZGVzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRyZXR1cm4gbm9kZXNbMF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IENPTVBPVU5ELFxuXHRcdFx0XHRcdGJvZHk6IG5vZGVzXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fTtcblxuXHQvLyBUbyBiZSBmaWxsZWQgaW4gYnkgdGhlIHRlbXBsYXRlXG5cdGpzZXAudmVyc2lvbiA9ICc8JT0gdmVyc2lvbiAlPic7XG5cdGpzZXAudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuICdKYXZhU2NyaXB0IEV4cHJlc3Npb24gUGFyc2VyIChKU0VQKSB2JyArIGpzZXAudmVyc2lvbjsgfTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLmFkZFVuYXJ5T3Bcblx0ICogQHBhcmFtIHtzdHJpbmd9IG9wX25hbWUgVGhlIG5hbWUgb2YgdGhlIHVuYXJ5IG9wIHRvIGFkZFxuXHQgKiBAcmV0dXJuIGpzZXBcblx0ICovXG5cdGpzZXAuYWRkVW5hcnlPcCA9IGZ1bmN0aW9uKG9wX25hbWUpIHtcblx0XHRtYXhfdW5vcF9sZW4gPSBNYXRoLm1heChvcF9uYW1lLmxlbmd0aCwgbWF4X3Vub3BfbGVuKTtcblx0XHR1bmFyeV9vcHNbb3BfbmFtZV0gPSB0OyByZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLmFkZEJpbmFyeU9wXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBvcF9uYW1lIFRoZSBuYW1lIG9mIHRoZSBiaW5hcnkgb3AgdG8gYWRkXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBwcmVjZWRlbmNlIFRoZSBwcmVjZWRlbmNlIG9mIHRoZSBiaW5hcnkgb3AgKGNhbiBiZSBhIGZsb2F0KVxuXHQgKiBAcmV0dXJuIGpzZXBcblx0ICovXG5cdGpzZXAuYWRkQmluYXJ5T3AgPSBmdW5jdGlvbihvcF9uYW1lLCBwcmVjZWRlbmNlKSB7XG5cdFx0bWF4X2Jpbm9wX2xlbiA9IE1hdGgubWF4KG9wX25hbWUubGVuZ3RoLCBtYXhfYmlub3BfbGVuKTtcblx0XHRiaW5hcnlfb3BzW29wX25hbWVdID0gcHJlY2VkZW5jZTtcblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLmFkZExpdGVyYWxcblx0ICogQHBhcmFtIHtzdHJpbmd9IGxpdGVyYWxfbmFtZSBUaGUgbmFtZSBvZiB0aGUgbGl0ZXJhbCB0byBhZGRcblx0ICogQHBhcmFtIHsqfSBsaXRlcmFsX3ZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgbGl0ZXJhbFxuXHQgKiBAcmV0dXJuIGpzZXBcblx0ICovXG5cdGpzZXAuYWRkTGl0ZXJhbCA9IGZ1bmN0aW9uKGxpdGVyYWxfbmFtZSwgbGl0ZXJhbF92YWx1ZSkge1xuXHRcdGxpdGVyYWxzW2xpdGVyYWxfbmFtZV0gPSBsaXRlcmFsX3ZhbHVlO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAbWV0aG9kIGpzZXAucmVtb3ZlVW5hcnlPcFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gb3BfbmFtZSBUaGUgbmFtZSBvZiB0aGUgdW5hcnkgb3AgdG8gcmVtb3ZlXG5cdCAqIEByZXR1cm4ganNlcFxuXHQgKi9cblx0anNlcC5yZW1vdmVVbmFyeU9wID0gZnVuY3Rpb24ob3BfbmFtZSkge1xuXHRcdGRlbGV0ZSB1bmFyeV9vcHNbb3BfbmFtZV07XG5cdFx0aWYob3BfbmFtZS5sZW5ndGggPT09IG1heF91bm9wX2xlbikge1xuXHRcdFx0bWF4X3Vub3BfbGVuID0gZ2V0TWF4S2V5TGVuKHVuYXJ5X29wcyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAbWV0aG9kIGpzZXAucmVtb3ZlQmluYXJ5T3Bcblx0ICogQHBhcmFtIHtzdHJpbmd9IG9wX25hbWUgVGhlIG5hbWUgb2YgdGhlIGJpbmFyeSBvcCB0byByZW1vdmVcblx0ICogQHJldHVybiBqc2VwXG5cdCAqL1xuXHRqc2VwLnJlbW92ZUJpbmFyeU9wID0gZnVuY3Rpb24ob3BfbmFtZSkge1xuXHRcdGRlbGV0ZSBiaW5hcnlfb3BzW29wX25hbWVdO1xuXHRcdGlmKG9wX25hbWUubGVuZ3RoID09PSBtYXhfYmlub3BfbGVuKSB7XG5cdFx0XHRtYXhfYmlub3BfbGVuID0gZ2V0TWF4S2V5TGVuKGJpbmFyeV9vcHMpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLnJlbW92ZUxpdGVyYWxcblx0ICogQHBhcmFtIHtzdHJpbmd9IGxpdGVyYWxfbmFtZSBUaGUgbmFtZSBvZiB0aGUgbGl0ZXJhbCB0byByZW1vdmVcblx0ICogQHJldHVybiBqc2VwXG5cdCAqL1xuXHRqc2VwLnJlbW92ZUxpdGVyYWwgPSBmdW5jdGlvbihsaXRlcmFsX25hbWUpIHtcblx0XHRkZWxldGUgbGl0ZXJhbHNbbGl0ZXJhbF9uYW1lXTtcblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvLyBJbiBkZXNrdG9wIGVudmlyb25tZW50cywgaGF2ZSBhIHdheSB0byByZXN0b3JlIHRoZSBvbGQgdmFsdWUgZm9yIGBqc2VwYFxuXHRpZiAodHlwZW9mIGV4cG9ydHMgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0dmFyIG9sZF9qc2VwID0gcm9vdC5qc2VwO1xuXHRcdC8vIFRoZSBzdGFyIG9mIHRoZSBzaG93ISBJdCdzIGEgZnVuY3Rpb24hXG5cdFx0cm9vdC5qc2VwID0ganNlcDtcblx0XHQvLyBBbmQgYSBjb3VydGVvdXMgZnVuY3Rpb24gd2lsbGluZyB0byBtb3ZlIG91dCBvZiB0aGUgd2F5IGZvciBvdGhlciBzaW1pbGFybHktbmFtZWQgb2JqZWN0cyFcblx0XHRqc2VwLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmKHJvb3QuanNlcCA9PT0ganNlcCkge1xuXHRcdFx0XHRyb290LmpzZXAgPSBvbGRfanNlcDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBqc2VwO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0Ly8gSW4gTm9kZS5KUyBlbnZpcm9ubWVudHNcblx0XHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRcdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGpzZXA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4cG9ydHMucGFyc2UgPSBqc2VwO1xuXHRcdH1cblx0fVxufSh0aGlzKSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYWtlSnVpY2VDbGllbnQoanVpY2VDbGllbnQpIHtcblxuanVpY2VDbGllbnQuaWdub3JlZFBzZXVkb3MgPSBbJ2hvdmVyJywgJ2FjdGl2ZScsICdmb2N1cycsICd2aXNpdGVkJywgJ2xpbmsnXTtcbmp1aWNlQ2xpZW50LndpZHRoRWxlbWVudHMgPSBbJ1RBQkxFJywgJ1REJywgJ0lNRyddO1xuanVpY2VDbGllbnQuaGVpZ2h0RWxlbWVudHMgPSBbJ1RBQkxFJywgJ1REJywgJ0lNRyddO1xuanVpY2VDbGllbnQudGFibGVFbGVtZW50cyA9IFsnVEFCTEUnLCAnVEQnLCAnVEgnLCAnVFInLCAnVEQnLCAnQ0FQVElPTicsICdDT0xHUk9VUCcsICdDT0wnLCAnVEhFQUQnLCAnVEJPRFknLCAnVEZPT1QnXTtcbmp1aWNlQ2xpZW50Lm5vblZpc3VhbEVsZW1lbnRzID0gWyAnSEVBRCcsICdUSVRMRScsICdCQVNFJywgJ0xJTksnLCAnU1RZTEUnLCAnTUVUQScsICdTQ1JJUFQnLCAnTk9TQ1JJUFQnIF07XG5qdWljZUNsaWVudC5zdHlsZVRvQXR0cmlidXRlID0ge1xuICAnYmFja2dyb3VuZC1jb2xvcic6ICdiZ2NvbG9yJyxcbiAgJ2JhY2tncm91bmQtaW1hZ2UnOiAnYmFja2dyb3VuZCcsXG4gICd0ZXh0LWFsaWduJzogJ2FsaWduJyxcbiAgJ3ZlcnRpY2FsLWFsaWduJzogJ3ZhbGlnbidcbn07XG5qdWljZUNsaWVudC5leGNsdWRlZFByb3BlcnRpZXMgPSBbXTtcblxuanVpY2VDbGllbnQuanVpY2VEb2N1bWVudCA9IGp1aWNlRG9jdW1lbnQ7XG5qdWljZUNsaWVudC5pbmxpbmVEb2N1bWVudCA9IGlubGluZURvY3VtZW50O1xuXG5mdW5jdGlvbiBpbmxpbmVEb2N1bWVudCgkLCBjc3MsIG9wdGlvbnMpIHtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJ1bGVzID0gdXRpbHMucGFyc2VDU1MoY3NzKTtcbiAgdmFyIGVkaXRlZEVsZW1lbnRzID0gW107XG4gIHZhciBzdHlsZUF0dHJpYnV0ZU5hbWUgPSAnc3R5bGUnO1xuICBcbiAgaWYgKG9wdGlvbnMuc3R5bGVBdHRyaWJ1dGVOYW1lKSB7XG4gICAgc3R5bGVBdHRyaWJ1dGVOYW1lID0gb3B0aW9ucy5zdHlsZUF0dHJpYnV0ZU5hbWU7XG4gIH1cblxuICBydWxlcy5mb3JFYWNoKGhhbmRsZVJ1bGUpO1xuICBlZGl0ZWRFbGVtZW50cy5mb3JFYWNoKHNldFN0eWxlQXR0cnMpO1xuXG4gIGlmIChvcHRpb25zLmlubGluZVBzZXVkb0VsZW1lbnRzKSB7XG4gICAgZWRpdGVkRWxlbWVudHMuZm9yRWFjaChpbmxpbmVQc2V1ZG9FbGVtZW50cyk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5hcHBseVdpZHRoQXR0cmlidXRlcykge1xuICAgIGVkaXRlZEVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgIHNldERpbWVuc2lvbkF0dHJzKGVsLCAnd2lkdGgnKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmFwcGx5SGVpZ2h0QXR0cmlidXRlcykge1xuICAgIGVkaXRlZEVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgIHNldERpbWVuc2lvbkF0dHJzKGVsLCAnaGVpZ2h0Jyk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5hcHBseUF0dHJpYnV0ZXNUYWJsZUVsZW1lbnRzKSB7XG4gICAgZWRpdGVkRWxlbWVudHMuZm9yRWFjaChzZXRBdHRyaWJ1dGVzT25UYWJsZUVsZW1lbnRzKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmluc2VydFByZXNlcnZlZEV4dHJhQ3NzICYmIG9wdGlvbnMuZXh0cmFDc3MpIHtcbiAgICB2YXIgcHJlc2VydmVkVGV4dCA9IHV0aWxzLmdldFByZXNlcnZlZFRleHQob3B0aW9ucy5leHRyYUNzcywge1xuICAgICAgbWVkaWFRdWVyaWVzOiBvcHRpb25zLnByZXNlcnZlTWVkaWFRdWVyaWVzLFxuICAgICAgZm9udEZhY2VzOiBvcHRpb25zLnByZXNlcnZlRm9udEZhY2VzXG4gICAgfSk7XG4gICAgaWYgKHByZXNlcnZlZFRleHQpIHtcbiAgICAgIHZhciAkYXBwZW5kVG8gPSBudWxsO1xuICAgICAgaWYgKG9wdGlvbnMuaW5zZXJ0UHJlc2VydmVkRXh0cmFDc3MgIT09IHRydWUpIHtcbiAgICAgICAgJGFwcGVuZFRvID0gJChvcHRpb25zLmluc2VydFByZXNlcnZlZEV4dHJhQ3NzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRhcHBlbmRUbyA9ICQoJ2hlYWQnKTtcbiAgICAgICAgaWYgKCEkYXBwZW5kVG8ubGVuZ3RoKSB7ICRhcHBlbmRUbyA9ICQoJ2JvZHknKTsgfVxuICAgICAgICBpZiAoISRhcHBlbmRUby5sZW5ndGgpIHsgJGFwcGVuZFRvID0gJC5yb290KCk7IH1cbiAgICAgIH1cblxuICAgICAgJGFwcGVuZFRvLmZpcnN0KCkuYXBwZW5kKCc8c3R5bGU+JyArIHByZXNlcnZlZFRleHQgKyAnPC9zdHlsZT4nKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVSdWxlKHJ1bGUpIHtcbiAgICB2YXIgc2VsID0gcnVsZVswXTtcbiAgICB2YXIgc3R5bGUgPSBydWxlWzFdO1xuICAgIHZhciBzZWxlY3RvciA9IG5ldyB1dGlscy5TZWxlY3RvcihzZWwpO1xuICAgIHZhciBwYXJzZWRTZWxlY3RvciA9IHNlbGVjdG9yLnBhcnNlZCgpO1xuICAgIHZhciBwc2V1ZG9FbGVtZW50VHlwZSA9IGdldFBzZXVkb0VsZW1lbnRUeXBlKHBhcnNlZFNlbGVjdG9yKTtcblxuICAgIC8vIHNraXAgcnVsZSBpZiB0aGUgc2VsZWN0b3IgaGFzIGFueSBwc2V1ZG9zIHdoaWNoIGFyZSBpZ25vcmVkXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJzZWRTZWxlY3Rvci5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHN1YlNlbCA9IHBhcnNlZFNlbGVjdG9yW2ldO1xuICAgICAgaWYgKHN1YlNlbC5wc2V1ZG9zKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3ViU2VsLnBzZXVkb3MubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICB2YXIgc3ViU2VsUHNldWRvID0gc3ViU2VsLnBzZXVkb3Nbal07XG4gICAgICAgICAgaWYgKGp1aWNlQ2xpZW50Lmlnbm9yZWRQc2V1ZG9zLmluZGV4T2Yoc3ViU2VsUHNldWRvLm5hbWUpID49IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHNldWRvRWxlbWVudFR5cGUpIHtcbiAgICAgIHZhciBsYXN0ID0gcGFyc2VkU2VsZWN0b3JbcGFyc2VkU2VsZWN0b3IubGVuZ3RoIC0gMV07XG4gICAgICB2YXIgcHNldWRvcyA9IGxhc3QucHNldWRvcztcbiAgICAgIGxhc3QucHNldWRvcyA9IGZpbHRlckVsZW1lbnRQc2V1ZG9zKGxhc3QucHNldWRvcyk7XG4gICAgICBzZWwgPSBwYXJzZWRTZWxlY3Rvci50b1N0cmluZygpO1xuICAgICAgbGFzdC5wc2V1ZG9zID0gcHNldWRvcztcbiAgICB9XG5cbiAgICB2YXIgZWxzO1xuICAgIHRyeSB7XG4gICAgICBlbHMgPSAkKHNlbCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBza2lwIGludmFsaWQgc2VsZWN0b3JcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlbCA9IHRoaXM7XG5cbiAgICAgIGlmIChlbC5uYW1lICYmIGp1aWNlQ2xpZW50Lm5vblZpc3VhbEVsZW1lbnRzLmluZGV4T2YoZWwubmFtZS50b1VwcGVyQ2FzZSgpKSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBzZXVkb0VsZW1lbnRUeXBlKSB7XG4gICAgICAgIHZhciBwc2V1ZG9FbFByb3BOYW1lID0gJ3BzZXVkbycgKyBwc2V1ZG9FbGVtZW50VHlwZTtcbiAgICAgICAgdmFyIHBzZXVkb0VsID0gZWxbcHNldWRvRWxQcm9wTmFtZV07XG4gICAgICAgIGlmICghcHNldWRvRWwpIHtcbiAgICAgICAgICBwc2V1ZG9FbCA9IGVsW3BzZXVkb0VsUHJvcE5hbWVdID0gJCgnPHNwYW4gLz4nKS5nZXQoMCk7XG4gICAgICAgICAgcHNldWRvRWwucHNldWRvRWxlbWVudFR5cGUgPSBwc2V1ZG9FbGVtZW50VHlwZTtcbiAgICAgICAgICBwc2V1ZG9FbC5wc2V1ZG9FbGVtZW50UGFyZW50ID0gZWw7XG4gICAgICAgICAgZWxbcHNldWRvRWxQcm9wTmFtZV0gPSBwc2V1ZG9FbDtcbiAgICAgICAgfVxuICAgICAgICBlbCA9IHBzZXVkb0VsO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWVsLnN0eWxlUHJvcHMpIHtcbiAgICAgICAgZWwuc3R5bGVQcm9wcyA9IHt9O1xuXG4gICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IGhhcyBpbmxpbmUgc3R5bGVzLCBmYWtlIHNlbGVjdG9yIHdpdGggdG9wbW9zdCBzcGVjaWZpY2l0eVxuICAgICAgICBpZiAoJChlbCkuYXR0cihzdHlsZUF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgICAgdmFyIGNzc1RleHQgPSAnKiB7ICcgKyAkKGVsKS5hdHRyKHN0eWxlQXR0cmlidXRlTmFtZSkgKyAnIH0gJztcbiAgICAgICAgICBhZGRQcm9wcyh1dGlscy5wYXJzZUNTUyhjc3NUZXh0KVswXVsxXSwgbmV3IHV0aWxzLlNlbGVjdG9yKCc8c3R5bGU+JywgdHJ1ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3RvcmUgcmVmZXJlbmNlIHRvIGFuIGVsZW1lbnQgd2UgbmVlZCB0byBjb21waWxlIHN0eWxlPVwiXCIgYXR0ciBmb3JcbiAgICAgICAgZWRpdGVkRWxlbWVudHMucHVzaChlbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGdvIHRocm91Z2ggdGhlIHByb3BlcnRpZXNcbiAgICAgIGZ1bmN0aW9uIGFkZFByb3BzKHN0eWxlLCBzZWxlY3Rvcikge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0eWxlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGlmIChzdHlsZVtpXS50eXBlID09ICdwcm9wZXJ0eScpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gc3R5bGVbaV0ubmFtZTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHN0eWxlW2ldLnZhbHVlO1xuICAgICAgICAgICAgdmFyIGltcG9ydGFudCA9IHN0eWxlW2ldLnZhbHVlLm1hdGNoKC8haW1wb3J0YW50JC8pICE9PSBudWxsO1xuICAgICAgICAgICAgaWYgKGltcG9ydGFudCAmJiAhb3B0aW9ucy5wcmVzZXJ2ZUltcG9ydGFudCkgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHMqIWltcG9ydGFudCQvLCAnJyk7XG4gICAgICAgICAgICAvLyBhZGRzIGxpbmUgbnVtYmVyIGFuZCBjb2x1bW4gbnVtYmVyIGZvciB0aGUgcHJvcGVydGllcyBhcyBcImFkZGl0aW9uYWxQcmlvcml0eVwiIHRvIHRoZSBcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgYmVjYXVzZSBpbiBDU1MgdGhlIHBvc2l0aW9uIGRpcmVjdGx5IGFmZmVjdCB0aGUgcHJpb3JpdHkuXG4gICAgICAgICAgICB2YXIgYWRkaXRpb25hbFByaW9yaXR5ID0gW3N0eWxlW2ldLnBvc2l0aW9uLnN0YXJ0LmxpbmUsIHN0eWxlW2ldLnBvc2l0aW9uLnN0YXJ0LmNvbF07XG4gICAgICAgICAgICB2YXIgcHJvcCA9IG5ldyB1dGlscy5Qcm9wZXJ0eShuYW1lLCB2YWx1ZSwgc2VsZWN0b3IsIGltcG9ydGFudCA/IDIgOiAwLCBhZGRpdGlvbmFsUHJpb3JpdHkpO1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nID0gZWwuc3R5bGVQcm9wc1tuYW1lXTtcblxuICAgICAgICAgICAgLy8gaWYgcHJvcGVydHkgbmFtZSBpcyBub3QgaW4gdGhlIGV4Y2x1ZGVkIHByb3BlcnRpZXMgYXJyYXlcbiAgICAgICAgICAgIGlmIChqdWljZUNsaWVudC5leGNsdWRlZFByb3BlcnRpZXMuaW5kZXhPZihuYW1lKSA8IDApIHtcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLmNvbXBhcmUocHJvcCkgPT09IHByb3AgfHwgIWV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVsZXRpbmcgYSBwcm9wZXJ0eSBsZXQgdXMgY2hhbmdlIHRoZSBvcmRlciAobW92ZSBpdCB0byB0aGUgZW5kIGluIHRoZSBzZXRTdHlsZUF0dHJzIGxvb3ApXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLnNlbGVjdG9yICE9PSBzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgZGVsZXRlIGVsLnN0eWxlUHJvcHNbbmFtZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgICAgLy8gbWFrZSBcInByb3BcIiBhIHNwZWNpYWwgY29tcG9zZWQgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgICBwcm9wLm5leHRQcm9wID0gZXhpc3Rpbmc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWwuc3R5bGVQcm9wc1tuYW1lXSA9IHByb3A7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYWRkUHJvcHMoc3R5bGUsIHNlbGVjdG9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFN0eWxlQXR0cnMoZWwpIHtcbiAgICB2YXIgbCA9IE9iamVjdC5rZXlzKGVsLnN0eWxlUHJvcHMpLmxlbmd0aDtcbiAgICB2YXIgcHJvcHMgPSBbXTtcbiAgICAvLyBIZXJlIHdlIGxvb3AgZWFjaCBwcm9wZXJ0eSBhbmQgbWFrZSBzdXJlIHRvIFwiZXhwYW5kXCJcbiAgICAvLyBsaW5rZWQgXCJuZXh0UHJvcFwiIHByb3BlcnRpZXMgaGFwcGVuaW5nIHdoZW4gdGhlIHNhbWUgcHJvcGVydHlcbiAgICAvLyBpcyBkZWNsYXJlZCBtdWx0aXBsZSB0aW1lcyBpbiB0aGUgc2FtZSBzZWxlY3Rvci5cbiAgICBPYmplY3Qua2V5cyhlbC5zdHlsZVByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIG5wID0gZWwuc3R5bGVQcm9wc1trZXldO1xuICAgICAgd2hpbGUgKHR5cGVvZiBucCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvcHMucHVzaChucCk7XG4gICAgICAgIG5wID0gbnAubmV4dFByb3A7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gc29ydCBwcm9wZXJ0aWVzIGJ5IHRoZWlyIG9yaWdpbmF0aW5nIHNlbGVjdG9yJ3Mgc3BlY2lmaWNpdHkgc28gdGhhdFxuICAgIC8vIHByb3BzIGxpa2UgXCJwYWRkaW5nXCIgYW5kIFwicGFkZGluZy1ib3R0b21cIiBhcmUgcmVzb2x2ZWQgYXMgZXhwZWN0ZWQuXG4gICAgcHJvcHMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gYS5jb21wYXJlRnVuYyhiKTtcbiAgICB9KTtcbiAgICB2YXIgc3RyaW5nID0gcHJvcHNcbiAgICAgIC5maWx0ZXIoZnVuY3Rpb24ocHJvcCkge1xuICAgICAgICAvLyBDb250ZW50IGJlY29tZXMgdGhlIGlubmVySFRNTCBvZiBwc2V1ZG8gZWxlbWVudHMsIG5vdCB1c2VkIGFzIGFcbiAgICAgICAgLy8gc3R5bGUgcHJvcGVydHlcbiAgICAgICAgcmV0dXJuIHByb3AucHJvcCAhPT0gJ2NvbnRlbnQnO1xuICAgICAgfSlcbiAgICAgIC5tYXAoZnVuY3Rpb24ocHJvcCkge1xuICAgICAgICByZXR1cm4gcHJvcC5wcm9wICsgJzogJyArIHByb3AudmFsdWUucmVwbGFjZSgvW1wiXS9nLCAnXFwnJykgKyAnOyc7XG4gICAgICB9KVxuICAgICAgLmpvaW4oJyAnKTtcbiAgICBpZiAoc3RyaW5nKSB7XG4gICAgICAkKGVsKS5hdHRyKHN0eWxlQXR0cmlidXRlTmFtZSwgc3RyaW5nKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbmxpbmVQc2V1ZG9FbGVtZW50cyhlbCkge1xuICAgIGlmIChlbC5wc2V1ZG9FbGVtZW50VHlwZSAmJiBlbC5zdHlsZVByb3BzLmNvbnRlbnQpIHtcbiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUNvbnRlbnQoZWwuc3R5bGVQcm9wcy5jb250ZW50LnZhbHVlKTtcbiAgICAgIGlmIChwYXJzZWQuaW1nKSB7XG4gICAgICAgIGVsLm5hbWUgPSAnaW1nJztcbiAgICAgICAgJChlbCkuYXR0cignc3JjJywgcGFyc2VkLmltZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGVsKS50ZXh0KHBhcnNlZCk7XG4gICAgICB9XG4gICAgICB2YXIgcGFyZW50ID0gZWwucHNldWRvRWxlbWVudFBhcmVudDtcbiAgICAgIGlmIChlbC5wc2V1ZG9FbGVtZW50VHlwZSA9PT0gJ2JlZm9yZScpIHtcbiAgICAgICAgJChwYXJlbnQpLnByZXBlbmQoZWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChwYXJlbnQpLmFwcGVuZChlbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0RGltZW5zaW9uQXR0cnMoZWwsIGRpbWVuc2lvbikge1xuICAgIGlmICghZWwubmFtZSkgeyByZXR1cm47IH1cbiAgICB2YXIgZWxOYW1lID0gZWwubmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmIChqdWljZUNsaWVudFtkaW1lbnNpb24gKyAnRWxlbWVudHMnXS5pbmRleE9mKGVsTmFtZSkgPiAtMSkge1xuICAgICAgZm9yICh2YXIgaSBpbiBlbC5zdHlsZVByb3BzKSB7XG4gICAgICAgIGlmIChlbC5zdHlsZVByb3BzW2ldLnByb3AgPT09IGRpbWVuc2lvbikge1xuICAgICAgICAgIGlmIChlbC5zdHlsZVByb3BzW2ldLnZhbHVlLm1hdGNoKC9weC8pKSB7XG4gICAgICAgICAgICB2YXIgcHhTaXplID0gZWwuc3R5bGVQcm9wc1tpXS52YWx1ZS5yZXBsYWNlKCdweCcsICcnKTtcbiAgICAgICAgICAgICQoZWwpLmF0dHIoZGltZW5zaW9uLCBweFNpemUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoanVpY2VDbGllbnQudGFibGVFbGVtZW50cy5pbmRleE9mKGVsTmFtZSkgPiAtMSAmJiBlbC5zdHlsZVByb3BzW2ldLnZhbHVlLm1hdGNoKC9cXCUvKSkge1xuICAgICAgICAgICAgJChlbCkuYXR0cihkaW1lbnNpb24sIGVsLnN0eWxlUHJvcHNbaV0udmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEF0dHJpYnV0ZXNPblRhYmxlRWxlbWVudHMoZWwpIHtcbiAgICBpZiAoIWVsLm5hbWUpIHsgcmV0dXJuOyB9XG4gICAgdmFyIGVsTmFtZSA9IGVsLm5hbWUudG9VcHBlckNhc2UoKTtcbiAgICB2YXIgc3R5bGVQcm9wcyA9IE9iamVjdC5rZXlzKGp1aWNlQ2xpZW50LnN0eWxlVG9BdHRyaWJ1dGUpO1xuXG4gICAgaWYgKGp1aWNlQ2xpZW50LnRhYmxlRWxlbWVudHMuaW5kZXhPZihlbE5hbWUpID4gLTEpIHtcbiAgICAgIGZvciAodmFyIGkgaW4gZWwuc3R5bGVQcm9wcykge1xuICAgICAgICBpZiAoc3R5bGVQcm9wcy5pbmRleE9mKGVsLnN0eWxlUHJvcHNbaV0ucHJvcCkgPiAtMSkge1xuICAgICAgICAgICQoZWwpLmF0dHIoanVpY2VDbGllbnQuc3R5bGVUb0F0dHJpYnV0ZVtlbC5zdHlsZVByb3BzW2ldLnByb3BdLCBlbC5zdHlsZVByb3BzW2ldLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZUNvbnRlbnQoY29udGVudCkge1xuICBpZiAoY29udGVudCA9PT0gJ25vbmUnIHx8IGNvbnRlbnQgPT09ICdub3JtYWwnKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgdmFyIGltYWdlVXJsTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eXFxzKnVybFxccypcXChcXHMqKC4qPylcXHMqXFwpXFxzKiQvaSk7XG4gIGlmIChpbWFnZVVybE1hdGNoKSB7XG4gICAgdmFyIHVybCA9IGltYWdlVXJsTWF0Y2hbMV0ucmVwbGFjZSgvXlsnXCJdfFsnXCJdJC9nLCAnJyk7XG4gICAgcmV0dXJuIHsgaW1nOiB1cmwgfTtcbiAgfVxuXG4gIC8vIE5haXZlIHBhcnNpbmcsIGFzc3VtZSB3ZWxsLWZvcm1lZCB2YWx1ZVxuICBjb250ZW50ID0gY29udGVudC5zbGljZSgxLCBjb250ZW50Lmxlbmd0aCAtIDEpO1xuICAvLyBOYWl2ZSB1bmVzY2FwZSwgYXNzdW1lIG5vIHVuaWNvZGUgY2hhciBjb2Rlc1xuICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXFxcL2csICcnKTtcbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8vIFJldHVybiBcImJlZm9yZVwiIG9yIFwiYWZ0ZXJcIiBpZiB0aGUgZ2l2ZW4gc2VsZWN0b3IgaXMgYSBwc2V1ZG8gZWxlbWVudCAoZS5nLixcbi8vIGE6OmFmdGVyKS5cbmZ1bmN0aW9uIGdldFBzZXVkb0VsZW1lbnRUeXBlKHNlbGVjdG9yKSB7XG4gIGlmIChzZWxlY3Rvci5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcHNldWRvcyA9IHNlbGVjdG9yW3NlbGVjdG9yLmxlbmd0aCAtIDFdLnBzZXVkb3M7XG4gIGlmICghcHNldWRvcykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHNldWRvcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpc1BzZXVkb0VsZW1lbnROYW1lKHBzZXVkb3NbaV0pKSB7XG4gICAgICByZXR1cm4gcHNldWRvc1tpXS5uYW1lO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpc1BzZXVkb0VsZW1lbnROYW1lKHBzZXVkbykge1xuICByZXR1cm4gcHNldWRvLm5hbWUgPT09ICdiZWZvcmUnIHx8IHBzZXVkby5uYW1lID09PSAnYWZ0ZXInO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJFbGVtZW50UHNldWRvcyhwc2V1ZG9zKSB7XG4gIHJldHVybiBwc2V1ZG9zLmZpbHRlcihmdW5jdGlvbihwc2V1ZG8pIHtcbiAgICByZXR1cm4gIWlzUHNldWRvRWxlbWVudE5hbWUocHNldWRvKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGp1aWNlRG9jdW1lbnQoJCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gdXRpbHMuZ2V0RGVmYXVsdE9wdGlvbnMob3B0aW9ucyk7XG4gIHZhciBjc3MgPSBleHRyYWN0Q3NzRnJvbURvY3VtZW50KCQsIG9wdGlvbnMpO1xuICBjc3MgKz0gJ1xcbicgKyBvcHRpb25zLmV4dHJhQ3NzO1xuICBpbmxpbmVEb2N1bWVudCgkLCBjc3MsIG9wdGlvbnMpO1xuICByZXR1cm4gJDtcbn1cblxuZnVuY3Rpb24gZ2V0U3R5bGVzRGF0YSgkLCBvcHRpb25zKSB7XG4gIHZhciByZXN1bHRzID0gW107XG4gIHZhciBzdHlsZXNMaXN0ID0gJCgnc3R5bGUnKTtcbiAgdmFyIHN0eWxlRGF0YUxpc3QsIHN0eWxlRGF0YSwgc3R5bGVFbGVtZW50O1xuICBzdHlsZXNMaXN0LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgc3R5bGVFbGVtZW50ID0gdGhpcztcbiAgICBzdHlsZURhdGFMaXN0ID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG4gICAgaWYgKHN0eWxlRGF0YUxpc3QubGVuZ3RoICE9PSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN0eWxlRGF0YSA9IHN0eWxlRGF0YUxpc3RbMF0uZGF0YTtcbiAgICBpZiAob3B0aW9ucy5hcHBseVN0eWxlVGFncyAmJiAkKHN0eWxlRWxlbWVudCkuYXR0cignZGF0YS1lbWJlZCcpID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlc3VsdHMucHVzaChzdHlsZURhdGEpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5yZW1vdmVTdHlsZVRhZ3MgJiYgJChzdHlsZUVsZW1lbnQpLmF0dHIoJ2RhdGEtZW1iZWQnKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgcHJlc2VydmVkVGV4dCA9IHV0aWxzLmdldFByZXNlcnZlZFRleHQoc3R5bGVFbGVtZW50LmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlLCB7XG4gICAgICAgIG1lZGlhUXVlcmllczogb3B0aW9ucy5wcmVzZXJ2ZU1lZGlhUXVlcmllcyxcbiAgICAgICAgZm9udEZhY2VzOiBvcHRpb25zLnByZXNlcnZlRm9udEZhY2VzXG4gICAgICB9KTtcbiAgICAgIGlmIChwcmVzZXJ2ZWRUZXh0KSB7XG4gICAgICAgIHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9IHByZXNlcnZlZFRleHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKHN0eWxlRWxlbWVudCkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuICAgICQoc3R5bGVFbGVtZW50KS5yZW1vdmVBdHRyKCdkYXRhLWVtYmVkJyk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0cztcbn1cblxuZnVuY3Rpb24gZXh0cmFjdENzc0Zyb21Eb2N1bWVudCgkLCBvcHRpb25zKSB7XG4gIHZhciByZXN1bHRzID0gZ2V0U3R5bGVzRGF0YSgkLCBvcHRpb25zKTtcbiAgdmFyIGNzcyA9IHJlc3VsdHMuam9pbignXFxuJyk7XG4gIHJldHVybiBjc3M7XG59XG5cbnJldHVybiBqdWljZUNsaWVudDtcblxufTsiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IFByb3BlcnR5O1xuXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG4vKipcbiAqIENTUyBwcm9wZXJ0eSBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtTZWxlY3Rvcn0gc2VsZWN0b3IgdGhlIHByb3BlcnR5IG9yaWdpbmF0ZXMgZnJvbVxuICogQHBhcmFtIHtJbnRlZ2VyfSBwcmlvcml0eSAwIGZvciBub3JtYWwgcHJvcGVydGllcywgMiBmb3IgIWltcG9ydGFudCBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtBcnJheX0gYWRkaXRpb25hbCBhcnJheSBvZiBpbnRlZ2VycyByZXByZXNlbnRpbmcgbW9yZSBkZXRhaWxlZCBwcmlvcml0aWVzIChzb3J0aW5nKVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBQcm9wZXJ0eShwcm9wLCB2YWx1ZSwgc2VsZWN0b3IsIHByaW9yaXR5LCBhZGRpdGlvbmFsUHJpb3JpdHkpIHtcbiAgdGhpcy5wcm9wID0gcHJvcDtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuICB0aGlzLmFkZGl0aW9uYWxQcmlvcml0eSA9IGFkZGl0aW9uYWxQcmlvcml0eSB8fCBbXTtcbn1cblxuLyoqXG4gKiBDb21wYXJlcyB3aXRoIGFub3RoZXIgUHJvcGVydHkgYmFzZWQgb24gU2VsZWN0b3Ijc3BlY2lmaWNpdHkuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5Qcm9wZXJ0eS5wcm90b3R5cGUuY29tcGFyZUZ1bmMgPSBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICB2YXIgYSA9IFtdO1xuICBhLnB1c2guYXBwbHkoYSwgdGhpcy5zZWxlY3Rvci5zcGVjaWZpY2l0eSgpKTtcbiAgYS5wdXNoLmFwcGx5KGEsIHRoaXMuYWRkaXRpb25hbFByaW9yaXR5KTtcbiAgYVswXSArPSB0aGlzLnByaW9yaXR5O1xuICB2YXIgYiA9IFtdO1xuICBiLnB1c2guYXBwbHkoYiwgcHJvcGVydHkuc2VsZWN0b3Iuc3BlY2lmaWNpdHkoKSk7XG4gIGIucHVzaC5hcHBseShiLCBwcm9wZXJ0eS5hZGRpdGlvbmFsUHJpb3JpdHkpO1xuICBiWzBdICs9IHByb3BlcnR5LnByaW9yaXR5O1xuICByZXR1cm4gdXRpbHMuY29tcGFyZUZ1bmMoYSwgYik7XG59O1xuXG5Qcm9wZXJ0eS5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uKHByb3BlcnR5KSB7XG4gIHZhciB3aW5uZXIgPSB0aGlzLmNvbXBhcmVGdW5jKHByb3BlcnR5KTtcbiAgaWYgKHdpbm5lciA9PT0gMSkgcmV0dXJuIHRoaXM7XG4gIHJldHVybiBwcm9wZXJ0eTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIENTUyBwcm9wZXJ0eVxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUHJvcGVydHkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnByb3AgKyAnOiAnICsgdGhpcy52YWx1ZS5yZXBsYWNlKC9bJ1wiXSsvZywgJycpICsgJzsnO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHBhcnNlciA9IHJlcXVpcmUoJ3NsaWNrL3BhcnNlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBTZWxlY3RvcjtcblxuLyoqXG4gKiBDU1Mgc2VsZWN0b3IgY29uc3RydWN0b3IuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIHRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IG9wdGlvbmFsbHksIHByZWNhbGN1bGF0ZWQgc3BlY2lmaWNpdHlcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gU2VsZWN0b3IodGV4dCwgc3R5bGVBdHRyaWJ1dGUpIHtcbiAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgdGhpcy5zcGVjID0gdW5kZWZpbmVkO1xuICB0aGlzLnN0eWxlQXR0cmlidXRlID0gc3R5bGVBdHRyaWJ1dGUgfHwgZmFsc2U7XG59XG5cbi8qKlxuICogR2V0IHBhcnNlZCBzZWxlY3Rvci5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblNlbGVjdG9yLnByb3RvdHlwZS5wYXJzZWQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLnRva2VucykgeyB0aGlzLnRva2VucyA9IHBhcnNlKHRoaXMudGV4dCk7IH1cbiAgcmV0dXJuIHRoaXMudG9rZW5zO1xufTtcblxuLyoqXG4gKiBMYXp5IHNwZWNpZmljaXR5IGdldHRlclxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuU2VsZWN0b3IucHJvdG90eXBlLnNwZWNpZmljaXR5ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzdHlsZUF0dHJpYnV0ZSA9IHRoaXMuc3R5bGVBdHRyaWJ1dGU7XG4gIGlmICghdGhpcy5zcGVjKSB7IHRoaXMuc3BlYyA9IHNwZWNpZmljaXR5KHRoaXMudGV4dCwgdGhpcy5wYXJzZWQoKSk7IH1cbiAgcmV0dXJuIHRoaXMuc3BlYztcblxuICBmdW5jdGlvbiBzcGVjaWZpY2l0eSh0ZXh0LCBwYXJzZWQpIHtcbiAgICB2YXIgZXhwcmVzc2lvbnMgPSBwYXJzZWQgfHwgcGFyc2UodGV4dCk7XG4gICAgdmFyIHNwZWMgPSBbc3R5bGVBdHRyaWJ1dGUgPyAxIDogMCwgMCwgMCwgMF07XG4gICAgdmFyIG5vdHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwcmVzc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBleHByZXNzaW9uID0gZXhwcmVzc2lvbnNbaV07XG4gICAgICB2YXIgcHNldWRvcyA9IGV4cHJlc3Npb24ucHNldWRvcztcblxuICAgICAgLy8gaWQgYXdhcmRzIGEgcG9pbnQgaW4gdGhlIHNlY29uZCBjb2x1bW5cbiAgICAgIGlmIChleHByZXNzaW9uLmlkKSB7IHNwZWNbMV0rKzsgfVxuXG4gICAgICAvLyBjbGFzc2VzIGFuZCBhdHRyaWJ1dGVzIGF3YXJkIGEgcG9pbnQgZWFjaCBpbiB0aGUgdGhpcmQgY29sdW1uXG4gICAgICBpZiAoZXhwcmVzc2lvbi5hdHRyaWJ1dGVzKSB7IHNwZWNbMl0gKz0gZXhwcmVzc2lvbi5hdHRyaWJ1dGVzLmxlbmd0aDsgfVxuICAgICAgaWYgKGV4cHJlc3Npb24uY2xhc3NMaXN0KSB7IHNwZWNbMl0gKz0gZXhwcmVzc2lvbi5jbGFzc0xpc3QubGVuZ3RoOyB9XG5cbiAgICAgIC8vIHRhZyBhd2FyZHMgYSBwb2ludCBpbiB0aGUgZm91cnRoIGNvbHVtblxuICAgICAgaWYgKGV4cHJlc3Npb24udGFnICYmIGV4cHJlc3Npb24udGFnICE9PSAnKicpIHsgc3BlY1szXSsrOyB9XG5cbiAgICAgIC8vIHBzZXVkb3MgYXdhcmQgYSBwb2ludCBlYWNoIGluIHRoZSBmb3VydGggY29sdW1uXG4gICAgICBpZiAocHNldWRvcykge1xuICAgICAgICBzcGVjWzNdICs9IHBzZXVkb3MubGVuZ3RoO1xuXG4gICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgcHNldWRvcy5sZW5ndGg7IHArKykge1xuICAgICAgICAgIGlmIChwc2V1ZG9zW3BdLm5hbWUgPT09ICdub3QnKSB7XG4gICAgICAgICAgICBub3RzLnB1c2gocHNldWRvc1twXS52YWx1ZSk7XG4gICAgICAgICAgICBzcGVjWzNdLS07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaWkgPSBub3RzLmxlbmd0aDsgaWktLTspIHtcbiAgICAgIHZhciBub3QgPSBzcGVjaWZpY2l0eShub3RzW2lpXSk7XG4gICAgICBmb3IgKHZhciBqaiA9IDQ7IGpqLS07KSB7IHNwZWNbampdICs9IG5vdFtqal07IH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3BlYztcbiAgfVxufTtcblxuLyoqXG4gKiBQYXJzZXMgYSBzZWxlY3RvciBhbmQgcmV0dXJucyB0aGUgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQGFwaSBwcml2YXRlLlxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHRleHQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcGFyc2VyKHRleHQpWzBdO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgbWVuc2NoID0gcmVxdWlyZSgnbWVuc2NoJyk7XG52YXIgb3duID0ge30uaGFzT3duUHJvcGVydHk7XG52YXIgb3MgPSByZXF1aXJlKCdvcycpO1xudmFyIFNlbGVjdG9yID0gcmVxdWlyZSgnLi9zZWxlY3RvcicpO1xudmFyIFByb3BlcnR5ID0gcmVxdWlyZSgnLi9wcm9wZXJ0eScpO1xuXG5leHBvcnRzLlNlbGVjdG9yID0gU2VsZWN0b3I7XG5leHBvcnRzLlByb3BlcnR5ID0gUHJvcGVydHk7XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2VsZWN0b3JzLlxuICpcbiAqIEBsaWNlbnNlIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIC0gTUlUXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JUZXh0IGZyb20gbWVuc2NoXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMuZXh0cmFjdCA9IGZ1bmN0aW9uIGV4dHJhY3Qoc2VsZWN0b3JUZXh0KSB7XG4gIHZhciBhdHRyID0gMDtcbiAgdmFyIHNlbHMgPSBbXTtcbiAgdmFyIHNlbCA9ICcnO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gc2VsZWN0b3JUZXh0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBjID0gc2VsZWN0b3JUZXh0LmNoYXJBdChpKTtcblxuICAgIGlmIChhdHRyKSB7XG4gICAgICBpZiAoJ10nID09PSBjIHx8ICcpJyA9PT0gYykgeyBhdHRyLS07IH1cbiAgICAgIHNlbCArPSBjO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoJywnID09PSBjKSB7XG4gICAgICAgIHNlbHMucHVzaChzZWwpO1xuICAgICAgICBzZWwgPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgnWycgPT09IGMgfHwgJygnID09PSBjKSB7IGF0dHIrKzsgfVxuICAgICAgICBpZiAoc2VsLmxlbmd0aCB8fCAoYyAhPT0gJywnICYmIGMgIT09ICdcXG4nICYmIGMgIT09ICcgJykpIHsgc2VsICs9IGM7IH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc2VsLmxlbmd0aCkge1xuICAgIHNlbHMucHVzaChzZWwpO1xuICB9XG5cbiAgcmV0dXJuIHNlbHM7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBwYXJzZSB0cmVlIGZvciBhIENTUyBzb3VyY2UuXG4gKiBJZiBpdCBlbmNvdW50ZXJzIG11bHRpcGxlIHNlbGVjdG9ycyBzZXBhcmF0ZWQgYnkgYSBjb21tYSwgaXQgc3BsaXRzIHRoZVxuICogdHJlZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY3NzIHNvdXJjZVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnBhcnNlQ1NTID0gZnVuY3Rpb24oY3NzKSB7XG4gIHZhciBwYXJzZWQgPSBtZW5zY2gucGFyc2UoY3NzLCB7cG9zaXRpb246IHRydWUsIGNvbW1lbnRzOiB0cnVlfSk7XG4gIHZhciBydWxlcyA9IHR5cGVvZiBwYXJzZWQuc3R5bGVzaGVldCAhPSAndW5kZWZpbmVkJyAmJiBwYXJzZWQuc3R5bGVzaGVldC5ydWxlcyA/IHBhcnNlZC5zdHlsZXNoZWV0LnJ1bGVzIDogW107XG4gIHZhciByZXQgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChydWxlc1tpXS50eXBlID09ICdydWxlJykge1xuICAgICAgdmFyIHJ1bGUgPSBydWxlc1tpXTtcbiAgICAgIHZhciBzZWxlY3RvcnMgPSBydWxlLnNlbGVjdG9ycztcblxuICAgICAgZm9yICh2YXIgaWkgPSAwLCBsbCA9IHNlbGVjdG9ycy5sZW5ndGg7IGlpIDwgbGw7IGlpKyspIHtcbiAgICAgICAgcmV0LnB1c2goW3NlbGVjdG9yc1tpaV0sIHJ1bGUuZGVjbGFyYXRpb25zXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogUmV0dXJucyBwcmVzZXJ2ZWQgdGV4dCBmb3IgYSBDU1Mgc291cmNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjc3Mgc291cmNlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmdldFByZXNlcnZlZFRleHQgPSBmdW5jdGlvbihjc3MsIG9wdGlvbnMpIHtcbiAgdmFyIHBhcnNlZCA9IG1lbnNjaC5wYXJzZShjc3MsIHtwb3NpdGlvbjogdHJ1ZSwgY29tbWVudHM6IHRydWV9KTtcbiAgdmFyIHJ1bGVzID0gdHlwZW9mIHBhcnNlZC5zdHlsZXNoZWV0ICE9ICd1bmRlZmluZWQnICYmIHBhcnNlZC5zdHlsZXNoZWV0LnJ1bGVzID8gcGFyc2VkLnN0eWxlc2hlZXQucnVsZXMgOiBbXTtcbiAgdmFyIHByZXNlcnZlZCA9IFtdO1xuICB2YXIgbGFzdFN0YXJ0ID0gbnVsbDtcblxuICBmb3IgKHZhciBpID0gcnVsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoKG9wdGlvbnMuZm9udEZhY2VzICYmIHJ1bGVzW2ldLnR5cGUgPT09ICdmb250LWZhY2UnKSB8fFxuICAgICAgICAob3B0aW9ucy5tZWRpYVF1ZXJpZXMgJiYgcnVsZXNbaV0udHlwZSA9PT0gJ21lZGlhJykpIHtcbiAgICAgIHByZXNlcnZlZC5wdXNoKFxuICAgICAgICBtZW5zY2guc3RyaW5naWZ5KFxuICAgICAgICAgIHsgc3R5bGVzaGVldDogeyBydWxlczogWyBydWxlc1tpXSBdIH19LFxuICAgICAgICAgIHsgY29tbWVudHM6IGZhbHNlLCBpbmRlbnRhdGlvbjogJyAgJyB9XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICAgIGxhc3RTdGFydCA9IHJ1bGVzW2ldLnBvc2l0aW9uLnN0YXJ0O1xuICB9XG5cbiAgaWYgKHByZXNlcnZlZC5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIG9zLkVPTCtwcmVzZXJ2ZWQuam9pbihvcy5FT0wpK29zLkVPTDtcbn07XG5cbmV4cG9ydHMubm9ybWFsaXplTGluZUVuZGluZ3MgPSBmdW5jdGlvbih0ZXh0KSB7XG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xcclxcbi9nLCAnXFxuJykucmVwbGFjZSgvXFxuL2csICdcXHJcXG4nKTtcbn07XG5cblxuLyoqXG4gKiBDb21wYXJlcyB0d28gc3BlY2lmaWNpdHkgdmVjdG9ycywgcmV0dXJuaW5nIHRoZSB3aW5uaW5nIG9uZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB2ZWN0b3IgYVxuICogQHBhcmFtIHtBcnJheX0gdmVjdG9yIGJcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmNvbXBhcmVGdW5jID0gZnVuY3Rpb24oYSwgYikge1xuICB2YXIgbWluID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaW47IGkrKykge1xuICAgIGlmIChhW2ldID09PSBiW2ldKSB7IGNvbnRpbnVlOyB9XG4gICAgaWYgKGFbaV0gPiBiW2ldKSB7IHJldHVybiAxOyB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgcmV0dXJuIGEubGVuZ3RoLWIubGVuZ3RoO1xufTtcblxuZXhwb3J0cy5jb21wYXJlID0gZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gZXhwb3J0cy5jb21wYXJlRnVuYyhhLCBiKSA9PSAxID8gYSA6IGI7XG59O1xuXG5leHBvcnRzLmV4dGVuZCA9IGZ1bmN0aW9uKG9iaiwgc3JjKSB7XG4gIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICBpZiAob3duLmNhbGwoc3JjLCBrZXkpKSB7XG4gICAgICBvYmpba2V5XSA9IHNyY1trZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqO1xufTtcblxuZXhwb3J0cy5nZXREZWZhdWx0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgdmFyIHJlc3VsdCA9IGV4cG9ydHMuZXh0ZW5kKHtcbiAgICBleHRyYUNzczogJycsXG4gICAgaW5zZXJ0UHJlc2VydmVkRXh0cmFDc3M6IHRydWUsXG4gICAgYXBwbHlTdHlsZVRhZ3M6IHRydWUsXG4gICAgcmVtb3ZlU3R5bGVUYWdzOiB0cnVlLFxuICAgIHByZXNlcnZlTWVkaWFRdWVyaWVzOiB0cnVlLFxuICAgIHByZXNlcnZlRm9udEZhY2VzOiB0cnVlLFxuICAgIGFwcGx5V2lkdGhBdHRyaWJ1dGVzOiB0cnVlLFxuICAgIGFwcGx5SGVpZ2h0QXR0cmlidXRlczogdHJ1ZSxcbiAgICBhcHBseUF0dHJpYnV0ZXNUYWJsZUVsZW1lbnRzOiB0cnVlLFxuICAgIHVybDogJydcbiAgfSwgb3B0aW9ucyk7XG5cbiAgcmVzdWx0LndlYlJlc291cmNlcyA9IHJlc3VsdC53ZWJSZXNvdXJjZXMgfHwge307XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCIvLyBrbm9ja291dC1zb3J0YWJsZSAwLjE1LjAgfCAoYykgMjAxNiBSeWFuIE5pZW1leWVyIHwgIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2VcbiFmdW5jdGlvbihhKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtcImtub2Nrb3V0XCIsXCJqcXVlcnlcIixcImpxdWVyeS11aS9zb3J0YWJsZVwiLFwianF1ZXJ5LXVpL2RyYWdnYWJsZVwiXSxhKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlKXt2YXIgYj1yZXF1aXJlKFwia25vY2tvdXRcIiksYz1yZXF1aXJlKFwianF1ZXJ5XCIpO3JlcXVpcmUoXCJqcXVlcnktdWkvc29ydGFibGVcIikscmVxdWlyZShcImpxdWVyeS11aS9kcmFnZ2FibGVcIiksYShiLGMpfWVsc2UgYSh3aW5kb3cua28sd2luZG93LmpRdWVyeSl9KGZ1bmN0aW9uKGEsYil7dmFyIGM9XCJrb19zb3J0SXRlbVwiLGQ9XCJrb19zb3VyY2VJbmRleFwiLGU9XCJrb19zb3J0TGlzdFwiLGY9XCJrb19wYXJlbnRMaXN0XCIsZz1cImtvX2RyYWdJdGVtXCIsaD1hLnV0aWxzLnVud3JhcE9ic2VydmFibGUsaT1hLnV0aWxzLmRvbURhdGEuZ2V0LGo9YS51dGlscy5kb21EYXRhLnNldCxrPWIudWkmJmIudWkudmVyc2lvbixsPWsmJmsuaW5kZXhPZihcIjEuNi5cIikmJmsuaW5kZXhPZihcIjEuNy5cIikmJihrLmluZGV4T2YoXCIxLjguXCIpfHxcIjEuOC4yNFwiPT09ayksbT1mdW5jdGlvbihiLGQpe2EudXRpbHMuYXJyYXlGb3JFYWNoKGIsZnVuY3Rpb24oYSl7MT09PWEubm9kZVR5cGUmJihqKGEsYyxkKSxqKGEsZixpKGEucGFyZW50Tm9kZSxlKSkpfSl9LG49ZnVuY3Rpb24oYixjKXt2YXIgZCxlPXt9LGY9aChiKCkpfHx7fTtyZXR1cm4gZi5kYXRhPyhlW2NdPWYuZGF0YSxlLm5hbWU9Zi50ZW1wbGF0ZSk6ZVtjXT1iKCksYS51dGlscy5hcnJheUZvckVhY2goW1wiYWZ0ZXJBZGRcIixcImFmdGVyUmVuZGVyXCIsXCJhc1wiLFwiYmVmb3JlUmVtb3ZlXCIsXCJpbmNsdWRlRGVzdHJveWVkXCIsXCJ0ZW1wbGF0ZUVuZ2luZVwiLFwidGVtcGxhdGVPcHRpb25zXCIsXCJub2Rlc1wiXSxmdW5jdGlvbihiKXtmLmhhc093blByb3BlcnR5KGIpP2VbYl09ZltiXTphLmJpbmRpbmdIYW5kbGVycy5zb3J0YWJsZS5oYXNPd25Qcm9wZXJ0eShiKSYmKGVbYl09YS5iaW5kaW5nSGFuZGxlcnMuc29ydGFibGVbYl0pfSksXCJmb3JlYWNoXCI9PT1jJiYoZS5hZnRlclJlbmRlcj8oZD1lLmFmdGVyUmVuZGVyLGUuYWZ0ZXJSZW5kZXI9ZnVuY3Rpb24oYSxiKXttLmNhbGwoYixhLGIpLGQuY2FsbChiLGEsYil9KTplLmFmdGVyUmVuZGVyPW0pLGV9LG89ZnVuY3Rpb24oYSxiKXt2YXIgYz1oKGIpO2lmKGMpZm9yKHZhciBkPTA7YT5kO2QrKyljW2RdJiZoKGNbZF0uX2Rlc3Ryb3kpJiZhKys7cmV0dXJuIGF9LHA9ZnVuY3Rpb24oYyxkKXt2YXIgZSxmO2Q/KGY9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZCksZiYmKGU9bmV3IGEudGVtcGxhdGVTb3VyY2VzLmRvbUVsZW1lbnQoZiksZS50ZXh0KGIudHJpbShlLnRleHQoKSkpKSk6YihjKS5jb250ZW50cygpLmVhY2goZnVuY3Rpb24oKXt0aGlzJiYxIT09dGhpcy5ub2RlVHlwZSYmYy5yZW1vdmVDaGlsZCh0aGlzKX0pfTthLmJpbmRpbmdIYW5kbGVycy5zb3J0YWJsZT17aW5pdDpmdW5jdGlvbihrLG0scSxyLHMpe3ZhciB0LHUsdj1iKGspLHc9aChtKCkpfHx7fSx4PW4obSxcImZvcmVhY2hcIikseT17fTtwKGsseC5uYW1lKSxiLmV4dGVuZCghMCx5LGEuYmluZGluZ0hhbmRsZXJzLnNvcnRhYmxlKSx3Lm9wdGlvbnMmJnkub3B0aW9ucyYmKGEudXRpbHMuZXh0ZW5kKHkub3B0aW9ucyx3Lm9wdGlvbnMpLGRlbGV0ZSB3Lm9wdGlvbnMpLGEudXRpbHMuZXh0ZW5kKHksdykseS5jb25uZWN0Q2xhc3MmJihhLmlzT2JzZXJ2YWJsZSh5LmFsbG93RHJvcCl8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHkuYWxsb3dEcm9wKT9hLmNvbXB1dGVkKHtyZWFkOmZ1bmN0aW9uKCl7dmFyIGI9aCh5LmFsbG93RHJvcCksYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBiP2IuY2FsbCh0aGlzLHguZm9yZWFjaCk6YjthLnV0aWxzLnRvZ2dsZURvbU5vZGVDc3NDbGFzcyhrLHkuY29ubmVjdENsYXNzLGMpfSxkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6a30sdGhpcyk6YS51dGlscy50b2dnbGVEb21Ob2RlQ3NzQ2xhc3Moayx5LmNvbm5lY3RDbGFzcyx5LmFsbG93RHJvcCksYS5iaW5kaW5nSGFuZGxlcnMudGVtcGxhdGUuaW5pdChrLGZ1bmN0aW9uKCl7cmV0dXJuIHh9LHEscixzKSx0PXkub3B0aW9ucy5zdGFydCx1PXkub3B0aW9ucy51cGRhdGUseS5vcHRpb25zLmhlbHBlcnx8KHkub3B0aW9ucy5oZWxwZXI9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYy5pcyhcInRyXCIpJiZjLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe2IodGhpcykud2lkdGgoYih0aGlzKS53aWR0aCgpKX0pLGN9KTt2YXIgej1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIG0sbj15Lm9wdGlvbnMucmVjZWl2ZTt2LnNvcnRhYmxlKGEudXRpbHMuZXh0ZW5kKHkub3B0aW9ucyx7c3RhcnQ6ZnVuY3Rpb24oYixjKXt2YXIgZT1jLml0ZW1bMF07aihlLGQsYS51dGlscy5hcnJheUluZGV4T2YoYy5pdGVtLnBhcmVudCgpLmNoaWxkcmVuKCksZSkpLGMuaXRlbS5maW5kKFwiaW5wdXQ6Zm9jdXNcIikuY2hhbmdlKCksdCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuLmNhbGwodGhpcyxhLGIpLG09aShiLml0ZW1bMF0sZyksbSYmKG0uY2xvbmUmJihtPW0uY2xvbmUoKSkseS5kcmFnZ2VkJiYobT15LmRyYWdnZWQuY2FsbCh0aGlzLG0sYSxiKXx8bSkpfSx1cGRhdGU6ZnVuY3Rpb24oZyxrKXt2YXIgbixwLHEscixzLHQ9ay5pdGVtWzBdLHY9ay5pdGVtLnBhcmVudCgpWzBdLHc9aSh0LGMpfHxtO2lmKHd8fGIodCkucmVtb3ZlKCksbT1udWxsLHcmJnRoaXM9PT12fHwhbCYmYi5jb250YWlucyh0aGlzLHYpKXtpZihuPWkodCxmKSxxPWkodCxkKSxwPWkodC5wYXJlbnROb2RlLGUpLHI9YS51dGlscy5hcnJheUluZGV4T2Yoay5pdGVtLnBhcmVudCgpLmNoaWxkcmVuKCksdCkseC5pbmNsdWRlRGVzdHJveWVkfHwocT1vKHEsbikscj1vKHIscCkpLCh5LmJlZm9yZU1vdmV8fHkuYWZ0ZXJNb3ZlKSYmKHM9e2l0ZW06dyxzb3VyY2VQYXJlbnQ6bixzb3VyY2VQYXJlbnROb2RlOm4mJmsuc2VuZGVyfHx0LnBhcmVudE5vZGUsc291cmNlSW5kZXg6cSx0YXJnZXRQYXJlbnQ6cCx0YXJnZXRJbmRleDpyLGNhbmNlbERyb3A6ITF9LHkuYmVmb3JlTW92ZSYmeS5iZWZvcmVNb3ZlLmNhbGwodGhpcyxzLGcsaykpLG4/YihuPT09cD90aGlzOmsuc2VuZGVyfHx0aGlzKS5zb3J0YWJsZShcImNhbmNlbFwiKTpiKHQpLnJlbW92ZSgpLHMmJnMuY2FuY2VsRHJvcClyZXR1cm47aWYoeS5oYXNPd25Qcm9wZXJ0eShcInN0cmF0ZWd5TW92ZVwiKSYmeS5zdHJhdGVneU1vdmUhPT0hMSl7aWYocj49MClpZihuKWlmKG4hPT1wKW4uc3BsaWNlKHEsMSkscC5zcGxpY2UociwwLHcpLGoodCxjLG51bGwpLGsuaXRlbS5yZW1vdmUoKTtlbHNle3ZhciB6PWgobik7bi52YWx1ZVdpbGxNdXRhdGUmJm4udmFsdWVXaWxsTXV0YXRlKCksei5zcGxpY2UocSwxKSx6LnNwbGljZShyLDAsdyksbi52YWx1ZUhhc011dGF0ZWQmJm4udmFsdWVIYXNNdXRhdGVkKCl9ZWxzZSBwLnNwbGljZShyLDAsdyksaih0LGMsbnVsbCksay5pdGVtLnJlbW92ZSgpfWVsc2Ugcj49MCYmKG4mJihuLnNwbGljZShxLDEpLGEucHJvY2Vzc0FsbERlZmVycmVkQmluZGluZ1VwZGF0ZXMmJmEucHJvY2Vzc0FsbERlZmVycmVkQmluZGluZ1VwZGF0ZXMoKSxhLm9wdGlvbnMmJmEub3B0aW9ucy5kZWZlclVwZGF0ZXMmJmEudGFza3MucnVuRWFybHkoKSkscC5zcGxpY2UociwwLHcpKSxqKHQsYyxudWxsKTthLnByb2Nlc3NBbGxEZWZlcnJlZEJpbmRpbmdVcGRhdGVzJiZhLnByb2Nlc3NBbGxEZWZlcnJlZEJpbmRpbmdVcGRhdGVzKCkseS5hZnRlck1vdmUmJnkuYWZ0ZXJNb3ZlLmNhbGwodGhpcyxzLGcsayl9dSYmdS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNvbm5lY3RXaXRoOnkuY29ubmVjdENsYXNzP1wiLlwiK3kuY29ubmVjdENsYXNzOiExfSkpLHZvaWQgMCE9PXkuaXNFbmFibGVkJiZhLmNvbXB1dGVkKHtyZWFkOmZ1bmN0aW9uKCl7di5zb3J0YWJsZShoKHkuaXNFbmFibGVkKT9cImVuYWJsZVwiOlwiZGlzYWJsZVwiKX0sZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOmt9KX0sMCk7cmV0dXJuIGEudXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhrLGZ1bmN0aW9uKCl7KHYuZGF0YShcInVpLXNvcnRhYmxlXCIpfHx2LmRhdGEoXCJzb3J0YWJsZVwiKSkmJnYuc29ydGFibGUoXCJkZXN0cm95XCIpLGEudXRpbHMudG9nZ2xlRG9tTm9kZUNzc0NsYXNzKGsseS5jb25uZWN0Q2xhc3MsITEpLGNsZWFyVGltZW91dCh6KX0pLHtjb250cm9sc0Rlc2NlbmRhbnRCaW5kaW5nczohMH19LHVwZGF0ZTpmdW5jdGlvbihiLGMsZCxmLGcpe3ZhciBoPW4oYyxcImZvcmVhY2hcIik7aihiLGUsaC5mb3JlYWNoKSxhLmJpbmRpbmdIYW5kbGVycy50ZW1wbGF0ZS51cGRhdGUoYixmdW5jdGlvbigpe3JldHVybiBofSxkLGYsZyl9LGNvbm5lY3RDbGFzczpcImtvX2NvbnRhaW5lclwiLGFsbG93RHJvcDohMCxhZnRlck1vdmU6bnVsbCxiZWZvcmVNb3ZlOm51bGwsb3B0aW9uczp7fX0sYS5iaW5kaW5nSGFuZGxlcnMuZHJhZ2dhYmxlPXtpbml0OmZ1bmN0aW9uKGMsZCxlLGYsaSl7dmFyIGs9aChkKCkpfHx7fSxsPWsub3B0aW9uc3x8e30sbT1hLnV0aWxzLmV4dGVuZCh7fSxhLmJpbmRpbmdIYW5kbGVycy5kcmFnZ2FibGUub3B0aW9ucyksbz1uKGQsXCJkYXRhXCIpLHA9ay5jb25uZWN0Q2xhc3N8fGEuYmluZGluZ0hhbmRsZXJzLmRyYWdnYWJsZS5jb25uZWN0Q2xhc3MscT12b2lkIDAhPT1rLmlzRW5hYmxlZD9rLmlzRW5hYmxlZDphLmJpbmRpbmdIYW5kbGVycy5kcmFnZ2FibGUuaXNFbmFibGVkO3JldHVybiBrPVwiZGF0YVwiaW4gaz9rLmRhdGE6ayxqKGMsZyxrKSxhLnV0aWxzLmV4dGVuZChtLGwpLG0uY29ubmVjdFRvU29ydGFibGU9cD9cIi5cIitwOiExLGIoYykuZHJhZ2dhYmxlKG0pLHZvaWQgMCE9PXEmJmEuY29tcHV0ZWQoe3JlYWQ6ZnVuY3Rpb24oKXtiKGMpLmRyYWdnYWJsZShoKHEpP1wiZW5hYmxlXCI6XCJkaXNhYmxlXCIpfSxkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6Y30pLGEudXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhjLGZ1bmN0aW9uKCl7YihjKS5kcmFnZ2FibGUoXCJkZXN0cm95XCIpfSksYS5iaW5kaW5nSGFuZGxlcnMudGVtcGxhdGUuaW5pdChjLGZ1bmN0aW9uKCl7cmV0dXJuIG99LGUsZixpKX0sdXBkYXRlOmZ1bmN0aW9uKGIsYyxkLGUsZil7dmFyIGc9bihjLFwiZGF0YVwiKTtyZXR1cm4gYS5iaW5kaW5nSGFuZGxlcnMudGVtcGxhdGUudXBkYXRlKGIsZnVuY3Rpb24oKXtyZXR1cm4gZ30sZCxlLGYpfSxjb25uZWN0Q2xhc3M6YS5iaW5kaW5nSGFuZGxlcnMuc29ydGFibGUuY29ubmVjdENsYXNzLG9wdGlvbnM6e2hlbHBlcjpcImNsb25lXCJ9fX0pOyIsIi8vIEtub2Nrb3V0IFVuZG9NYW5hZ2VyIHYwLjIgfCAoYykgMjAxNSBTdGVmYW5vIEJhZ25hcmFcbi8vIExpY2Vuc2U6IE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZSkgXG4vLyByZXF1aXJlcyBcImtvLndhdGNoXCIgbWV0aG9kIGZyb20ga25vY2tvdXQucmVhY3RvclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIC8vIE1vZHVsZSBzeXN0ZW1zIG1hZ2ljIGRhbmNlLlxuICBpZiAodHlwZW9mIHJlcXVpcmUgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiKSB7XG4gICAgLy8gQ29tbW9uSlMgb3IgTm9kZTogaGFyZC1jb2RlZCBkZXBlbmRlbmN5IG9uIFwia25vY2tvdXRcIlxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwia25vY2tvdXRcIiksIHJlcXVpcmUoXCJrbm9ja291dGpzLXJlYWN0b3JcIikpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmVbXCJhbWRcIl0pIHtcbiAgICAvLyBBTUQgYW5vbnltb3VzIG1vZHVsZSB3aXRoIGhhcmQtY29kZWQgZGVwZW5kZW5jeSBvbiBcImtub2Nrb3V0XCJcbiAgICBkZWZpbmUoW1wia25vY2tvdXRcIiwgXCJrbm9ja291dGpzLXJlYWN0b3JcIiwgXCJleHBvcnRzXCJdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyA8c2NyaXB0PiB0YWc6IHVzZSB0aGUgZ2xvYmFsIGBrb2Agb2JqZWN0XG4gICAgZmFjdG9yeShrbywga28ud2F0Y2gpO1xuICB9XG59KGZ1bmN0aW9uIChrbywgcmVhY3RvcikgeyBcblxuICAvLy8gPHN1bW1hcnk+XG4gIC8vLyAgICAgVHJhY2sgbGFzdCBcImxldmVsc1wiIGNoYW5nZXMgd2l0aGluIHRoZSBjaGFpbmVkIG9ic2VydmFibGUgZG93biB0byBhbnkgZ2l2ZW4gbGV2ZWwgYW5kXG4gIC8vLyAgICAgc3VwcG9ydHMgdW5kb2luZy9yZWRvaW5nIHRoZSBjaGFuZ2VzLlxuICAvLy8gPC9zdW1tYXJ5PlxuICAvLy8gPHBhcmFtIG5hbWU9XCJvcHRpb25zXCIgdHlwZT1cIm9iamVjdFwiPlxuICAvLy8gICAgIHsgbGV2ZWxzOiAyIH0gLT4gUmVtZW1iZXIgb25seSBsYXN0IFwibGV2ZWxzXCIgY2hhbmdlczxici8+XG4gIC8vLyAgICAgeyB1bmRvTGFiZWw6IFwiVW5kbyBpdCAoI0NPVU5UKSFcIiB9IC0+IERlZmluZSBhIGxhYmVsIGZvciB0aGUgdW5kbyBjb21tYW5kLiBcIiNDT1VOVCNcIiBzZXF1ZW5jZSB3aWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIHN0YWNrIGxlbmd0aC48YnIvPlxuICAvLy8gICAgIHsgcmVkb0xhYmVsOiBcIlJlZG8gaXQgKCNDT1VOVCkhXCIgfSAtPiBEZWZpbmUgYSBsYWJlbCBmb3IgdGhlIHJlZG8gY29tbWFuZC4gXCIjQ09VTlQjXCIgc2VxdWVuY2Ugd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBzdGFjayBsZW5ndGguPGJyLz5cbiAgLy8vIDwvcGFyYW0+XG4gIHZhciB1bmRvTWFuYWdlciA9IGZ1bmN0aW9uIChtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciB1bmRvU3RhY2sgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTtcbiAgICB2YXIgcmVkb1N0YWNrID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7XG4gICAgdmFyIGxhc3RQdXNoZWRTdGFjaztcbiAgICB2YXIgU1RBVEVfRE9JTkcgPSAwO1xuICAgIHZhciBTVEFURV9VTkRPSU5HID0gMTtcbiAgICB2YXIgU1RBVEVfUkVET0lORyA9IDI7XG4gICAgdmFyIHN0YXRlID0gU1RBVEVfRE9JTkc7XG5cbiAgICB2YXIgTU9ERV9OT1JNQUwgPSAwOyAvLyBhZGQgdG8gc3RhY2sgZXZlcnkgY2hhbmdlXG4gICAgdmFyIE1PREVfSUdOT1JFID0gMTsgLy8gZG8gbm90IGFkZCBhbnl0aGluZyB0byB0aGUgc3RhY2tcbiAgICB2YXIgTU9ERV9PTkNFID0gMjsgLy8gb25seSBvbmUgc2VxdWVudGlhbCBjaGFuZ2UgZm9yIGVhY2ggcHJvcGVydHkgaXMgYWRkZWQgdG8gdGhlIHN0YWNrXG4gICAgdmFyIE1PREVfTUVSR0UgPSAzOyAvLyBtZXJnZSBuZXh0IGNoYW5nZSB3aXRoIHRoZSBsYXN0IG9uZVxuICAgIHZhciBtb2RlID0gTU9ERV9OT1JNQUw7XG5cbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICBsZXZlbHM6IDEwMCxcbiAgICAgIHVuZG9MYWJlbDogXCJ1bmRvICgjQ09VTlQjKVwiLFxuICAgICAgcmVkb0xhYmVsOiBcInJlZG8gKCNDT1VOVCMpXCJcbiAgICB9O1xuICAgIFxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PSAnb2JqZWN0Jykge1xuICAgICAgb3B0aW9ucyA9IGtvLnV0aWxzLmV4dGVuZChkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcbiAgICB9XG4gIFxuICAgIHZhciBfcHVzaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgIC8vIGR1cmFudGUgVU5ETy9SRURPIGxhdm9yaWFtbyBzZW1wcmUgaW4gbm9ybWFsZVxuICAgICAgaWYgKHN0YXRlID09IFNUQVRFX1VORE9JTkcpIHtcbiAgICAgICAgX3B1c2hJbnQoYWN0aW9uLCByZWRvU3RhY2spO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBTVEFURV9SRURPSU5HKSB7XG4gICAgICAgIF9wdXNoSW50KGFjdGlvbiwgdW5kb1N0YWNrKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU1RBVEVfRE9JTkcpIHtcbiAgICAgICAgX3B1c2hJbnQoYWN0aW9uLCB1bmRvU3RhY2spO1xuICAgICAgICByZWRvU3RhY2sucmVtb3ZlQWxsKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB2YXIgX3RyeU1lcmdlID0gZnVuY3Rpb24gKHByZXYsIG5ld0FjdGlvbikge1xuICAgICAgaWYgKHR5cGVvZiBwcmV2Lm1lcmdlZEFjdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHByZXYubWVyZ2VkQWN0aW9uKG5ld0FjdGlvbik7XG4gICAgICB9IGVsc2UgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIHZhciBfcHVzaEludCA9IGZ1bmN0aW9uIChhY3Rpb24sIG15U3RhY2spIHtcbiAgICAgIC8qIGdlc3Rpb25lIGRlbCBtZXJnZSBkaSBhemlvbmk6IHNlIGwndWx0aW1hIGF6aW9uZSBuZWxsbyBzdGFjayBoYSB1biBtZXRvZG8gXCJtZXJnZWRBY3Rpb25cIlxuICAgICAgICAgcHJvdmlhbW8gYWQgaW52b2NhcmxvIGUgc2UgY2kgcmVzdGl0dWlzY2UgdW5hIGZ1bnppb25lIGxhIHVzaWFtbyBhbCBwb3N0byBkaSBlbnRyYW1iZSAqL1xuICAgICAgLy8gY29uc29sZS5sb2coXCJVUlwiLCBcIl9wdXNoSW50XCIsIG15U3RhY2soKS5sZW5ndGggPiAwID8gdHlwZW9mIG15U3RhY2soKVtteVN0YWNrKCkubGVuZ3RoIC0gMV0ubWVyZ2VkQWN0aW9uIDogXCJFTVBUWVwiKTtcbiAgICAgIGlmIChteVN0YWNrKCkubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgbWVyZ2VkID0gX3RyeU1lcmdlKG15U3RhY2soKVtteVN0YWNrKCkubGVuZ3RoIC0gMV0sIGFjdGlvbik7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVVJcIiwgXCJfcHVzaEludC5tZXJnZWRcIiwgbWVyZ2VkLCBcIk1WXCIsIHR5cGVvZiBhY3Rpb24ubWVyZ2VhYmxlTW92ZSwgXCJNQVwiLCB0eXBlb2YgYWN0aW9uLm1lcmdlYWJsZUFjdGlvbiwgXCJNTVwiLCB0eXBlb2YgYWN0aW9uLm1lcmdlTWUpO1xuICAgICAgICBpZiAobWVyZ2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgbXlTdGFjaygpW215U3RhY2soKS5sZW5ndGggLSAxXSA9IG1lcmdlZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChteVN0YWNrKCkubGVuZ3RoID49IG9wdGlvbnMubGV2ZWxzKSBteVN0YWNrLnNoaWZ0KCk7XG4gICAgICBsYXN0UHVzaGVkU3RhY2sgPSBteVN0YWNrO1xuICAgICAgbXlTdGFjay5wdXNoKGFjdGlvbik7XG4gICAgfTtcbiAgICBcbiAgICB2YXIgX3hkb0NvbW1hbmQgPSBmdW5jdGlvbihsYWJlbCwgd29ya1N0YXRlLCBzdGFjaykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZToga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUobGFiZWwpLnJlcGxhY2UoLyNDT1VOVCMvLCBzdGFjaygpLmxlbmd0aCk7XG4gICAgICAgIH0pLFxuICAgICAgICBlbmFibGVkOiBrby5jb21wdXRlZChmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gc3RhY2soKS5sZW5ndGggIT09IDA7XG4gICAgICAgIH0pLFxuICAgICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYWN0aW9uID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgaWYgKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIHByZXZTdGF0ZSA9IHN0YXRlO1xuICAgICAgICAgICAgc3RhdGUgPSB3b3JrU3RhdGU7XG4gICAgICAgICAgICB2YXIgb2xkTW9kZSA9IG1vZGU7XG4gICAgICAgICAgICBtb2RlID0gTU9ERV9NRVJHRTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiWERPXCIsIFwiYmVmb3JlXCIsIGxhYmVsKTtcbiAgICAgICAgICAgIGFjdGlvbigpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJYRE9cIiwgXCJhZnRlclwiLCBsYWJlbCk7XG4gICAgICAgICAgICBfcmVtb3ZlTWVyZ2VkQWN0aW9uKGxhc3RQdXNoZWRTdGFjayk7XG4gICAgICAgICAgICBtb2RlID0gb2xkTW9kZTtcbiAgICAgICAgICAgIHN0YXRlID0gcHJldlN0YXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIF9yZW1vdmVNZXJnZWRBY3Rpb24gPSBmdW5jdGlvbihteVN0YWNrKSB7XG4gICAgICBpZiAodHlwZW9mIG15U3RhY2sgPT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiVW5leHBlY3RlZCBvcGVyYXRpb246IHN0YWNrIGNsZWFuZXIgY2FsbGVkIHdpdGggdW5kZWZpbmVkIHN0YWNrXCI7XG4gICAgICBcbiAgICAgIGlmIChteVN0YWNrKCkubGVuZ3RoID4gMCAmJiB0eXBlb2YgbXlTdGFjaygpW215U3RhY2soKS5sZW5ndGggLSAxXS5tZXJnZWRBY3Rpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiUmVtb3ZpbmcgbWVyZ2VkQWN0aW9uIGZyb20gc3RhY2tcIik7XG4gICAgICAgIGRlbGV0ZSBteVN0YWNrKClbbXlTdGFjaygpLmxlbmd0aCAtIDFdLm1lcmdlZEFjdGlvbjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIF9jb21iaW5lZEZ1bmN0aW9uID0gZnVuY3Rpb24oZmlyc3QsIHNlY29uZCkge1xuICAgICAgdmFyIHJlcyA9IChmdW5jdGlvbihmMSwgZjIpIHtcbiAgICAgICAgZjEoKTtcbiAgICAgICAgZjIoKTtcbiAgICAgIH0pLmJpbmQodW5kZWZpbmVkLCBmaXJzdCwgc2Vjb25kKTtcbiAgICAgIGlmICh0eXBlb2YgZmlyc3QubWVyZ2VkQWN0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXMubWVyZ2VkQWN0aW9uID0gZmlyc3QubWVyZ2VkQWN0aW9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgdmFyIGV4ZWN1dGVVbmRvQWN0aW9uID0gZnVuY3Rpb24oY2hpbGQsIHZhbHVlLCBpdGVtKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcImV4ZWN1dGVVbmRvQWN0aW9uXCIsIGNoaWxkLCB2YWx1ZSwgaXRlbSk7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjaGlsZCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uc3RhdHVzID09ICdkZWxldGVkJykge1xuICAgICAgICAgIGNoaWxkLnNwbGljZShpdGVtLmluZGV4LCAwLCBpdGVtLnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLnN0YXR1cyA9PSAnYWRkZWQnKSB7XG4gICAgICAgICAgY2hpbGQuc3BsaWNlKGl0ZW0uaW5kZXgsIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IFwiVW5zdXBwcm90ZWQgaXRlbS5zdGF0dXM6IFwiK2l0ZW0uc3RhdHVzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBcIlVuZXhwZWN0ZWQgY29uZGl0aW9uOiBubyBpdGVtIGFuZCBubyBjaGlsZC5vbGRWYWx1ZXMhXCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBtYWtlVW5kb0FjdGlvbkRlZmF1bHQgPSBmdW5jdGlvbih1bmRvRnVuYywgcGFyZW50cywgY2hpbGQsIG9sZFZhbCwgaXRlbSkge1xuICAgICAgcmV0dXJuIHVuZG9GdW5jLmJpbmQodW5kZWZpbmVkLCBjaGlsZCwgb2xkVmFsLCBpdGVtKTtcbiAgICB9O1xuXG4gICAgdmFyIG1ha2VVbmRvQWN0aW9uID0gbWFrZVVuZG9BY3Rpb25EZWZhdWx0O1xuXG4gICAgdmFyIGNoYW5nZVB1c2hlciA9IGZ1bmN0aW9uKHBhcmVudHMsIGNoaWxkLCBpdGVtKSB7XG4gICAgICB2YXIgb2xkVmFsID0gdHlwZW9mIGNoaWxkLm9sZFZhbHVlcyAhPSAndW5kZWZpbmVkJyA/IGNoaWxkLm9sZFZhbHVlc1swXSA6IHVuZGVmaW5lZDtcbiAgICAgIHZhciBhY3QgPSBtYWtlVW5kb0FjdGlvbihleGVjdXRlVW5kb0FjdGlvbiwgcGFyZW50cywgY2hpbGQsIG9sZFZhbCwgaXRlbSk7XG5cbiAgICAgIGlmIChtb2RlID09IE1PREVfSUdOT1JFKSByZXR1cm47XG5cbiAgICAgIGlmIChtb2RlID09IE1PREVfTUVSR0UpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJVUlwiLCBcIm1lcmdlbW9kZVwiKTtcbiAgICAgICAgaWYgKHR5cGVvZiBhY3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgYWN0Lm1lcmdlZEFjdGlvbiA9IGZ1bmN0aW9uKG5ld0FjdGlvbikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdBY3Rpb24ubWVyZ2VNZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbmV3QWN0aW9uLm1lcmdlTWUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb21iaW5lZEZ1bmN0aW9uKG5ld0FjdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBhY3QubWVyZ2VNZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2YgYWN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChjaGlsZC5vbGRWYWx1ZXMgJiYgbW9kZSA9PSBNT0RFX09OQ0UpIHtcbiAgICAgICAgICAgIGFjdC5tZXJnZWRBY3Rpb24gPSBmdW5jdGlvbihvbGRDaGlsZCwgb2xkSXRlbSwgbmV3QWN0aW9uKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3QWN0aW9uLm1lcmdlYWJsZUFjdGlvbiA9PSAnb2JqZWN0JyAmJiBvbGRDaGlsZCA9PSBuZXdBY3Rpb24ubWVyZ2VhYmxlQWN0aW9uLmNoaWxkKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJVUlwiLCBcImlnbm9yZSB1cGRhdGUgZm9yIHByb3BlcnR5IGluIE1PREVfT05DRVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfS5iaW5kKGFjdCwgY2hpbGQsIGl0ZW0pO1xuICAgICAgICAgICAgYWN0Lm1lcmdlYWJsZUFjdGlvbiA9IHsgY2hpbGQ6IGNoaWxkLCBpdGVtOiBpdGVtIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVVJcIiwgXCJpdGVtLnN0YXR1c1wiLCBpdGVtLnN0YXR1cyk7XG4gICAgICAgICAgLy8gXCJpdGVtXCIgaXMgdmFsdWVkIHdoZW4gYW4gaXRlbSBpcyBhZGRlZC9yZW1vdmVkL3JldGVpbmVkIGluIGFuIGFycmF5XG4gICAgICAgICAgLy8gc29tZXRpbWVzIEtPIGRldGVjdCBcIm1vdmVzXCIgYW5kIGFkZCBhIFwibW92ZWRcIiBwcm9wZXJ0eSB3aXRoIHRoZSBpbmRleCBidXRcbiAgICAgICAgICAvLyB0aGlzIGRvZXNuJ3QgaGFwcGVuIGZvciBleGFtcGxlIHVzaW5nIGtub2Nrb3V0LXNvcnRhYmxlIG9yIHdoZW4gbW92aW5nIG9iamVjdHNcbiAgICAgICAgICAvLyBiZXR3ZWVuIGFycmF5cy5cbiAgICAgICAgICAvLyBTbyB0aGlzIGVuZHMgdXAgaGFuZGxpbmcgdGhpcyB3aXRoIFwibWVyZ2VhYmxlTW92ZVwiIGFuZCBcIm1lcmdlZEFjdGlvblwiOiBcbiAgICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLnN0YXR1cyA9PSAnZGVsZXRlZCcpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gc2Ugc29ubyBpbiBNT0RFID0gTUVSR0UgZGV2byBtZXR0ZWVyIHVuYSBmdW56aW9uZSBkaSBtZXJnZSBjaGUgYWNjZXR0YSB0dXR0by5cbiAgICAgICAgICAgIC8vIGFsdHJpbWVudGkgbGFzY2lvIHF1ZXN0YS5cbiAgICAgICAgICAgIGFjdC5tZXJnZWRBY3Rpb24gPSBmdW5jdGlvbihvbGRDaGlsZCwgb2xkSXRlbSwgbmV3QWN0aW9uKSB7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVVJcIiwgXCJhY3QubWVyZ2VkQWN0aW9uXCIsIHR5cGVvZiBuZXdBY3Rpb24ubWVyZ2VhYmxlTW92ZSk7XG4gICAgICAgICAgICAgIC8vIGEgZGVsZXRlZCBhY3Rpb24gaXMgYWJsZSB0byBtZXJnZSB3aXRoIGEgYWRkZWQgYWN0aW9uIGlmIHRoZXkgYXBwbHkgdG8gdGhlIHNhbWVcbiAgICAgICAgICAgICAgLy8gb2JqZWN0LlxuICAgICAgICAgICAgICBpZiAodHlwZW9mIG5ld0FjdGlvbi5tZXJnZWFibGVNb3ZlID09ICdvYmplY3QnICYmIG9sZEl0ZW0udmFsdWUgPT0gbmV3QWN0aW9uLm1lcmdlYWJsZU1vdmUuaXRlbS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIGluIHRoaXMgY2FzZSBJIHNpbXBseSByZXR1cm4gYSBzaW5nbGUgYWN0aW9uIHJ1bm5pbmcgYm90aCBhY3Rpb25zIGluIHNlcXVlbmNlLFxuICAgICAgICAgICAgICAgIC8vIHRoaXMgd2F5IHRoZSBcInVuZG9cIiB3aWxsIG5lZWQgdG8gdW5kbyBvbmx5IG9uY2UgZm9yIGEgXCJtb3ZlXCIgb3BlcmF0aW9uLlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29tYmluZWRGdW5jdGlvbihuZXdBY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVVJcIiwgXCJub3QgbWVyZ2VhYmxlXCIsIHR5cGVvZiBuZXdBY3Rpb24ubWVyZ2VhYmxlTW92ZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH0uYmluZChhY3QsIGNoaWxkLCBpdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5zdGF0dXMgPT0gJ2FkZGVkJykge1xuICAgICAgICAgICAgLy8gYWRkIGEgbWVyZ2VhYmxlTW92ZSBwcm9wZXJ0eSB0aGF0IHdpbGwgYmUgdXNlZCBieSB0aGUgbmV4dCBhY3Rpb24gXCJtZXJnZWRBY3Rpb25cIiB0byBzZWUgaWYgdGhpcyBhY3Rpb25cbiAgICAgICAgICAgIC8vIGNhbiBiZSBtZXJnZWQuXG4gICAgICAgICAgICBhY3QubWVyZ2VhYmxlTW92ZSA9IHsgY2hpbGQ6IGNoaWxkLCBpdGVtOiBpdGVtIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFjdCAhPT0gJ3VuZGVmaW5lZCcpIF9wdXNoKGFjdCk7XG4gICAgfTtcblxuICAgIHZhciByZWFjdG9yT3B0aW9ucyA9IHsgZGVwdGg6IC0xLCBvbGRWYWx1ZXM6IDEsIG11dGFibGU6IHRydWUsIC8qIHRhZ1BhcmVudHNXaXRoTmFtZTogdHJ1ZSAqLyB0YWdGaWVsZHM6IHRydWUgfTtcblxuICAgIHZhciBjb250ZXh0ID0ge307XG4gICAgdmFyIHJlYWN0ID0gdHlwZW9mIHJlYWN0b3IgPT0gJ2Z1bmN0aW9uJyA/IHJlYWN0b3IgOiBrby53YXRjaDtcbiAgICB2YXIgcmVzID0gcmVhY3QobW9kZWwsIHJlYWN0b3JPcHRpb25zLCBjaGFuZ2VQdXNoZXIsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHB1c2g6IF9wdXNoLCBcbiAgICAgIHVuZG9Db21tYW5kOiBfeGRvQ29tbWFuZChvcHRpb25zLnVuZG9MYWJlbCwgU1RBVEVfVU5ET0lORywgdW5kb1N0YWNrKSxcbiAgICAgIHJlZG9Db21tYW5kOiBfeGRvQ29tbWFuZChvcHRpb25zLnJlZG9MYWJlbCwgU1RBVEVfUkVET0lORywgcmVkb1N0YWNrKSxcbiAgICAgIHJlc2V0OiBmdW5jdGlvbigpIHsgdW5kb1N0YWNrLnJlbW92ZUFsbCgpOyByZWRvU3RhY2sucmVtb3ZlQWxsKCk7IH0sXG4gICAgICAvLyBzZXRNb2RlOiBmdW5jdGlvbihuZXdNb2RlKSB7IG1vZGUgPSBuZXdNb2RlOyBfcmVtb3ZlTWVyZ2VkQWN0aW9uKHVuZG9TdGFjayk7IH0sXG4gICAgICBzZXRNb2RlT25jZTogZnVuY3Rpb24oKSB7IG1vZGUgPSBNT0RFX09OQ0U7IF9yZW1vdmVNZXJnZWRBY3Rpb24odW5kb1N0YWNrKTsgfSxcbiAgICAgIHNldE1vZGVNZXJnZTogZnVuY3Rpb24oKSB7IG1vZGUgPSBNT0RFX01FUkdFOyBfcmVtb3ZlTWVyZ2VkQWN0aW9uKHVuZG9TdGFjayk7IH0sXG4gICAgICBzZXRNb2RlTm9ybWFsOiBmdW5jdGlvbigpIHsgbW9kZSA9IE1PREVfTk9STUFMOyBfcmVtb3ZlTWVyZ2VkQWN0aW9uKHVuZG9TdGFjayk7IH0sXG4gICAgICBzZXRNb2RlSWdub3JlOiBmdW5jdGlvbigpIHsgbW9kZSA9IE1PREVfSUdOT1JFOyBfcmVtb3ZlTWVyZ2VkQWN0aW9uKHVuZG9TdGFjayk7IH0sXG4gICAgICBzZXRVbmRvQWN0aW9uTWFrZXI6IGZ1bmN0aW9uKG1ha2VyKSB7IG1ha2VVbmRvQWN0aW9uID0gbWFrZXI7IH0sXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHsgLyoga28udW53YXRjaChtb2RlbCwgcmVhY3Rvck9wdGlvbnMsIGNoYW5nZVB1c2hlcik7ICovIHJlcy5kaXNwb3NlKCk7IH1cbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiB1bmRvTWFuYWdlcjtcbiAgXG59KSk7IiwiLy8gS25vY2tvdXQgRmFzdCBNYXBwaW5nIHYwLjFcbi8vIExpY2Vuc2U6IE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuXHQvLyBNb2R1bGUgc3lzdGVtcyBtYWdpYyBkYW5jZS5cblxuXHRpZiAodHlwZW9mIHJlcXVpcmUgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiKSB7XG5cdFx0Ly8gQ29tbW9uSlMgb3IgTm9kZTogaGFyZC1jb2RlZCBkZXBlbmRlbmN5IG9uIFwia25vY2tvdXRcIlxuXHRcdGZhY3RvcnkocmVxdWlyZShcImtub2Nrb3V0XCIpLCBleHBvcnRzKTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lW1wiYW1kXCJdKSB7XG5cdFx0Ly8gQU1EIGFub255bW91cyBtb2R1bGUgd2l0aCBoYXJkLWNvZGVkIGRlcGVuZGVuY3kgb24gXCJrbm9ja291dFwiXG5cdFx0ZGVmaW5lKFtcImtub2Nrb3V0XCIsIFwiZXhwb3J0c1wiXSwgZmFjdG9yeSk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gPHNjcmlwdD4gdGFnOiB1c2UgdGhlIGdsb2JhbCBga29gIG9iamVjdCwgYXR0YWNoaW5nIGEgYHdyYXBgIHByb3BlcnR5XG5cdFx0ZmFjdG9yeShrbywga28ud3JhcCA9IHt9KTtcblx0fVxufShmdW5jdGlvbiAoa28sIGV4cG9ydHMpIHtcbiAgICBcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIG1pbWljcyBrby5tYXBwaW5nXG4gICAgZXhwb3J0cy5mcm9tSlMgPSBmdW5jdGlvbihqc09iamVjdCwgY29tcHV0ZWRGdW5jdGlvbnMsIG9ic2VydmFibGVPYmplY3RzKVxuICAgIHtcbiAgICAgICAgcmVzZXQoKTtcblx0cmV0dXJuIHdyYXAoanNPYmplY3QsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cyk7XG4gICAgfVxuXG4gICAgLy8gdGhpcyBmdW5jdGlvbiB1bndyYXBzIHRoZSBvdXRlciBmb3IgYXNzaWduaW5nIHRoZSByZXN1bHQgdG8gYW4gb2JzZXJ2YWJsZVxuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vU3RldmVTYW5kZXJzb24va25vY2tvdXQvaXNzdWVzLzUxN1xuICAgIGV4cG9ydHMudXBkYXRlRnJvbUpTID0gZnVuY3Rpb24ob2JzZXJ2YWJsZSwganNPYmplY3QsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cylcbiAgICB7XG4gICAgICAgIHJlc2V0KCk7XG5cdHJldHVybiBvYnNlcnZhYmxlKGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUod3JhcChqc09iamVjdCwgY29tcHV0ZWRGdW5jdGlvbnMsIG9ic2VydmFibGVPYmplY3RzKSkpO1xuICAgIH1cblxuICAgIGV4cG9ydHMuZnJvbUpTT04gPSBmdW5jdGlvbiAoanNvblN0cmluZywgY29tcHV0ZWRGdW5jdGlvbnMsIG9ic2VydmFibGVPYmplY3RzKSB7XG5cdHZhciBwYXJzZWQgPSBrby51dGlscy5wYXJzZUpzb24oanNvblN0cmluZyk7XG5cdGFyZ3VtZW50c1swXSA9IHBhcnNlZDtcblx0cmV0dXJuIGV4cG9ydHMuZnJvbUpTLmFwcGx5KHRoaXMsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cyk7XG4gICAgfTtcbiAgICBcbiAgICBleHBvcnRzLnRvSlMgPSBmdW5jdGlvbiAob2JzZXJ2YWJsZSkge1xuXHRyZXR1cm4gdW53cmFwKG9ic2VydmFibGUpO1xuICAgIH1cblxuICAgIGV4cG9ydHMudG9KU09OID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcblx0dmFyIHBsYWluSmF2YVNjcmlwdE9iamVjdCA9IGV4cG9ydHMudG9KUyhvYnNlcnZhYmxlKTtcblx0cmV0dXJuIGtvLnV0aWxzLnN0cmluZ2lmeUpzb24ocGxhaW5KYXZhU2NyaXB0T2JqZWN0KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdHlwZU9mKHZhbHVlKSB7XG5cdHZhciBzID0gdHlwZW9mIHZhbHVlO1xuXHRpZiAocyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3RvciA9PSBEYXRlKVxuICAgICAgICAgICAgICAgICAgICBzID0gJ2RhdGUnO1xuXHRcdGVsc2UgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gJ1tvYmplY3QgQXJyYXldJylcbiAgICAgICAgICAgICAgICAgICAgcyA9ICdhcnJheSc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXHRcdHMgPSAnbnVsbCc7XG4gICAgICAgICAgICB9XG5cdH1cblx0cmV0dXJuIHM7XG4gICAgfVxuXG4gICAgLy8gdW53cmFwcGluZ1xuICAgIGZ1bmN0aW9uIHVud3JhcE9iamVjdChvKVxuICAgIHtcblx0dmFyIHQgPSB7fTtcblxuXHRmb3IgKHZhciBrIGluIG8pXG5cdHtcblx0ICAgIHZhciB2ID0gb1trXTtcblxuXHQgICAgaWYgKGtvLmlzQ29tcHV0ZWQodikpXG5cdFx0Y29udGludWU7XG5cblx0ICAgIHRba10gPSB1bndyYXAodik7XG5cdH1cblxuXHRyZXR1cm4gdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1bndyYXBBcnJheShhKVxuICAgIHtcblx0dmFyIHIgPSBbXTtcblxuXHRpZiAoIWEgfHwgYS5sZW5ndGggPT0gMClcblx0ICAgIHJldHVybiByO1xuXHRcblx0Zm9yICh2YXIgaSA9IDAsIGwgPSBhLmxlbmd0aDsgaSA8IGw7ICsraSlcblx0ICAgIHIucHVzaCh1bndyYXAoYVtpXSkpO1xuXG5cdHJldHVybiByO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVud3JhcCh2KVxuICAgIHtcblx0dmFyIGlzT2JzZXJ2YWJsZSA9IGtvLmlzT2JzZXJ2YWJsZSh2KTtcblxuXHRpZiAoaXNPYnNlcnZhYmxlKVxuXHR7XG5cdCAgICB2YXIgdmFsID0gdigpO1xuXG5cdCAgICByZXR1cm4gdW53cmFwKHZhbCk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdCAgICBpZiAodHlwZU9mKHYpID09IFwiYXJyYXlcIilcblx0ICAgIHtcblx0XHRyZXR1cm4gdW53cmFwQXJyYXkodik7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmICh0eXBlT2YodikgPT0gXCJvYmplY3RcIilcblx0ICAgIHtcblx0XHRyZXR1cm4gdW53cmFwT2JqZWN0KHYpO1xuXHQgICAgfVxuXHQgICAgZWxzZVxuXHQgICAge1xuXHRcdHJldHVybiB2O1xuXHQgICAgfVxuXHR9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXQoKVxuICAgIHtcbiAgICAgICAgcGFyZW50cyA9IFt7b2JqOiBudWxsLCB3cmFwcGVkOiBudWxsLCBsdmw6IFwiXCJ9XTtcbiAgICB9ICAgIFxuICAgIFxuICAgIC8vIHdyYXBwaW5nXG5cbiAgICBmdW5jdGlvbiB3cmFwT2JqZWN0KG8sIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cylcbiAgICB7XG4gICAgICAgIC8vIGNoZWNrIGZvciBpbmZpbml0ZSByZWN1cnNpb25cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJlbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50c1tpXS5vYmogPT09IG8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50c1tpXS53cmFwcGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblx0dmFyIHQgPSB7fTtcblxuXHRmb3IgKHZhciBrIGluIG8pXG5cdHtcblx0ICAgIHZhciB2ID0gb1trXTtcblxuICAgICAgICAgICAgcGFyZW50cy5wdXNoKHtvYmo6IG8sIHdyYXBwZWQ6IHQsIGx2bDogY3VycmVudEx2bCgpICsgXCIvXCIgKyBrfSk7XG5cblx0ICAgIHRba10gPSB3cmFwKHYsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cyk7XG5cbiAgICAgICAgICAgIHBhcmVudHMucG9wKCk7XG5cdH1cblxuXHRpZiAoY29tcHV0ZWRGdW5jdGlvbnMgJiYgY29tcHV0ZWRGdW5jdGlvbnNbY3VycmVudEx2bCgpXSlcblx0ICAgIHQgPSBjb21wdXRlZEZ1bmN0aW9uc1tjdXJyZW50THZsKCldKHQpO1xuXG4gICAgICAgIGlmIChoYXNFUzVQbHVnaW4oKSlcbiAgICAgICAgICAgIGtvLnRyYWNrKHQpO1xuXG5cdGlmIChvYnNlcnZhYmxlT2JqZWN0cykgcmV0dXJuIGtvLm9ic2VydmFibGUodCk7XG5cdHJldHVybiB0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdyYXBBcnJheShhLCBjb21wdXRlZEZ1bmN0aW9ucywgb2JzZXJ2YWJsZU9iamVjdHMpXG4gICAge1xuXHR2YXIgciA9IGtvLm9ic2VydmFibGVBcnJheSgpO1xuXG5cdGlmICghYSB8fCBhLmxlbmd0aCA9PSAwKVxuXHQgICAgcmV0dXJuIHI7XG5cblx0Zm9yICh2YXIgaSA9IDAsIGwgPSBhLmxlbmd0aDsgaSA8IGw7ICsraSlcblx0ICAgIHIucHVzaCh3cmFwKGFbaV0sIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cykpO1xuXG5cdHJldHVybiByO1xuICAgIH1cblxuICAgIC8vIGEgc3RhY2ssIHVzZWQgZm9yIHR3byBwdXJwb3NlczpcbiAgICAvLyAgLSBjaXJjdWxhciByZWZlcmVuY2UgY2hlY2tpbmdcbiAgICAvLyAgLSBjb21wdXRlZCBmdW5jdGlvbnNcbiAgICB2YXIgcGFyZW50cztcblxuICAgIGZ1bmN0aW9uIGN1cnJlbnRMdmwoKVxuICAgIHtcblx0cmV0dXJuIHBhcmVudHNbcGFyZW50cy5sZW5ndGgtMV0ubHZsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdyYXAodiwgY29tcHV0ZWRGdW5jdGlvbnMsIG9ic2VydmFibGVPYmplY3RzKVxuICAgIHtcblx0aWYgKHR5cGVPZih2KSA9PSBcImFycmF5XCIpXG5cdHtcblx0ICAgIHJldHVybiB3cmFwQXJyYXkodiwgY29tcHV0ZWRGdW5jdGlvbnMsIG9ic2VydmFibGVPYmplY3RzKTtcblx0fVxuXHRlbHNlIGlmICh0eXBlT2YodikgPT0gXCJvYmplY3RcIilcblx0e1xuXHQgICAgcmV0dXJuIHdyYXBPYmplY3QodiwgY29tcHV0ZWRGdW5jdGlvbnMsIG9ic2VydmFibGVPYmplY3RzKTtcblx0fVxuXHRlbHNlXG5cdHtcbiAgICAgICAgICAgIGlmICghaGFzRVM1UGx1Z2luKCkgJiYgdHlwZW9mIHYgIT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICB7XG5cdCAgICAgICAgdmFyIHQgPSBrby5vYnNlcnZhYmxlKCk7XG5cdCAgICAgICAgdCh2KTtcblx0ICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiB2O1xuXHR9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFzRVM1UGx1Z2luKClcbiAgICB7XG4gICAgICAgIHJldHVybiBrby50cmFjayAhPSBudWxsO1xuICAgIH1cbn0pKTtcbiIsIi8vIERlZXAgb2JzZXJ2ZXIgcGx1Z2luIGZvciBLbm9ja291dCBodHRwOi8va25vY2tvdXRqcy5jb20vXHJcbi8vIChjKSBaaWFkIEplZXJvYnVya2hhblxyXG4vLyBMaWNlbnNlOiBNSVQgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwKVxyXG4vLyBWZXJzaW9uIDEuMy44XHJcbjsgKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcbiAgICAvLyBDb21tb25KU1xyXG4gICAgaWYgKHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGZhY3RvcnkocmVxdWlyZSgna25vY2tvdXQnKSk7XHJcbiAgICAgICAgLy8gQU1EXHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZShbJ2tub2Nrb3V0J10sIGZhY3RvcnkpO1xyXG4gICAgICAgIC8vIE5vcm1hbCBzY3JpcHQgdGFnXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZhY3Rvcnkod2luZG93LmtvKTtcclxuICAgIH1cclxufShmdW5jdGlvbiAoa28pIHtcclxua28uc3Vic2NyaWJhYmxlLmZuWyd3YXRjaCddID0gZnVuY3Rpb24gKHRhcmdldE9yQ2FsbGJhY2ssIG9wdGlvbnMsIGV2YWx1YXRvckNhbGxiYWNrLCBjb250ZXh0KSB7XHJcbiAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAvLy8gICAgIFRyYWNrIGFuZCBtYW5hZ2UgY2hhbmdlcyB3aXRoaW4gdGhlIGNoYWluZWQgb2JzZXJ2YWJsZSBkb3duIHRvIGFueSBnaXZlbiBsZXZlbC4gXHJcbiAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwidGFyZ2V0T3JDYWxsYmFja1wiPlxyXG4gICAgLy8vICAgICAgVGhlIHN1YnNjcmlwdGlvbiBjYWxsYmFjayBmdW5jdGlvbiBvciBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3Vic2NyaWJhYmxlcyB0byBiZSB3YXRjaGVkLlxyXG4gICAgLy8vIDwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJvcHRpb25zXCIgdHlwZT1cIm9iamVjdFwiPlxyXG4gICAgLy8vICAgICBmYWxzZSAtPiBEaXNhYmxlcyB0cmFja2luZyBvbiB0aGUgY2hhaW5lZCBvYnNlcnZhYmxlLlxyXG4gICAgLy8vICAgICB7IGRlcHRoOiAyIH0gLT4gVHJhY2sgYWxsIG5lc3RlZCBzdWJzY3JpYmFibGVzIGRvd24gdG8gdGhlIDJuZCBsZXZlbChkZWZhdWx0IGlzIDEpLjxici8+XHJcbiAgICAvLy8gICAgIHsgZGVwdGg6IC0xIH0gLT4gVHJhY2sgYWxsIG5lc3RlZCBzdWJzY3JpYmFibGVzLjxici8+XHJcbiAgICAvLy8gICAgIHsgaGlkZTogWy4uLl0gfSAtPiBQcm9wZXJ0eSBvciBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIGJlIGlnbm9yZWQuPGJyLz5cclxuICAgIC8vLyAgICAgeyBoaWRlQXJyYXlzOiB0cnVlIH0gLT4gSWdub3JlIGFsbCBuZXN0ZWQgYXJyYXlzLjxici8+XHJcbiAgICAvLy8gICAgIHsgaGlkZVdyYXBwZWRWYWx1ZXM6IHRydWUgfSAtPiBJZ25vcmUgb2JzZXJ2YWJsZXMgd3JhcHBlZCB1bmRlciB5ZXQgYW5vdGhlciBwYXJlbnQgb2JzZXJ2YWJsZS48YnIvPlxyXG4gICAgLy8vICAgICB7IG11dGFibGU6IHRydWUgfSAtPiBEeW5hbWljYWxseSBhZGFwdCB0byBjaGFuZ2VzIG1hZGUgdG8gdGhlIHRhcmdldCBzdHJ1Y3R1cmUgdGhyb3VnaCBhbnkgc3Vic2NyaWJhYmxlLjxici8+XHJcbiAgICAvLy8gICAgIHsgd2F0Y2hlZE9ubHk6IHRydWUgfSAtPiBXYXRjaCBvbmx5IHN1YnNjcmliYWJsZXMgdGFnZ2VkIHdpdGggLndhdGNoKCkuPGJyLz5cclxuICAgIC8vLyAgICAgeyBiZWZvcmVXYXRjaDogZnVuY3Rpb24ocGFyZW50cywgY2hpbGQpIHsuLi59IH0gLT4gRnVuY3Rpb24gY2FsbGVkIHByaW9yIHRvIGNyZWF0aW5nIGEgc3Vic2NyaXB0aW9uLiBSZXR1cm5pbmcgZmFsc2UgYWJvcnRzIHRoZSBvcGVyYXRpb24gYW5kIGlnbm9yZXMgaXRzIGNoaWxkcmVuLjxici8+XHJcbiAgICAvLy8gICAgIHsgd3JhcDogdHJ1ZSB9IC0+IFdyYXAgYWxsIGZpZWxkcyBpbnRvIG9ic2VydmFibGVzLiBUaGlzIGhhcHBlbnMgb24gdGhlIGZseSBmb3IgbmV3IGFycmF5IGl0ZW1zKG9yIGNoaWxkIG9iamVjdHMgd2hlbiBtdXRhYmxlIGlzIHNldCB0byB0cnVlKS48YnIvPlxyXG4gICAgLy8vICAgICB7IGJlZm9yZVdyYXA6IGZ1bmN0aW9uKHBhcmVudHMsIGZpZWxkLCB2YWx1ZSkgey4uLn0gfSAtPiBGdW5jdGlvbiBjYWxsZWQgcHJpb3IgdG8gd3JhcHBpbmcgYSB2YWx1ZSBpbnRvIGFuIG9ic2VydmFibGUuIFJldHVybmluZyBmYWxzZSBsZWF2ZXMgaXQgYXMgaXQgaXMuPGJyLz5cclxuICAgIC8vLyAgICAgeyB0YWdGaWVsZHM6IHRydWUgfSAtPiBBZGQgdGhlIHByb3BlcnR5ICdfZmllbGROYW1lJyB1bmRlciBlYWNoIHByb3BlcnR5IGZvciB0ZXh0dWFsIGlkZW50aWZpY2F0aW9uLjxici8+XHJcbiAgICAvLy8gICAgIHsgdGFnRmllbGRzOiAncGFyZW50c09ubHknIH0gLT4gU2FtZSBhcyBhYm92ZSBleGNlcHQgdGhhdCBpdCBpcyBsaW1pdGVkIHRvIHBhcmVudCBwcm9wZXJ0aWVzIG9ubHkuPGJyLz5cclxuICAgIC8vLyAgICAgeyBvbGRWYWx1ZXM6IDMgfSAtPiBLZWVwIHRoZSBsYXN0IHRocmVlIHZhbHVlcyBmb3IgZWFjaCBzdWJzY3JpYmFibGUgdW5kZXIgdGhlIHByb3BlcnR5ICdvbGRWYWx1ZXMnLjxici8+XHJcbiAgICAvLy8gICAgIHsgc2VhbDogdHJ1ZSB9IC0+IFByZXZlbnQgYW55IHN1YnNlcXVlbnQgd2F0Y2hlciBmcm9tIHdhdGNoaW5nIHRoZSB0YXJnZXQgYWdhaW4uPGJyLz5cclxuICAgIC8vLyAgICAgeyB1bmxvb3A6IHRydWUgfSAtPiBBdm9pZCBjaXJjdWxhciBwYXRocyB0aHJvdWdoIHRoZSB1c2Ugb2YgYSBicmVhZGNydW1iIHByb3BlcnR5ICdfd2F0Y2hlcicgc2V0IGF0IGVhY2ggbm9kZSBsZXZlbC48YnIvPlxyXG4gICAgLy8vIDwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJldmFsdWF0b3JDYWxsYmFja1wiIHR5cGU9XCJmdW5jdGlvblwiPlxyXG4gICAgLy8vICAgICBUaGUgIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBkdXJpbmcgY2hhbmdlcy4gQW55IHJldHVybiB2YWx1ZSBpcyBhc3NpZ25lZCB0byB0aGUgY2hhaW5lZCBvYnNlcnZhYmxlLlxyXG4gICAgLy8vIDwvcGFyYW0+XHJcblxyXG4gICAgdmFyIHRhcmdldFR5cGUgPSB0eXBlb2YgdGFyZ2V0T3JDYWxsYmFjaztcclxuXHJcbiAgICBpZiAodGFyZ2V0VHlwZSA9PT0gJ2Jvb2xlYW4nIHx8IHRhcmdldFR5cGUgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gVHVybiBvbiBvciBvZmYgdGhlIHdhdGNoZXIgZm9yIHRoZSBzcGVjaWZpZWQgdGFyZ2V0IGFsb25nIHdpdGggYW55IG9mIGl0cyBjaGlsZHJlbi5cclxuICAgICAgICBrby53YXRjaCh0aGlzLCB7IGVuYWJsZWQ6IHRhcmdldE9yQ2FsbGJhY2sgIT09IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0YXJnZXRUeXBlID09PSAnZnVuY3Rpb24nICYmICFrby5pc1N1YnNjcmliYWJsZSh0YXJnZXRPckNhbGxiYWNrKSkge1xyXG4gICAgICAgIC8vIFRhcmdldCB0aGUgY2hhaW5lZCBzdWJzY3JpYmFibGUgaXRzZWxmIGlmIG5vIHRhcmdldCBzdWJzY3JpYmFibGUgb3Igb2JqZWN0IHdhcyBwYXNzZWQuXHJcbiAgICAgICAga28ud2F0Y2godGhpcywgb3B0aW9ucyB8fCB7fSwgdGFyZ2V0T3JDYWxsYmFjaywgY29udGV4dCB8fCB0aGlzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAga28ud2F0Y2godGFyZ2V0T3JDYWxsYmFjaywgb3B0aW9ucywgZXZhbHVhdG9yQ2FsbGJhY2ssIGNvbnRleHQgfHwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG5rb1snd2F0Y2gnXSA9IGZ1bmN0aW9uICh0YXJnZXQsIG9wdGlvbnMsIGV2YWx1YXRvckNhbGxiYWNrLCBjb250ZXh0KSB7XHJcbiAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAvLy8gICAgIFRyYWNrIGFuZCBtYW5hZ2UgY2hhbmdlcyB3aXRoaW4gYSBzcGVjaWZpYyB0YXJnZXQgb2JqZWN0IGRvd24gdG8gYW55IGdpdmVuIGxldmVsLlxyXG4gICAgLy8vIDwvc3VtbWFyeT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInRhcmdldFwiPlxyXG4gICAgLy8vICAgICBBbiBvYmplY3Qgb3IgZnVuY3Rpb24gY29udGFpbmluZyB0aGUgdGFyZ2V0ZWQgc3Vic2NyaWJhYmxlKHMpLlxyXG4gICAgLy8vIDwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJvcHRpb25zXCIgdHlwZT1cIm9iamVjdFwiPlxyXG4gICAgLy8vICAgICB7IGRlcHRoOiAyIH0gLT4gVHJhY2sgYWxsIG5lc3RlZCBzdWJzY3JpYmFibGVzIGRvd24gdG8gdGhlIDJuZCBsZXZlbChkZWZhdWx0IGlzIDEpLjxici8+XHJcbiAgICAvLy8gICAgIHsgZGVwdGg6IC0xIH0gLT4gVHJhY2sgYWxsIG5lc3RlZCBzdWJzY3JpYmFibGVzLjxici8+XHJcbiAgICAvLy8gICAgIHsgaGlkZTogWy4uLl0gfSAtPiBQcm9wZXJ0eSBvciBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIGJlIGlnbm9yZWQuPGJyLz5cclxuICAgIC8vLyAgICAgeyBoaWRlQXJyYXlzOiB0cnVlIH0gLT4gSWdub3JlIGFsbCBuZXN0ZWQgYXJyYXlzLjxici8+XHJcbiAgICAvLy8gICAgIHsgaGlkZVdyYXBwZWRWYWx1ZXM6IHRydWUgfSAtPiBJZ25vcmUgb2JzZXJ2YWJsZXMgd3JhcHBlZCB1bmRlciB5ZXQgYW5vdGhlciBwYXJlbnQgb2JzZXJ2YWJsZS48YnIvPlxyXG4gICAgLy8vICAgICB7IG11dGFibGU6IHRydWUgfSAtPiBEeW5hbWljYWxseSBhZGFwdCB0byBjaGFuZ2VzIG1hZGUgdG8gdGhlIHRhcmdldCBzdHJ1Y3R1cmUgdGhyb3VnaCBhbnkgc3Vic2NyaWJhYmxlLjxici8+XHJcbiAgICAvLy8gICAgIHsgd2F0Y2hlZE9ubHk6IHRydWUgfSAtPiBXYXRjaCBvbmx5IHN1YnNjcmliYWJsZXMgdGFnZ2VkIHdpdGggLndhdGNoKCkuPGJyLz5cclxuICAgIC8vLyAgICAgeyBiZWZvcmVXYXRjaDogZnVuY3Rpb24ocGFyZW50cywgY2hpbGQpIHsuLi59IH0gLT4gRnVuY3Rpb24gY2FsbGVkIHByaW9yIHRvIGNyZWF0aW5nIGEgc3Vic2NyaXB0aW9uLiBSZXR1cm5pbmcgZmFsc2UgYWJvcnRzIHRoZSBvcGVyYXRpb24gYW5kIGlnbm9yZXMgaXRzIGNoaWxkcmVuLjxici8+XHJcbiAgICAvLy8gICAgIHsgd3JhcDogdHJ1ZSB9IC0+IFdyYXAgYWxsIGZpZWxkcyBpbnRvIG9ic2VydmFibGVzLiBUaGlzIGhhcHBlbnMgb24gdGhlIGZseSBmb3IgbmV3IGFycmF5IGl0ZW1zKG9yIGNoaWxkIG9iamVjdHMgd2hlbiBtdXRhYmxlIGlzIHNldCB0byB0cnVlKS48YnIvPlxyXG4gICAgLy8vICAgICB7IGJlZm9yZVdyYXA6IGZ1bmN0aW9uKHBhcmVudHMsIGZpZWxkLCB2YWx1ZSkgey4uLn0gfSAtPiBGdW5jdGlvbiBjYWxsZWQgcHJpb3IgdG8gd3JhcHBpbmcgYSB2YWx1ZSBpbnRvIGFuIG9ic2VydmFibGUuIFJldHVybmluZyBmYWxzZSBsZWF2ZXMgaXQgYXMgaXQgaXMuPGJyLz5cclxuICAgIC8vLyAgICAgeyB0YWdGaWVsZHM6IHRydWUgfSAtPiBBZGQgdGhlIHByb3BlcnR5ICdfZmllbGROYW1lJyB1bmRlciBlYWNoIHByb3BlcnR5IGZvciB0ZXh0dWFsIGlkZW50aWZpY2F0aW9uLjxici8+XHJcbiAgICAvLy8gICAgIHsgdGFnRmllbGRzOiAncGFyZW50c09ubHknIH0gLT4gU2FtZSBhcyBhYm92ZSBleGNlcHQgdGhhdCBpdCBpcyBsaW1pdGVkIHRvIHBhcmVudCBwcm9wZXJ0aWVzIG9ubHkuPGJyLz5cclxuICAgIC8vLyAgICAgeyBvbGRWYWx1ZXM6IDMgfSAtPiBLZWVwIHRoZSBsYXN0IHRocmVlIHZhbHVlcyBmb3IgZWFjaCBzdWJzY3JpYmFibGUgdW5kZXIgdGhlIHByb3BlcnR5ICdvbGRWYWx1ZXMnLjxici8+XHJcbiAgICAvLy8gICAgIHsgc2VhbDogdHJ1ZSB9IC0+IFByZXZlbnQgYW55IHN1YnNlcXVlbnQgd2F0Y2hlciBmcm9tIHdhdGNoaW5nIHRoZSB0YXJnZXQgYWdhaW4uPGJyLz5cclxuICAgIC8vLyAgICAgeyB1bmxvb3A6IHRydWUgfSAtPiBBdm9pZCBjaXJjdWxhciBwYXRocyB0aHJvdWdoIHRoZSB1c2Ugb2YgYSBicmVhZGNydW1iIHByb3BlcnR5ICdfd2F0Y2hlcicgc2V0IGF0IGVhY2ggbm9kZSBsZXZlbC48YnIvPlxyXG4gICAgLy8vICAgICB7IGdldHRlcjogZnVuY3Rpb24ocGFyZW50cywgY2hpbGQsIHByb3BlcnR5KSB7Li4ufSB9IC0+IEZ1bmN0aW9uIHVzZWQgdG8gcmV0cmlldmUgdGhlIHByb3BlcnR5IHZhbHVlIGZyb20gdGhlIGdpdmVuIGNoaWxkLiBGYWxzZSBjYW4gYmUgcmV0dXJuZWQgdG8gaWdub3JlIHRoZSBwcm9wZXJ0eS48YnIvPlxyXG4gICAgLy8vIDwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJldmFsdWF0b3JDYWxsYmFja1wiIHR5cGU9XCJmdW5jdGlvblwiPlxyXG4gICAgLy8vICAgICBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBjaGFuZ2VzLlxyXG4gICAgLy8vIDwvcGFyYW0+XHJcblxyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgZXZhbHVhdG9yQ2FsbGJhY2s7XHJcbiAgICAgICAgZXZhbHVhdG9yQ2FsbGJhY2sgPSBvcHRpb25zO1xyXG4gICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCB0aGlzO1xyXG5cclxuICAgIGZ1bmN0aW9uIHdhdGNoQ2hpbGRyZW4oY2hpbGQsIHBhcmVudCwgZ3JhbmRQYXJlbnRzLCB1bndhdGNoLCBrZWVwT2ZmUGFyZW50TGlzdCwgZmllbGROYW1lKSB7XHJcbiAgICAgICAgaWYgKGNoaWxkICYmIG9wdGlvbnMuZGVwdGggIT09IDAgJiYgKG9wdGlvbnMuZGVwdGggPT09IC0xIHx8IGdyYW5kUGFyZW50cy5sZW5ndGggPCAob3B0aW9ucy5kZXB0aCB8fCAxKSkpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIFByb2NlZWQgb24gd2F0Y2hlZCBjaGlsZHJlbiBvbmx5IHdoZW4gaW4gd2F0Y2hlZC1vbmx5IG1vZGUuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLndhdGNoZWRPbmx5ICYmICFjaGlsZC53YXRjaGFibGUgJiYgY2hpbGQgIT0gdGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0dGluZyB0aGUgdGFyZ2V0IGFzIGZhbHNlIHByZXZlbnRzIGl0IGZyb20gYmVpbmcgd2F0Y2hlZCBsYXRlciBvbi5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlZCA9PT0gZmFsc2UgfHwgb3B0aW9ucy5lbmFibGVkID09PSB0cnVlKVxyXG4gICAgICAgICAgICAgICAgY2hpbGQud2F0Y2hhYmxlID0gb3B0aW9ucy5lbmFibGVkO1xyXG5cclxuICAgICAgICAgICAgLy8gSWdub3JlIHdhdGNoLWRpc2FibGVkIG9iamVjdHMuXHJcbiAgICAgICAgICAgIGlmIChjaGlsZC53YXRjaGFibGUgPT09IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJldmVudCBzdWJzZXF1ZW50IHdhdGNoZXJzIGZyb20gd2F0Y2hpbmcgdGhlIHRhcmdldCB3aGVuIHNlYWxlZC5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2VhbCA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGNoaWxkLndhdGNoYWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgY2hpbGQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQnlwYXNzIGNpcmN1bGFyIHJlZmVyZW5jZXMuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuX3dhdGNoZXIgPT09IGNvbnRleHQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBoaWRkZW4gb2JqZWN0cy4gQWxzbyBhcHBsaWVzIHRvIGFueSBvZiB0aGVpciBjaGlsZHJlbi5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmhpZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtvLnV0aWxzLmFycmF5SW5kZXhPZihvcHRpb25zLmhpZGUsIGNoaWxkKSA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTWVyZ2UgcGFyZW50cy4gVXNpbmcgYSBmcmVzaCBhcnJheSBzbyBpdCBpcyBub3QgcmVmZXJlbmNlZCBpbiB0aGUgbmV4dCByZWN1cnNpb24gaWYgYW55LlxyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudHMgPSBbXS5jb25jYXQoZ3JhbmRQYXJlbnRzLCBwYXJlbnQgJiYgcGFyZW50ICE9PSB0YXJnZXQgPyBwYXJlbnQgOiBbXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkWydub3RpZnlTdWJzY3JpYmVycyddID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGFyZ2V0IGlzIGEgc3Vic2NyaWJhYmxlLiBXYXRjaCBpdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2YWx1YXRvckNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lbmFibGVkID09PSB0cnVlICYmIGNoaWxkLndhdGNoYWJsZSA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3YWtpbmcgdXAgYW4gZXhpc3Rpbmcgd2F0Y2hlci4gTGV0J3Mgbm90IGFkZCBhbm90aGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW53YXRjaCB8fCAhb3B0aW9ucy5iZWZvcmVXYXRjaCB8fCBvcHRpb25zLmJlZm9yZVdhdGNoLmNhbGwoY29udGV4dCwgcGFyZW50cywgY2hpbGQsIGZpZWxkTmFtZSkgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzQXJyYXkgPSB0eXBlb2YgY2hpbGQucG9wID09PSAnZnVuY3Rpb24nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW53YXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwb3NlV2F0Y2hlcihjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWduV2F0Y2hlcihjaGlsZCwgaXNBcnJheSwgcGFyZW50cywga2VlcE9mZlBhcmVudExpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hDaGlsZHJlbihjaGlsZCgpLCBrZWVwT2ZmUGFyZW50TGlzdCA/IG51bGwgOiBjaGlsZCwgcGFyZW50cywgdW53YXRjaCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmhpZGVXcmFwcGVkVmFsdWVzICE9PSB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdhdGNoQ2hpbGRyZW4oY2hpbGQoKSwga2VlcE9mZlBhcmVudExpc3QgPyBudWxsIDogY2hpbGQsIHBhcmVudHMsIHVud2F0Y2gsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjaGlsZCkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvLnV0aWxzLm9iamVjdEZvckVhY2goY2hpbGQsIGZ1bmN0aW9uIChwcm9wZXJ0eSwgc3ViKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWIgPSBvcHRpb25zLmdldHRlciA/IG9wdGlvbnMuZ2V0dGVyLmNhbGwoY29udGV4dCwgcGFyZW50cywgY2hpbGQsIHByb3BlcnR5KSA6IHN1YjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy53cmFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdyYXAgc2ltcGxlIG9iamVjdHMgYW5kIGFycmF5cyBpbnRvIG9ic2VydmFibGVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzdWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSAhPT0gJ1tvYmplY3QgRnVuY3Rpb25dJyAmJiB0eXBlICE9PSAnW29iamVjdCBPYmplY3RdJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmJlZm9yZVdyYXAgfHwgb3B0aW9ucy5iZWZvcmVXcmFwLmNhbGwoY29udGV4dCwgcGFyZW50cywgY2hpbGQsIHN1YikgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViID0gY2hpbGRbcHJvcGVydHldID0gdHlwZSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGtvLm9ic2VydmFibGVBcnJheShzdWIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoga28ub2JzZXJ2YWJsZShzdWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51bmxvb3ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yi5fd2F0Y2hlciA9IHVud2F0Y2ggPyB1bmRlZmluZWQgOiBjb250ZXh0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFzQ2hpbGRyZW4gPSB3YXRjaENoaWxkcmVuKHN1Yiwga2VlcE9mZlBhcmVudExpc3QgPyBudWxsIDogY2hpbGQsIHBhcmVudHMsIHVud2F0Y2gsIG51bGwsIHByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGFnRmllbGRzICYmIHN1Yi5fZmllbGROYW1lID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNDaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKG9wdGlvbnMudGFnRmllbGRzICE9PSAncGFyZW50c09ubHknICYmIHR5cGVvZiBzdWIgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHN1YiA9PT0gJ29iamVjdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViLl9maWVsZE5hbWUgPSBwcm9wZXJ0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gJ1tvYmplY3QgQXJyYXldJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5oaWRlQXJyYXlzICE9PSB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZC5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXRjaENoaWxkcmVuKGNoaWxkW2ldLCBrZWVwT2ZmUGFyZW50TGlzdCA/IG51bGwgOiBjaGlsZCwgcGFyZW50cywgdW53YXRjaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTdWJzY3JpcHRpb25zIGFyZSBzdG9yZWQgdW5kZXIgZWl0aGVyIHRoZSBfc3Vic2NyaXB0aW9ucyBmaWVsZCBmb3IgdGhlIGRlYnVnIHZlcnNpb25cclxuICAgIC8vIG9yIHRoZSBGLCBIIG9yIE0gZmllbGRzIHdoZW4gbWluaWZpZWQgZGVwZW5kaW5nIG9uIHRoZSB2ZXJzaW9uIHVzZWQuXHJcbiAgICAvLyBOT1RFOiB3ZSB1c2VkIHRvIHVzZSBrby5ERUJVRyB0byBkZXRlY3QgdGhlIGRlYnVnIHZlcnNpb25idXQgaXQgd2FzIHJlbW92ZWQgaW4gMy40LjArLFxyXG4gICAgLy8gICAgICAgc28gd2Ugbm93IGNoZWNrIHRoZSBleGlzdGVuY2Ugb2YgYSBcInN1YnNjcmlwdGlvblwiIGZ1bmN0aW9uLlxyXG4gICAgdmFyIHN1YnNjcmlwdGlvbnNGaWVsZDtcclxuICAgIHN3aXRjaCAodHlwZW9mIGtvLnN1YnNjcmlwdGlvbiA9PSAnZnVuY3Rpb24nIHx8IGtvLnZlcnNpb24pIHtcclxuICAgICAgICBjYXNlIHRydWU6IHN1YnNjcmlwdGlvbnNGaWVsZCA9ICdfc3Vic2NyaXB0aW9ucyc7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCIzLjAuMFwiOiBzdWJzY3JpcHRpb25zRmllbGQgPSAnRic7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCIzLjEuMFwiOiBzdWJzY3JpcHRpb25zRmllbGQgPSAnSCc7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCIzLjIuMFwiOiBzdWJzY3JpcHRpb25zRmllbGQgPSAnTSc7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCIzLjMuMFwiOiBzdWJzY3JpcHRpb25zRmllbGQgPSAnRyc7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCIzLjQuMFwiOiBzdWJzY3JpcHRpb25zRmllbGQgPSAnSyc7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCIzLjQuMVwiOiBzdWJzY3JpcHRpb25zRmllbGQgPSAnSyc7IGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6IHRocm93IFwiVW5zdXBwb3J0ZWQgS25vY2tvdXQgdmVyc2lvbi4gT25seSB2My4wLjAgdG8gdjMuNC4xIGFyZSBzdXBwb3J0ZWQgd2hlbiBtaW5pZmllZC4gQ3VycmVudCB2ZXJzaW9uIGlzIFwiICsga28udmVyc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXNwb3NlV2F0Y2hlcihjaGlsZCkge1xyXG4gICAgICAgIHZhciBzdWJzYyA9IGNoaWxkW3N1YnNjcmlwdGlvbnNGaWVsZF07XHJcblxyXG4gICAgICAgIGlmIChzdWJzYykge1xyXG4gICAgICAgICAgICBpZiAoc3Vic2MuY2hhbmdlKVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN1YnNjLmNoYW5nZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2MuY2hhbmdlW2ldLl93YXRjaGVyID09PSBjb250ZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzYy5jaGFuZ2VbaV0uZGlzcG9zZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHN1YnNjLmJlZm9yZUNoYW5nZSAmJiAob3B0aW9ucy5tdXRhYmxlIHx8IG9wdGlvbnMub2xkVmFsdWVzID4gMCkpXHJcbiAgICAgICAgICAgICAgICAvLyBBbHNvIGNsZWFuIHVwIGFueSBiZWZvcmUtY2hhbmdlIHN1YnNjcmlwdGlvbnMgdXNlZCBmb3IgdHJhY2tpbmcgb2xkIHZhbHVlcy5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdWJzYy5iZWZvcmVDaGFuZ2UubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjLmJlZm9yZUNoYW5nZVtpXS5fd2F0Y2hlciA9PT0gY29udGV4dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2MuYmVmb3JlQ2hhbmdlW2ldLmRpc3Bvc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdWJzYy5hcnJheUNoYW5nZSlcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdWJzYy5hcnJheUNoYW5nZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2MuYXJyYXlDaGFuZ2VbaV0uX3dhdGNoZXIgPT09IGNvbnRleHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjLmFycmF5Q2hhbmdlW2ldLmRpc3Bvc2UoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBcIlN1YnNjcmlwdGlvbnMgZmllbGQgKC5cIiArIHN1YnNjcmlwdGlvbnNGaWVsZCArIFwiKSBub3QgZGVmaW5lZCBmb3Igb2JzZXJ2YWJsZSBjaGlsZCBcIiArIChjaGlsZC5fZmllbGROYW1lIHx8IFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhc3NpZ25XYXRjaGVyKGNoaWxkLCBpc0FycmF5LCBwYXJlbnRzLCBrZWVwT2ZmUGFyZW50TGlzdCkge1xyXG4gICAgICAgIGlmIChpc0FycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIENoaWxkIGlzIGFuIG9ic2VydmFibGUgYXJyYXkuIFdhdGNoIGFsbCBjaGFuZ2VzIHdpdGhpbiBpdC5cclxuICAgICAgICAgICAgY2hpbGQuc3Vic2NyaWJlKGZ1bmN0aW9uIChjaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBrby51dGlscy5hcnJheUZvckVhY2goY2hhbmdlcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSBldmFsdWF0b3JDYWxsYmFjay5jYWxsKGNvbnRleHQsIHBhcmVudHMsIGNoaWxkLCBpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dChyZXR1cm5WYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXRlbS5tb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGVkIG9yIGJyYW5kIG5ldyBpdGVtLiBVbndhdGNoIG9yIHdhdGNoIGl0IGFjY29yZGluZ2x5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoQ2hpbGRyZW4oaXRlbS52YWx1ZSwgKGtlZXBPZmZQYXJlbnRMaXN0ID8gbnVsbCA6IGNoaWxkKSwgcGFyZW50cywgaXRlbS5zdGF0dXMgPT09ICdkZWxldGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCB1bmRlZmluZWQsICdhcnJheUNoYW5nZScpLl93YXRjaGVyID0gY29udGV4dDtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hpbGQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC53YXRjaGFibGUgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gZXZhbHVhdG9yQ2FsbGJhY2suY2FsbChjb250ZXh0LCBwYXJlbnRzLCBjaGlsZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0KHJldHVyblZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubXV0YWJsZSAmJiB0eXBlb2YgY2hpbGQoKSA9PT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhdGNoIHRoZSBuZXcgY29tZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoQ2hpbGRyZW4oY2hpbGQoKSwgKGtlZXBPZmZQYXJlbnRMaXN0ID8gbnVsbCA6IGNoaWxkKSwgcGFyZW50cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LCBudWxsLCAnY2hhbmdlJykuX3dhdGNoZXIgPSBjb250ZXh0O1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMub2xkVmFsdWVzID4gMCB8fCBvcHRpb25zLm11dGFibGUpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLnN1YnNjcmliZShmdW5jdGlvbiAob2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbGRWYWx1ZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBvbGQgdmFsdWUgdG8gaGlzdG9yeSBsaXN0IGJlZm9yZSBldmVyeSB1cGRhdGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSAoY2hpbGRbJ29sZFZhbHVlcyddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNoaWxkWydvbGRWYWx1ZXMnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjaGlsZFsnb2xkVmFsdWVzJ10gPSBbXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMudW5zaGlmdChvbGRWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodmFsdWVzLmxlbmd0aCA+IG9wdGlvbnMub2xkVmFsdWVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubXV0YWJsZSAmJiB0eXBlb2Ygb2xkVmFsdWUgPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCBhbGwgc3Vic2NyaXB0aW9ucyBmb3IgdGhlIG9sZCBjaGlsZCBvYmplY3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoQ2hpbGRyZW4ob2xkVmFsdWUsIChrZWVwT2ZmUGFyZW50TGlzdCA/IG51bGwgOiBjaGlsZCksIHBhcmVudHMsIGZhbHNlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBudWxsLCAnYmVmb3JlQ2hhbmdlJykuX3dhdGNoZXIgPSBjb250ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVzZSBhIGNvbXB1dGVkIHdoZW4gdGFyZ2V0aW5nIGEgbm9uLXdhdGNoYWJsZSBmdW5jdGlvbi5cclxuICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nICYmICFrby5pc1N1YnNjcmliYWJsZSh0YXJnZXQpKVxyXG4gICAgICAgIHJldHVybiBrby5jb21wdXRlZCh0YXJnZXQsIGV2YWx1YXRvckNhbGxiYWNrLCBvcHRpb25zKTtcclxuXHJcbiAgICB3YXRjaENoaWxkcmVuKHRhcmdldCwgbnVsbCwgW10pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB3YXRjaENoaWxkcmVuKHRhcmdldCwgbnVsbCwgW10sIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcblxyXG59KSk7IiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgbGV4ICA6IHJlcXVpcmUoJy4vbGliL2xleGVyJyksXG4gICAgcGFyc2U6IHJlcXVpcmUoJy4vbGliL3BhcnNlcicpLFxuICAgIHN0cmluZ2lmeTogcmVxdWlyZSgnLi9saWIvc3RyaW5naWZ5Jylcbn07XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBkZWJ1ZztcblxuZnVuY3Rpb24gZGVidWcobGFiZWwpIHtcbiAgcmV0dXJuIF9kZWJ1Zy5iaW5kKG51bGwsIGxhYmVsKTtcbn1cblxuZnVuY3Rpb24gX2RlYnVnKGxhYmVsKSB7XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICBhcmdzLnVuc2hpZnQoJ1snICsgbGFiZWwgKyAnXScpO1xuICBwcm9jZXNzLnN0ZGVyci53cml0ZShhcmdzLmpvaW4oJyAnKSArICdcXG4nKTtcbn0iLCJ2YXIgREVCVUcgPSBmYWxzZTsgLy8gYHRydWVgIHRvIHByaW50IGRlYnVnZ2luZyBpbmZvLlxudmFyIFRJTUVSID0gZmFsc2U7IC8vIGB0cnVlYCB0byB0aW1lIGNhbGxzIHRvIGBsZXgoKWAgYW5kIHByaW50IHRoZSByZXN1bHRzLlxuXG52YXIgZGVidWcgPSByZXF1aXJlKCcuL2RlYnVnJykoJ2xleCcpO1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBsZXg7XG5cbi8qKlxuICogQ29udmVydCBhIENTUyBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBsZXhpY2FsIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY3NzIENTU1xuICogQHJldHVybnMge0FycmF5fSBsZXhpY2FsIHRva2Vuc1xuICovXG5mdW5jdGlvbiBsZXgoY3NzKSB7XG4gIHZhciBzdGFydDsgLy8gRGVidWcgdGltZXIgc3RhcnQuXG5cbiAgdmFyIGJ1ZmZlciA9ICcnOyAgICAgIC8vIENoYXJhY3RlciBhY2N1bXVsYXRvclxuICB2YXIgY2g7ICAgICAgICAgICAgICAgLy8gQ3VycmVudCBjaGFyYWN0ZXJcbiAgdmFyIGNvbHVtbiA9IDA7ICAgICAgIC8vIEN1cnJlbnQgc291cmNlIGNvbHVtbiBudW1iZXJcbiAgdmFyIGN1cnNvciA9IC0xOyAgICAgIC8vIEN1cnJlbnQgc291cmNlIGN1cnNvciBwb3NpdGlvblxuICB2YXIgZGVwdGggPSAwOyAgICAgICAgLy8gQ3VycmVudCBuZXN0aW5nIGRlcHRoXG4gIHZhciBsaW5lID0gMTsgICAgICAgICAvLyBDdXJyZW50IHNvdXJjZSBsaW5lIG51bWJlclxuICB2YXIgc3RhdGUgPSAnYmVmb3JlLXNlbGVjdG9yJzsgLy8gQ3VycmVudCBzdGF0ZVxuICB2YXIgc3RhY2sgPSBbc3RhdGVdOyAgLy8gU3RhdGUgc3RhY2tcbiAgdmFyIHRva2VuID0ge307ICAgICAgIC8vIEN1cnJlbnQgdG9rZW5cbiAgdmFyIHRva2VucyA9IFtdOyAgICAgIC8vIFRva2VuIGFjY3VtdWxhdG9yXG5cbiAgLy8gU3VwcG9ydGVkIEAtcnVsZXMsIGluIHJvdWdobHkgZGVzY2VuZGluZyBvcmRlciBvZiB1c2FnZSBwcm9iYWJpbGl0eS5cbiAgdmFyIGF0UnVsZXMgPSBbXG4gICAgJ21lZGlhJyxcbiAgICAna2V5ZnJhbWVzJyxcbiAgICB7IG5hbWU6ICctd2Via2l0LWtleWZyYW1lcycsIHR5cGU6ICdrZXlmcmFtZXMnLCBwcmVmaXg6ICctd2Via2l0LScgfSxcbiAgICB7IG5hbWU6ICctbW96LWtleWZyYW1lcycsIHR5cGU6ICdrZXlmcmFtZXMnLCBwcmVmaXg6ICctbW96LScgfSxcbiAgICB7IG5hbWU6ICctbXMta2V5ZnJhbWVzJywgdHlwZTogJ2tleWZyYW1lcycsIHByZWZpeDogJy1tcy0nIH0sXG4gICAgeyBuYW1lOiAnLW8ta2V5ZnJhbWVzJywgdHlwZTogJ2tleWZyYW1lcycsIHByZWZpeDogJy1vLScgfSxcbiAgICAnZm9udC1mYWNlJyxcbiAgICB7IG5hbWU6ICdpbXBvcnQnLCBzdGF0ZTogJ2JlZm9yZS1hdC12YWx1ZScgfSxcbiAgICB7IG5hbWU6ICdjaGFyc2V0Jywgc3RhdGU6ICdiZWZvcmUtYXQtdmFsdWUnIH0sXG4gICAgJ3N1cHBvcnRzJyxcbiAgICAndmlld3BvcnQnLFxuICAgIHsgbmFtZTogJ25hbWVzcGFjZScsIHN0YXRlOiAnYmVmb3JlLWF0LXZhbHVlJyB9LFxuICAgICdkb2N1bWVudCcsXG4gICAgeyBuYW1lOiAnLW1vei1kb2N1bWVudCcsIHR5cGU6ICdkb2N1bWVudCcsIHByZWZpeDogJy1tb3otJyB9LFxuICAgICdwYWdlJ1xuICBdO1xuXG4gIC8vIC0tIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvKipcbiAgICogQWR2YW5jZSB0aGUgY2hhcmFjdGVyIGN1cnNvciBhbmQgcmV0dXJuIHRoZSBuZXh0IGNoYXJhY3Rlci5cbiAgICpcbiAgICogQHJldHVybnMge1N0cmluZ30gVGhlIG5leHQgY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0Q2goKSB7XG4gICAgc2tpcCgpO1xuICAgIHJldHVybiBjc3NbY3Vyc29yXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHN0YXRlIGF0IHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgc3RhY2suXG4gICAqIFRoZSBzdGFjayBpcyBMSUZPIHNvIGluZGV4aW5nIGlzIGZyb20gdGhlIHJpZ2h0LlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2luZGV4PTBdIEluZGV4IHRvIHJldHVybi5cbiAgICogQHJldHVybnMge1N0cmluZ30gc3RhdGVcbiAgICovXG4gIGZ1bmN0aW9uIGdldFN0YXRlKGluZGV4KSB7XG4gICAgcmV0dXJuIGluZGV4ID8gc3RhY2tbc3RhY2subGVuZ3RoIC0gMSAtIGluZGV4XSA6IHN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIExvb2sgYWhlYWQgZm9yIGEgc3RyaW5nIGJlZ2lubmluZyBmcm9tIHRoZSBuZXh0IHBvc2l0aW9uLiBUaGUgc3RyaW5nXG4gICAqIGJlaW5nIGxvb2tlZCBmb3IgbXVzdCBzdGFydCBhdCB0aGUgbmV4dCBwb3NpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIGxvb2sgZm9yLlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gV2hldGhlciB0aGUgc3RyaW5nIHdhcyBmb3VuZC5cbiAgICovXG4gIGZ1bmN0aW9uIGlzTmV4dFN0cmluZyhzdHIpIHtcbiAgICB2YXIgc3RhcnQgPSBjdXJzb3IgKyAxO1xuICAgIHJldHVybiAoc3RyID09PSBjc3Muc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgc3RyLmxlbmd0aCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHN0YXJ0IHBvc2l0aW9uIG9mIGEgc3Vic3RyaW5nIGJlZ2lubmluZyBmcm9tIHRoZSBuZXh0XG4gICAqIHBvc2l0aW9uLiBUaGUgc3RyaW5nIGJlaW5nIGxvb2tlZCBmb3IgbWF5IGJlZ2luIGFueXdoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdWJzdHJpbmcgdG8gbG9vayBmb3IuXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ8ZmFsc2V9IFRoZSBwb3NpdGlvbiwgb3IgYGZhbHNlYCBpZiBub3QgZm91bmQuXG4gICAqL1xuICBmdW5jdGlvbiBmaW5kKHN0cikge1xuICAgIHZhciBwb3MgPSBjc3Muc2xpY2UoY3Vyc29yKS5pbmRleE9mKHN0cik7XG5cbiAgICByZXR1cm4gcG9zID4gMCA/IHBvcyA6IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSB3aGV0aGVyIGEgY2hhcmFjdGVyIGlzIG5leHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjaCBDaGFyYWN0ZXIuXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIHRoZSBjaGFyYWN0ZXIgaXMgbmV4dC5cbiAgICovXG4gIGZ1bmN0aW9uIGlzTmV4dENoYXIoY2gpIHtcbiAgICByZXR1cm4gY2ggPT09IHBlZWsoMSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBjaGFyYWN0ZXIgYXQgdGhlIGdpdmVuIGN1cnNvciBvZmZzZXQuIFRoZSBvZmZzZXQgaXMgcmVsYXRpdmVcbiAgICogdG8gdGhlIGN1cnNvciwgc28gbmVnYXRpdmUgdmFsdWVzIG1vdmUgYmFja3dhcmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gW29mZnNldD0xXSBDdXJzb3Igb2Zmc2V0LlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBDaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiBwZWVrKG9mZnNldCkge1xuICAgIHJldHVybiBjc3NbY3Vyc29yICsgKG9mZnNldCB8fCAxKV07XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBjdXJyZW50IHN0YXRlIGZyb20gdGhlIHN0YWNrIGFuZCBzZXQgdGhlIG5ldyBjdXJyZW50IHN0YXRlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVtb3ZlZCBzdGF0ZS5cbiAgICovXG4gIGZ1bmN0aW9uIHBvcFN0YXRlKCkge1xuICAgIHZhciByZW1vdmVkID0gc3RhY2sucG9wKCk7XG4gICAgc3RhdGUgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcblxuICAgIHJldHVybiByZW1vdmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBzdGF0ZSBhbmQgYWRkIGl0IHRvIHRoZSBzdGFjay5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5ld1N0YXRlIFRoZSBuZXcgc3RhdGUuXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBuZXcgc3RhY2sgbGVuZ3RoLlxuICAgKi9cbiAgZnVuY3Rpb24gcHVzaFN0YXRlKG5ld1N0YXRlKSB7XG4gICAgc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICBzdGFjay5wdXNoKHN0YXRlKTtcblxuICAgIHJldHVybiBzdGFjay5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZSB0aGUgY3VycmVudCBzdGF0ZSB3aXRoIGEgbmV3IHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmV3U3RhdGUgVGhlIG5ldyBzdGF0ZS5cbiAgICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlcGxhY2VkIHN0YXRlLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVwbGFjZVN0YXRlKG5ld1N0YXRlKSB7XG4gICAgdmFyIHByZXZpb3VzU3RhdGUgPSBzdGF0ZTtcbiAgICBzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9IHN0YXRlID0gbmV3U3RhdGU7XG5cbiAgICByZXR1cm4gcHJldmlvdXNTdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBjaGFyYWN0ZXIgY3Vyc29yLiBQb3NpdGl2ZSBudW1iZXJzIG1vdmUgdGhlIGN1cnNvciBmb3J3YXJkLlxuICAgKiBOZWdhdGl2ZSBudW1iZXJzIGFyZSBub3Qgc3VwcG9ydGVkIVxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gW249MV0gTnVtYmVyIG9mIGNoYXJhY3RlcnMgdG8gc2tpcC5cbiAgICovXG4gIGZ1bmN0aW9uIHNraXAobikge1xuICAgIGlmICgobiB8fCAxKSA9PSAxKSB7XG4gICAgICBpZiAoY3NzW2N1cnNvcl0gPT0gJ1xcbicpIHtcbiAgICAgICAgbGluZSsrO1xuICAgICAgICBjb2x1bW4gPSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29sdW1uKys7XG4gICAgICB9XG4gICAgICBjdXJzb3IrKztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHNraXBTdHIgPSBjc3Muc2xpY2UoY3Vyc29yLCBjdXJzb3IgKyBuKS5zcGxpdCgnXFxuJyk7XG4gICAgICBpZiAoc2tpcFN0ci5sZW5ndGggPiAxKSB7XG4gICAgICAgIGxpbmUgKz0gc2tpcFN0ci5sZW5ndGggLSAxO1xuICAgICAgICBjb2x1bW4gPSAxO1xuICAgICAgfVxuICAgICAgY29sdW1uICs9IHNraXBTdHJbc2tpcFN0ci5sZW5ndGggLSAxXS5sZW5ndGg7XG4gICAgICBjdXJzb3IgPSBjdXJzb3IgKyBuO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGN1cnJlbnQgdG9rZW4gdG8gdGhlIHBpbGUgYW5kIHJlc2V0IHRoZSBidWZmZXIuXG4gICAqL1xuICBmdW5jdGlvbiBhZGRUb2tlbigpIHtcbiAgICB0b2tlbi5lbmQgPSB7XG4gICAgICBsaW5lOiBsaW5lLFxuICAgICAgY29sOiBjb2x1bW5cbiAgICB9O1xuXG4gICAgREVCVUcgJiYgZGVidWcoJ2FkZFRva2VuOicsIEpTT04uc3RyaW5naWZ5KHRva2VuLCBudWxsLCAyKSk7XG5cbiAgICB0b2tlbnMucHVzaCh0b2tlbik7XG5cbiAgICBidWZmZXIgPSAnJztcbiAgICB0b2tlbiA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCB0b2tlbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVG9rZW4gdHlwZS5cbiAgICovXG4gIGZ1bmN0aW9uIGluaXRpYWxpemVUb2tlbih0eXBlKSB7XG4gICAgdG9rZW4gPSB7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgc3RhcnQ6IHtcbiAgICAgICAgbGluZTogbGluZSxcbiAgICAgICAgY29sIDogY29sdW1uXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIC0tIE1haW4gTG9vcCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvKlxuICBUaGUgbWFpbiBsb29wIGlzIGEgc3RhdGUgbWFjaGluZSB0aGF0IHJlYWRzIGluIG9uZSBjaGFyYWN0ZXIgYXQgYSB0aW1lLFxuICBhbmQgZGV0ZXJtaW5lcyB3aGF0IHRvIGRvIGJhc2VkIG9uIHRoZSBjdXJyZW50IHN0YXRlIGFuZCBjaGFyYWN0ZXIuXG4gIFRoaXMgaXMgaW1wbGVtZW50ZWQgYXMgYSBzZXJpZXMgb2YgbmVzdGVkIGBzd2l0Y2hgIHN0YXRlbWVudHMgYW5kIHRoZVxuICBjYXNlIG9yZGVycyBoYXZlIGJlZW4gbWlsZGx5IG9wdGltaXplZCBiYXNlZCBvbiByb3VnaCBwcm9iYWJpbGl0aWVzXG4gIGNhbGN1bGF0ZWQgYnkgcHJvY2Vzc2luZyBhIHNtYWxsIHNhbXBsZSBvZiByZWFsLXdvcmxkIENTUy5cblxuICBGdXJ0aGVyIG9wdGltaXphdGlvbiAoc3VjaCBhcyBhIGRpc3BhdGNoIHRhYmxlKSBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5XG4gIHNpbmNlIHRoZSB0b3RhbCBudW1iZXIgb2YgY2FzZXMgaXMgdmVyeSBsb3cuXG4gICovXG5cbiAgVElNRVIgJiYgKHN0YXJ0ID0gRGF0ZS5ub3coKSk7XG5cbiAgd2hpbGUgKGNoID0gZ2V0Q2goKSkge1xuICAgIERFQlVHICYmIGRlYnVnKGNoLCBnZXRTdGF0ZSgpKTtcblxuICAgIC8vIGNvbHVtbiArPSAxO1xuXG4gICAgc3dpdGNoIChjaCkge1xuICAgIC8vIFNwYWNlXG4gICAgY2FzZSAnICc6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ3NlbGVjdG9yJzpcbiAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgIGNhc2UgJ3ZhbHVlLXBhcmVuJzpcbiAgICAgIGNhc2UgJ2F0LWdyb3VwJzpcbiAgICAgIGNhc2UgJ2F0LXZhbHVlJzpcbiAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgY2FzZSAnZG91YmxlLXN0cmluZyc6XG4gICAgICBjYXNlICdzaW5nbGUtc3RyaW5nJzpcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gTmV3bGluZSBvciB0YWJcbiAgICBjYXNlICdcXG4nOlxuICAgIGNhc2UgJ1xcdCc6XG4gICAgY2FzZSAnXFxyJzpcbiAgICBjYXNlICdcXGYnOlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICd2YWx1ZSc6XG4gICAgICBjYXNlICd2YWx1ZS1wYXJlbic6XG4gICAgICBjYXNlICdhdC1ncm91cCc6XG4gICAgICBjYXNlICdjb21tZW50JzpcbiAgICAgIGNhc2UgJ3NpbmdsZS1zdHJpbmcnOlxuICAgICAgY2FzZSAnZG91YmxlLXN0cmluZyc6XG4gICAgICBjYXNlICdzZWxlY3Rvcic6XG4gICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2F0LXZhbHVlJzpcbiAgICAgICAgLy8gVG9rZW5pemUgYW4gQC1ydWxlIGlmIGEgc2VtaS1jb2xvbiB3YXMgb21pdHRlZC5cbiAgICAgICAgaWYgKCdcXG4nID09PSBjaCkge1xuICAgICAgICAgIHRva2VuLnZhbHVlID0gYnVmZmVyLnRyaW0oKTtcbiAgICAgICAgICBhZGRUb2tlbigpO1xuICAgICAgICAgIHBvcFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmICgnXFxuJyA9PT0gY2gpIHtcbiAgICAgIC8vICAgY29sdW1uID0gMDtcbiAgICAgIC8vICAgbGluZSArPSAxO1xuICAgICAgLy8gfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICc6JzpcbiAgICAgIHN3aXRjaCAoZ2V0U3RhdGUoKSkge1xuICAgICAgY2FzZSAnbmFtZSc6XG4gICAgICAgIHRva2VuLm5hbWUgPSBidWZmZXIudHJpbSgpO1xuICAgICAgICBidWZmZXIgPSAnJztcblxuICAgICAgICByZXBsYWNlU3RhdGUoJ2JlZm9yZS12YWx1ZScpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLXNlbGVjdG9yJzpcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuXG4gICAgICAgIGluaXRpYWxpemVUb2tlbignc2VsZWN0b3InKTtcbiAgICAgICAgcHVzaFN0YXRlKCdzZWxlY3RvcicpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgICAgcmVwbGFjZVN0YXRlKCd2YWx1ZScpO1xuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICc7JzpcbiAgICAgIHN3aXRjaCAoZ2V0U3RhdGUoKSkge1xuICAgICAgY2FzZSAnbmFtZSc6XG4gICAgICBjYXNlICdiZWZvcmUtdmFsdWUnOlxuICAgICAgY2FzZSAndmFsdWUnOlxuICAgICAgICAvLyBUb2tlbml6ZSBhIGRlY2xhcmF0aW9uXG4gICAgICAgIC8vIGlmIHZhbHVlIGlzIGVtcHR5IHNraXAgdGhlIGRlY2xhcmF0aW9uXG4gICAgICAgIGlmIChidWZmZXIudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0b2tlbi52YWx1ZSA9IGJ1ZmZlci50cmltKCksXG4gICAgICAgICAgYWRkVG9rZW4oKTtcbiAgICAgICAgfVxuICAgICAgICByZXBsYWNlU3RhdGUoJ2JlZm9yZS1uYW1lJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd2YWx1ZS1wYXJlbic6XG4gICAgICAgIC8vIEluc2lnbmlmaWNhbnQgc2VtaS1jb2xvblxuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdhdC12YWx1ZSc6XG4gICAgICAgIC8vIFRva2VuaXplIGFuIEAtcnVsZVxuICAgICAgICB0b2tlbi52YWx1ZSA9IGJ1ZmZlci50cmltKCk7XG4gICAgICAgIGFkZFRva2VuKCk7XG4gICAgICAgIHBvcFN0YXRlKCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdiZWZvcmUtbmFtZSc6XG4gICAgICAgIC8vIEV4dHJhbmVvdXMgc2VtaS1jb2xvblxuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAneyc6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ3NlbGVjdG9yJzpcbiAgICAgICAgLy8gSWYgdGhlIHNlcXVlbmNlIGlzIGBcXHtgIHRoZW4gYXNzdW1lIHRoYXQgdGhlIGJyYWNlIHNob3VsZCBiZSBlc2NhcGVkLlxuICAgICAgICBpZiAocGVlaygtMSkgPT09ICdcXFxcJykge1xuICAgICAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUb2tlbml6ZSBhIHNlbGVjdG9yXG4gICAgICAgIHRva2VuLnRleHQgPSBidWZmZXIudHJpbSgpO1xuICAgICAgICBhZGRUb2tlbigpO1xuICAgICAgICByZXBsYWNlU3RhdGUoJ2JlZm9yZS1uYW1lJyk7XG4gICAgICAgIGRlcHRoID0gZGVwdGggKyAxO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYXQtZ3JvdXAnOlxuICAgICAgICAvLyBUb2tlbml6ZSBhbiBALWdyb3VwXG4gICAgICAgIHRva2VuLm5hbWUgPSBidWZmZXIudHJpbSgpO1xuXG4gICAgICAgIC8vIFhYWDogQC1ydWxlcyBhcmUgc3RhcnRpbmcgdG8gZ2V0IGhhaXJ5XG4gICAgICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgICAgICBjYXNlICdmb250LWZhY2UnOlxuICAgICAgICBjYXNlICd2aWV3cG9ydCcgOlxuICAgICAgICBjYXNlICdwYWdlJyAgICAgOlxuICAgICAgICAgIHB1c2hTdGF0ZSgnYmVmb3JlLW5hbWUnKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHB1c2hTdGF0ZSgnYmVmb3JlLXNlbGVjdG9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICBhZGRUb2tlbigpO1xuICAgICAgICBkZXB0aCA9IGRlcHRoICsgMTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgY2FzZSAnYXQtcnVsZSc6XG4gICAgICAgIC8vIFRva2VuaXplIGEgZGVjbGFyYXRpb24gb3IgYW4gQC1ydWxlXG4gICAgICAgIHRva2VuLm5hbWUgPSBidWZmZXIudHJpbSgpO1xuICAgICAgICBhZGRUb2tlbigpO1xuICAgICAgICBwdXNoU3RhdGUoJ2JlZm9yZS1uYW1lJyk7XG4gICAgICAgIGRlcHRoID0gZGVwdGggKyAxO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWVudCc6XG4gICAgICBjYXNlICdkb3VibGUtc3RyaW5nJzpcbiAgICAgIGNhc2UgJ3NpbmdsZS1zdHJpbmcnOlxuICAgICAgICAvLyBJZ25vcmUgYnJhY2VzIGluIGNvbW1lbnRzIGFuZCBzdHJpbmdzXG4gICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdiZWZvcmUtdmFsdWUnOlxuICAgICAgICByZXBsYWNlU3RhdGUoJ3ZhbHVlJyk7XG4gICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnfSc6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ2JlZm9yZS1uYW1lJzpcbiAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgICAgLy8gSWYgdGhlIGJ1ZmZlciBjb250YWlucyBhbnl0aGluZywgaXQgaXMgYSB2YWx1ZVxuICAgICAgICBpZiAoYnVmZmVyKSB7XG4gICAgICAgICAgdG9rZW4udmFsdWUgPSBidWZmZXIudHJpbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgdG9rZW4gaGFzIGEgbmFtZSBhbmQgYSB2YWx1ZSBpdCBzaG91bGQgYmUgdG9rZW5pemVkLlxuICAgICAgICBpZiAodG9rZW4ubmFtZSAmJiB0b2tlbi52YWx1ZSkge1xuICAgICAgICAgIGFkZFRva2VuKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMZWF2ZSB0aGUgYmxvY2tcbiAgICAgICAgaW5pdGlhbGl6ZVRva2VuKCdlbmQnKTtcbiAgICAgICAgYWRkVG9rZW4oKTtcbiAgICAgICAgcG9wU3RhdGUoKTtcblxuICAgICAgICAvLyBXZSBtaWdodCBuZWVkIHRvIGxlYXZlIGFnYWluLlxuICAgICAgICAvLyBYWFg6IFdoYXQgYWJvdXQgMyBsZXZlbHMgZGVlcD9cbiAgICAgICAgaWYgKCdhdC1ncm91cCcgPT09IGdldFN0YXRlKCkpIHtcbiAgICAgICAgICBpbml0aWFsaXplVG9rZW4oJ2F0LWdyb3VwLWVuZCcpO1xuICAgICAgICAgIGFkZFRva2VuKCk7XG4gICAgICAgICAgcG9wU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlcHRoID4gMCkge1xuICAgICAgICAgIGRlcHRoID0gZGVwdGggLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2F0LWdyb3VwJzpcbiAgICAgIGNhc2UgJ2JlZm9yZS1zZWxlY3Rvcic6XG4gICAgICBjYXNlICdzZWxlY3Rvcic6XG4gICAgICAgIC8vIElmIHRoZSBzZXF1ZW5jZSBpcyBgXFx9YCB0aGVuIGFzc3VtZSB0aGF0IHRoZSBicmFjZSBzaG91bGQgYmUgZXNjYXBlZC5cbiAgICAgICAgaWYgKHBlZWsoLTEpID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlcHRoID4gMCkge1xuICAgICAgICAgIC8vIExlYXZlIGJsb2NrIGlmIGluIGFuIGF0LWdyb3VwXG4gICAgICAgICAgaWYgKCdhdC1ncm91cCcgPT09IGdldFN0YXRlKDEpKSB7XG4gICAgICAgICAgICBpbml0aWFsaXplVG9rZW4oJ2F0LWdyb3VwLWVuZCcpO1xuICAgICAgICAgICAgYWRkVG9rZW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVwdGggPiAxKSB7XG4gICAgICAgICAgcG9wU3RhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZXB0aCA+IDApIHtcbiAgICAgICAgICBkZXB0aCA9IGRlcHRoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnZG91YmxlLXN0cmluZyc6XG4gICAgICBjYXNlICdzaW5nbGUtc3RyaW5nJzpcbiAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAvLyBJZ25vcmUgYnJhY2VzIGluIGNvbW1lbnRzIGFuZCBzdHJpbmdzLlxuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIC8vIFN0cmluZ3NcbiAgICBjYXNlICdcIic6XG4gICAgY2FzZSBcIidcIjpcbiAgICAgIHN3aXRjaCAoZ2V0U3RhdGUoKSkge1xuICAgICAgY2FzZSAnZG91YmxlLXN0cmluZyc6XG4gICAgICAgIGlmICgnXCInID09PSBjaCAmJiAnXFxcXCcgIT09IHBlZWsoLTEpKSB7XG4gICAgICAgICAgcG9wU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnc2luZ2xlLXN0cmluZyc6XG4gICAgICAgIGlmIChcIidcIiA9PT0gY2ggJiYgJ1xcXFwnICE9PSBwZWVrKC0xKSkge1xuICAgICAgICAgIHBvcFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2JlZm9yZS1hdC12YWx1ZSc6XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgnYXQtdmFsdWUnKTtcbiAgICAgICAgcHVzaFN0YXRlKCdcIicgPT09IGNoID8gJ2RvdWJsZS1zdHJpbmcnIDogJ3NpbmdsZS1zdHJpbmcnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2JlZm9yZS12YWx1ZSc6XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgndmFsdWUnKTtcbiAgICAgICAgcHVzaFN0YXRlKCdcIicgPT09IGNoID8gJ2RvdWJsZS1zdHJpbmcnIDogJ3NpbmdsZS1zdHJpbmcnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAvLyBJZ25vcmUgc3RyaW5ncyB3aXRoaW4gY29tbWVudHMuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoJ1xcXFwnICE9PSBwZWVrKC0xKSkge1xuICAgICAgICAgIHB1c2hTdGF0ZSgnXCInID09PSBjaCA/ICdkb3VibGUtc3RyaW5nJyA6ICdzaW5nbGUtc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgYnJlYWs7XG5cbiAgICAvLyBDb21tZW50c1xuICAgIGNhc2UgJy8nOlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICdjb21tZW50JzpcbiAgICAgIGNhc2UgJ2RvdWJsZS1zdHJpbmcnOlxuICAgICAgY2FzZSAnc2luZ2xlLXN0cmluZyc6XG4gICAgICAgIC8vIElnbm9yZVxuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdiZWZvcmUtdmFsdWUnOlxuICAgICAgY2FzZSAnc2VsZWN0b3InOlxuICAgICAgY2FzZSAnbmFtZSc6XG4gICAgICBjYXNlICd2YWx1ZSc6XG4gICAgICAgIGlmIChpc05leHRDaGFyKCcqJykpIHtcbiAgICAgICAgICAvLyBJZ25vcmUgY29tbWVudHMgaW4gc2VsZWN0b3JzLCBwcm9wZXJ0aWVzIGFuZCB2YWx1ZXMuIFRoZXkgYXJlXG4gICAgICAgICAgLy8gZGlmZmljdWx0IHRvIHJlcHJlc2VudCBpbiB0aGUgQVNULlxuICAgICAgICAgIHZhciBwb3MgPSBmaW5kKCcqLycpO1xuXG4gICAgICAgICAgaWYgKHBvcykge1xuICAgICAgICAgICAgc2tpcChwb3MgKyAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGdldFN0YXRlKCkgPT0gJ2JlZm9yZS12YWx1ZScpIHJlcGxhY2VTdGF0ZSgndmFsdWUnKTtcbiAgICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChpc05leHRDaGFyKCcqJykpIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBjb21tZW50IHRva2VuXG4gICAgICAgICAgaW5pdGlhbGl6ZVRva2VuKCdjb21tZW50Jyk7XG4gICAgICAgICAgcHVzaFN0YXRlKCdjb21tZW50Jyk7XG4gICAgICAgICAgc2tpcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gQ29tbWVudCBlbmQgb3IgdW5pdmVyc2FsIHNlbGVjdG9yXG4gICAgY2FzZSAnKic6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICBpZiAoaXNOZXh0Q2hhcignLycpKSB7XG4gICAgICAgICAgLy8gVG9rZW5pemUgYSBjb21tZW50XG4gICAgICAgICAgdG9rZW4udGV4dCA9IGJ1ZmZlcjsgLy8gRG9uJ3QgdHJpbSgpIVxuICAgICAgICAgIHNraXAoKTtcbiAgICAgICAgICBhZGRUb2tlbigpO1xuICAgICAgICAgIHBvcFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdiZWZvcmUtc2VsZWN0b3InOlxuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGluaXRpYWxpemVUb2tlbignc2VsZWN0b3InKTtcbiAgICAgICAgcHVzaFN0YXRlKCdzZWxlY3RvcicpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgICAgcmVwbGFjZVN0YXRlKCd2YWx1ZScpO1xuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIC8vIEAtcnVsZXNcbiAgICBjYXNlICdAJzpcbiAgICAgIHN3aXRjaCAoZ2V0U3RhdGUoKSkge1xuICAgICAgY2FzZSAnY29tbWVudCc6XG4gICAgICBjYXNlICdkb3VibGUtc3RyaW5nJzpcbiAgICAgIGNhc2UgJ3NpbmdsZS1zdHJpbmcnOlxuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgICAgcmVwbGFjZVN0YXRlKCd2YWx1ZScpO1xuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIHN1cHBvcnRlZCBALXJ1bGVzIGFuZCBhdHRlbXB0IHRvIHRva2VuaXplIG9uZS5cbiAgICAgICAgdmFyIHRva2VuaXplZCA9IGZhbHNlO1xuICAgICAgICB2YXIgbmFtZTtcbiAgICAgICAgdmFyIHJ1bGU7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IGF0UnVsZXMubGVuZ3RoOyAhdG9rZW5pemVkICYmIGogPCBsZW47ICsraikge1xuICAgICAgICAgIHJ1bGUgPSBhdFJ1bGVzW2pdO1xuICAgICAgICAgIG5hbWUgPSBydWxlLm5hbWUgfHwgcnVsZTtcblxuICAgICAgICAgIGlmICghaXNOZXh0U3RyaW5nKG5hbWUpKSB7IGNvbnRpbnVlOyB9XG5cbiAgICAgICAgICB0b2tlbml6ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgaW5pdGlhbGl6ZVRva2VuKG5hbWUpO1xuICAgICAgICAgIHB1c2hTdGF0ZShydWxlLnN0YXRlIHx8ICdhdC1ncm91cCcpO1xuICAgICAgICAgIHNraXAobmFtZS5sZW5ndGgpO1xuXG4gICAgICAgICAgaWYgKHJ1bGUucHJlZml4KSB7XG4gICAgICAgICAgICB0b2tlbi5wcmVmaXggPSBydWxlLnByZWZpeDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocnVsZS50eXBlKSB7XG4gICAgICAgICAgICB0b2tlbi50eXBlID0gcnVsZS50eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdG9rZW5pemVkKSB7XG4gICAgICAgICAgLy8gS2VlcCBvbiB0cnVja2luJyBBbWVyaWNhIVxuICAgICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gUGFyZW50aGVzZXMgYXJlIHRyYWNrZWQgdG8gZGlzYW1iaWd1YXRlIHNlbWktY29sb25zLCBzdWNoIGFzIHdpdGhpbiBhXG4gICAgLy8gZGF0YSBVUkkuXG4gICAgY2FzZSAnKCc6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgICAgcHVzaFN0YXRlKCd2YWx1ZS1wYXJlbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2JlZm9yZS12YWx1ZSc6XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgndmFsdWUnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnKSc6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ3ZhbHVlLXBhcmVuJzpcbiAgICAgICAgcG9wU3RhdGUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdiZWZvcmUtdmFsdWUnOlxuICAgICAgICByZXBsYWNlU3RhdGUoJ3ZhbHVlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBidWZmZXIgKz0gY2g7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ2JlZm9yZS1zZWxlY3Rvcic6XG4gICAgICAgIGluaXRpYWxpemVUb2tlbignc2VsZWN0b3InKTtcbiAgICAgICAgcHVzaFN0YXRlKCdzZWxlY3RvcicpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLW5hbWUnOlxuICAgICAgICBpbml0aWFsaXplVG9rZW4oJ3Byb3BlcnR5Jyk7XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgnbmFtZScpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgICAgcmVwbGFjZVN0YXRlKCd2YWx1ZScpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLWF0LXZhbHVlJzpcbiAgICAgICAgcmVwbGFjZVN0YXRlKCdhdC12YWx1ZScpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgVElNRVIgJiYgZGVidWcoJ3JhbiBpbicsIChEYXRlLm5vdygpIC0gc3RhcnQpICsgJ21zJyk7XG5cbiAgcmV0dXJuIHRva2Vucztcbn1cbiIsInZhciBERUJVRyA9IGZhbHNlOyAvLyBgdHJ1ZWAgdG8gcHJpbnQgZGVidWdnaW5nIGluZm8uXG52YXIgVElNRVIgPSBmYWxzZTsgLy8gYHRydWVgIHRvIHRpbWUgY2FsbHMgdG8gYHBhcnNlKClgIGFuZCBwcmludCB0aGUgcmVzdWx0cy5cblxudmFyIGRlYnVnID0gcmVxdWlyZSgnLi9kZWJ1ZycpKCdwYXJzZScpO1xudmFyIGxleCA9IHJlcXVpcmUoJy4vbGV4ZXInKTtcblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcGFyc2U7XG5cbnZhciBfY29tbWVudHM7ICAgLy8gV2hldGhlciBjb21tZW50cyBhcmUgYWxsb3dlZC5cbnZhciBfZGVwdGg7ICAgICAgLy8gQ3VycmVudCBibG9jayBuZXN0aW5nIGRlcHRoLlxudmFyIF9wb3NpdGlvbjsgICAvLyBXaGV0aGVyIHRvIGluY2x1ZGUgbGluZS9jb2x1bW4gcG9zaXRpb24uXG52YXIgX3Rva2VuczsgICAgIC8vIEFycmF5IG9mIGxleGljYWwgdG9rZW5zLlxuXG4vKipcbiAqIENvbnZlcnQgYSBDU1Mgc3RyaW5nIG9yIGFycmF5IG9mIGxleGljYWwgdG9rZW5zIGludG8gYSBgc3RyaW5naWZ5YC1hYmxlIEFTVC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY3NzIENTUyBzdHJpbmcgb3IgYXJyYXkgb2YgbGV4aWNhbCB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21tZW50cz1mYWxzZV0gYWxsb3cgY29tbWVudCBub2RlcyBpbiB0aGUgQVNUXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBgc3RyaW5naWZ5YC1hYmxlIEFTVFxuICovXG5mdW5jdGlvbiBwYXJzZShjc3MsIG9wdGlvbnMpIHtcbiAgdmFyIHN0YXJ0OyAvLyBEZWJ1ZyB0aW1lciBzdGFydC5cblxuICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICBfY29tbWVudHMgPSAhIW9wdGlvbnMuY29tbWVudHM7XG4gIF9wb3NpdGlvbiA9ICEhb3B0aW9ucy5wb3NpdGlvbjtcblxuICBfZGVwdGggPSAwO1xuXG4gIC8vIE9wZXJhdGUgb24gYSBjb3B5IG9mIHRoZSBnaXZlbiB0b2tlbnMsIG9yIHRoZSBsZXgoKSdkIENTUyBzdHJpbmcuXG4gIF90b2tlbnMgPSBBcnJheS5pc0FycmF5KGNzcykgPyBjc3Muc2xpY2UoKSA6IGxleChjc3MpO1xuXG4gIHZhciBydWxlO1xuICB2YXIgcnVsZXMgPSBbXTtcbiAgdmFyIHRva2VuO1xuXG4gIFRJTUVSICYmIChzdGFydCA9IERhdGUubm93KCkpO1xuXG4gIHdoaWxlICgodG9rZW4gPSBuZXh0KCkpKSB7XG4gICAgcnVsZSA9IHBhcnNlVG9rZW4odG9rZW4pO1xuICAgIHJ1bGUgJiYgcnVsZXMucHVzaChydWxlKTtcbiAgfVxuXG4gIFRJTUVSICYmIGRlYnVnKCdyYW4gaW4nLCAoRGF0ZS5ub3coKSAtIHN0YXJ0KSArICdtcycpO1xuXG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJzdHlsZXNoZWV0XCIsXG4gICAgc3R5bGVzaGVldDoge1xuICAgICAgcnVsZXM6IHJ1bGVzXG4gICAgfVxuICB9O1xufVxuXG4vLyAtLSBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBCdWlsZCBhbiBBU1Qgbm9kZSBmcm9tIGEgbGV4aWNhbCB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW4gbGV4aWNhbCB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IFtvdmVycmlkZV0gb2JqZWN0IGhhc2ggb2YgcHJvcGVydGllcyB0aGF0IG92ZXJyaWRlIHRob3NlXG4gKiAgIGFscmVhZHkgaW4gdGhlIHRva2VuLCBvciB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIHRva2VuLlxuICogQHJldHVybnMge09iamVjdH0gQVNUIG5vZGVcbiAqL1xuZnVuY3Rpb24gYXN0Tm9kZSh0b2tlbiwgb3ZlcnJpZGUpIHtcbiAgb3ZlcnJpZGUgfHwgKG92ZXJyaWRlID0ge30pO1xuXG4gIHZhciBrZXk7XG4gIHZhciBrZXlzID0gWyd0eXBlJywgJ25hbWUnLCAndmFsdWUnXTtcbiAgdmFyIG5vZGUgPSB7fTtcblxuICAvLyBBdm9pZGluZyBbXS5mb3JFYWNoIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICBrZXkgPSBrZXlzW2ldO1xuXG4gICAgaWYgKHRva2VuW2tleV0pIHtcbiAgICAgIG5vZGVba2V5XSA9IG92ZXJyaWRlW2tleV0gfHwgdG9rZW5ba2V5XTtcbiAgICB9XG4gIH1cblxuICBrZXlzID0gT2JqZWN0LmtleXMob3ZlcnJpZGUpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAga2V5ID0ga2V5c1tpXTtcblxuICAgIGlmICghbm9kZVtrZXldKSB7XG4gICAgICBub2RlW2tleV0gPSBvdmVycmlkZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIGlmIChfcG9zaXRpb24pIHtcbiAgICBub2RlLnBvc2l0aW9uID0ge1xuICAgICAgc3RhcnQ6IHRva2VuLnN0YXJ0LFxuICAgICAgZW5kOiB0b2tlbi5lbmRcbiAgICB9O1xuICB9XG5cbiAgREVCVUcgJiYgZGVidWcoJ2FzdE5vZGU6JywgSlNPTi5zdHJpbmdpZnkobm9kZSwgbnVsbCwgMikpO1xuXG4gIHJldHVybiBub2RlO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhIGxleGljYWwgdG9rZW4gZnJvbSB0aGUgc3RhY2sgYW5kIHJldHVybiB0aGUgcmVtb3ZlZCB0b2tlbi5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBsZXhpY2FsIHRva2VuXG4gKi9cbmZ1bmN0aW9uIG5leHQoKSB7XG4gIHZhciB0b2tlbiA9IF90b2tlbnMuc2hpZnQoKTtcbiAgREVCVUcgJiYgZGVidWcoJ25leHQ6JywgSlNPTi5zdHJpbmdpZnkodG9rZW4sIG51bGwsIDIpKTtcbiAgcmV0dXJuIHRva2VuO1xufVxuXG4vLyAtLSBQYXJzZSogRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIENvbnZlcnQgYW4gQC1ncm91cCBsZXhpY2FsIHRva2VuIHRvIGFuIEFTVCBub2RlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlbiBALWdyb3VwIGxleGljYWwgdG9rZW5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEAtZ3JvdXAgQVNUIG5vZGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VBdEdyb3VwKHRva2VuKSB7XG4gIF9kZXB0aCA9IF9kZXB0aCArIDE7XG5cbiAgLy8gQXMgdGhlIEAtZ3JvdXAgdG9rZW4gaXMgYXNzZW1ibGVkLCByZWxldmFudCB0b2tlbiB2YWx1ZXMgYXJlIGNhcHR1cmVkIGhlcmVcbiAgLy8gdGVtcG9yYXJpbHkuIFRoZXkgd2lsbCBsYXRlciBiZSB1c2VkIGFzIGB0b2tlbml6ZSgpYCBvdmVycmlkZXMuXG4gIHZhciBvdmVycmlkZXMgPSB7fTtcblxuICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgY2FzZSAnZm9udC1mYWNlJzpcbiAgY2FzZSAndmlld3BvcnQnIDpcbiAgICBvdmVycmlkZXMuZGVjbGFyYXRpb25zID0gcGFyc2VEZWNsYXJhdGlvbnMoKTtcbiAgICBicmVhaztcblxuICBjYXNlICdwYWdlJzpcbiAgICBvdmVycmlkZXMucHJlZml4ID0gdG9rZW4ucHJlZml4O1xuICAgIG92ZXJyaWRlcy5kZWNsYXJhdGlvbnMgPSBwYXJzZURlY2xhcmF0aW9ucygpO1xuICAgIGJyZWFrO1xuXG4gIGRlZmF1bHQ6XG4gICAgb3ZlcnJpZGVzLnByZWZpeCA9IHRva2VuLnByZWZpeDtcbiAgICBvdmVycmlkZXMucnVsZXMgPSBwYXJzZVJ1bGVzKCk7XG4gIH1cblxuICByZXR1cm4gYXN0Tm9kZSh0b2tlbiwgb3ZlcnJpZGVzKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIEBpbXBvcnQgbGV4aWNhbCB0b2tlbiB0byBhbiBBU1Qgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW4gQGltcG9ydCBsZXhpY2FsIHRva2VuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBAaW1wb3J0IEFTVCBub2RlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQXRJbXBvcnQodG9rZW4pIHtcbiAgcmV0dXJuIGFzdE5vZGUodG9rZW4pO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYW4gQGNoYXJzZXQgdG9rZW4gdG8gYW4gQVNUIG5vZGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuIEBjaGFyc2V0IGxleGljYWwgdG9rZW5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEBjaGFyc2V0IG5vZGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VDaGFyc2V0KHRva2VuKSB7XG4gIHJldHVybiBhc3ROb2RlKHRva2VuKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgY29tbWVudCB0b2tlbiB0byBhbiBBU1QgTm9kZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW4gY29tbWVudCBsZXhpY2FsIHRva2VuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBjb21tZW50IG5vZGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VDb21tZW50KHRva2VuKSB7XG4gIHJldHVybiBhc3ROb2RlKHRva2VuLCB7dGV4dDogdG9rZW4udGV4dH0pO1xufVxuXG5mdW5jdGlvbiBwYXJzZU5hbWVzcGFjZSh0b2tlbikge1xuICByZXR1cm4gYXN0Tm9kZSh0b2tlbik7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHByb3BlcnR5IGxleGljYWwgdG9rZW4gdG8gYSBwcm9wZXJ0eSBBU1Qgbm9kZS5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBwcm9wZXJ0eSBub2RlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlUHJvcGVydHkodG9rZW4pIHtcbiAgcmV0dXJuIGFzdE5vZGUodG9rZW4pO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBzZWxlY3RvciBsZXhpY2FsIHRva2VuIHRvIGEgc2VsZWN0b3IgQVNUIG5vZGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuIHNlbGVjdG9yIGxleGljYWwgdG9rZW5cbiAqIEByZXR1cm5zIHtPYmplY3R9IHNlbGVjdG9yIG5vZGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VTZWxlY3Rvcih0b2tlbikge1xuICBmdW5jdGlvbiB0cmltKHN0cikge1xuICAgIHJldHVybiBzdHIudHJpbSgpO1xuICB9XG5cbiAgcmV0dXJuIGFzdE5vZGUodG9rZW4sIHtcbiAgICB0eXBlOiAncnVsZScsXG4gICAgc2VsZWN0b3JzOiB0b2tlbi50ZXh0LnNwbGl0KCcsJykubWFwKHRyaW0pLFxuICAgIGRlY2xhcmF0aW9uczogcGFyc2VEZWNsYXJhdGlvbnModG9rZW4pXG4gIH0pO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBsZXhpY2FsIHRva2VuIHRvIGFuIEFTVCBub2RlLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R8dW5kZWZpbmVkfSBBU1Qgbm9kZVxuICovXG5mdW5jdGlvbiBwYXJzZVRva2VuKHRva2VuKSB7XG4gIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAvLyBDYXNlcyBhcmUgbGlzdGVkIGluIHJvdWdobHkgZGVzY2VuZGluZyBvcmRlciBvZiBwcm9iYWJpbGl0eS5cbiAgY2FzZSAncHJvcGVydHknOiByZXR1cm4gcGFyc2VQcm9wZXJ0eSh0b2tlbik7XG5cbiAgY2FzZSAnc2VsZWN0b3InOiByZXR1cm4gcGFyc2VTZWxlY3Rvcih0b2tlbik7XG5cbiAgY2FzZSAnYXQtZ3JvdXAtZW5kJzogX2RlcHRoID0gX2RlcHRoIC0gMTsgcmV0dXJuO1xuXG4gIGNhc2UgJ21lZGlhJyAgICAgOlxuICBjYXNlICdrZXlmcmFtZXMnIDpyZXR1cm4gcGFyc2VBdEdyb3VwKHRva2VuKTtcblxuICBjYXNlICdjb21tZW50JzogaWYgKF9jb21tZW50cykgeyByZXR1cm4gcGFyc2VDb21tZW50KHRva2VuKTsgfSBicmVhaztcblxuICBjYXNlICdjaGFyc2V0JzogcmV0dXJuIHBhcnNlQ2hhcnNldCh0b2tlbik7XG4gIGNhc2UgJ2ltcG9ydCc6IHJldHVybiBwYXJzZUF0SW1wb3J0KHRva2VuKTtcblxuICBjYXNlICduYW1lc3BhY2UnOiByZXR1cm4gcGFyc2VOYW1lc3BhY2UodG9rZW4pO1xuXG4gIGNhc2UgJ2ZvbnQtZmFjZSc6XG4gIGNhc2UgJ3N1cHBvcnRzJyA6XG4gIGNhc2UgJ3ZpZXdwb3J0JyA6XG4gIGNhc2UgJ2RvY3VtZW50JyA6XG4gIGNhc2UgJ3BhZ2UnICAgICA6IHJldHVybiBwYXJzZUF0R3JvdXAodG9rZW4pO1xuICB9XG5cbiAgREVCVUcgJiYgZGVidWcoJ3BhcnNlVG9rZW46IHVuZXhwZWN0ZWQgdG9rZW46JywgSlNPTi5zdHJpbmdpZnkodG9rZW4pKTtcbn1cblxuLy8gLS0gUGFyc2UgSGVscGVyIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBJdGVyYXRpdmVseSBwYXJzZXMgbGV4aWNhbCB0b2tlbnMgZnJvbSB0aGUgc3RhY2sgaW50byBBU1Qgbm9kZXMgdW50aWwgYVxuICogY29uZGl0aW9uYWwgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLCBhdCB3aGljaCBwb2ludCBpdGVyYXRpb24gdGVybWluYXRlc1xuICogYW5kIGFueSBBU1Qgbm9kZXMgY29sbGVjdGVkIGFyZSByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb25GblxuICogICBAcGFyYW0ge09iamVjdH0gdG9rZW4gdGhlIGxleGljYWwgdG9rZW4gYmVpbmcgcGFyc2VkXG4gKiAgIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIHRva2VuIHNob3VsZCBiZSBwYXJzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gKiBAcmV0dXJuIHtBcnJheX0gQVNUIG5vZGVzXG4gKi9cbmZ1bmN0aW9uIHBhcnNlVG9rZW5zV2hpbGUoY29uZGl0aW9uRm4pIHtcbiAgdmFyIG5vZGU7XG4gIHZhciBub2RlcyA9IFtdO1xuICB2YXIgdG9rZW47XG5cbiAgd2hpbGUgKCh0b2tlbiA9IG5leHQoKSkgJiYgKGNvbmRpdGlvbkZuICYmIGNvbmRpdGlvbkZuKHRva2VuKSkpIHtcbiAgICBub2RlID0gcGFyc2VUb2tlbih0b2tlbik7XG4gICAgbm9kZSAmJiBub2Rlcy5wdXNoKG5vZGUpO1xuICB9XG5cbiAgLy8gUGxhY2UgYW4gdW51c2VkIG5vbi1gZW5kYCBsZXhpY2FsIHRva2VuIGJhY2sgb250byB0aGUgc3RhY2suXG4gIGlmICh0b2tlbiAmJiB0b2tlbi50eXBlICE9PSAnZW5kJykge1xuICAgIF90b2tlbnMudW5zaGlmdCh0b2tlbik7XG4gIH1cblxuICByZXR1cm4gbm9kZXM7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHNlcmllcyBvZiB0b2tlbnMgaW50byBhIHNlcXVlbmNlIG9mIGRlY2xhcmF0aW9uIEFTVCBub2Rlcy5cbiAqXG4gKiBAcmV0dXJucyB7QXJyYXl9IGRlY2xhcmF0aW9uIG5vZGVzXG4gKi9cbmZ1bmN0aW9uIHBhcnNlRGVjbGFyYXRpb25zKCkge1xuICByZXR1cm4gcGFyc2VUb2tlbnNXaGlsZShmdW5jdGlvbiAodG9rZW4pIHtcbiAgICByZXR1cm4gKHRva2VuLnR5cGUgPT09ICdwcm9wZXJ0eScgfHwgdG9rZW4udHlwZSA9PT0gJ2NvbW1lbnQnKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHNlcmllcyBvZiB0b2tlbnMgaW50byBhIHNlcXVlbmNlIG9mIHJ1bGUgbm9kZXMuXG4gKlxuICogQHJldHVybnMge0FycmF5fSBydWxlIG5vZGVzXG4gKi9cbmZ1bmN0aW9uIHBhcnNlUnVsZXMoKSB7XG4gIHJldHVybiBwYXJzZVRva2Vuc1doaWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9kZXB0aDsgfSk7XG59XG4iLCJ2YXIgREVCVUcgPSBmYWxzZTsgLy8gYHRydWVgIHRvIHByaW50IGRlYnVnZ2luZyBpbmZvLlxudmFyIFRJTUVSID0gZmFsc2U7IC8vIGB0cnVlYCB0byB0aW1lIGNhbGxzIHRvIGBzdHJpbmdpZnkoKWAgYW5kIHByaW50IHRoZSByZXN1bHRzLlxuXG52YXIgZGVidWcgPSByZXF1aXJlKCcuL2RlYnVnJykoJ3N0cmluZ2lmeScpO1xuXG52YXIgX2NvbW1lbnRzOyAgICAgIC8vIFdoZXRoZXIgY29tbWVudHMgYXJlIGFsbG93ZWQgaW4gdGhlIHN0cmluZ2lmaWVkIENTUy5cbnZhciBfY29tcHJlc3M7ICAgICAgLy8gV2hldGhlciB0aGUgc3RyaW5naWZpZWQgQ1NTIHNob3VsZCBiZSBjb21wcmVzc2VkLlxudmFyIF9pbmRlbnRhdGlvbjsgICAvLyBJbmRlbnRhdGlvbiBvcHRpb24gdmFsdWUuXG52YXIgX247ICAgICAgICAgICAgIC8vIENvbXByZXNzaW9uLWF3YXJlIG5ld2xpbmUgY2hhcmFjdGVyLlxudmFyIF9zOyAgICAgICAgICAgICAvLyBDb21wcmVzc2lvbi1hd2FyZSBzcGFjZSBjaGFyYWN0ZXIuXG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHN0cmluZ2lmeTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgYHN0cmluZ2lmeWAtYWJsZSBBU1QgaW50byBhIENTUyBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGBzdHJpbmdpZnlgLWFibGUgQVNUXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNvbW1lbnRzPWZhbHNlXSBhbGxvdyBjb21tZW50cyBpbiB0aGUgQ1NTXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNvbXByZXNzPWZhbHNlXSBjb21wcmVzcyB3aGl0ZXNwYWNlXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuaW5kZW50YXRpb249JyddIGluZGVudGF0aW9uIHNlcXVlbmNlXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBDU1NcbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5KGFzdCwgb3B0aW9ucykge1xuICB2YXIgc3RhcnQ7IC8vIERlYnVnIHRpbWVyIHN0YXJ0LlxuXG4gIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gIF9pbmRlbnRhdGlvbiA9IG9wdGlvbnMuaW5kZW50YXRpb24gfHwgJyc7XG4gIF9jb21wcmVzcyA9ICEhb3B0aW9ucy5jb21wcmVzcztcbiAgX2NvbW1lbnRzID0gISFvcHRpb25zLmNvbW1lbnRzO1xuXG4gIGlmIChfY29tcHJlc3MpIHtcbiAgICBfbiA9IF9zID0gJyc7XG4gIH0gZWxzZSB7XG4gICAgX24gPSAnXFxuJztcbiAgICBfcyA9ICcgJztcbiAgfVxuXG4gIFRJTUVSICYmIChzdGFydCA9IERhdGUubm93KCkpO1xuXG4gIHZhciBjc3MgPSByZWR1Y2UoYXN0LnN0eWxlc2hlZXQucnVsZXMsIHN0cmluZ2lmeU5vZGUpLmpvaW4oJ1xcbicpLnRyaW0oKTtcblxuICBUSU1FUiAmJiBkZWJ1ZygncmFuIGluJywgKERhdGUubm93KCkgLSBzdGFydCkgKyAnbXMnKTtcblxuICByZXR1cm4gY3NzO1xufVxuXG4vLyAtLSBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBNb2RpZnkgdGhlIGluZGVudGF0aW9uIGxldmVsLCBvciByZXR1cm4gYSBjb21wcmVzc2lvbi1hd2FyZSBzZXF1ZW5jZSBvZlxuICogc3BhY2VzIGVxdWFsIHRvIHRoZSBjdXJyZW50IGluZGVudGF0aW9uIGxldmVsLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbbGV2ZWw9dW5kZWZpbmVkXSBpbmRlbnRhdGlvbiBsZXZlbCBtb2RpZmllclxuICogQHJldHVybnMge1N0cmluZ30gc2VxdWVuY2Ugb2Ygc3BhY2VzXG4gKi9cbmZ1bmN0aW9uIGluZGVudChsZXZlbCkge1xuICB0aGlzLmxldmVsIHx8ICh0aGlzLmxldmVsID0gMSk7XG5cbiAgaWYgKGxldmVsKSB7XG4gICAgdGhpcy5sZXZlbCArPSBsZXZlbDtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoX2NvbXByZXNzKSB7IHJldHVybiAnJzsgfVxuXG4gIHJldHVybiBBcnJheSh0aGlzLmxldmVsKS5qb2luKF9pbmRlbnRhdGlvbiB8fCAnJyk7XG59XG5cbi8vIC0tIFN0cmluZ2lmeSBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogU3RyaW5naWZ5IGFuIEAtcnVsZSBBU1Qgbm9kZS5cbiAqXG4gKiBVc2UgYHN0cmluZ2lmeUF0R3JvdXAoKWAgd2hlbiBkZWFsaW5nIHdpdGggQC1ncm91cHMgdGhhdCBtYXkgY29udGFpbiBibG9ja3NcbiAqIHN1Y2ggYXMgQG1lZGlhLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIEAtcnVsZSB0eXBlLiBFLmcuLCBpbXBvcnQsIGNoYXJzZXRcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFN0cmluZ2lmaWVkIEAtcnVsZVxuICovXG5mdW5jdGlvbiBzdHJpbmdpZnlBdFJ1bGUobm9kZSkge1xuICByZXR1cm4gJ0AnICsgbm9kZS50eXBlICsgJyAnICsgbm9kZS52YWx1ZSArICc7JyArIF9uO1xufVxuXG4vKipcbiAqIFN0cmluZ2lmeSBhbiBALWdyb3VwIEFTVCBub2RlLlxuICpcbiAqIFVzZSBgc3RyaW5naWZ5QXRSdWxlKClgIHdoZW4gZGVhbGluZyB3aXRoIEAtcnVsZXMgdGhhdCBtYXkgbm90IGNvbnRhaW4gYmxvY2tzXG4gKiBzdWNoIGFzIEBpbXBvcnQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5vZGUgQC1ncm91cCBBU1Qgbm9kZVxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5QXRHcm91cChub2RlKSB7XG4gIHZhciBsYWJlbCA9ICcnO1xuICB2YXIgcHJlZml4ID0gbm9kZS5wcmVmaXggfHwgJyc7XG5cbiAgaWYgKG5vZGUubmFtZSkge1xuICAgIGxhYmVsID0gJyAnICsgbm9kZS5uYW1lO1xuICB9XG5cbiAgLy8gRklYTUU6IEAtcnVsZSBjb25kaXRpb25hbCBsb2dpYyBpcyBsZWFraW5nIGV2ZXJ5d2hlcmUuXG4gIHZhciBjaG9tcCA9IG5vZGUudHlwZSAhPT0gJ3BhZ2UnO1xuXG4gIHJldHVybiAnQCcgKyBwcmVmaXggKyBub2RlLnR5cGUgKyBsYWJlbCArIF9zICsgc3RyaW5naWZ5QmxvY2sobm9kZSwgY2hvbXApICsgX247XG59XG5cbi8qKlxuICogU3RyaW5naWZ5IGEgY29tbWVudCBBU1Qgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbm9kZSBjb21tZW50IEFTVCBub2RlXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBzdHJpbmdpZnlDb21tZW50KG5vZGUpIHtcbiAgaWYgKCFfY29tbWVudHMpIHsgcmV0dXJuICcnOyB9XG5cbiAgcmV0dXJuICcvKicgKyAobm9kZS50ZXh0IHx8ICcnKSArICcqLycgKyBfbjtcbn1cblxuLyoqXG4gKiBTdHJpbmdpZnkgYSBydWxlIEFTVCBub2RlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIHJ1bGUgQVNUIG5vZGVcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeVJ1bGUobm9kZSkge1xuICB2YXIgbGFiZWw7XG5cbiAgaWYgKG5vZGUuc2VsZWN0b3JzKSB7XG4gICAgbGFiZWwgPSBub2RlLnNlbGVjdG9ycy5qb2luKCcsJyArIF9uKTtcbiAgfSBlbHNlIHtcbiAgICBsYWJlbCA9ICdAJyArIG5vZGUudHlwZTtcbiAgICBsYWJlbCArPSBub2RlLm5hbWUgPyAnICcgKyBub2RlLm5hbWUgOiAnJztcbiAgfVxuXG4gIHJldHVybiBpbmRlbnQoKSArIGxhYmVsICsgX3MgKyBzdHJpbmdpZnlCbG9jayhub2RlKSArIF9uO1xufVxuXG5cbi8vIC0tIFN0cmluZ2lmeSBIZWxwZXIgRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogUmVkdWNlIGFuIGFycmF5IGJ5IGFwcGx5aW5nIGEgZnVuY3Rpb24gdG8gZWFjaCBpdGVtIGFuZCByZXRhaW5pbmcgdGhlIHRydXRoeVxuICogcmVzdWx0cy5cbiAqXG4gKiBXaGVuIGBpdGVtLnR5cGVgIGlzIGAnY29tbWVudCdgIGBzdHJpbmdpZnlDb21tZW50YCB3aWxsIGJlIGFwcGxpZWQgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBpdGVtcyBhcnJheSB0byByZWR1Y2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXlcbiAqICAgQHJldHVybnMge01peGVkfSBUcnV0aHkgdmFsdWVzIHdpbGwgYmUgcmV0YWluZWQsIGZhbHN5IHZhbHVlcyBvbWl0dGVkXG4gKiBAcmV0dXJucyB7QXJyYXl9IHJldGFpbmVkIHJlc3VsdHNcbiAqL1xuZnVuY3Rpb24gcmVkdWNlKGl0ZW1zLCBmbikge1xuICByZXR1cm4gaXRlbXMucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHRzLCBpdGVtKSB7XG4gICAgdmFyIHJlc3VsdCA9IChpdGVtLnR5cGUgPT09ICdjb21tZW50JykgPyBzdHJpbmdpZnlDb21tZW50KGl0ZW0pIDogZm4oaXRlbSk7XG4gICAgcmVzdWx0ICYmIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9LCBbXSk7XG59XG5cbi8qKlxuICogU3RyaW5naWZ5IGFuIEFTVCBub2RlIHdpdGggdGhlIGFzc3VtcHRpb24gdGhhdCBpdCByZXByZXNlbnRzIGEgYmxvY2sgb2ZcbiAqIGRlY2xhcmF0aW9ucyBvciBvdGhlciBALWdyb3VwIGNvbnRlbnRzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIEFTVCBub2RlXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG4vLyBGSVhNRTogY2hvbXAgc2hvdWxkIG5vdCBiZSBhIG1hZ2ljIGJvb2xlYW4gcGFyYW1ldGVyXG5mdW5jdGlvbiBzdHJpbmdpZnlCbG9jayhub2RlLCBjaG9tcCkge1xuICB2YXIgY2hpbGRyZW4gPSBub2RlLmRlY2xhcmF0aW9ucztcbiAgdmFyIGZuID0gc3RyaW5naWZ5RGVjbGFyYXRpb247XG5cbiAgaWYgKG5vZGUucnVsZXMpIHtcbiAgICBjaGlsZHJlbiA9IG5vZGUucnVsZXM7XG4gICAgZm4gPSBzdHJpbmdpZnlSdWxlO1xuICB9XG5cbiAgY2hpbGRyZW4gPSBzdHJpbmdpZnlDaGlsZHJlbihjaGlsZHJlbiwgZm4pO1xuICBjaGlsZHJlbiAmJiAoY2hpbGRyZW4gPSBfbiArIGNoaWxkcmVuICsgKGNob21wID8gJycgOiBfbikpO1xuXG4gIHJldHVybiAneycgKyBjaGlsZHJlbiArIGluZGVudCgpICsgJ30nO1xufVxuXG4vKipcbiAqIFN0cmluZ2lmeSBhbiBhcnJheSBvZiBjaGlsZCBBU1Qgbm9kZXMgYnkgY2FsbGluZyB0aGUgZ2l2ZW4gc3RyaW5naWZ5IGZ1bmN0aW9uXG4gKiBvbmNlIGZvciBlYWNoIGNoaWxkLCBhbmQgY29uY2F0ZW5hdGluZyB0aGUgcmVzdWx0cy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBjaGlsZHJlbiBgbm9kZS5ydWxlc2Agb3IgYG5vZGUuZGVjbGFyYXRpb25zYFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gc3RyaW5naWZ5IGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBzdHJpbmdpZnlDaGlsZHJlbihjaGlsZHJlbiwgZm4pIHtcbiAgaWYgKCFjaGlsZHJlbikgeyByZXR1cm4gJyc7IH1cblxuICBpbmRlbnQoMSk7XG4gIHZhciByZXN1bHRzID0gcmVkdWNlKGNoaWxkcmVuLCBmbik7XG4gIGluZGVudCgtMSk7XG5cbiAgaWYgKCFyZXN1bHRzLmxlbmd0aCkgeyByZXR1cm4gJyc7IH1cblxuICByZXR1cm4gcmVzdWx0cy5qb2luKF9uKTtcbn1cblxuLyoqXG4gKiBTdHJpbmdpZnkgYSBkZWNsYXJhdGlvbiBBU1Qgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbm9kZSBkZWNsYXJhdGlvbiBBU1Qgbm9kZVxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5RGVjbGFyYXRpb24obm9kZSkge1xuICBpZiAobm9kZS50eXBlID09PSAncHJvcGVydHknKSB7XG4gICAgcmV0dXJuIHN0cmluZ2lmeVByb3BlcnR5KG5vZGUpO1xuICB9XG5cbiAgREVCVUcgJiYgZGVidWcoJ3N0cmluZ2lmeURlY2xhcmF0aW9uOiB1bmV4cGVjdGVkIG5vZGU6JywgSlNPTi5zdHJpbmdpZnkobm9kZSkpO1xufVxuXG4vKipcbiAqIFN0cmluZ2lmeSBhbiBBU1Qgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbm9kZSBBU1Qgbm9kZVxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5Tm9kZShub2RlKSB7XG4gIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gIC8vIENhc2VzIGFyZSBsaXN0ZWQgaW4gcm91Z2hseSBkZXNjZW5kaW5nIG9yZGVyIG9mIHByb2JhYmlsaXR5LlxuICBjYXNlICdydWxlJzogcmV0dXJuIHN0cmluZ2lmeVJ1bGUobm9kZSk7XG5cbiAgY2FzZSAnbWVkaWEnICAgIDpcbiAgY2FzZSAna2V5ZnJhbWVzJzogcmV0dXJuIHN0cmluZ2lmeUF0R3JvdXAobm9kZSk7XG5cbiAgY2FzZSAnY29tbWVudCc6IHJldHVybiBzdHJpbmdpZnlDb21tZW50KG5vZGUpO1xuXG4gIGNhc2UgJ2ltcG9ydCcgICA6XG4gIGNhc2UgJ2NoYXJzZXQnICA6XG4gIGNhc2UgJ25hbWVzcGFjZSc6IHJldHVybiBzdHJpbmdpZnlBdFJ1bGUobm9kZSk7XG5cbiAgY2FzZSAnZm9udC1mYWNlJzpcbiAgY2FzZSAnc3VwcG9ydHMnIDpcbiAgY2FzZSAndmlld3BvcnQnIDpcbiAgY2FzZSAnZG9jdW1lbnQnIDpcbiAgY2FzZSAncGFnZScgICAgIDogcmV0dXJuIHN0cmluZ2lmeUF0R3JvdXAobm9kZSk7XG4gIH1cblxuICBERUJVRyAmJiBkZWJ1Zygnc3RyaW5naWZ5Tm9kZTogdW5leHBlY3RlZCBub2RlOiAnICsgSlNPTi5zdHJpbmdpZnkobm9kZSkpO1xufVxuXG4vKipcbiAqIFN0cmluZ2lmeSBhbiBBU1QgcHJvcGVydHkgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbm9kZSBBU1QgcHJvcGVydHkgbm9kZVxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5UHJvcGVydHkobm9kZSkge1xuICB2YXIgbmFtZSA9IG5vZGUubmFtZSA/IG5vZGUubmFtZSArICc6JyArIF9zIDogJyc7XG5cbiAgcmV0dXJuIGluZGVudCgpICsgbmFtZSArIG5vZGUudmFsdWUgKyAnOyc7XG59XG4iLCIvKlxuU2xpY2sgUGFyc2VyXG4gLSBvcmlnaW5hbGx5IGNyZWF0ZWQgYnkgdGhlIGFsbWlnaHR5IFRob21hcyBBeWxvdHQgPEBzdWJ0bGVncmFkaWVudD4gKGh0dHA6Ly9zdWJ0bGVncmFkaWVudC5jb20pXG4qL1widXNlIHN0cmljdFwiXG5cbi8vIE5vdGFibGUgY2hhbmdlcyBmcm9tIFNsaWNrLlBhcnNlciAxLjAueFxuXG4vLyBUaGUgcGFyc2VyIG5vdyB1c2VzIDIgY2xhc3NlczogRXhwcmVzc2lvbnMgYW5kIEV4cHJlc3Npb25cbi8vIGBuZXcgRXhwcmVzc2lvbnNgIHByb2R1Y2VzIGFuIGFycmF5LWxpa2Ugb2JqZWN0IGNvbnRhaW5pbmcgYSBsaXN0IG9mIEV4cHJlc3Npb24gb2JqZWN0c1xuLy8gLSBFeHByZXNzaW9uczo6dG9TdHJpbmcoKSBwcm9kdWNlcyBhIGNsZWFuZWQgdXAgZXhwcmVzc2lvbnMgc3RyaW5nXG4vLyBgbmV3IEV4cHJlc3Npb25gIHByb2R1Y2VzIGFuIGFycmF5LWxpa2Ugb2JqZWN0XG4vLyAtIEV4cHJlc3Npb246OnRvU3RyaW5nKCkgcHJvZHVjZXMgYSBjbGVhbmVkIHVwIGV4cHJlc3Npb24gc3RyaW5nXG4vLyBUaGUgb25seSBleHBvc2VkIG1ldGhvZCBpcyBwYXJzZSwgd2hpY2ggcHJvZHVjZXMgYSAoY2FjaGVkKSBgbmV3IEV4cHJlc3Npb25zYCBpbnN0YW5jZVxuLy8gcGFyc2VkLnJhdyBpcyBubyBsb25nZXIgcHJlc2VudCwgdXNlIC50b1N0cmluZygpXG4vLyBwYXJzZWQuZXhwcmVzc2lvbiBpcyBub3cgdXNlbGVzcywganVzdCB1c2UgdGhlIGluZGljZXNcbi8vIHBhcnNlZC5yZXZlcnNlKCkgaGFzIGJlZW4gcmVtb3ZlZCBmb3Igbm93LCBkdWUgdG8gaXRzIGFwcGFyZW50IHVzZWxlc3NuZXNzXG4vLyBPdGhlciBjaGFuZ2VzIGluIHRoZSBFeHByZXNzaW9ucyBvYmplY3Q6XG4vLyAtIGNsYXNzTmFtZXMgYXJlIG5vdyB1bmlxdWUsIGFuZCBzYXZlIGJvdGggZXNjYXBlZCBhbmQgdW5lc2NhcGVkIHZhbHVlc1xuLy8gLSBhdHRyaWJ1dGVzIG5vdyBzYXZlIGJvdGggZXNjYXBlZCBhbmQgdW5lc2NhcGVkIHZhbHVlc1xuLy8gLSBwc2V1ZG9zIG5vdyBzYXZlIGJvdGggZXNjYXBlZCBhbmQgdW5lc2NhcGVkIHZhbHVlc1xuXG52YXIgZXNjYXBlUmUgICA9IC8oWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXSkvZyxcbiAgICB1bmVzY2FwZVJlID0gL1xcXFwvZ1xuXG52YXIgZXNjYXBlID0gZnVuY3Rpb24oc3RyaW5nKXtcbiAgICAvLyBYUmVnRXhwIHYyLjAuMC1iZXRhLTNcbiAgICAvLyDCqyBodHRwczovL2dpdGh1Yi5jb20vc2xldml0aGFuL1hSZWdFeHAvYmxvYi9tYXN0ZXIvc3JjL3hyZWdleHAuanNcbiAgICByZXR1cm4gKHN0cmluZyArIFwiXCIpLnJlcGxhY2UoZXNjYXBlUmUsICdcXFxcJDEnKVxufVxuXG52YXIgdW5lc2NhcGUgPSBmdW5jdGlvbihzdHJpbmcpe1xuICAgIHJldHVybiAoc3RyaW5nICsgXCJcIikucmVwbGFjZSh1bmVzY2FwZVJlLCAnJylcbn1cblxudmFyIHNsaWNrUmUgPSBSZWdFeHAoXG4vKlxuIyEvdXNyL2Jpbi9lbnYgcnVieVxucHV0cyBcIlxcdFxcdFwiICsgREFUQS5yZWFkLmdzdWIoL1xcKFxcP3hcXCl8XFxzKyMuKiR8XFxzK3xcXFxcJHxcXFxcbi8sJycpXG5fX0VORF9fXG4gICAgXCIoP3gpXig/OlxcXG4gICAgICBcXFxccyogKCAsICkgXFxcXHMqICAgICAgICAgICAgICAgIyBTZXBhcmF0b3IgICAgICAgICAgXFxuXFxcbiAgICB8IFxcXFxzKiAoIDxjb21iaW5hdG9yPisgKSBcXFxccyogICAjIENvbWJpbmF0b3IgICAgICAgICBcXG5cXFxuICAgIHwgICAgICAoIFxcXFxzKyApICAgICAgICAgICAgICAgICAjIENvbWJpbmF0b3JDaGlsZHJlbiBcXG5cXFxuICAgIHwgICAgICAoIDx1bmljb2RlPisgfCBcXFxcKiApICAgICAjIFRhZyAgICAgICAgICAgICAgICBcXG5cXFxuICAgIHwgXFxcXCMgICggPHVuaWNvZGU+KyAgICAgICApICAgICAjIElEICAgICAgICAgICAgICAgICBcXG5cXFxuICAgIHwgXFxcXC4gICggPHVuaWNvZGU+KyAgICAgICApICAgICAjIENsYXNzTmFtZSAgICAgICAgICBcXG5cXFxuICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBBdHRyaWJ1dGUgICAgICAgICAgXFxuXFxcbiAgICBcXFxcWyAgXFxcbiAgICAgICAgXFxcXHMqICg8dW5pY29kZTE+KykgICg/OiAgXFxcbiAgICAgICAgICAgIFxcXFxzKiAoWypeJCF+fF0/PSkgICg/OiAgXFxcbiAgICAgICAgICAgICAgICBcXFxccyogKD86XFxcbiAgICAgICAgICAgICAgICAgICAgKFtcXFwiJ10/KSguKj8pXFxcXDkgXFxcbiAgICAgICAgICAgICAgICApXFxcbiAgICAgICAgICAgICkgIFxcXG4gICAgICAgICk/ICBcXFxccyogIFxcXG4gICAgXFxcXF0oPyFcXFxcXSkgXFxuXFxcbiAgICB8ICAgOisgKCA8dW5pY29kZT4rICkoPzpcXFxuICAgIFxcXFwoICg/OlxcXG4gICAgICAgICg/OihbXFxcIiddKShbXlxcXFwxMl0qKVxcXFwxMil8KCg/OlxcXFwoW14pXStcXFxcKXxbXigpXSopKylcXFxuICAgICkgXFxcXClcXFxuICAgICk/XFxcbiAgICApXCJcbiovXG5cIl4oPzpcXFxccyooLClcXFxccyp8XFxcXHMqKDxjb21iaW5hdG9yPispXFxcXHMqfChcXFxccyspfCg8dW5pY29kZT4rfFxcXFwqKXxcXFxcIyg8dW5pY29kZT4rKXxcXFxcLig8dW5pY29kZT4rKXxcXFxcW1xcXFxzKig8dW5pY29kZTE+KykoPzpcXFxccyooWypeJCF+fF0/PSkoPzpcXFxccyooPzooW1xcXCInXT8pKC4qPylcXFxcOSkpKT9cXFxccypcXFxcXSg/IVxcXFxdKXwoOispKDx1bmljb2RlPispKD86XFxcXCgoPzooPzooW1xcXCInXSkoW15cXFxcMTNdKilcXFxcMTMpfCgoPzpcXFxcKFteKV0rXFxcXCl8W14oKV0qKSspKVxcXFwpKT8pXCJcbiAgICAucmVwbGFjZSgvPGNvbWJpbmF0b3I+LywgJ1snICsgZXNjYXBlKFwiPit+YCFAJCVeJj17fVxcXFw7PC9cIikgKyAnXScpXG4gICAgLnJlcGxhY2UoLzx1bmljb2RlPi9nLCAnKD86W1xcXFx3XFxcXHUwMGExLVxcXFx1RkZGRi1dfFxcXFxcXFxcW15cXFxcczAtOWEtZl0pJylcbiAgICAucmVwbGFjZSgvPHVuaWNvZGUxPi9nLCAnKD86WzpcXFxcd1xcXFx1MDBhMS1cXFxcdUZGRkYtXXxcXFxcXFxcXFteXFxcXHMwLTlhLWZdKScpXG4pXG5cbi8vIFBhcnRcblxudmFyIFBhcnQgPSBmdW5jdGlvbiBQYXJ0KGNvbWJpbmF0b3Ipe1xuICAgIHRoaXMuY29tYmluYXRvciA9IGNvbWJpbmF0b3IgfHwgXCIgXCJcbiAgICB0aGlzLnRhZyA9IFwiKlwiXG59XG5cblBhcnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKXtcblxuICAgIGlmICghdGhpcy5yYXcpe1xuXG4gICAgICAgIHZhciB4cHIgPSBcIlwiLCBrLCBwYXJ0XG5cbiAgICAgICAgeHByICs9IHRoaXMudGFnIHx8IFwiKlwiXG4gICAgICAgIGlmICh0aGlzLmlkKSB4cHIgKz0gXCIjXCIgKyB0aGlzLmlkXG4gICAgICAgIGlmICh0aGlzLmNsYXNzZXMpIHhwciArPSBcIi5cIiArIHRoaXMuY2xhc3NMaXN0LmpvaW4oXCIuXCIpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMpIGZvciAoayA9IDA7IHBhcnQgPSB0aGlzLmF0dHJpYnV0ZXNbaysrXTspe1xuICAgICAgICAgICAgeHByICs9IFwiW1wiICsgcGFydC5uYW1lICsgKHBhcnQub3BlcmF0b3IgPyBwYXJ0Lm9wZXJhdG9yICsgJ1wiJyArIHBhcnQudmFsdWUgKyAnXCInIDogJycpICsgXCJdXCJcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wc2V1ZG9zKSBmb3IgKGsgPSAwOyBwYXJ0ID0gdGhpcy5wc2V1ZG9zW2srK107KXtcbiAgICAgICAgICAgIHhwciArPSBcIjpcIiArIHBhcnQubmFtZVxuICAgICAgICAgICAgaWYgKHBhcnQudmFsdWUpIHhwciArPSBcIihcIiArIHBhcnQudmFsdWUgKyBcIilcIlxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yYXcgPSB4cHJcblxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJhd1xufVxuXG4vLyBFeHByZXNzaW9uXG5cbnZhciBFeHByZXNzaW9uID0gZnVuY3Rpb24gRXhwcmVzc2lvbigpe1xuICAgIHRoaXMubGVuZ3RoID0gMFxufVxuXG5FeHByZXNzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCl7XG5cbiAgICBpZiAoIXRoaXMucmF3KXtcblxuICAgICAgICB2YXIgeHByID0gXCJcIlxuXG4gICAgICAgIGZvciAodmFyIGogPSAwLCBiaXQ7IGJpdCA9IHRoaXNbaisrXTspe1xuICAgICAgICAgICAgaWYgKGogIT09IDEpIHhwciArPSBcIiBcIlxuICAgICAgICAgICAgaWYgKGJpdC5jb21iaW5hdG9yICE9PSBcIiBcIikgeHByICs9IGJpdC5jb21iaW5hdG9yICsgXCIgXCJcbiAgICAgICAgICAgIHhwciArPSBiaXRcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmF3ID0geHByXG5cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yYXdcbn1cblxudmFyIHJlcGxhY2VyID0gZnVuY3Rpb24oXG4gICAgcmF3TWF0Y2gsXG5cbiAgICBzZXBhcmF0b3IsXG4gICAgY29tYmluYXRvcixcbiAgICBjb21iaW5hdG9yQ2hpbGRyZW4sXG5cbiAgICB0YWdOYW1lLFxuICAgIGlkLFxuICAgIGNsYXNzTmFtZSxcblxuICAgIGF0dHJpYnV0ZUtleSxcbiAgICBhdHRyaWJ1dGVPcGVyYXRvcixcbiAgICBhdHRyaWJ1dGVRdW90ZSxcbiAgICBhdHRyaWJ1dGVWYWx1ZSxcblxuICAgIHBzZXVkb01hcmtlcixcbiAgICBwc2V1ZG9DbGFzcyxcbiAgICBwc2V1ZG9RdW90ZSxcbiAgICBwc2V1ZG9DbGFzc1F1b3RlZFZhbHVlLFxuICAgIHBzZXVkb0NsYXNzVmFsdWVcbil7XG5cbiAgICB2YXIgZXhwcmVzc2lvbiwgY3VycmVudFxuXG4gICAgaWYgKHNlcGFyYXRvciB8fCAhdGhpcy5sZW5ndGgpe1xuICAgICAgICBleHByZXNzaW9uID0gdGhpc1t0aGlzLmxlbmd0aCsrXSA9IG5ldyBFeHByZXNzaW9uXG4gICAgICAgIGlmIChzZXBhcmF0b3IpIHJldHVybiAnJ1xuICAgIH1cblxuICAgIGlmICghZXhwcmVzc2lvbikgZXhwcmVzc2lvbiA9IHRoaXNbdGhpcy5sZW5ndGggLSAxXVxuXG4gICAgaWYgKGNvbWJpbmF0b3IgfHwgY29tYmluYXRvckNoaWxkcmVuIHx8ICFleHByZXNzaW9uLmxlbmd0aCl7XG4gICAgICAgIGN1cnJlbnQgPSBleHByZXNzaW9uW2V4cHJlc3Npb24ubGVuZ3RoKytdID0gbmV3IFBhcnQoY29tYmluYXRvcilcbiAgICB9XG5cbiAgICBpZiAoIWN1cnJlbnQpIGN1cnJlbnQgPSBleHByZXNzaW9uW2V4cHJlc3Npb24ubGVuZ3RoIC0gMV1cblxuICAgIGlmICh0YWdOYW1lKXtcblxuICAgICAgICBjdXJyZW50LnRhZyA9IHVuZXNjYXBlKHRhZ05hbWUpXG5cbiAgICB9IGVsc2UgaWYgKGlkKXtcblxuICAgICAgICBjdXJyZW50LmlkID0gdW5lc2NhcGUoaWQpXG5cbiAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSl7XG5cbiAgICAgICAgdmFyIHVuZXNjYXBlZCA9IHVuZXNjYXBlKGNsYXNzTmFtZSlcblxuICAgICAgICB2YXIgY2xhc3NlcyA9IGN1cnJlbnQuY2xhc3NlcyB8fCAoY3VycmVudC5jbGFzc2VzID0ge30pXG4gICAgICAgIGlmICghY2xhc3Nlc1t1bmVzY2FwZWRdKXtcbiAgICAgICAgICAgIGNsYXNzZXNbdW5lc2NhcGVkXSA9IGVzY2FwZShjbGFzc05hbWUpXG4gICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gY3VycmVudC5jbGFzc0xpc3QgfHwgKGN1cnJlbnQuY2xhc3NMaXN0ID0gW10pXG4gICAgICAgICAgICBjbGFzc0xpc3QucHVzaCh1bmVzY2FwZWQpXG4gICAgICAgICAgICBjbGFzc0xpc3Quc29ydCgpXG4gICAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAocHNldWRvQ2xhc3Mpe1xuXG4gICAgICAgIHBzZXVkb0NsYXNzVmFsdWUgPSBwc2V1ZG9DbGFzc1ZhbHVlIHx8IHBzZXVkb0NsYXNzUXVvdGVkVmFsdWVcblxuICAgICAgICA7KGN1cnJlbnQucHNldWRvcyB8fCAoY3VycmVudC5wc2V1ZG9zID0gW10pKS5wdXNoKHtcbiAgICAgICAgICAgIHR5cGUgICAgICAgICA6IHBzZXVkb01hcmtlci5sZW5ndGggPT0gMSA/ICdjbGFzcycgOiAnZWxlbWVudCcsXG4gICAgICAgICAgICBuYW1lICAgICAgICAgOiB1bmVzY2FwZShwc2V1ZG9DbGFzcyksXG4gICAgICAgICAgICBlc2NhcGVkTmFtZSAgOiBlc2NhcGUocHNldWRvQ2xhc3MpLFxuICAgICAgICAgICAgdmFsdWUgICAgICAgIDogcHNldWRvQ2xhc3NWYWx1ZSA/IHVuZXNjYXBlKHBzZXVkb0NsYXNzVmFsdWUpIDogbnVsbCxcbiAgICAgICAgICAgIGVzY2FwZWRWYWx1ZSA6IHBzZXVkb0NsYXNzVmFsdWUgPyBlc2NhcGUocHNldWRvQ2xhc3NWYWx1ZSkgOiBudWxsXG4gICAgICAgIH0pXG5cbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUtleSl7XG5cbiAgICAgICAgYXR0cmlidXRlVmFsdWUgPSBhdHRyaWJ1dGVWYWx1ZSA/IGVzY2FwZShhdHRyaWJ1dGVWYWx1ZSkgOiBudWxsXG5cbiAgICAgICAgOyhjdXJyZW50LmF0dHJpYnV0ZXMgfHwgKGN1cnJlbnQuYXR0cmlidXRlcyA9IFtdKSkucHVzaCh7XG4gICAgICAgICAgICBvcGVyYXRvciAgICAgOiBhdHRyaWJ1dGVPcGVyYXRvcixcbiAgICAgICAgICAgIG5hbWUgICAgICAgICA6IHVuZXNjYXBlKGF0dHJpYnV0ZUtleSksXG4gICAgICAgICAgICBlc2NhcGVkTmFtZSAgOiBlc2NhcGUoYXR0cmlidXRlS2V5KSxcbiAgICAgICAgICAgIHZhbHVlICAgICAgICA6IGF0dHJpYnV0ZVZhbHVlID8gdW5lc2NhcGUoYXR0cmlidXRlVmFsdWUpIDogbnVsbCxcbiAgICAgICAgICAgIGVzY2FwZWRWYWx1ZSA6IGF0dHJpYnV0ZVZhbHVlID8gZXNjYXBlKGF0dHJpYnV0ZVZhbHVlKSA6IG51bGxcbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIHJldHVybiAnJ1xuXG59XG5cbi8vIEV4cHJlc3Npb25zXG5cbnZhciBFeHByZXNzaW9ucyA9IGZ1bmN0aW9uIEV4cHJlc3Npb25zKGV4cHJlc3Npb24pe1xuICAgIHRoaXMubGVuZ3RoID0gMFxuXG4gICAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgICB2YXIgb3JpZ2luYWwgPSBleHByZXNzaW9uLCByZXBsYWNlZFxuXG4gICAgd2hpbGUgKGV4cHJlc3Npb24pe1xuICAgICAgICByZXBsYWNlZCA9IGV4cHJlc3Npb24ucmVwbGFjZShzbGlja1JlLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VyLmFwcGx5KHNlbGYsIGFyZ3VtZW50cylcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHJlcGxhY2VkID09PSBleHByZXNzaW9uKSB0aHJvdyBuZXcgRXJyb3Iob3JpZ2luYWwgKyAnIGlzIGFuIGludmFsaWQgZXhwcmVzc2lvbicpXG4gICAgICAgIGV4cHJlc3Npb24gPSByZXBsYWNlZFxuICAgIH1cbn1cblxuRXhwcmVzc2lvbnMucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKXtcbiAgICBpZiAoIXRoaXMucmF3KXtcbiAgICAgICAgdmFyIGV4cHJlc3Npb25zID0gW11cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGV4cHJlc3Npb247IGV4cHJlc3Npb24gPSB0aGlzW2krK107KSBleHByZXNzaW9ucy5wdXNoKGV4cHJlc3Npb24pXG4gICAgICAgIHRoaXMucmF3ID0gZXhwcmVzc2lvbnMuam9pbihcIiwgXCIpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmF3XG59XG5cbnZhciBjYWNoZSA9IHt9XG5cbnZhciBwYXJzZSA9IGZ1bmN0aW9uKGV4cHJlc3Npb24pe1xuICAgIGlmIChleHByZXNzaW9uID09IG51bGwpIHJldHVybiBudWxsXG4gICAgZXhwcmVzc2lvbiA9ICgnJyArIGV4cHJlc3Npb24pLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxuICAgIHJldHVybiBjYWNoZVtleHByZXNzaW9uXSB8fCAoY2FjaGVbZXhwcmVzc2lvbl0gPSBuZXcgRXhwcmVzc2lvbnMoZXhwcmVzc2lvbikpXG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VcbiIsIi8vIFRpbnlDb2xvciB2MS40LjFcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZ3JpbnMvVGlueUNvbG9yXG4vLyBCcmlhbiBHcmluc3RlYWQsIE1JVCBMaWNlbnNlXG5cbihmdW5jdGlvbihNYXRoKSB7XG5cbnZhciB0cmltTGVmdCA9IC9eXFxzKy8sXG4gICAgdHJpbVJpZ2h0ID0gL1xccyskLyxcbiAgICB0aW55Q291bnRlciA9IDAsXG4gICAgbWF0aFJvdW5kID0gTWF0aC5yb3VuZCxcbiAgICBtYXRoTWluID0gTWF0aC5taW4sXG4gICAgbWF0aE1heCA9IE1hdGgubWF4LFxuICAgIG1hdGhSYW5kb20gPSBNYXRoLnJhbmRvbTtcblxuZnVuY3Rpb24gdGlueWNvbG9yIChjb2xvciwgb3B0cykge1xuXG4gICAgY29sb3IgPSAoY29sb3IpID8gY29sb3IgOiAnJztcbiAgICBvcHRzID0gb3B0cyB8fCB7IH07XG5cbiAgICAvLyBJZiBpbnB1dCBpcyBhbHJlYWR5IGEgdGlueWNvbG9yLCByZXR1cm4gaXRzZWxmXG4gICAgaWYgKGNvbG9yIGluc3RhbmNlb2YgdGlueWNvbG9yKSB7XG4gICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICAvLyBJZiB3ZSBhcmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGNhbGwgdXNpbmcgbmV3IGluc3RlYWRcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgdGlueWNvbG9yKSkge1xuICAgICAgICByZXR1cm4gbmV3IHRpbnljb2xvcihjb2xvciwgb3B0cyk7XG4gICAgfVxuXG4gICAgdmFyIHJnYiA9IGlucHV0VG9SR0IoY29sb3IpO1xuICAgIHRoaXMuX29yaWdpbmFsSW5wdXQgPSBjb2xvcixcbiAgICB0aGlzLl9yID0gcmdiLnIsXG4gICAgdGhpcy5fZyA9IHJnYi5nLFxuICAgIHRoaXMuX2IgPSByZ2IuYixcbiAgICB0aGlzLl9hID0gcmdiLmEsXG4gICAgdGhpcy5fcm91bmRBID0gbWF0aFJvdW5kKDEwMCp0aGlzLl9hKSAvIDEwMCxcbiAgICB0aGlzLl9mb3JtYXQgPSBvcHRzLmZvcm1hdCB8fCByZ2IuZm9ybWF0O1xuICAgIHRoaXMuX2dyYWRpZW50VHlwZSA9IG9wdHMuZ3JhZGllbnRUeXBlO1xuXG4gICAgLy8gRG9uJ3QgbGV0IHRoZSByYW5nZSBvZiBbMCwyNTVdIGNvbWUgYmFjayBpbiBbMCwxXS5cbiAgICAvLyBQb3RlbnRpYWxseSBsb3NlIGEgbGl0dGxlIGJpdCBvZiBwcmVjaXNpb24gaGVyZSwgYnV0IHdpbGwgZml4IGlzc3VlcyB3aGVyZVxuICAgIC8vIC41IGdldHMgaW50ZXJwcmV0ZWQgYXMgaGFsZiBvZiB0aGUgdG90YWwsIGluc3RlYWQgb2YgaGFsZiBvZiAxXG4gICAgLy8gSWYgaXQgd2FzIHN1cHBvc2VkIHRvIGJlIDEyOCwgdGhpcyB3YXMgYWxyZWFkeSB0YWtlbiBjYXJlIG9mIGJ5IGBpbnB1dFRvUmdiYFxuICAgIGlmICh0aGlzLl9yIDwgMSkgeyB0aGlzLl9yID0gbWF0aFJvdW5kKHRoaXMuX3IpOyB9XG4gICAgaWYgKHRoaXMuX2cgPCAxKSB7IHRoaXMuX2cgPSBtYXRoUm91bmQodGhpcy5fZyk7IH1cbiAgICBpZiAodGhpcy5fYiA8IDEpIHsgdGhpcy5fYiA9IG1hdGhSb3VuZCh0aGlzLl9iKTsgfVxuXG4gICAgdGhpcy5fb2sgPSByZ2Iub2s7XG4gICAgdGhpcy5fdGNfaWQgPSB0aW55Q291bnRlcisrO1xufVxuXG50aW55Y29sb3IucHJvdG90eXBlID0ge1xuICAgIGlzRGFyazogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEJyaWdodG5lc3MoKSA8IDEyODtcbiAgICB9LFxuICAgIGlzTGlnaHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNEYXJrKCk7XG4gICAgfSxcbiAgICBpc1ZhbGlkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29rO1xuICAgIH0sXG4gICAgZ2V0T3JpZ2luYWxJbnB1dDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb3JpZ2luYWxJbnB1dDtcbiAgICB9LFxuICAgIGdldEZvcm1hdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtYXQ7XG4gICAgfSxcbiAgICBnZXRBbHBoYTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hO1xuICAgIH0sXG4gICAgZ2V0QnJpZ2h0bmVzczogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vaHR0cDovL3d3dy53My5vcmcvVFIvQUVSVCNjb2xvci1jb250cmFzdFxuICAgICAgICB2YXIgcmdiID0gdGhpcy50b1JnYigpO1xuICAgICAgICByZXR1cm4gKHJnYi5yICogMjk5ICsgcmdiLmcgKiA1ODcgKyByZ2IuYiAqIDExNCkgLyAxMDAwO1xuICAgIH0sXG4gICAgZ2V0THVtaW5hbmNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy9odHRwOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy1XQ0FHMjAtMjAwODEyMTEvI3JlbGF0aXZlbHVtaW5hbmNlZGVmXG4gICAgICAgIHZhciByZ2IgPSB0aGlzLnRvUmdiKCk7XG4gICAgICAgIHZhciBSc1JHQiwgR3NSR0IsIEJzUkdCLCBSLCBHLCBCO1xuICAgICAgICBSc1JHQiA9IHJnYi5yLzI1NTtcbiAgICAgICAgR3NSR0IgPSByZ2IuZy8yNTU7XG4gICAgICAgIEJzUkdCID0gcmdiLmIvMjU1O1xuXG4gICAgICAgIGlmIChSc1JHQiA8PSAwLjAzOTI4KSB7UiA9IFJzUkdCIC8gMTIuOTI7fSBlbHNlIHtSID0gTWF0aC5wb3coKChSc1JHQiArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTt9XG4gICAgICAgIGlmIChHc1JHQiA8PSAwLjAzOTI4KSB7RyA9IEdzUkdCIC8gMTIuOTI7fSBlbHNlIHtHID0gTWF0aC5wb3coKChHc1JHQiArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTt9XG4gICAgICAgIGlmIChCc1JHQiA8PSAwLjAzOTI4KSB7QiA9IEJzUkdCIC8gMTIuOTI7fSBlbHNlIHtCID0gTWF0aC5wb3coKChCc1JHQiArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTt9XG4gICAgICAgIHJldHVybiAoMC4yMTI2ICogUikgKyAoMC43MTUyICogRykgKyAoMC4wNzIyICogQik7XG4gICAgfSxcbiAgICBzZXRBbHBoYTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5fYSA9IGJvdW5kQWxwaGEodmFsdWUpO1xuICAgICAgICB0aGlzLl9yb3VuZEEgPSBtYXRoUm91bmQoMTAwKnRoaXMuX2EpIC8gMTAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHRvSHN2OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhzdiA9IHJnYlRvSHN2KHRoaXMuX3IsIHRoaXMuX2csIHRoaXMuX2IpO1xuICAgICAgICByZXR1cm4geyBoOiBoc3YuaCAqIDM2MCwgczogaHN2LnMsIHY6IGhzdi52LCBhOiB0aGlzLl9hIH07XG4gICAgfSxcbiAgICB0b0hzdlN0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBoc3YgPSByZ2JUb0hzdih0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iKTtcbiAgICAgICAgdmFyIGggPSBtYXRoUm91bmQoaHN2LmggKiAzNjApLCBzID0gbWF0aFJvdW5kKGhzdi5zICogMTAwKSwgdiA9IG1hdGhSb3VuZChoc3YudiAqIDEwMCk7XG4gICAgICAgIHJldHVybiAodGhpcy5fYSA9PSAxKSA/XG4gICAgICAgICAgXCJoc3YoXCIgICsgaCArIFwiLCBcIiArIHMgKyBcIiUsIFwiICsgdiArIFwiJSlcIiA6XG4gICAgICAgICAgXCJoc3ZhKFwiICsgaCArIFwiLCBcIiArIHMgKyBcIiUsIFwiICsgdiArIFwiJSwgXCIrIHRoaXMuX3JvdW5kQSArIFwiKVwiO1xuICAgIH0sXG4gICAgdG9Ic2w6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaHNsID0gcmdiVG9Ic2wodGhpcy5fciwgdGhpcy5fZywgdGhpcy5fYik7XG4gICAgICAgIHJldHVybiB7IGg6IGhzbC5oICogMzYwLCBzOiBoc2wucywgbDogaHNsLmwsIGE6IHRoaXMuX2EgfTtcbiAgICB9LFxuICAgIHRvSHNsU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhzbCA9IHJnYlRvSHNsKHRoaXMuX3IsIHRoaXMuX2csIHRoaXMuX2IpO1xuICAgICAgICB2YXIgaCA9IG1hdGhSb3VuZChoc2wuaCAqIDM2MCksIHMgPSBtYXRoUm91bmQoaHNsLnMgKiAxMDApLCBsID0gbWF0aFJvdW5kKGhzbC5sICogMTAwKTtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9hID09IDEpID9cbiAgICAgICAgICBcImhzbChcIiAgKyBoICsgXCIsIFwiICsgcyArIFwiJSwgXCIgKyBsICsgXCIlKVwiIDpcbiAgICAgICAgICBcImhzbGEoXCIgKyBoICsgXCIsIFwiICsgcyArIFwiJSwgXCIgKyBsICsgXCIlLCBcIisgdGhpcy5fcm91bmRBICsgXCIpXCI7XG4gICAgfSxcbiAgICB0b0hleDogZnVuY3Rpb24oYWxsb3czQ2hhcikge1xuICAgICAgICByZXR1cm4gcmdiVG9IZXgodGhpcy5fciwgdGhpcy5fZywgdGhpcy5fYiwgYWxsb3czQ2hhcik7XG4gICAgfSxcbiAgICB0b0hleFN0cmluZzogZnVuY3Rpb24oYWxsb3czQ2hhcikge1xuICAgICAgICByZXR1cm4gJyMnICsgdGhpcy50b0hleChhbGxvdzNDaGFyKTtcbiAgICB9LFxuICAgIHRvSGV4ODogZnVuY3Rpb24oYWxsb3c0Q2hhcikge1xuICAgICAgICByZXR1cm4gcmdiYVRvSGV4KHRoaXMuX3IsIHRoaXMuX2csIHRoaXMuX2IsIHRoaXMuX2EsIGFsbG93NENoYXIpO1xuICAgIH0sXG4gICAgdG9IZXg4U3RyaW5nOiBmdW5jdGlvbihhbGxvdzRDaGFyKSB7XG4gICAgICAgIHJldHVybiAnIycgKyB0aGlzLnRvSGV4OChhbGxvdzRDaGFyKTtcbiAgICB9LFxuICAgIHRvUmdiOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHsgcjogbWF0aFJvdW5kKHRoaXMuX3IpLCBnOiBtYXRoUm91bmQodGhpcy5fZyksIGI6IG1hdGhSb3VuZCh0aGlzLl9iKSwgYTogdGhpcy5fYSB9O1xuICAgIH0sXG4gICAgdG9SZ2JTdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2EgPT0gMSkgP1xuICAgICAgICAgIFwicmdiKFwiICArIG1hdGhSb3VuZCh0aGlzLl9yKSArIFwiLCBcIiArIG1hdGhSb3VuZCh0aGlzLl9nKSArIFwiLCBcIiArIG1hdGhSb3VuZCh0aGlzLl9iKSArIFwiKVwiIDpcbiAgICAgICAgICBcInJnYmEoXCIgKyBtYXRoUm91bmQodGhpcy5fcikgKyBcIiwgXCIgKyBtYXRoUm91bmQodGhpcy5fZykgKyBcIiwgXCIgKyBtYXRoUm91bmQodGhpcy5fYikgKyBcIiwgXCIgKyB0aGlzLl9yb3VuZEEgKyBcIilcIjtcbiAgICB9LFxuICAgIHRvUGVyY2VudGFnZVJnYjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7IHI6IG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX3IsIDI1NSkgKiAxMDApICsgXCIlXCIsIGc6IG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX2csIDI1NSkgKiAxMDApICsgXCIlXCIsIGI6IG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX2IsIDI1NSkgKiAxMDApICsgXCIlXCIsIGE6IHRoaXMuX2EgfTtcbiAgICB9LFxuICAgIHRvUGVyY2VudGFnZVJnYlN0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fYSA9PSAxKSA/XG4gICAgICAgICAgXCJyZ2IoXCIgICsgbWF0aFJvdW5kKGJvdW5kMDEodGhpcy5fciwgMjU1KSAqIDEwMCkgKyBcIiUsIFwiICsgbWF0aFJvdW5kKGJvdW5kMDEodGhpcy5fZywgMjU1KSAqIDEwMCkgKyBcIiUsIFwiICsgbWF0aFJvdW5kKGJvdW5kMDEodGhpcy5fYiwgMjU1KSAqIDEwMCkgKyBcIiUpXCIgOlxuICAgICAgICAgIFwicmdiYShcIiArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX3IsIDI1NSkgKiAxMDApICsgXCIlLCBcIiArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX2csIDI1NSkgKiAxMDApICsgXCIlLCBcIiArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX2IsIDI1NSkgKiAxMDApICsgXCIlLCBcIiArIHRoaXMuX3JvdW5kQSArIFwiKVwiO1xuICAgIH0sXG4gICAgdG9OYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2EgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zcGFyZW50XCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fYSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZXhOYW1lc1tyZ2JUb0hleCh0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iLCB0cnVlKV0gfHwgZmFsc2U7XG4gICAgfSxcbiAgICB0b0ZpbHRlcjogZnVuY3Rpb24oc2Vjb25kQ29sb3IpIHtcbiAgICAgICAgdmFyIGhleDhTdHJpbmcgPSAnIycgKyByZ2JhVG9BcmdiSGV4KHRoaXMuX3IsIHRoaXMuX2csIHRoaXMuX2IsIHRoaXMuX2EpO1xuICAgICAgICB2YXIgc2Vjb25kSGV4OFN0cmluZyA9IGhleDhTdHJpbmc7XG4gICAgICAgIHZhciBncmFkaWVudFR5cGUgPSB0aGlzLl9ncmFkaWVudFR5cGUgPyBcIkdyYWRpZW50VHlwZSA9IDEsIFwiIDogXCJcIjtcblxuICAgICAgICBpZiAoc2Vjb25kQ29sb3IpIHtcbiAgICAgICAgICAgIHZhciBzID0gdGlueWNvbG9yKHNlY29uZENvbG9yKTtcbiAgICAgICAgICAgIHNlY29uZEhleDhTdHJpbmcgPSAnIycgKyByZ2JhVG9BcmdiSGV4KHMuX3IsIHMuX2csIHMuX2IsIHMuX2EpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KFwiK2dyYWRpZW50VHlwZStcInN0YXJ0Q29sb3JzdHI9XCIraGV4OFN0cmluZytcIixlbmRDb2xvcnN0cj1cIitzZWNvbmRIZXg4U3RyaW5nK1wiKVwiO1xuICAgIH0sXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKGZvcm1hdCkge1xuICAgICAgICB2YXIgZm9ybWF0U2V0ID0gISFmb3JtYXQ7XG4gICAgICAgIGZvcm1hdCA9IGZvcm1hdCB8fCB0aGlzLl9mb3JtYXQ7XG5cbiAgICAgICAgdmFyIGZvcm1hdHRlZFN0cmluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgaGFzQWxwaGEgPSB0aGlzLl9hIDwgMSAmJiB0aGlzLl9hID49IDA7XG4gICAgICAgIHZhciBuZWVkc0FscGhhRm9ybWF0ID0gIWZvcm1hdFNldCAmJiBoYXNBbHBoYSAmJiAoZm9ybWF0ID09PSBcImhleFwiIHx8IGZvcm1hdCA9PT0gXCJoZXg2XCIgfHwgZm9ybWF0ID09PSBcImhleDNcIiB8fCBmb3JtYXQgPT09IFwiaGV4NFwiIHx8IGZvcm1hdCA9PT0gXCJoZXg4XCIgfHwgZm9ybWF0ID09PSBcIm5hbWVcIik7XG5cbiAgICAgICAgaWYgKG5lZWRzQWxwaGFGb3JtYXQpIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgXCJ0cmFuc3BhcmVudFwiLCBhbGwgb3RoZXIgbm9uLWFscGhhIGZvcm1hdHNcbiAgICAgICAgICAgIC8vIHdpbGwgcmV0dXJuIHJnYmEgd2hlbiB0aGVyZSBpcyB0cmFuc3BhcmVuY3kuXG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSBcIm5hbWVcIiAmJiB0aGlzLl9hID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9OYW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b1JnYlN0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09IFwicmdiXCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9SZ2JTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0ID09PSBcInByZ2JcIikge1xuICAgICAgICAgICAgZm9ybWF0dGVkU3RyaW5nID0gdGhpcy50b1BlcmNlbnRhZ2VSZ2JTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0ID09PSBcImhleFwiIHx8IGZvcm1hdCA9PT0gXCJoZXg2XCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9IZXhTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0ID09PSBcImhleDNcIikge1xuICAgICAgICAgICAgZm9ybWF0dGVkU3RyaW5nID0gdGhpcy50b0hleFN0cmluZyh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0ID09PSBcImhleDRcIikge1xuICAgICAgICAgICAgZm9ybWF0dGVkU3RyaW5nID0gdGhpcy50b0hleDhTdHJpbmcodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJoZXg4XCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9IZXg4U3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJuYW1lXCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9OYW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJoc2xcIikge1xuICAgICAgICAgICAgZm9ybWF0dGVkU3RyaW5nID0gdGhpcy50b0hzbFN0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09IFwiaHN2XCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9Ic3ZTdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWRTdHJpbmcgfHwgdGhpcy50b0hleFN0cmluZygpO1xuICAgIH0sXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGlueWNvbG9yKHRoaXMudG9TdHJpbmcoKSk7XG4gICAgfSxcblxuICAgIF9hcHBseU1vZGlmaWNhdGlvbjogZnVuY3Rpb24oZm4sIGFyZ3MpIHtcbiAgICAgICAgdmFyIGNvbG9yID0gZm4uYXBwbHkobnVsbCwgW3RoaXNdLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3MpKSk7XG4gICAgICAgIHRoaXMuX3IgPSBjb2xvci5fcjtcbiAgICAgICAgdGhpcy5fZyA9IGNvbG9yLl9nO1xuICAgICAgICB0aGlzLl9iID0gY29sb3IuX2I7XG4gICAgICAgIHRoaXMuc2V0QWxwaGEoY29sb3IuX2EpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIGxpZ2h0ZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24obGlnaHRlbiwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGJyaWdodGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGJyaWdodGVuLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgZGFya2VuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGRhcmtlbiwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGRlc2F0dXJhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oZGVzYXR1cmF0ZSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIHNhdHVyYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKHNhdHVyYXRlLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgZ3JleXNjYWxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGdyZXlzY2FsZSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIHNwaW46IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oc3BpbiwgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgX2FwcGx5Q29tYmluYXRpb246IGZ1bmN0aW9uKGZuLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShudWxsLCBbdGhpc10uY29uY2F0KFtdLnNsaWNlLmNhbGwoYXJncykpKTtcbiAgICB9LFxuICAgIGFuYWxvZ291czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKGFuYWxvZ291cywgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGNvbXBsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihjb21wbGVtZW50LCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgbW9ub2Nocm9tYXRpYzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKG1vbm9jaHJvbWF0aWMsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBzcGxpdGNvbXBsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihzcGxpdGNvbXBsZW1lbnQsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICB0cmlhZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKHRyaWFkLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgdGV0cmFkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24odGV0cmFkLCBhcmd1bWVudHMpO1xuICAgIH1cbn07XG5cbi8vIElmIGlucHV0IGlzIGFuIG9iamVjdCwgZm9yY2UgMSBpbnRvIFwiMS4wXCIgdG8gaGFuZGxlIHJhdGlvcyBwcm9wZXJseVxuLy8gU3RyaW5nIGlucHV0IHJlcXVpcmVzIFwiMS4wXCIgYXMgaW5wdXQsIHNvIDEgd2lsbCBiZSB0cmVhdGVkIGFzIDFcbnRpbnljb2xvci5mcm9tUmF0aW8gPSBmdW5jdGlvbihjb2xvciwgb3B0cykge1xuICAgIGlmICh0eXBlb2YgY29sb3IgPT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgbmV3Q29sb3IgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBjb2xvcikge1xuICAgICAgICAgICAgaWYgKGNvbG9yLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IFwiYVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbG9yW2ldID0gY29sb3JbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2xvcltpXSA9IGNvbnZlcnRUb1BlcmNlbnRhZ2UoY29sb3JbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2xvciA9IG5ld0NvbG9yO1xuICAgIH1cblxuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IsIG9wdHMpO1xufTtcblxuLy8gR2l2ZW4gYSBzdHJpbmcgb3Igb2JqZWN0LCBjb252ZXJ0IHRoYXQgaW5wdXQgdG8gUkdCXG4vLyBQb3NzaWJsZSBzdHJpbmcgaW5wdXRzOlxuLy9cbi8vICAgICBcInJlZFwiXG4vLyAgICAgXCIjZjAwXCIgb3IgXCJmMDBcIlxuLy8gICAgIFwiI2ZmMDAwMFwiIG9yIFwiZmYwMDAwXCJcbi8vICAgICBcIiNmZjAwMDAwMFwiIG9yIFwiZmYwMDAwMDBcIlxuLy8gICAgIFwicmdiIDI1NSAwIDBcIiBvciBcInJnYiAoMjU1LCAwLCAwKVwiXG4vLyAgICAgXCJyZ2IgMS4wIDAgMFwiIG9yIFwicmdiICgxLCAwLCAwKVwiXG4vLyAgICAgXCJyZ2JhICgyNTUsIDAsIDAsIDEpXCIgb3IgXCJyZ2JhIDI1NSwgMCwgMCwgMVwiXG4vLyAgICAgXCJyZ2JhICgxLjAsIDAsIDAsIDEpXCIgb3IgXCJyZ2JhIDEuMCwgMCwgMCwgMVwiXG4vLyAgICAgXCJoc2woMCwgMTAwJSwgNTAlKVwiIG9yIFwiaHNsIDAgMTAwJSA1MCVcIlxuLy8gICAgIFwiaHNsYSgwLCAxMDAlLCA1MCUsIDEpXCIgb3IgXCJoc2xhIDAgMTAwJSA1MCUsIDFcIlxuLy8gICAgIFwiaHN2KDAsIDEwMCUsIDEwMCUpXCIgb3IgXCJoc3YgMCAxMDAlIDEwMCVcIlxuLy9cbmZ1bmN0aW9uIGlucHV0VG9SR0IoY29sb3IpIHtcblxuICAgIHZhciByZ2IgPSB7IHI6IDAsIGc6IDAsIGI6IDAgfTtcbiAgICB2YXIgYSA9IDE7XG4gICAgdmFyIHMgPSBudWxsO1xuICAgIHZhciB2ID0gbnVsbDtcbiAgICB2YXIgbCA9IG51bGw7XG4gICAgdmFyIG9rID0gZmFsc2U7XG4gICAgdmFyIGZvcm1hdCA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbG9yID0gc3RyaW5nSW5wdXRUb09iamVjdChjb2xvcik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChpc1ZhbGlkQ1NTVW5pdChjb2xvci5yKSAmJiBpc1ZhbGlkQ1NTVW5pdChjb2xvci5nKSAmJiBpc1ZhbGlkQ1NTVW5pdChjb2xvci5iKSkge1xuICAgICAgICAgICAgcmdiID0gcmdiVG9SZ2IoY29sb3IuciwgY29sb3IuZywgY29sb3IuYik7XG4gICAgICAgICAgICBvayA9IHRydWU7XG4gICAgICAgICAgICBmb3JtYXQgPSBTdHJpbmcoY29sb3Iucikuc3Vic3RyKC0xKSA9PT0gXCIlXCIgPyBcInByZ2JcIiA6IFwicmdiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNWYWxpZENTU1VuaXQoY29sb3IuaCkgJiYgaXNWYWxpZENTU1VuaXQoY29sb3IucykgJiYgaXNWYWxpZENTU1VuaXQoY29sb3IudikpIHtcbiAgICAgICAgICAgIHMgPSBjb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yLnMpO1xuICAgICAgICAgICAgdiA9IGNvbnZlcnRUb1BlcmNlbnRhZ2UoY29sb3Iudik7XG4gICAgICAgICAgICByZ2IgPSBoc3ZUb1JnYihjb2xvci5oLCBzLCB2KTtcbiAgICAgICAgICAgIG9rID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvcm1hdCA9IFwiaHN2XCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNWYWxpZENTU1VuaXQoY29sb3IuaCkgJiYgaXNWYWxpZENTU1VuaXQoY29sb3IucykgJiYgaXNWYWxpZENTU1VuaXQoY29sb3IubCkpIHtcbiAgICAgICAgICAgIHMgPSBjb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yLnMpO1xuICAgICAgICAgICAgbCA9IGNvbnZlcnRUb1BlcmNlbnRhZ2UoY29sb3IubCk7XG4gICAgICAgICAgICByZ2IgPSBoc2xUb1JnYihjb2xvci5oLCBzLCBsKTtcbiAgICAgICAgICAgIG9rID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvcm1hdCA9IFwiaHNsXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29sb3IuaGFzT3duUHJvcGVydHkoXCJhXCIpKSB7XG4gICAgICAgICAgICBhID0gY29sb3IuYTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGEgPSBib3VuZEFscGhhKGEpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgb2s6IG9rLFxuICAgICAgICBmb3JtYXQ6IGNvbG9yLmZvcm1hdCB8fCBmb3JtYXQsXG4gICAgICAgIHI6IG1hdGhNaW4oMjU1LCBtYXRoTWF4KHJnYi5yLCAwKSksXG4gICAgICAgIGc6IG1hdGhNaW4oMjU1LCBtYXRoTWF4KHJnYi5nLCAwKSksXG4gICAgICAgIGI6IG1hdGhNaW4oMjU1LCBtYXRoTWF4KHJnYi5iLCAwKSksXG4gICAgICAgIGE6IGFcbiAgICB9O1xufVxuXG5cbi8vIENvbnZlcnNpb24gRnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBgcmdiVG9Ic2xgLCBgcmdiVG9Ic3ZgLCBgaHNsVG9SZ2JgLCBgaHN2VG9SZ2JgIG1vZGlmaWVkIGZyb206XG4vLyA8aHR0cDovL21qaWphY2tzb24uY29tLzIwMDgvMDIvcmdiLXRvLWhzbC1hbmQtcmdiLXRvLWhzdi1jb2xvci1tb2RlbC1jb252ZXJzaW9uLWFsZ29yaXRobXMtaW4tamF2YXNjcmlwdD5cblxuLy8gYHJnYlRvUmdiYFxuLy8gSGFuZGxlIGJvdW5kcyAvIHBlcmNlbnRhZ2UgY2hlY2tpbmcgdG8gY29uZm9ybSB0byBDU1MgY29sb3Igc3BlY1xuLy8gPGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtY29sb3IvPlxuLy8gKkFzc3VtZXM6KiByLCBnLCBiIGluIFswLCAyNTVdIG9yIFswLCAxXVxuLy8gKlJldHVybnM6KiB7IHIsIGcsIGIgfSBpbiBbMCwgMjU1XVxuZnVuY3Rpb24gcmdiVG9SZ2IociwgZywgYil7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcjogYm91bmQwMShyLCAyNTUpICogMjU1LFxuICAgICAgICBnOiBib3VuZDAxKGcsIDI1NSkgKiAyNTUsXG4gICAgICAgIGI6IGJvdW5kMDEoYiwgMjU1KSAqIDI1NVxuICAgIH07XG59XG5cbi8vIGByZ2JUb0hzbGBcbi8vIENvbnZlcnRzIGFuIFJHQiBjb2xvciB2YWx1ZSB0byBIU0wuXG4vLyAqQXNzdW1lczoqIHIsIGcsIGFuZCBiIGFyZSBjb250YWluZWQgaW4gWzAsIDI1NV0gb3IgWzAsIDFdXG4vLyAqUmV0dXJuczoqIHsgaCwgcywgbCB9IGluIFswLDFdXG5mdW5jdGlvbiByZ2JUb0hzbChyLCBnLCBiKSB7XG5cbiAgICByID0gYm91bmQwMShyLCAyNTUpO1xuICAgIGcgPSBib3VuZDAxKGcsIDI1NSk7XG4gICAgYiA9IGJvdW5kMDEoYiwgMjU1KTtcblxuICAgIHZhciBtYXggPSBtYXRoTWF4KHIsIGcsIGIpLCBtaW4gPSBtYXRoTWluKHIsIGcsIGIpO1xuICAgIHZhciBoLCBzLCBsID0gKG1heCArIG1pbikgLyAyO1xuXG4gICAgaWYobWF4ID09IG1pbikge1xuICAgICAgICBoID0gcyA9IDA7IC8vIGFjaHJvbWF0aWNcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBkID0gbWF4IC0gbWluO1xuICAgICAgICBzID0gbCA+IDAuNSA/IGQgLyAoMiAtIG1heCAtIG1pbikgOiBkIC8gKG1heCArIG1pbik7XG4gICAgICAgIHN3aXRjaChtYXgpIHtcbiAgICAgICAgICAgIGNhc2UgcjogaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZzogaCA9IChiIC0gcikgLyBkICsgMjsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGI6IGggPSAociAtIGcpIC8gZCArIDQ7IGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaCAvPSA2O1xuICAgIH1cblxuICAgIHJldHVybiB7IGg6IGgsIHM6IHMsIGw6IGwgfTtcbn1cblxuLy8gYGhzbFRvUmdiYFxuLy8gQ29udmVydHMgYW4gSFNMIGNvbG9yIHZhbHVlIHRvIFJHQi5cbi8vICpBc3N1bWVzOiogaCBpcyBjb250YWluZWQgaW4gWzAsIDFdIG9yIFswLCAzNjBdIGFuZCBzIGFuZCBsIGFyZSBjb250YWluZWQgWzAsIDFdIG9yIFswLCAxMDBdXG4vLyAqUmV0dXJuczoqIHsgciwgZywgYiB9IGluIHRoZSBzZXQgWzAsIDI1NV1cbmZ1bmN0aW9uIGhzbFRvUmdiKGgsIHMsIGwpIHtcbiAgICB2YXIgciwgZywgYjtcblxuICAgIGggPSBib3VuZDAxKGgsIDM2MCk7XG4gICAgcyA9IGJvdW5kMDEocywgMTAwKTtcbiAgICBsID0gYm91bmQwMShsLCAxMDApO1xuXG4gICAgZnVuY3Rpb24gaHVlMnJnYihwLCBxLCB0KSB7XG4gICAgICAgIGlmKHQgPCAwKSB0ICs9IDE7XG4gICAgICAgIGlmKHQgPiAxKSB0IC09IDE7XG4gICAgICAgIGlmKHQgPCAxLzYpIHJldHVybiBwICsgKHEgLSBwKSAqIDYgKiB0O1xuICAgICAgICBpZih0IDwgMS8yKSByZXR1cm4gcTtcbiAgICAgICAgaWYodCA8IDIvMykgcmV0dXJuIHAgKyAocSAtIHApICogKDIvMyAtIHQpICogNjtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfVxuXG4gICAgaWYocyA9PT0gMCkge1xuICAgICAgICByID0gZyA9IGIgPSBsOyAvLyBhY2hyb21hdGljXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgcSA9IGwgPCAwLjUgPyBsICogKDEgKyBzKSA6IGwgKyBzIC0gbCAqIHM7XG4gICAgICAgIHZhciBwID0gMiAqIGwgLSBxO1xuICAgICAgICByID0gaHVlMnJnYihwLCBxLCBoICsgMS8zKTtcbiAgICAgICAgZyA9IGh1ZTJyZ2IocCwgcSwgaCk7XG4gICAgICAgIGIgPSBodWUycmdiKHAsIHEsIGggLSAxLzMpO1xuICAgIH1cblxuICAgIHJldHVybiB7IHI6IHIgKiAyNTUsIGc6IGcgKiAyNTUsIGI6IGIgKiAyNTUgfTtcbn1cblxuLy8gYHJnYlRvSHN2YFxuLy8gQ29udmVydHMgYW4gUkdCIGNvbG9yIHZhbHVlIHRvIEhTVlxuLy8gKkFzc3VtZXM6KiByLCBnLCBhbmQgYiBhcmUgY29udGFpbmVkIGluIHRoZSBzZXQgWzAsIDI1NV0gb3IgWzAsIDFdXG4vLyAqUmV0dXJuczoqIHsgaCwgcywgdiB9IGluIFswLDFdXG5mdW5jdGlvbiByZ2JUb0hzdihyLCBnLCBiKSB7XG5cbiAgICByID0gYm91bmQwMShyLCAyNTUpO1xuICAgIGcgPSBib3VuZDAxKGcsIDI1NSk7XG4gICAgYiA9IGJvdW5kMDEoYiwgMjU1KTtcblxuICAgIHZhciBtYXggPSBtYXRoTWF4KHIsIGcsIGIpLCBtaW4gPSBtYXRoTWluKHIsIGcsIGIpO1xuICAgIHZhciBoLCBzLCB2ID0gbWF4O1xuXG4gICAgdmFyIGQgPSBtYXggLSBtaW47XG4gICAgcyA9IG1heCA9PT0gMCA/IDAgOiBkIC8gbWF4O1xuXG4gICAgaWYobWF4ID09IG1pbikge1xuICAgICAgICBoID0gMDsgLy8gYWNocm9tYXRpY1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3dpdGNoKG1heCkge1xuICAgICAgICAgICAgY2FzZSByOiBoID0gKGcgLSBiKSAvIGQgKyAoZyA8IGIgPyA2IDogMCk7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBnOiBoID0gKGIgLSByKSAvIGQgKyAyOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgYjogaCA9IChyIC0gZykgLyBkICsgNDsgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaCAvPSA2O1xuICAgIH1cbiAgICByZXR1cm4geyBoOiBoLCBzOiBzLCB2OiB2IH07XG59XG5cbi8vIGBoc3ZUb1JnYmBcbi8vIENvbnZlcnRzIGFuIEhTViBjb2xvciB2YWx1ZSB0byBSR0IuXG4vLyAqQXNzdW1lczoqIGggaXMgY29udGFpbmVkIGluIFswLCAxXSBvciBbMCwgMzYwXSBhbmQgcyBhbmQgdiBhcmUgY29udGFpbmVkIGluIFswLCAxXSBvciBbMCwgMTAwXVxuLy8gKlJldHVybnM6KiB7IHIsIGcsIGIgfSBpbiB0aGUgc2V0IFswLCAyNTVdXG4gZnVuY3Rpb24gaHN2VG9SZ2IoaCwgcywgdikge1xuXG4gICAgaCA9IGJvdW5kMDEoaCwgMzYwKSAqIDY7XG4gICAgcyA9IGJvdW5kMDEocywgMTAwKTtcbiAgICB2ID0gYm91bmQwMSh2LCAxMDApO1xuXG4gICAgdmFyIGkgPSBNYXRoLmZsb29yKGgpLFxuICAgICAgICBmID0gaCAtIGksXG4gICAgICAgIHAgPSB2ICogKDEgLSBzKSxcbiAgICAgICAgcSA9IHYgKiAoMSAtIGYgKiBzKSxcbiAgICAgICAgdCA9IHYgKiAoMSAtICgxIC0gZikgKiBzKSxcbiAgICAgICAgbW9kID0gaSAlIDYsXG4gICAgICAgIHIgPSBbdiwgcSwgcCwgcCwgdCwgdl1bbW9kXSxcbiAgICAgICAgZyA9IFt0LCB2LCB2LCBxLCBwLCBwXVttb2RdLFxuICAgICAgICBiID0gW3AsIHAsIHQsIHYsIHYsIHFdW21vZF07XG5cbiAgICByZXR1cm4geyByOiByICogMjU1LCBnOiBnICogMjU1LCBiOiBiICogMjU1IH07XG59XG5cbi8vIGByZ2JUb0hleGBcbi8vIENvbnZlcnRzIGFuIFJHQiBjb2xvciB0byBoZXhcbi8vIEFzc3VtZXMgciwgZywgYW5kIGIgYXJlIGNvbnRhaW5lZCBpbiB0aGUgc2V0IFswLCAyNTVdXG4vLyBSZXR1cm5zIGEgMyBvciA2IGNoYXJhY3RlciBoZXhcbmZ1bmN0aW9uIHJnYlRvSGV4KHIsIGcsIGIsIGFsbG93M0NoYXIpIHtcblxuICAgIHZhciBoZXggPSBbXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKHIpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKGcpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKGIpLnRvU3RyaW5nKDE2KSlcbiAgICBdO1xuXG4gICAgLy8gUmV0dXJuIGEgMyBjaGFyYWN0ZXIgaGV4IGlmIHBvc3NpYmxlXG4gICAgaWYgKGFsbG93M0NoYXIgJiYgaGV4WzBdLmNoYXJBdCgwKSA9PSBoZXhbMF0uY2hhckF0KDEpICYmIGhleFsxXS5jaGFyQXQoMCkgPT0gaGV4WzFdLmNoYXJBdCgxKSAmJiBoZXhbMl0uY2hhckF0KDApID09IGhleFsyXS5jaGFyQXQoMSkpIHtcbiAgICAgICAgcmV0dXJuIGhleFswXS5jaGFyQXQoMCkgKyBoZXhbMV0uY2hhckF0KDApICsgaGV4WzJdLmNoYXJBdCgwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGV4LmpvaW4oXCJcIik7XG59XG5cbi8vIGByZ2JhVG9IZXhgXG4vLyBDb252ZXJ0cyBhbiBSR0JBIGNvbG9yIHBsdXMgYWxwaGEgdHJhbnNwYXJlbmN5IHRvIGhleFxuLy8gQXNzdW1lcyByLCBnLCBiIGFyZSBjb250YWluZWQgaW4gdGhlIHNldCBbMCwgMjU1XSBhbmRcbi8vIGEgaW4gWzAsIDFdLiBSZXR1cm5zIGEgNCBvciA4IGNoYXJhY3RlciByZ2JhIGhleFxuZnVuY3Rpb24gcmdiYVRvSGV4KHIsIGcsIGIsIGEsIGFsbG93NENoYXIpIHtcblxuICAgIHZhciBoZXggPSBbXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKHIpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKGcpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKGIpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgIHBhZDIoY29udmVydERlY2ltYWxUb0hleChhKSlcbiAgICBdO1xuXG4gICAgLy8gUmV0dXJuIGEgNCBjaGFyYWN0ZXIgaGV4IGlmIHBvc3NpYmxlXG4gICAgaWYgKGFsbG93NENoYXIgJiYgaGV4WzBdLmNoYXJBdCgwKSA9PSBoZXhbMF0uY2hhckF0KDEpICYmIGhleFsxXS5jaGFyQXQoMCkgPT0gaGV4WzFdLmNoYXJBdCgxKSAmJiBoZXhbMl0uY2hhckF0KDApID09IGhleFsyXS5jaGFyQXQoMSkgJiYgaGV4WzNdLmNoYXJBdCgwKSA9PSBoZXhbM10uY2hhckF0KDEpKSB7XG4gICAgICAgIHJldHVybiBoZXhbMF0uY2hhckF0KDApICsgaGV4WzFdLmNoYXJBdCgwKSArIGhleFsyXS5jaGFyQXQoMCkgKyBoZXhbM10uY2hhckF0KDApO1xuICAgIH1cblxuICAgIHJldHVybiBoZXguam9pbihcIlwiKTtcbn1cblxuLy8gYHJnYmFUb0FyZ2JIZXhgXG4vLyBDb252ZXJ0cyBhbiBSR0JBIGNvbG9yIHRvIGFuIEFSR0IgSGV4OCBzdHJpbmdcbi8vIFJhcmVseSB1c2VkLCBidXQgcmVxdWlyZWQgZm9yIFwidG9GaWx0ZXIoKVwiXG5mdW5jdGlvbiByZ2JhVG9BcmdiSGV4KHIsIGcsIGIsIGEpIHtcblxuICAgIHZhciBoZXggPSBbXG4gICAgICAgIHBhZDIoY29udmVydERlY2ltYWxUb0hleChhKSksXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKHIpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKGcpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgIHBhZDIobWF0aFJvdW5kKGIpLnRvU3RyaW5nKDE2KSlcbiAgICBdO1xuXG4gICAgcmV0dXJuIGhleC5qb2luKFwiXCIpO1xufVxuXG4vLyBgZXF1YWxzYFxuLy8gQ2FuIGJlIGNhbGxlZCB3aXRoIGFueSB0aW55Y29sb3IgaW5wdXRcbnRpbnljb2xvci5lcXVhbHMgPSBmdW5jdGlvbiAoY29sb3IxLCBjb2xvcjIpIHtcbiAgICBpZiAoIWNvbG9yMSB8fCAhY29sb3IyKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IxKS50b1JnYlN0cmluZygpID09IHRpbnljb2xvcihjb2xvcjIpLnRvUmdiU3RyaW5nKCk7XG59O1xuXG50aW55Y29sb3IucmFuZG9tID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRpbnljb2xvci5mcm9tUmF0aW8oe1xuICAgICAgICByOiBtYXRoUmFuZG9tKCksXG4gICAgICAgIGc6IG1hdGhSYW5kb20oKSxcbiAgICAgICAgYjogbWF0aFJhbmRvbSgpXG4gICAgfSk7XG59O1xuXG5cbi8vIE1vZGlmaWNhdGlvbiBGdW5jdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRoYW5rcyB0byBsZXNzLmpzIGZvciBzb21lIG9mIHRoZSBiYXNpY3MgaGVyZVxuLy8gPGh0dHBzOi8vZ2l0aHViLmNvbS9jbG91ZGhlYWQvbGVzcy5qcy9ibG9iL21hc3Rlci9saWIvbGVzcy9mdW5jdGlvbnMuanM+XG5cbmZ1bmN0aW9uIGRlc2F0dXJhdGUoY29sb3IsIGFtb3VudCkge1xuICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgMTApO1xuICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgaHNsLnMgLT0gYW1vdW50IC8gMTAwO1xuICAgIGhzbC5zID0gY2xhbXAwMShoc2wucyk7XG4gICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xufVxuXG5mdW5jdGlvbiBzYXR1cmF0ZShjb2xvciwgYW1vdW50KSB7XG4gICAgYW1vdW50ID0gKGFtb3VudCA9PT0gMCkgPyAwIDogKGFtb3VudCB8fCAxMCk7XG4gICAgdmFyIGhzbCA9IHRpbnljb2xvcihjb2xvcikudG9Ic2woKTtcbiAgICBoc2wucyArPSBhbW91bnQgLyAxMDA7XG4gICAgaHNsLnMgPSBjbGFtcDAxKGhzbC5zKTtcbiAgICByZXR1cm4gdGlueWNvbG9yKGhzbCk7XG59XG5cbmZ1bmN0aW9uIGdyZXlzY2FsZShjb2xvcikge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLmRlc2F0dXJhdGUoMTAwKTtcbn1cblxuZnVuY3Rpb24gbGlnaHRlbiAoY29sb3IsIGFtb3VudCkge1xuICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgMTApO1xuICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgaHNsLmwgKz0gYW1vdW50IC8gMTAwO1xuICAgIGhzbC5sID0gY2xhbXAwMShoc2wubCk7XG4gICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xufVxuXG5mdW5jdGlvbiBicmlnaHRlbihjb2xvciwgYW1vdW50KSB7XG4gICAgYW1vdW50ID0gKGFtb3VudCA9PT0gMCkgPyAwIDogKGFtb3VudCB8fCAxMCk7XG4gICAgdmFyIHJnYiA9IHRpbnljb2xvcihjb2xvcikudG9SZ2IoKTtcbiAgICByZ2IuciA9IG1hdGhNYXgoMCwgbWF0aE1pbigyNTUsIHJnYi5yIC0gbWF0aFJvdW5kKDI1NSAqIC0gKGFtb3VudCAvIDEwMCkpKSk7XG4gICAgcmdiLmcgPSBtYXRoTWF4KDAsIG1hdGhNaW4oMjU1LCByZ2IuZyAtIG1hdGhSb3VuZCgyNTUgKiAtIChhbW91bnQgLyAxMDApKSkpO1xuICAgIHJnYi5iID0gbWF0aE1heCgwLCBtYXRoTWluKDI1NSwgcmdiLmIgLSBtYXRoUm91bmQoMjU1ICogLSAoYW1vdW50IC8gMTAwKSkpKTtcbiAgICByZXR1cm4gdGlueWNvbG9yKHJnYik7XG59XG5cbmZ1bmN0aW9uIGRhcmtlbiAoY29sb3IsIGFtb3VudCkge1xuICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgMTApO1xuICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgaHNsLmwgLT0gYW1vdW50IC8gMTAwO1xuICAgIGhzbC5sID0gY2xhbXAwMShoc2wubCk7XG4gICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xufVxuXG4vLyBTcGluIHRha2VzIGEgcG9zaXRpdmUgb3IgbmVnYXRpdmUgYW1vdW50IHdpdGhpbiBbLTM2MCwgMzYwXSBpbmRpY2F0aW5nIHRoZSBjaGFuZ2Ugb2YgaHVlLlxuLy8gVmFsdWVzIG91dHNpZGUgb2YgdGhpcyByYW5nZSB3aWxsIGJlIHdyYXBwZWQgaW50byB0aGlzIHJhbmdlLlxuZnVuY3Rpb24gc3Bpbihjb2xvciwgYW1vdW50KSB7XG4gICAgdmFyIGhzbCA9IHRpbnljb2xvcihjb2xvcikudG9Ic2woKTtcbiAgICB2YXIgaHVlID0gKGhzbC5oICsgYW1vdW50KSAlIDM2MDtcbiAgICBoc2wuaCA9IGh1ZSA8IDAgPyAzNjAgKyBodWUgOiBodWU7XG4gICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xufVxuXG4vLyBDb21iaW5hdGlvbiBGdW5jdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVGhhbmtzIHRvIGpRdWVyeSB4Q29sb3IgZm9yIHNvbWUgb2YgdGhlIGlkZWFzIGJlaGluZCB0aGVzZVxuLy8gPGh0dHBzOi8vZ2l0aHViLmNvbS9pbmZ1c2lvbi9qUXVlcnkteGNvbG9yL2Jsb2IvbWFzdGVyL2pxdWVyeS54Y29sb3IuanM+XG5cbmZ1bmN0aW9uIGNvbXBsZW1lbnQoY29sb3IpIHtcbiAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgIGhzbC5oID0gKGhzbC5oICsgMTgwKSAlIDM2MDtcbiAgICByZXR1cm4gdGlueWNvbG9yKGhzbCk7XG59XG5cbmZ1bmN0aW9uIHRyaWFkKGNvbG9yKSB7XG4gICAgdmFyIGhzbCA9IHRpbnljb2xvcihjb2xvcikudG9Ic2woKTtcbiAgICB2YXIgaCA9IGhzbC5oO1xuICAgIHJldHVybiBbXG4gICAgICAgIHRpbnljb2xvcihjb2xvciksXG4gICAgICAgIHRpbnljb2xvcih7IGg6IChoICsgMTIwKSAlIDM2MCwgczogaHNsLnMsIGw6IGhzbC5sIH0pLFxuICAgICAgICB0aW55Y29sb3IoeyBoOiAoaCArIDI0MCkgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubCB9KVxuICAgIF07XG59XG5cbmZ1bmN0aW9uIHRldHJhZChjb2xvcikge1xuICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgdmFyIGggPSBoc2wuaDtcbiAgICByZXR1cm4gW1xuICAgICAgICB0aW55Y29sb3IoY29sb3IpLFxuICAgICAgICB0aW55Y29sb3IoeyBoOiAoaCArIDkwKSAlIDM2MCwgczogaHNsLnMsIGw6IGhzbC5sIH0pLFxuICAgICAgICB0aW55Y29sb3IoeyBoOiAoaCArIDE4MCkgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubCB9KSxcbiAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyAyNzApICUgMzYwLCBzOiBoc2wucywgbDogaHNsLmwgfSlcbiAgICBdO1xufVxuXG5mdW5jdGlvbiBzcGxpdGNvbXBsZW1lbnQoY29sb3IpIHtcbiAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgIHZhciBoID0gaHNsLmg7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgdGlueWNvbG9yKGNvbG9yKSxcbiAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyA3MikgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubH0pLFxuICAgICAgICB0aW55Y29sb3IoeyBoOiAoaCArIDIxNikgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubH0pXG4gICAgXTtcbn1cblxuZnVuY3Rpb24gYW5hbG9nb3VzKGNvbG9yLCByZXN1bHRzLCBzbGljZXMpIHtcbiAgICByZXN1bHRzID0gcmVzdWx0cyB8fCA2O1xuICAgIHNsaWNlcyA9IHNsaWNlcyB8fCAzMDtcblxuICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgdmFyIHBhcnQgPSAzNjAgLyBzbGljZXM7XG4gICAgdmFyIHJldCA9IFt0aW55Y29sb3IoY29sb3IpXTtcblxuICAgIGZvciAoaHNsLmggPSAoKGhzbC5oIC0gKHBhcnQgKiByZXN1bHRzID4+IDEpKSArIDcyMCkgJSAzNjA7IC0tcmVzdWx0czsgKSB7XG4gICAgICAgIGhzbC5oID0gKGhzbC5oICsgcGFydCkgJSAzNjA7XG4gICAgICAgIHJldC5wdXNoKHRpbnljb2xvcihoc2wpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gbW9ub2Nocm9tYXRpYyhjb2xvciwgcmVzdWx0cykge1xuICAgIHJlc3VsdHMgPSByZXN1bHRzIHx8IDY7XG4gICAgdmFyIGhzdiA9IHRpbnljb2xvcihjb2xvcikudG9Ic3YoKTtcbiAgICB2YXIgaCA9IGhzdi5oLCBzID0gaHN2LnMsIHYgPSBoc3YudjtcbiAgICB2YXIgcmV0ID0gW107XG4gICAgdmFyIG1vZGlmaWNhdGlvbiA9IDEgLyByZXN1bHRzO1xuXG4gICAgd2hpbGUgKHJlc3VsdHMtLSkge1xuICAgICAgICByZXQucHVzaCh0aW55Y29sb3IoeyBoOiBoLCBzOiBzLCB2OiB2fSkpO1xuICAgICAgICB2ID0gKHYgKyBtb2RpZmljYXRpb24pICUgMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xufVxuXG4vLyBVdGlsaXR5IEZ1bmN0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnRpbnljb2xvci5taXggPSBmdW5jdGlvbihjb2xvcjEsIGNvbG9yMiwgYW1vdW50KSB7XG4gICAgYW1vdW50ID0gKGFtb3VudCA9PT0gMCkgPyAwIDogKGFtb3VudCB8fCA1MCk7XG5cbiAgICB2YXIgcmdiMSA9IHRpbnljb2xvcihjb2xvcjEpLnRvUmdiKCk7XG4gICAgdmFyIHJnYjIgPSB0aW55Y29sb3IoY29sb3IyKS50b1JnYigpO1xuXG4gICAgdmFyIHAgPSBhbW91bnQgLyAxMDA7XG5cbiAgICB2YXIgcmdiYSA9IHtcbiAgICAgICAgcjogKChyZ2IyLnIgLSByZ2IxLnIpICogcCkgKyByZ2IxLnIsXG4gICAgICAgIGc6ICgocmdiMi5nIC0gcmdiMS5nKSAqIHApICsgcmdiMS5nLFxuICAgICAgICBiOiAoKHJnYjIuYiAtIHJnYjEuYikgKiBwKSArIHJnYjEuYixcbiAgICAgICAgYTogKChyZ2IyLmEgLSByZ2IxLmEpICogcCkgKyByZ2IxLmFcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRpbnljb2xvcihyZ2JhKTtcbn07XG5cblxuLy8gUmVhZGFiaWxpdHkgRnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIDxodHRwOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy1XQ0FHMjAtMjAwODEyMTEvI2NvbnRyYXN0LXJhdGlvZGVmIChXQ0FHIFZlcnNpb24gMilcblxuLy8gYGNvbnRyYXN0YFxuLy8gQW5hbHl6ZSB0aGUgMiBjb2xvcnMgYW5kIHJldHVybnMgdGhlIGNvbG9yIGNvbnRyYXN0IGRlZmluZWQgYnkgKFdDQUcgVmVyc2lvbiAyKVxudGlueWNvbG9yLnJlYWRhYmlsaXR5ID0gZnVuY3Rpb24oY29sb3IxLCBjb2xvcjIpIHtcbiAgICB2YXIgYzEgPSB0aW55Y29sb3IoY29sb3IxKTtcbiAgICB2YXIgYzIgPSB0aW55Y29sb3IoY29sb3IyKTtcbiAgICByZXR1cm4gKE1hdGgubWF4KGMxLmdldEx1bWluYW5jZSgpLGMyLmdldEx1bWluYW5jZSgpKSswLjA1KSAvIChNYXRoLm1pbihjMS5nZXRMdW1pbmFuY2UoKSxjMi5nZXRMdW1pbmFuY2UoKSkrMC4wNSk7XG59O1xuXG4vLyBgaXNSZWFkYWJsZWBcbi8vIEVuc3VyZSB0aGF0IGZvcmVncm91bmQgYW5kIGJhY2tncm91bmQgY29sb3IgY29tYmluYXRpb25zIG1lZXQgV0NBRzIgZ3VpZGVsaW5lcy5cbi8vIFRoZSB0aGlyZCBhcmd1bWVudCBpcyBhbiBvcHRpb25hbCBPYmplY3QuXG4vLyAgICAgIHRoZSAnbGV2ZWwnIHByb3BlcnR5IHN0YXRlcyAnQUEnIG9yICdBQUEnIC0gaWYgbWlzc2luZyBvciBpbnZhbGlkLCBpdCBkZWZhdWx0cyB0byAnQUEnO1xuLy8gICAgICB0aGUgJ3NpemUnIHByb3BlcnR5IHN0YXRlcyAnbGFyZ2UnIG9yICdzbWFsbCcgLSBpZiBtaXNzaW5nIG9yIGludmFsaWQsIGl0IGRlZmF1bHRzIHRvICdzbWFsbCcuXG4vLyBJZiB0aGUgZW50aXJlIG9iamVjdCBpcyBhYnNlbnQsIGlzUmVhZGFibGUgZGVmYXVsdHMgdG8ge2xldmVsOlwiQUFcIixzaXplOlwic21hbGxcIn0uXG5cbi8vICpFeGFtcGxlKlxuLy8gICAgdGlueWNvbG9yLmlzUmVhZGFibGUoXCIjMDAwXCIsIFwiIzExMVwiKSA9PiBmYWxzZVxuLy8gICAgdGlueWNvbG9yLmlzUmVhZGFibGUoXCIjMDAwXCIsIFwiIzExMVwiLHtsZXZlbDpcIkFBXCIsc2l6ZTpcImxhcmdlXCJ9KSA9PiBmYWxzZVxudGlueWNvbG9yLmlzUmVhZGFibGUgPSBmdW5jdGlvbihjb2xvcjEsIGNvbG9yMiwgd2NhZzIpIHtcbiAgICB2YXIgcmVhZGFiaWxpdHkgPSB0aW55Y29sb3IucmVhZGFiaWxpdHkoY29sb3IxLCBjb2xvcjIpO1xuICAgIHZhciB3Y2FnMlBhcm1zLCBvdXQ7XG5cbiAgICBvdXQgPSBmYWxzZTtcblxuICAgIHdjYWcyUGFybXMgPSB2YWxpZGF0ZVdDQUcyUGFybXMod2NhZzIpO1xuICAgIHN3aXRjaCAod2NhZzJQYXJtcy5sZXZlbCArIHdjYWcyUGFybXMuc2l6ZSkge1xuICAgICAgICBjYXNlIFwiQUFzbWFsbFwiOlxuICAgICAgICBjYXNlIFwiQUFBbGFyZ2VcIjpcbiAgICAgICAgICAgIG91dCA9IHJlYWRhYmlsaXR5ID49IDQuNTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQUFsYXJnZVwiOlxuICAgICAgICAgICAgb3V0ID0gcmVhZGFiaWxpdHkgPj0gMztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQUFBc21hbGxcIjpcbiAgICAgICAgICAgIG91dCA9IHJlYWRhYmlsaXR5ID49IDc7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcblxufTtcblxuLy8gYG1vc3RSZWFkYWJsZWBcbi8vIEdpdmVuIGEgYmFzZSBjb2xvciBhbmQgYSBsaXN0IG9mIHBvc3NpYmxlIGZvcmVncm91bmQgb3IgYmFja2dyb3VuZFxuLy8gY29sb3JzIGZvciB0aGF0IGJhc2UsIHJldHVybnMgdGhlIG1vc3QgcmVhZGFibGUgY29sb3IuXG4vLyBPcHRpb25hbGx5IHJldHVybnMgQmxhY2sgb3IgV2hpdGUgaWYgdGhlIG1vc3QgcmVhZGFibGUgY29sb3IgaXMgdW5yZWFkYWJsZS5cbi8vICpFeGFtcGxlKlxuLy8gICAgdGlueWNvbG9yLm1vc3RSZWFkYWJsZSh0aW55Y29sb3IubW9zdFJlYWRhYmxlKFwiIzEyM1wiLCBbXCIjMTI0XCIsIFwiIzEyNVwiXSx7aW5jbHVkZUZhbGxiYWNrQ29sb3JzOmZhbHNlfSkudG9IZXhTdHJpbmcoKTsgLy8gXCIjMTEyMjU1XCJcbi8vICAgIHRpbnljb2xvci5tb3N0UmVhZGFibGUodGlueWNvbG9yLm1vc3RSZWFkYWJsZShcIiMxMjNcIiwgW1wiIzEyNFwiLCBcIiMxMjVcIl0se2luY2x1ZGVGYWxsYmFja0NvbG9yczp0cnVlfSkudG9IZXhTdHJpbmcoKTsgIC8vIFwiI2ZmZmZmZlwiXG4vLyAgICB0aW55Y29sb3IubW9zdFJlYWRhYmxlKFwiI2E4MDE1YVwiLCBbXCIjZmFmM2YzXCJdLHtpbmNsdWRlRmFsbGJhY2tDb2xvcnM6dHJ1ZSxsZXZlbDpcIkFBQVwiLHNpemU6XCJsYXJnZVwifSkudG9IZXhTdHJpbmcoKTsgLy8gXCIjZmFmM2YzXCJcbi8vICAgIHRpbnljb2xvci5tb3N0UmVhZGFibGUoXCIjYTgwMTVhXCIsIFtcIiNmYWYzZjNcIl0se2luY2x1ZGVGYWxsYmFja0NvbG9yczp0cnVlLGxldmVsOlwiQUFBXCIsc2l6ZTpcInNtYWxsXCJ9KS50b0hleFN0cmluZygpOyAvLyBcIiNmZmZmZmZcIlxudGlueWNvbG9yLm1vc3RSZWFkYWJsZSA9IGZ1bmN0aW9uKGJhc2VDb2xvciwgY29sb3JMaXN0LCBhcmdzKSB7XG4gICAgdmFyIGJlc3RDb2xvciA9IG51bGw7XG4gICAgdmFyIGJlc3RTY29yZSA9IDA7XG4gICAgdmFyIHJlYWRhYmlsaXR5O1xuICAgIHZhciBpbmNsdWRlRmFsbGJhY2tDb2xvcnMsIGxldmVsLCBzaXplIDtcbiAgICBhcmdzID0gYXJncyB8fCB7fTtcbiAgICBpbmNsdWRlRmFsbGJhY2tDb2xvcnMgPSBhcmdzLmluY2x1ZGVGYWxsYmFja0NvbG9ycyA7XG4gICAgbGV2ZWwgPSBhcmdzLmxldmVsO1xuICAgIHNpemUgPSBhcmdzLnNpemU7XG5cbiAgICBmb3IgKHZhciBpPSAwOyBpIDwgY29sb3JMaXN0Lmxlbmd0aCA7IGkrKykge1xuICAgICAgICByZWFkYWJpbGl0eSA9IHRpbnljb2xvci5yZWFkYWJpbGl0eShiYXNlQ29sb3IsIGNvbG9yTGlzdFtpXSk7XG4gICAgICAgIGlmIChyZWFkYWJpbGl0eSA+IGJlc3RTY29yZSkge1xuICAgICAgICAgICAgYmVzdFNjb3JlID0gcmVhZGFiaWxpdHk7XG4gICAgICAgICAgICBiZXN0Q29sb3IgPSB0aW55Y29sb3IoY29sb3JMaXN0W2ldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aW55Y29sb3IuaXNSZWFkYWJsZShiYXNlQ29sb3IsIGJlc3RDb2xvciwge1wibGV2ZWxcIjpsZXZlbCxcInNpemVcIjpzaXplfSkgfHwgIWluY2x1ZGVGYWxsYmFja0NvbG9ycykge1xuICAgICAgICByZXR1cm4gYmVzdENvbG9yO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXJncy5pbmNsdWRlRmFsbGJhY2tDb2xvcnM9ZmFsc2U7XG4gICAgICAgIHJldHVybiB0aW55Y29sb3IubW9zdFJlYWRhYmxlKGJhc2VDb2xvcixbXCIjZmZmXCIsIFwiIzAwMFwiXSxhcmdzKTtcbiAgICB9XG59O1xuXG5cbi8vIEJpZyBMaXN0IG9mIENvbG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyA8aHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1jb2xvci8jc3ZnLWNvbG9yPlxudmFyIG5hbWVzID0gdGlueWNvbG9yLm5hbWVzID0ge1xuICAgIGFsaWNlYmx1ZTogXCJmMGY4ZmZcIixcbiAgICBhbnRpcXVld2hpdGU6IFwiZmFlYmQ3XCIsXG4gICAgYXF1YTogXCIwZmZcIixcbiAgICBhcXVhbWFyaW5lOiBcIjdmZmZkNFwiLFxuICAgIGF6dXJlOiBcImYwZmZmZlwiLFxuICAgIGJlaWdlOiBcImY1ZjVkY1wiLFxuICAgIGJpc3F1ZTogXCJmZmU0YzRcIixcbiAgICBibGFjazogXCIwMDBcIixcbiAgICBibGFuY2hlZGFsbW9uZDogXCJmZmViY2RcIixcbiAgICBibHVlOiBcIjAwZlwiLFxuICAgIGJsdWV2aW9sZXQ6IFwiOGEyYmUyXCIsXG4gICAgYnJvd246IFwiYTUyYTJhXCIsXG4gICAgYnVybHl3b29kOiBcImRlYjg4N1wiLFxuICAgIGJ1cm50c2llbm5hOiBcImVhN2U1ZFwiLFxuICAgIGNhZGV0Ymx1ZTogXCI1ZjllYTBcIixcbiAgICBjaGFydHJldXNlOiBcIjdmZmYwMFwiLFxuICAgIGNob2NvbGF0ZTogXCJkMjY5MWVcIixcbiAgICBjb3JhbDogXCJmZjdmNTBcIixcbiAgICBjb3JuZmxvd2VyYmx1ZTogXCI2NDk1ZWRcIixcbiAgICBjb3Juc2lsazogXCJmZmY4ZGNcIixcbiAgICBjcmltc29uOiBcImRjMTQzY1wiLFxuICAgIGN5YW46IFwiMGZmXCIsXG4gICAgZGFya2JsdWU6IFwiMDAwMDhiXCIsXG4gICAgZGFya2N5YW46IFwiMDA4YjhiXCIsXG4gICAgZGFya2dvbGRlbnJvZDogXCJiODg2MGJcIixcbiAgICBkYXJrZ3JheTogXCJhOWE5YTlcIixcbiAgICBkYXJrZ3JlZW46IFwiMDA2NDAwXCIsXG4gICAgZGFya2dyZXk6IFwiYTlhOWE5XCIsXG4gICAgZGFya2toYWtpOiBcImJkYjc2YlwiLFxuICAgIGRhcmttYWdlbnRhOiBcIjhiMDA4YlwiLFxuICAgIGRhcmtvbGl2ZWdyZWVuOiBcIjU1NmIyZlwiLFxuICAgIGRhcmtvcmFuZ2U6IFwiZmY4YzAwXCIsXG4gICAgZGFya29yY2hpZDogXCI5OTMyY2NcIixcbiAgICBkYXJrcmVkOiBcIjhiMDAwMFwiLFxuICAgIGRhcmtzYWxtb246IFwiZTk5NjdhXCIsXG4gICAgZGFya3NlYWdyZWVuOiBcIjhmYmM4ZlwiLFxuICAgIGRhcmtzbGF0ZWJsdWU6IFwiNDgzZDhiXCIsXG4gICAgZGFya3NsYXRlZ3JheTogXCIyZjRmNGZcIixcbiAgICBkYXJrc2xhdGVncmV5OiBcIjJmNGY0ZlwiLFxuICAgIGRhcmt0dXJxdW9pc2U6IFwiMDBjZWQxXCIsXG4gICAgZGFya3Zpb2xldDogXCI5NDAwZDNcIixcbiAgICBkZWVwcGluazogXCJmZjE0OTNcIixcbiAgICBkZWVwc2t5Ymx1ZTogXCIwMGJmZmZcIixcbiAgICBkaW1ncmF5OiBcIjY5Njk2OVwiLFxuICAgIGRpbWdyZXk6IFwiNjk2OTY5XCIsXG4gICAgZG9kZ2VyYmx1ZTogXCIxZTkwZmZcIixcbiAgICBmaXJlYnJpY2s6IFwiYjIyMjIyXCIsXG4gICAgZmxvcmFsd2hpdGU6IFwiZmZmYWYwXCIsXG4gICAgZm9yZXN0Z3JlZW46IFwiMjI4YjIyXCIsXG4gICAgZnVjaHNpYTogXCJmMGZcIixcbiAgICBnYWluc2Jvcm86IFwiZGNkY2RjXCIsXG4gICAgZ2hvc3R3aGl0ZTogXCJmOGY4ZmZcIixcbiAgICBnb2xkOiBcImZmZDcwMFwiLFxuICAgIGdvbGRlbnJvZDogXCJkYWE1MjBcIixcbiAgICBncmF5OiBcIjgwODA4MFwiLFxuICAgIGdyZWVuOiBcIjAwODAwMFwiLFxuICAgIGdyZWVueWVsbG93OiBcImFkZmYyZlwiLFxuICAgIGdyZXk6IFwiODA4MDgwXCIsXG4gICAgaG9uZXlkZXc6IFwiZjBmZmYwXCIsXG4gICAgaG90cGluazogXCJmZjY5YjRcIixcbiAgICBpbmRpYW5yZWQ6IFwiY2Q1YzVjXCIsXG4gICAgaW5kaWdvOiBcIjRiMDA4MlwiLFxuICAgIGl2b3J5OiBcImZmZmZmMFwiLFxuICAgIGtoYWtpOiBcImYwZTY4Y1wiLFxuICAgIGxhdmVuZGVyOiBcImU2ZTZmYVwiLFxuICAgIGxhdmVuZGVyYmx1c2g6IFwiZmZmMGY1XCIsXG4gICAgbGF3bmdyZWVuOiBcIjdjZmMwMFwiLFxuICAgIGxlbW9uY2hpZmZvbjogXCJmZmZhY2RcIixcbiAgICBsaWdodGJsdWU6IFwiYWRkOGU2XCIsXG4gICAgbGlnaHRjb3JhbDogXCJmMDgwODBcIixcbiAgICBsaWdodGN5YW46IFwiZTBmZmZmXCIsXG4gICAgbGlnaHRnb2xkZW5yb2R5ZWxsb3c6IFwiZmFmYWQyXCIsXG4gICAgbGlnaHRncmF5OiBcImQzZDNkM1wiLFxuICAgIGxpZ2h0Z3JlZW46IFwiOTBlZTkwXCIsXG4gICAgbGlnaHRncmV5OiBcImQzZDNkM1wiLFxuICAgIGxpZ2h0cGluazogXCJmZmI2YzFcIixcbiAgICBsaWdodHNhbG1vbjogXCJmZmEwN2FcIixcbiAgICBsaWdodHNlYWdyZWVuOiBcIjIwYjJhYVwiLFxuICAgIGxpZ2h0c2t5Ymx1ZTogXCI4N2NlZmFcIixcbiAgICBsaWdodHNsYXRlZ3JheTogXCI3ODlcIixcbiAgICBsaWdodHNsYXRlZ3JleTogXCI3ODlcIixcbiAgICBsaWdodHN0ZWVsYmx1ZTogXCJiMGM0ZGVcIixcbiAgICBsaWdodHllbGxvdzogXCJmZmZmZTBcIixcbiAgICBsaW1lOiBcIjBmMFwiLFxuICAgIGxpbWVncmVlbjogXCIzMmNkMzJcIixcbiAgICBsaW5lbjogXCJmYWYwZTZcIixcbiAgICBtYWdlbnRhOiBcImYwZlwiLFxuICAgIG1hcm9vbjogXCI4MDAwMDBcIixcbiAgICBtZWRpdW1hcXVhbWFyaW5lOiBcIjY2Y2RhYVwiLFxuICAgIG1lZGl1bWJsdWU6IFwiMDAwMGNkXCIsXG4gICAgbWVkaXVtb3JjaGlkOiBcImJhNTVkM1wiLFxuICAgIG1lZGl1bXB1cnBsZTogXCI5MzcwZGJcIixcbiAgICBtZWRpdW1zZWFncmVlbjogXCIzY2IzNzFcIixcbiAgICBtZWRpdW1zbGF0ZWJsdWU6IFwiN2I2OGVlXCIsXG4gICAgbWVkaXVtc3ByaW5nZ3JlZW46IFwiMDBmYTlhXCIsXG4gICAgbWVkaXVtdHVycXVvaXNlOiBcIjQ4ZDFjY1wiLFxuICAgIG1lZGl1bXZpb2xldHJlZDogXCJjNzE1ODVcIixcbiAgICBtaWRuaWdodGJsdWU6IFwiMTkxOTcwXCIsXG4gICAgbWludGNyZWFtOiBcImY1ZmZmYVwiLFxuICAgIG1pc3R5cm9zZTogXCJmZmU0ZTFcIixcbiAgICBtb2NjYXNpbjogXCJmZmU0YjVcIixcbiAgICBuYXZham93aGl0ZTogXCJmZmRlYWRcIixcbiAgICBuYXZ5OiBcIjAwMDA4MFwiLFxuICAgIG9sZGxhY2U6IFwiZmRmNWU2XCIsXG4gICAgb2xpdmU6IFwiODA4MDAwXCIsXG4gICAgb2xpdmVkcmFiOiBcIjZiOGUyM1wiLFxuICAgIG9yYW5nZTogXCJmZmE1MDBcIixcbiAgICBvcmFuZ2VyZWQ6IFwiZmY0NTAwXCIsXG4gICAgb3JjaGlkOiBcImRhNzBkNlwiLFxuICAgIHBhbGVnb2xkZW5yb2Q6IFwiZWVlOGFhXCIsXG4gICAgcGFsZWdyZWVuOiBcIjk4ZmI5OFwiLFxuICAgIHBhbGV0dXJxdW9pc2U6IFwiYWZlZWVlXCIsXG4gICAgcGFsZXZpb2xldHJlZDogXCJkYjcwOTNcIixcbiAgICBwYXBheWF3aGlwOiBcImZmZWZkNVwiLFxuICAgIHBlYWNocHVmZjogXCJmZmRhYjlcIixcbiAgICBwZXJ1OiBcImNkODUzZlwiLFxuICAgIHBpbms6IFwiZmZjMGNiXCIsXG4gICAgcGx1bTogXCJkZGEwZGRcIixcbiAgICBwb3dkZXJibHVlOiBcImIwZTBlNlwiLFxuICAgIHB1cnBsZTogXCI4MDAwODBcIixcbiAgICByZWJlY2NhcHVycGxlOiBcIjY2MzM5OVwiLFxuICAgIHJlZDogXCJmMDBcIixcbiAgICByb3N5YnJvd246IFwiYmM4ZjhmXCIsXG4gICAgcm95YWxibHVlOiBcIjQxNjllMVwiLFxuICAgIHNhZGRsZWJyb3duOiBcIjhiNDUxM1wiLFxuICAgIHNhbG1vbjogXCJmYTgwNzJcIixcbiAgICBzYW5keWJyb3duOiBcImY0YTQ2MFwiLFxuICAgIHNlYWdyZWVuOiBcIjJlOGI1N1wiLFxuICAgIHNlYXNoZWxsOiBcImZmZjVlZVwiLFxuICAgIHNpZW5uYTogXCJhMDUyMmRcIixcbiAgICBzaWx2ZXI6IFwiYzBjMGMwXCIsXG4gICAgc2t5Ymx1ZTogXCI4N2NlZWJcIixcbiAgICBzbGF0ZWJsdWU6IFwiNmE1YWNkXCIsXG4gICAgc2xhdGVncmF5OiBcIjcwODA5MFwiLFxuICAgIHNsYXRlZ3JleTogXCI3MDgwOTBcIixcbiAgICBzbm93OiBcImZmZmFmYVwiLFxuICAgIHNwcmluZ2dyZWVuOiBcIjAwZmY3ZlwiLFxuICAgIHN0ZWVsYmx1ZTogXCI0NjgyYjRcIixcbiAgICB0YW46IFwiZDJiNDhjXCIsXG4gICAgdGVhbDogXCIwMDgwODBcIixcbiAgICB0aGlzdGxlOiBcImQ4YmZkOFwiLFxuICAgIHRvbWF0bzogXCJmZjYzNDdcIixcbiAgICB0dXJxdW9pc2U6IFwiNDBlMGQwXCIsXG4gICAgdmlvbGV0OiBcImVlODJlZVwiLFxuICAgIHdoZWF0OiBcImY1ZGViM1wiLFxuICAgIHdoaXRlOiBcImZmZlwiLFxuICAgIHdoaXRlc21va2U6IFwiZjVmNWY1XCIsXG4gICAgeWVsbG93OiBcImZmMFwiLFxuICAgIHllbGxvd2dyZWVuOiBcIjlhY2QzMlwiXG59O1xuXG4vLyBNYWtlIGl0IGVhc3kgdG8gYWNjZXNzIGNvbG9ycyB2aWEgYGhleE5hbWVzW2hleF1gXG52YXIgaGV4TmFtZXMgPSB0aW55Y29sb3IuaGV4TmFtZXMgPSBmbGlwKG5hbWVzKTtcblxuXG4vLyBVdGlsaXRpZXNcbi8vIC0tLS0tLS0tLVxuXG4vLyBgeyAnbmFtZTEnOiAndmFsMScgfWAgYmVjb21lcyBgeyAndmFsMSc6ICduYW1lMScgfWBcbmZ1bmN0aW9uIGZsaXAobykge1xuICAgIHZhciBmbGlwcGVkID0geyB9O1xuICAgIGZvciAodmFyIGkgaW4gbykge1xuICAgICAgICBpZiAoby5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgZmxpcHBlZFtvW2ldXSA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZsaXBwZWQ7XG59XG5cbi8vIFJldHVybiBhIHZhbGlkIGFscGhhIHZhbHVlIFswLDFdIHdpdGggYWxsIGludmFsaWQgdmFsdWVzIGJlaW5nIHNldCB0byAxXG5mdW5jdGlvbiBib3VuZEFscGhhKGEpIHtcbiAgICBhID0gcGFyc2VGbG9hdChhKTtcblxuICAgIGlmIChpc05hTihhKSB8fCBhIDwgMCB8fCBhID4gMSkge1xuICAgICAgICBhID0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbn1cblxuLy8gVGFrZSBpbnB1dCBmcm9tIFswLCBuXSBhbmQgcmV0dXJuIGl0IGFzIFswLCAxXVxuZnVuY3Rpb24gYm91bmQwMShuLCBtYXgpIHtcbiAgICBpZiAoaXNPbmVQb2ludFplcm8obikpIHsgbiA9IFwiMTAwJVwiOyB9XG5cbiAgICB2YXIgcHJvY2Vzc1BlcmNlbnQgPSBpc1BlcmNlbnRhZ2Uobik7XG4gICAgbiA9IG1hdGhNaW4obWF4LCBtYXRoTWF4KDAsIHBhcnNlRmxvYXQobikpKTtcblxuICAgIC8vIEF1dG9tYXRpY2FsbHkgY29udmVydCBwZXJjZW50YWdlIGludG8gbnVtYmVyXG4gICAgaWYgKHByb2Nlc3NQZXJjZW50KSB7XG4gICAgICAgIG4gPSBwYXJzZUludChuICogbWF4LCAxMCkgLyAxMDA7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGZsb2F0aW5nIHBvaW50IHJvdW5kaW5nIGVycm9yc1xuICAgIGlmICgoTWF0aC5hYnMobiAtIG1heCkgPCAwLjAwMDAwMSkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuXG4gICAgLy8gQ29udmVydCBpbnRvIFswLCAxXSByYW5nZSBpZiBpdCBpc24ndCBhbHJlYWR5XG4gICAgcmV0dXJuIChuICUgbWF4KSAvIHBhcnNlRmxvYXQobWF4KTtcbn1cblxuLy8gRm9yY2UgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxXG5mdW5jdGlvbiBjbGFtcDAxKHZhbCkge1xuICAgIHJldHVybiBtYXRoTWluKDEsIG1hdGhNYXgoMCwgdmFsKSk7XG59XG5cbi8vIFBhcnNlIGEgYmFzZS0xNiBoZXggdmFsdWUgaW50byBhIGJhc2UtMTAgaW50ZWdlclxuZnVuY3Rpb24gcGFyc2VJbnRGcm9tSGV4KHZhbCkge1xuICAgIHJldHVybiBwYXJzZUludCh2YWwsIDE2KTtcbn1cblxuLy8gTmVlZCB0byBoYW5kbGUgMS4wIGFzIDEwMCUsIHNpbmNlIG9uY2UgaXQgaXMgYSBudW1iZXIsIHRoZXJlIGlzIG5vIGRpZmZlcmVuY2UgYmV0d2VlbiBpdCBhbmQgMVxuLy8gPGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzQyMjA3Mi9qYXZhc2NyaXB0LWhvdy10by1kZXRlY3QtbnVtYmVyLWFzLWEtZGVjaW1hbC1pbmNsdWRpbmctMS0wPlxuZnVuY3Rpb24gaXNPbmVQb2ludFplcm8obikge1xuICAgIHJldHVybiB0eXBlb2YgbiA9PSBcInN0cmluZ1wiICYmIG4uaW5kZXhPZignLicpICE9IC0xICYmIHBhcnNlRmxvYXQobikgPT09IDE7XG59XG5cbi8vIENoZWNrIHRvIHNlZSBpZiBzdHJpbmcgcGFzc2VkIGluIGlzIGEgcGVyY2VudGFnZVxuZnVuY3Rpb24gaXNQZXJjZW50YWdlKG4pIHtcbiAgICByZXR1cm4gdHlwZW9mIG4gPT09IFwic3RyaW5nXCIgJiYgbi5pbmRleE9mKCclJykgIT0gLTE7XG59XG5cbi8vIEZvcmNlIGEgaGV4IHZhbHVlIHRvIGhhdmUgMiBjaGFyYWN0ZXJzXG5mdW5jdGlvbiBwYWQyKGMpIHtcbiAgICByZXR1cm4gYy5sZW5ndGggPT0gMSA/ICcwJyArIGMgOiAnJyArIGM7XG59XG5cbi8vIFJlcGxhY2UgYSBkZWNpbWFsIHdpdGggaXQncyBwZXJjZW50YWdlIHZhbHVlXG5mdW5jdGlvbiBjb252ZXJ0VG9QZXJjZW50YWdlKG4pIHtcbiAgICBpZiAobiA8PSAxKSB7XG4gICAgICAgIG4gPSAobiAqIDEwMCkgKyBcIiVcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gbjtcbn1cblxuLy8gQ29udmVydHMgYSBkZWNpbWFsIHRvIGEgaGV4IHZhbHVlXG5mdW5jdGlvbiBjb252ZXJ0RGVjaW1hbFRvSGV4KGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGQpICogMjU1KS50b1N0cmluZygxNik7XG59XG4vLyBDb252ZXJ0cyBhIGhleCB2YWx1ZSB0byBhIGRlY2ltYWxcbmZ1bmN0aW9uIGNvbnZlcnRIZXhUb0RlY2ltYWwoaCkge1xuICAgIHJldHVybiAocGFyc2VJbnRGcm9tSGV4KGgpIC8gMjU1KTtcbn1cblxudmFyIG1hdGNoZXJzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gPGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtdmFsdWVzLyNpbnRlZ2Vycz5cbiAgICB2YXIgQ1NTX0lOVEVHRVIgPSBcIlstXFxcXCtdP1xcXFxkKyU/XCI7XG5cbiAgICAvLyA8aHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy12YWx1ZXMvI251bWJlci12YWx1ZT5cbiAgICB2YXIgQ1NTX05VTUJFUiA9IFwiWy1cXFxcK10/XFxcXGQqXFxcXC5cXFxcZCslP1wiO1xuXG4gICAgLy8gQWxsb3cgcG9zaXRpdmUvbmVnYXRpdmUgaW50ZWdlci9udW1iZXIuICBEb24ndCBjYXB0dXJlIHRoZSBlaXRoZXIvb3IsIGp1c3QgdGhlIGVudGlyZSBvdXRjb21lLlxuICAgIHZhciBDU1NfVU5JVCA9IFwiKD86XCIgKyBDU1NfTlVNQkVSICsgXCIpfCg/OlwiICsgQ1NTX0lOVEVHRVIgKyBcIilcIjtcblxuICAgIC8vIEFjdHVhbCBtYXRjaGluZy5cbiAgICAvLyBQYXJlbnRoZXNlcyBhbmQgY29tbWFzIGFyZSBvcHRpb25hbCwgYnV0IG5vdCByZXF1aXJlZC5cbiAgICAvLyBXaGl0ZXNwYWNlIGNhbiB0YWtlIHRoZSBwbGFjZSBvZiBjb21tYXMgb3Igb3BlbmluZyBwYXJlblxuICAgIHZhciBQRVJNSVNTSVZFX01BVENIMyA9IFwiW1xcXFxzfFxcXFwoXSsoXCIgKyBDU1NfVU5JVCArIFwiKVssfFxcXFxzXSsoXCIgKyBDU1NfVU5JVCArIFwiKVssfFxcXFxzXSsoXCIgKyBDU1NfVU5JVCArIFwiKVxcXFxzKlxcXFwpP1wiO1xuICAgIHZhciBQRVJNSVNTSVZFX01BVENINCA9IFwiW1xcXFxzfFxcXFwoXSsoXCIgKyBDU1NfVU5JVCArIFwiKVssfFxcXFxzXSsoXCIgKyBDU1NfVU5JVCArIFwiKVssfFxcXFxzXSsoXCIgKyBDU1NfVU5JVCArIFwiKVssfFxcXFxzXSsoXCIgKyBDU1NfVU5JVCArIFwiKVxcXFxzKlxcXFwpP1wiO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgQ1NTX1VOSVQ6IG5ldyBSZWdFeHAoQ1NTX1VOSVQpLFxuICAgICAgICByZ2I6IG5ldyBSZWdFeHAoXCJyZ2JcIiArIFBFUk1JU1NJVkVfTUFUQ0gzKSxcbiAgICAgICAgcmdiYTogbmV3IFJlZ0V4cChcInJnYmFcIiArIFBFUk1JU1NJVkVfTUFUQ0g0KSxcbiAgICAgICAgaHNsOiBuZXcgUmVnRXhwKFwiaHNsXCIgKyBQRVJNSVNTSVZFX01BVENIMyksXG4gICAgICAgIGhzbGE6IG5ldyBSZWdFeHAoXCJoc2xhXCIgKyBQRVJNSVNTSVZFX01BVENINCksXG4gICAgICAgIGhzdjogbmV3IFJlZ0V4cChcImhzdlwiICsgUEVSTUlTU0lWRV9NQVRDSDMpLFxuICAgICAgICBoc3ZhOiBuZXcgUmVnRXhwKFwiaHN2YVwiICsgUEVSTUlTU0lWRV9NQVRDSDQpLFxuICAgICAgICBoZXgzOiAvXiM/KFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pJC8sXG4gICAgICAgIGhleDY6IC9eIz8oWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkkLyxcbiAgICAgICAgaGV4NDogL14jPyhbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkkLyxcbiAgICAgICAgaGV4ODogL14jPyhbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkkL1xuICAgIH07XG59KSgpO1xuXG4vLyBgaXNWYWxpZENTU1VuaXRgXG4vLyBUYWtlIGluIGEgc2luZ2xlIHN0cmluZyAvIG51bWJlciBhbmQgY2hlY2sgdG8gc2VlIGlmIGl0IGxvb2tzIGxpa2UgYSBDU1MgdW5pdFxuLy8gKHNlZSBgbWF0Y2hlcnNgIGFib3ZlIGZvciBkZWZpbml0aW9uKS5cbmZ1bmN0aW9uIGlzVmFsaWRDU1NVbml0KGNvbG9yKSB7XG4gICAgcmV0dXJuICEhbWF0Y2hlcnMuQ1NTX1VOSVQuZXhlYyhjb2xvcik7XG59XG5cbi8vIGBzdHJpbmdJbnB1dFRvT2JqZWN0YFxuLy8gUGVybWlzc2l2ZSBzdHJpbmcgcGFyc2luZy4gIFRha2UgaW4gYSBudW1iZXIgb2YgZm9ybWF0cywgYW5kIG91dHB1dCBhbiBvYmplY3Rcbi8vIGJhc2VkIG9uIGRldGVjdGVkIGZvcm1hdC4gIFJldHVybnMgYHsgciwgZywgYiB9YCBvciBgeyBoLCBzLCBsIH1gIG9yIGB7IGgsIHMsIHZ9YFxuZnVuY3Rpb24gc3RyaW5nSW5wdXRUb09iamVjdChjb2xvcikge1xuXG4gICAgY29sb3IgPSBjb2xvci5yZXBsYWNlKHRyaW1MZWZ0LCcnKS5yZXBsYWNlKHRyaW1SaWdodCwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIG5hbWVkID0gZmFsc2U7XG4gICAgaWYgKG5hbWVzW2NvbG9yXSkge1xuICAgICAgICBjb2xvciA9IG5hbWVzW2NvbG9yXTtcbiAgICAgICAgbmFtZWQgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2xvciA9PSAndHJhbnNwYXJlbnQnKSB7XG4gICAgICAgIHJldHVybiB7IHI6IDAsIGc6IDAsIGI6IDAsIGE6IDAsIGZvcm1hdDogXCJuYW1lXCIgfTtcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gbWF0Y2ggc3RyaW5nIGlucHV0IHVzaW5nIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXG4gICAgLy8gS2VlcCBtb3N0IG9mIHRoZSBudW1iZXIgYm91bmRpbmcgb3V0IG9mIHRoaXMgZnVuY3Rpb24gLSBkb24ndCB3b3JyeSBhYm91dCBbMCwxXSBvciBbMCwxMDBdIG9yIFswLDM2MF1cbiAgICAvLyBKdXN0IHJldHVybiBhbiBvYmplY3QgYW5kIGxldCB0aGUgY29udmVyc2lvbiBmdW5jdGlvbnMgaGFuZGxlIHRoYXQuXG4gICAgLy8gVGhpcyB3YXkgdGhlIHJlc3VsdCB3aWxsIGJlIHRoZSBzYW1lIHdoZXRoZXIgdGhlIHRpbnljb2xvciBpcyBpbml0aWFsaXplZCB3aXRoIHN0cmluZyBvciBvYmplY3QuXG4gICAgdmFyIG1hdGNoO1xuICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5yZ2IuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7IHI6IG1hdGNoWzFdLCBnOiBtYXRjaFsyXSwgYjogbWF0Y2hbM10gfTtcbiAgICB9XG4gICAgaWYgKChtYXRjaCA9IG1hdGNoZXJzLnJnYmEuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7IHI6IG1hdGNoWzFdLCBnOiBtYXRjaFsyXSwgYjogbWF0Y2hbM10sIGE6IG1hdGNoWzRdIH07XG4gICAgfVxuICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5oc2wuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7IGg6IG1hdGNoWzFdLCBzOiBtYXRjaFsyXSwgbDogbWF0Y2hbM10gfTtcbiAgICB9XG4gICAgaWYgKChtYXRjaCA9IG1hdGNoZXJzLmhzbGEuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7IGg6IG1hdGNoWzFdLCBzOiBtYXRjaFsyXSwgbDogbWF0Y2hbM10sIGE6IG1hdGNoWzRdIH07XG4gICAgfVxuICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5oc3YuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7IGg6IG1hdGNoWzFdLCBzOiBtYXRjaFsyXSwgdjogbWF0Y2hbM10gfTtcbiAgICB9XG4gICAgaWYgKChtYXRjaCA9IG1hdGNoZXJzLmhzdmEuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7IGg6IG1hdGNoWzFdLCBzOiBtYXRjaFsyXSwgdjogbWF0Y2hbM10sIGE6IG1hdGNoWzRdIH07XG4gICAgfVxuICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5oZXg4LmV4ZWMoY29sb3IpKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcjogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzFdKSxcbiAgICAgICAgICAgIGc6IHBhcnNlSW50RnJvbUhleChtYXRjaFsyXSksXG4gICAgICAgICAgICBiOiBwYXJzZUludEZyb21IZXgobWF0Y2hbM10pLFxuICAgICAgICAgICAgYTogY29udmVydEhleFRvRGVjaW1hbChtYXRjaFs0XSksXG4gICAgICAgICAgICBmb3JtYXQ6IG5hbWVkID8gXCJuYW1lXCIgOiBcImhleDhcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMuaGV4Ni5leGVjKGNvbG9yKSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHI6IHBhcnNlSW50RnJvbUhleChtYXRjaFsxXSksXG4gICAgICAgICAgICBnOiBwYXJzZUludEZyb21IZXgobWF0Y2hbMl0pLFxuICAgICAgICAgICAgYjogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzNdKSxcbiAgICAgICAgICAgIGZvcm1hdDogbmFtZWQgPyBcIm5hbWVcIiA6IFwiaGV4XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKChtYXRjaCA9IG1hdGNoZXJzLmhleDQuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByOiBwYXJzZUludEZyb21IZXgobWF0Y2hbMV0gKyAnJyArIG1hdGNoWzFdKSxcbiAgICAgICAgICAgIGc6IHBhcnNlSW50RnJvbUhleChtYXRjaFsyXSArICcnICsgbWF0Y2hbMl0pLFxuICAgICAgICAgICAgYjogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzNdICsgJycgKyBtYXRjaFszXSksXG4gICAgICAgICAgICBhOiBjb252ZXJ0SGV4VG9EZWNpbWFsKG1hdGNoWzRdICsgJycgKyBtYXRjaFs0XSksXG4gICAgICAgICAgICBmb3JtYXQ6IG5hbWVkID8gXCJuYW1lXCIgOiBcImhleDhcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMuaGV4My5leGVjKGNvbG9yKSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHI6IHBhcnNlSW50RnJvbUhleChtYXRjaFsxXSArICcnICsgbWF0Y2hbMV0pLFxuICAgICAgICAgICAgZzogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzJdICsgJycgKyBtYXRjaFsyXSksXG4gICAgICAgICAgICBiOiBwYXJzZUludEZyb21IZXgobWF0Y2hbM10gKyAnJyArIG1hdGNoWzNdKSxcbiAgICAgICAgICAgIGZvcm1hdDogbmFtZWQgPyBcIm5hbWVcIiA6IFwiaGV4XCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlV0NBRzJQYXJtcyhwYXJtcykge1xuICAgIC8vIHJldHVybiB2YWxpZCBXQ0FHMiBwYXJtcyBmb3IgaXNSZWFkYWJsZS5cbiAgICAvLyBJZiBpbnB1dCBwYXJtcyBhcmUgaW52YWxpZCwgcmV0dXJuIHtcImxldmVsXCI6XCJBQVwiLCBcInNpemVcIjpcInNtYWxsXCJ9XG4gICAgdmFyIGxldmVsLCBzaXplO1xuICAgIHBhcm1zID0gcGFybXMgfHwge1wibGV2ZWxcIjpcIkFBXCIsIFwic2l6ZVwiOlwic21hbGxcIn07XG4gICAgbGV2ZWwgPSAocGFybXMubGV2ZWwgfHwgXCJBQVwiKS50b1VwcGVyQ2FzZSgpO1xuICAgIHNpemUgPSAocGFybXMuc2l6ZSB8fCBcInNtYWxsXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxldmVsICE9PSBcIkFBXCIgJiYgbGV2ZWwgIT09IFwiQUFBXCIpIHtcbiAgICAgICAgbGV2ZWwgPSBcIkFBXCI7XG4gICAgfVxuICAgIGlmIChzaXplICE9PSBcInNtYWxsXCIgJiYgc2l6ZSAhPT0gXCJsYXJnZVwiKSB7XG4gICAgICAgIHNpemUgPSBcInNtYWxsXCI7XG4gICAgfVxuICAgIHJldHVybiB7XCJsZXZlbFwiOmxldmVsLCBcInNpemVcIjpzaXplfTtcbn1cblxuLy8gTm9kZTogRXhwb3J0IGZ1bmN0aW9uXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gdGlueWNvbG9yO1xufVxuLy8gQU1EL3JlcXVpcmVqczogRGVmaW5lIHRoZSBtb2R1bGVcbmVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmdW5jdGlvbiAoKSB7cmV0dXJuIHRpbnljb2xvcjt9KTtcbn1cbi8vIEJyb3dzZXI6IEV4cG9zZSB0byB3aW5kb3dcbmVsc2Uge1xuICAgIHdpbmRvdy50aW55Y29sb3IgPSB0aW55Y29sb3I7XG59XG5cbn0pKE1hdGgpO1xuIiwiLypcbiAqIFRvYXN0clxuICogQ29weXJpZ2h0IDIwMTItMjAxNVxuICogQXV0aG9yczogSm9obiBQYXBhLCBIYW5zIEZqw6RsbGVtYXJrLCBhbmQgVGltIEZlcnJlbGwuXG4gKiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogVXNlLCByZXByb2R1Y3Rpb24sIGRpc3RyaWJ1dGlvbiwgYW5kIG1vZGlmaWNhdGlvbiBvZiB0aGlzIGNvZGUgaXMgc3ViamVjdCB0byB0aGUgdGVybXMgYW5kXG4gKiBjb25kaXRpb25zIG9mIHRoZSBNSVQgbGljZW5zZSwgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gKlxuICogQVJJQSBTdXBwb3J0OiBHcmV0YSBLcmFmc2lnXG4gKlxuICogUHJvamVjdDogaHR0cHM6Ly9naXRodWIuY29tL0NvZGVTZXZlbi90b2FzdHJcbiAqL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuKGZ1bmN0aW9uIChkZWZpbmUpIHtcbiAgICBkZWZpbmUoWydqcXVlcnknXSwgZnVuY3Rpb24gKCQpIHtcbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGNvbnRhaW5lcjtcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lcjtcbiAgICAgICAgICAgIHZhciB0b2FzdElkID0gMDtcbiAgICAgICAgICAgIHZhciB0b2FzdFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgZXJyb3I6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgaW5mbzogJ2luZm8nLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICB3YXJuaW5nOiAnd2FybmluZydcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB0b2FzdHIgPSB7XG4gICAgICAgICAgICAgICAgY2xlYXI6IGNsZWFyLFxuICAgICAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBnZXRDb250YWluZXI6IGdldENvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBpbmZvOiBpbmZvLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZTogc3Vic2NyaWJlLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzIuMS4zJyxcbiAgICAgICAgICAgICAgICB3YXJuaW5nOiB3YXJuaW5nXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNUb2FzdDtcblxuICAgICAgICAgICAgcmV0dXJuIHRvYXN0cjtcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRvYXN0VHlwZS5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBnZXRPcHRpb25zKCkuaWNvbkNsYXNzZXMuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNPdmVycmlkZTogb3B0aW9uc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q29udGFpbmVyKG9wdGlvbnMsIGNyZWF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucykgeyBvcHRpb25zID0gZ2V0T3B0aW9ucygpOyB9XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lciA9ICQoJyMnICsgb3B0aW9ucy5jb250YWluZXJJZCk7XG4gICAgICAgICAgICAgICAgaWYgKCRjb250YWluZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkY29udGFpbmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3JlYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIgPSBjcmVhdGVDb250YWluZXIob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAkY29udGFpbmVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbmZvKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdG9hc3RUeXBlLmluZm8sXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogZ2V0T3B0aW9ucygpLmljb25DbGFzc2VzLmluZm8sXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNPdmVycmlkZTogb3B0aW9uc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBjYWxsYmFjaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRvYXN0VHlwZS5zdWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6IGdldE9wdGlvbnMoKS5pY29uQ2xhc3Nlcy5zdWNjZXNzLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zT3ZlcnJpZGU6IG9wdGlvbnNPdmVycmlkZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHdhcm5pbmcobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0b2FzdFR5cGUud2FybmluZyxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBnZXRPcHRpb25zKCkuaWNvbkNsYXNzZXMud2FybmluZyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc092ZXJyaWRlOiBvcHRpb25zT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhcigkdG9hc3RFbGVtZW50LCBjbGVhck9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBpZiAoISRjb250YWluZXIpIHsgZ2V0Q29udGFpbmVyKG9wdGlvbnMpOyB9XG4gICAgICAgICAgICAgICAgaWYgKCFjbGVhclRvYXN0KCR0b2FzdEVsZW1lbnQsIG9wdGlvbnMsIGNsZWFyT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJDb250YWluZXIob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmUoJHRvYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgICAgIGlmICghJGNvbnRhaW5lcikgeyBnZXRDb250YWluZXIob3B0aW9ucyk7IH1cbiAgICAgICAgICAgICAgICBpZiAoJHRvYXN0RWxlbWVudCAmJiAkKCc6Zm9jdXMnLCAkdG9hc3RFbGVtZW50KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVG9hc3QoJHRvYXN0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRjb250YWluZXIuY2hpbGRyZW4oKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGludGVybmFsIGZ1bmN0aW9uc1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhckNvbnRhaW5lciAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciB0b2FzdHNUb0NsZWFyID0gJGNvbnRhaW5lci5jaGlsZHJlbigpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0b2FzdHNUb0NsZWFyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVG9hc3QoJCh0b2FzdHNUb0NsZWFyW2ldKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhclRvYXN0ICgkdG9hc3RFbGVtZW50LCBvcHRpb25zLCBjbGVhck9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9yY2UgPSBjbGVhck9wdGlvbnMgJiYgY2xlYXJPcHRpb25zLmZvcmNlID8gY2xlYXJPcHRpb25zLmZvcmNlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCR0b2FzdEVsZW1lbnQgJiYgKGZvcmNlIHx8ICQoJzpmb2N1cycsICR0b2FzdEVsZW1lbnQpLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudFtvcHRpb25zLmhpZGVNZXRob2RdKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmhpZGVEdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5oaWRlRWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsgcmVtb3ZlVG9hc3QoJHRvYXN0RWxlbWVudCk7IH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbnRhaW5lcihvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lciA9ICQoJzxkaXYvPicpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIG9wdGlvbnMuY29udGFpbmVySWQpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhvcHRpb25zLnBvc2l0aW9uQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hcHBlbmRUbygkKG9wdGlvbnMudGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRjb250YWluZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldERlZmF1bHRzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRhcFRvRGlzbWlzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RDbGFzczogJ3RvYXN0JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6ICd0b2FzdC1jb250YWluZXInLFxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZzogZmFsc2UsXG5cbiAgICAgICAgICAgICAgICAgICAgc2hvd01ldGhvZDogJ2ZhZGVJbicsIC8vZmFkZUluLCBzbGlkZURvd24sIGFuZCBzaG93IGFyZSBidWlsdCBpbnRvIGpRdWVyeVxuICAgICAgICAgICAgICAgICAgICBzaG93RHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0Vhc2luZzogJ3N3aW5nJywgLy9zd2luZyBhbmQgbGluZWFyIGFyZSBidWlsdCBpbnRvIGpRdWVyeVxuICAgICAgICAgICAgICAgICAgICBvblNob3duOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGhpZGVNZXRob2Q6ICdmYWRlT3V0JyxcbiAgICAgICAgICAgICAgICAgICAgaGlkZUR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgICAgICAgICBoaWRlRWFzaW5nOiAnc3dpbmcnLFxuICAgICAgICAgICAgICAgICAgICBvbkhpZGRlbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZU1ldGhvZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlRHVyYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZUVhc2luZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlT25Ib3ZlcjogdHJ1ZSxcblxuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZFRpbWVPdXQ6IDEwMDAsXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzc2VzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ3RvYXN0LWVycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86ICd0b2FzdC1pbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICd0b2FzdC1zdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICd0b2FzdC13YXJuaW5nJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6ICd0b2FzdC1pbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25DbGFzczogJ3RvYXN0LXRvcC1yaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVPdXQ6IDUwMDAsIC8vIFNldCB0aW1lT3V0IGFuZCBleHRlbmRlZFRpbWVPdXQgdG8gMCB0byBtYWtlIGl0IHN0aWNreVxuICAgICAgICAgICAgICAgICAgICB0aXRsZUNsYXNzOiAndG9hc3QtdGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQ2xhc3M6ICd0b2FzdC1tZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlSHRtbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJ2JvZHknLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZUh0bWw6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIj4mdGltZXM7PC9idXR0b24+JyxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VDbGFzczogJ3RvYXN0LWNsb3NlLWJ1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgIG5ld2VzdE9uVG9wOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RHVwbGljYXRlczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDbGFzczogJ3RvYXN0LXByb2dyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgcnRsOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHB1Ymxpc2goYXJncykge1xuICAgICAgICAgICAgICAgIGlmICghbGlzdGVuZXIpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIoYXJncyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG5vdGlmeShtYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkNsYXNzID0gbWFwLmljb25DbGFzcyB8fCBvcHRpb25zLmljb25DbGFzcztcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG1hcC5vcHRpb25zT3ZlcnJpZGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gJC5leHRlbmQob3B0aW9ucywgbWFwLm9wdGlvbnNPdmVycmlkZSk7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzcyA9IG1hcC5vcHRpb25zT3ZlcnJpZGUuaWNvbkNsYXNzIHx8IGljb25DbGFzcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRXhpdChvcHRpb25zLCBtYXApKSB7IHJldHVybjsgfVxuXG4gICAgICAgICAgICAgICAgdG9hc3RJZCsrO1xuXG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lciA9IGdldENvbnRhaW5lcihvcHRpb25zLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnZhbElkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgJHRvYXN0RWxlbWVudCA9ICQoJzxkaXYvPicpO1xuICAgICAgICAgICAgICAgIHZhciAkdGl0bGVFbGVtZW50ID0gJCgnPGRpdi8+Jyk7XG4gICAgICAgICAgICAgICAgdmFyICRtZXNzYWdlRWxlbWVudCA9ICQoJzxkaXYvPicpO1xuICAgICAgICAgICAgICAgIHZhciAkcHJvZ3Jlc3NFbGVtZW50ID0gJCgnPGRpdi8+Jyk7XG4gICAgICAgICAgICAgICAgdmFyICRjbG9zZUVsZW1lbnQgPSAkKG9wdGlvbnMuY2xvc2VIdG1sKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3NCYXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGhpZGVFdGE6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1heEhpZGVUaW1lOiBudWxsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0SWQ6IHRvYXN0SWQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiAndmlzaWJsZScsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcGVyc29uYWxpemVUb2FzdCgpO1xuXG4gICAgICAgICAgICAgICAgZGlzcGxheVRvYXN0KCk7XG5cbiAgICAgICAgICAgICAgICBoYW5kbGVFdmVudHMoKTtcblxuICAgICAgICAgICAgICAgIHB1Ymxpc2gocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVidWcgJiYgY29uc29sZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuICR0b2FzdEVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlc2NhcGVIdG1sKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csICcmIzM5OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBlcnNvbmFsaXplVG9hc3QoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEljb24oKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGl0bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICBzZXRDbG9zZUJ1dHRvbigpO1xuICAgICAgICAgICAgICAgICAgICBzZXRQcm9ncmVzc0JhcigpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSVEwoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2VxdWVuY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QXJpYSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldEFyaWEoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmlhVmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtYXAuaWNvbkNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0b2FzdC1zdWNjZXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvYXN0LWluZm8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWFWYWx1ZSA9ICAncG9saXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYVZhbHVlID0gJ2Fzc2VydGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5hdHRyKCdhcmlhLWxpdmUnLCBhcmlhVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZUV2ZW50cygpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2xvc2VPbkhvdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmhvdmVyKHN0aWNrQXJvdW5kLCBkZWxheWVkSGlkZVRvYXN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5vbmNsaWNrICYmIG9wdGlvbnMudGFwVG9EaXNtaXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmNsaWNrKGhpZGVUb2FzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jbG9zZUJ1dHRvbiAmJiAkY2xvc2VFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY2xvc2VFbGVtZW50LmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jYW5jZWxCdWJibGUgIT09IHVuZGVmaW5lZCAmJiBldmVudC5jYW5jZWxCdWJibGUgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbkNsb3NlQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbkNsb3NlQ2xpY2soZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVUb2FzdCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25jbGljaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm9uY2xpY2soZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVUb2FzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkaXNwbGF5VG9hc3QoKSB7XG4gICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnRbb3B0aW9ucy5zaG93TWV0aG9kXShcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkdXJhdGlvbjogb3B0aW9ucy5zaG93RHVyYXRpb24sIGVhc2luZzogb3B0aW9ucy5zaG93RWFzaW5nLCBjb21wbGV0ZTogb3B0aW9ucy5vblNob3dufVxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRpbWVPdXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbElkID0gc2V0VGltZW91dChoaWRlVG9hc3QsIG9wdGlvbnMudGltZU91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5tYXhIaWRlVGltZSA9IHBhcnNlRmxvYXQob3B0aW9ucy50aW1lT3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyLmhpZGVFdGEgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHByb2dyZXNzQmFyLm1heEhpZGVUaW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucHJvZ3Jlc3NCYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwodXBkYXRlUHJvZ3Jlc3MsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldEljb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXAuaWNvbkNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmFkZENsYXNzKG9wdGlvbnMudG9hc3RDbGFzcykuYWRkQ2xhc3MoaWNvbkNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldFNlcXVlbmNlKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5uZXdlc3RPblRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5wcmVwZW5kKCR0b2FzdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hcHBlbmQoJHRvYXN0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRUaXRsZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcC50aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1ZmZpeCA9IG1hcC50aXRsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVzY2FwZUh0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggPSBlc2NhcGVIdG1sKG1hcC50aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGl0bGVFbGVtZW50LmFwcGVuZChzdWZmaXgpLmFkZENsYXNzKG9wdGlvbnMudGl0bGVDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmFwcGVuZCgkdGl0bGVFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldE1lc3NhZ2UoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXAubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1ZmZpeCA9IG1hcC5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZXNjYXBlSHRtbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA9IGVzY2FwZUh0bWwobWFwLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VFbGVtZW50LmFwcGVuZChzdWZmaXgpLmFkZENsYXNzKG9wdGlvbnMubWVzc2FnZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuYXBwZW5kKCRtZXNzYWdlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRDbG9zZUJ1dHRvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2xvc2VCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjbG9zZUVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy5jbG9zZUNsYXNzKS5hdHRyKCdyb2xlJywgJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5wcmVwZW5kKCRjbG9zZUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0UHJvZ3Jlc3NCYXIoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnByb2dyZXNzQmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcHJvZ3Jlc3NFbGVtZW50LmFkZENsYXNzKG9wdGlvbnMucHJvZ3Jlc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LnByZXBlbmQoJHByb2dyZXNzRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRSVEwoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJ0bCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5hZGRDbGFzcygncnRsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaG91bGRFeGl0KG9wdGlvbnMsIG1hcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wcmV2ZW50RHVwbGljYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcC5tZXNzYWdlID09PSBwcmV2aW91c1RvYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVG9hc3QgPSBtYXAubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaGlkZVRvYXN0KG92ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBvdmVycmlkZSAmJiBvcHRpb25zLmNsb3NlTWV0aG9kICE9PSBmYWxzZSA/IG9wdGlvbnMuY2xvc2VNZXRob2QgOiBvcHRpb25zLmhpZGVNZXRob2Q7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IG92ZXJyaWRlICYmIG9wdGlvbnMuY2xvc2VEdXJhdGlvbiAhPT0gZmFsc2UgP1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jbG9zZUR1cmF0aW9uIDogb3B0aW9ucy5oaWRlRHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHZhciBlYXNpbmcgPSBvdmVycmlkZSAmJiBvcHRpb25zLmNsb3NlRWFzaW5nICE9PSBmYWxzZSA/IG9wdGlvbnMuY2xvc2VFYXNpbmcgOiBvcHRpb25zLmhpZGVFYXNpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCc6Zm9jdXMnLCAkdG9hc3RFbGVtZW50KS5sZW5ndGggJiYgIW92ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHByb2dyZXNzQmFyLmludGVydmFsSWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRvYXN0RWxlbWVudFttZXRob2RdKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVUb2FzdCgkdG9hc3RFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25IaWRkZW4gJiYgcmVzcG9uc2Uuc3RhdGUgIT09ICdoaWRkZW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMub25IaWRkZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdGUgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5lbmRUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGVsYXllZEhpZGVUb2FzdCgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGltZU91dCA+IDAgfHwgb3B0aW9ucy5leHRlbmRlZFRpbWVPdXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbElkID0gc2V0VGltZW91dChoaWRlVG9hc3QsIG9wdGlvbnMuZXh0ZW5kZWRUaW1lT3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyLm1heEhpZGVUaW1lID0gcGFyc2VGbG9hdChvcHRpb25zLmV4dGVuZGVkVGltZU91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5oaWRlRXRhID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBwcm9ncmVzc0Jhci5tYXhIaWRlVGltZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN0aWNrQXJvdW5kKCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyLmhpZGVFdGEgPSAwO1xuICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LnN0b3AodHJ1ZSwgdHJ1ZSlbb3B0aW9ucy5zaG93TWV0aG9kXShcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkdXJhdGlvbjogb3B0aW9ucy5zaG93RHVyYXRpb24sIGVhc2luZzogb3B0aW9ucy5zaG93RWFzaW5nfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudGFnZSA9ICgocHJvZ3Jlc3NCYXIuaGlkZUV0YSAtIChuZXcgRGF0ZSgpLmdldFRpbWUoKSkpIC8gcHJvZ3Jlc3NCYXIubWF4SGlkZVRpbWUpICogMTAwO1xuICAgICAgICAgICAgICAgICAgICAkcHJvZ3Jlc3NFbGVtZW50LndpZHRoKHBlcmNlbnRhZ2UgKyAnJScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQoe30sIGdldERlZmF1bHRzKCksIHRvYXN0ci5vcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlVG9hc3QoJHRvYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmICghJGNvbnRhaW5lcikgeyAkY29udGFpbmVyID0gZ2V0Q29udGFpbmVyKCk7IH1cbiAgICAgICAgICAgICAgICBpZiAoJHRvYXN0RWxlbWVudC5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCRjb250YWluZXIuY2hpbGRyZW4oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNUb2FzdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSkoKTtcbiAgICB9KTtcbn0odHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lIDogZnVuY3Rpb24gKGRlcHMsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHsgLy9Ob2RlXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnRvYXN0ciA9IGZhY3Rvcnkod2luZG93LmpRdWVyeSk7XG4gICAgfVxufSkpO1xuIiwidmFyIHRlbXBsYXRlU3lzdGVtID0gcmVxdWlyZSgnLi4vc3JjL2pzL2JpbmRpbmdzL2Nob29zZS10ZW1wbGF0ZS5qcycpO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcImFycmF5XCIsIFwiPCEtLSBrbyBmb3JlYWNoOiAkZGF0YSAtLT48IS0tIGtvIGJsb2NrOiAkZGF0YSAtLT48IS0tIC9rbyAtLT48IS0tIC9rbyAtLT5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcImJsb2NrLXNob3dcIiwgXCI8IS0tIGtvIGJsb2NrOiAkZGF0YSwgc2Nyb2xsSW50b1ZpZXc6ICRyb290LnNlbGVjdGVkQmxvY2soKSA9PT0gJGRhdGEgLS0+PCEtLSAva28gLS0+XCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJibG9jay13eXNpd3lnXCIsIFwiPGRpdiBjbGFzcz1cXHgyMmVkaXRhYmxlIGJsb2NrXFx4MjIgZGF0YS1kcm9wLWNvbnRlbnQ9XFx4MjJEcm9wIGhlcmVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7ICdkYXRhLWRyb3AtY29udGVudCc6ICRyb290LnQoJ0Ryb3AgaGVyZScpIH0sIGNsaWNrOiBmdW5jdGlvbihvYmosIGV2dCkgeyAkcm9vdC5zZWxlY3RCbG9jayhvYmopOyByZXR1cm4gdHJ1ZSB9LCBjbGlja0J1YmJsZTogZmFsc2UsIGNzczogeyBzZWxlY3RlZDogJHJvb3Quc2VsZWN0ZWRCbG9jaygpID09PSAkZGF0YSB9LCBzY3JvbGxJbnRvVmlldzogJHJvb3Quc2VsZWN0ZWRCbG9jaygpID09PSAkZGF0YVxceDIyPiAgPGRpdiBjbGFzcz1cXHgyMm1vLWJsb2Nrc2VsZWN0aW9uaGVscGVyXFx4MjI+PC9kaXY+ICA8ZGl2IGNsYXNzPVxceDIydG9vbHNcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0b29sdGlwczoge31cXHgyMj4gICAgPCEtLSBrbyBpZjogdHlwZW9mICRpbmRleCAhPSAndW5kZWZpbmVkJyAtLT4gICAgPGRpdiB0aXRsZT1cXHgyMkRyYWcgdGhpcyBoYW5kbGUgdG8gbW92ZSB0aGUgYmxvY2tcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdEcmFnIHRoaXMgaGFuZGxlIHRvIG1vdmUgdGhlIGJsb2NrJykgfVxceDIyIGNsYXNzPVxceDIydG9vbCBoYW5kbGVcXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLXNvcnRcXHgyMj48L2k+PC9kaXY+ICAgIDwhLS0ga28gaWY6ICRpbmRleCgpID4gMCAtLT4gICAgPGRpdiB0aXRsZT1cXHgyMk1vdmUgdGhpcyBibG9jayB1cHNpZGVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdNb3ZlIHRoaXMgYmxvY2sgdXBzaWRlJykgfVxceDIyIGNsYXNzPVxceDIydG9vbCBtb3ZldXBcXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLXNvcnQtYXNjXFx4MjIgZGF0YS1iaW5kPSdjbGljazogJHJvb3QubW92ZUJsb2NrLmJpbmQoJGVsZW1lbnQsICRpbmRleCwgJHBhcmVudCwgdHJ1ZSknPjwvaT48L2Rpdj4gICAgPCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6ICRpbmRleCgpIDwgJHBhcmVudC5ibG9ja3MoKS5sZW5ndGggLTEgLS0+ICAgIDxkaXYgdGl0bGU9XFx4MjJNb3ZlIHRoaXMgYmxvY2sgZG93bnNpZGVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdNb3ZlIHRoaXMgYmxvY2sgZG93bnNpZGUnKSB9XFx4MjIgY2xhc3M9XFx4MjJ0b29sIG1vdmVkb3duXFx4MjI+PGkgY2xhc3M9XFx4MjJmYSBmYS1mdyBmYS1zb3J0LWRlc2NcXHgyMiBkYXRhLWJpbmQ9J2NsaWNrOiAkcm9vdC5tb3ZlQmxvY2suYmluZCgkZWxlbWVudCwgJGluZGV4LCAkcGFyZW50LCBmYWxzZSknPjwvaT48L2Rpdj4gICAgPCEtLSAva28gLS0+ICAgIDxkaXYgdGl0bGU9XFx4MjJEZWxldGUgYmxvY2tcXHgyMiBjbGFzcz1cXHgyMnRvb2wgZGVsZXRlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnRGVsZXRlIGJsb2NrJykgfSwgY2xpY2s6ICRyb290LnJlbW92ZUJsb2NrLmJpbmQoJGVsZW1lbnQsICRyYXdEYXRhLCAkcGFyZW50KVxceDIyPjxpIGNsYXNzPVxceDIyZmEgZmEtZncgZmEtdHJhc2gtb1xceDIyPjwvaT48L2Rpdj4gICAgPGRpdiB0aXRsZT1cXHgyMkR1cGxpY2F0ZSBibG9ja1xceDIyIGNsYXNzPVxceDIydG9vbCBjbG9uZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ0R1cGxpY2F0ZSBibG9jaycpIH0sIGNsaWNrOiAkcm9vdC5kdXBsaWNhdGVCbG9jay5iaW5kKCRlbGVtZW50LCAkaW5kZXgsICRwYXJlbnQpXFx4MjI+PGkgY2xhc3M9XFx4MjJmYSBmYS1mdyBmYS1maWxlcy1vXFx4MjI+PC9pPjwvZGl2PiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogdHlwZW9mICRkYXRhLl9uZXh0VmFyaWFudCAhPSAndW5kZWZpbmVkJyAtLT48ZGl2IHRpdGxlPVxceDIyU3dpdGNoIGJsb2NrIHZhcmlhbnRcXHgyMiBjbGFzcz1cXHgyMnRvb2wgdmFyaWFudFxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1N3aXRjaCBibG9jayB2YXJpYW50JykgfSwgY2xpY2s6ICRkYXRhLl9uZXh0VmFyaWFudFxceDIyPjxpIGNsYXNzPVxceDIyZmEgZmEtZncgZmEtbWFnaWNcXHgyMj48L2k+PC9kaXY+PCEtLSAva28gLS0+ICA8L2Rpdj4gIDwhLS0ga28gYmxvY2s6ICRkYXRhIC0tPjwhLS0gL2tvIC0tPjwvZGl2PlwiKTtcbnRlbXBsYXRlU3lzdGVtLmFkZFRlbXBsYXRlKFwiYmxvY2tzLXNob3dcIiwgXCI8IS0tIGtvIHRlbXBsYXRlOiB7IG5hbWU6ICdibG9jay1zaG93JywgZm9yZWFjaDogYmxvY2tzIH0gLS0+PCEtLSAva28gLS0+XCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJibG9ja3Mtd3lzaXd5Z1wiLCBcIjxkaXYgY2xhc3M9XFx4MjJzb3J0YWJsZS1ibG9ja3MtZWRpdFxceDIyIGRhdGEtZHJvcC1jb250ZW50PVxceDIyRHJvcCBoZXJlXFx4MjIgZGF0YS1lbXB0eS1jb250ZW50PVxceDIyRHJvcCBoZXJlIGJsb2NrcyBmcm9tIHRoZSBCbG9ja3MgdGFiXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyAnZGF0YS1kcm9wLWNvbnRlbnQnOiAkcm9vdC50KCdEcm9wIGhlcmUnKSwgJ2RhdGEtZW1wdHktY29udGVudCc6ICRyb290LnQoJ0Ryb3AgaGVyZSBibG9ja3MgZnJvbSB0aGUgJnF1b3Q7QmxvY2tzJnF1b3Q7IHRhYicpIH0sIGNzczogeyAnZW1wdHknOiBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGJsb2NrcykubGVuZ3RoID09IDAgfSwgZXh0c29ydGFibGU6IHsgY29ubmVjdENsYXNzOiAnc29ydGFibGUtYmxvY2tzLWVkaXQnLCB0ZW1wbGF0ZTogJ2Jsb2NrLXd5c2l3eWcnLCBkYXRhOiBibG9ja3MsIGRyYWdnaW5nOiAkcm9vdC5kcmFnZ2luZywgYmVmb3JlTW92ZTogJHJvb3Quc3RhcnRNdWx0aXBsZSwgYWZ0ZXJNb3ZlOiAkcm9vdC5zdG9wTXVsdGlwbGUsIG9wdGlvbnM6IHsgaGFuZGxlOiAnLmhhbmRsZScsIHBsYWNlaG9sZGVyOiAkcm9vdC5wbGFjZWhvbGRlckhlbHBlciB9IH1cXHgyMj48L2Rpdj5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcImN1c3RvbXN0eWxlXCIsIFwiPGRpdiBjbGFzcz1cXHgyMmN1c3RvbVN0eWxlSGVscFxceDIyIGRhdGEtYmluZD1cXHgyMmh0bWw6ICRyb290LnQoJ0N1c3RvbWl6ZWQgYmxvY2suPHVsPjxsaT5JbiB0aGlzIHN0YXR1cyBjaGFuZ2VzIHRvIHByb3BlcnRpZXMgd2lsbCBiZSBzcGVjaWZpYyB0byB0aGUgY3VycmVudCBibG9jayAoaW5zdGVhZCBvZiBiZWluZyBnbG9iYWwgdG8gYWxsIGJsb2NrcyBpbiB0aGUgc2FtZSBzZWN0aW9uKTwvbGk+PGxpPkEgPHNwYW4gY2xhc3M9JnF1b3Q7Y3VzdG9tU3R5bGVkJnF1b3Q7PjxzcGFuPiZxdW90O3NtYWxsIGN1YmUmcXVvdDsgPC9zcGFuPjwvc3Bhbj4gaWNvbiBiZXNpZGUgdGhlIHByb3BlcnR5IHdpbGwgbWFyayB0aGUgY3VzdG9taXphdGlvbi4gQnkgY2xpY2tpbmcgdGhpcyBpY29uIHRoZSBwcm9wZXJ0eSB2YWx1ZSB3aWxsIGJlIHJldmVydGVkIHRvIHRoZSB2YWx1ZSBkZWZpbmVkIGZvciB0aGUgc2VjdGlvbi48L2xpPjwvdWw+JylcXHgyMj5DdXN0b21pemVkIGJsb2NrLjx1bD48bGk+SW4gdGhpcyBzdGF0dXMgY2hhbmdlcyB0byBwcm9wZXJ0aWVzIHdpbGwgYmUgc3BlY2lmaWMgdG8gdGhlIGN1cnJlbnQgYmxvY2sgKGluc3RlYWQgb2YgYmVpbmcgZ2xvYmFsIHRvIGFsbCBibG9ja3MgaW4gdGhlIHNhbWUgc2VjdGlvbik8L2xpPjxsaT5BIDxzcGFuIGNsYXNzPVxceDIyY3VzdG9tU3R5bGVkXFx4MjI+PHNwYW4+XFx4MjJzbWFsbCBjdWJlXFx4MjIgPC9zcGFuPjwvc3Bhbj4gaWNvbiBiZXNpZGUgdGhlIHByb3BlcnR5IHdpbGwgbWFyayB0aGUgY3VzdG9taXphdGlvbi4gQnkgY2xpY2tpbmcgdGhpcyBpY29uIHRoZSBwcm9wZXJ0eSB2YWx1ZSB3aWxsIGJlIHJldmVydGVkIHRvIHRoZSB2YWx1ZSBkZWZpbmVkIGZvciB0aGUgc2VjdGlvbi48L2xpPjwvdWw+PC9kaXY+XCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJlbXB0eVwiLCBcIlwiKTtcbnRlbXBsYXRlU3lzdGVtLmFkZFRlbXBsYXRlKFwiZXJyb3JcIiwgXCJbPGRpdiBzdHlsZT1cXHgyMmJhY2tncm91bmQtY29sb3I6ICNmZmYwZjBcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0ZXh0OiBrby50b0pTKCRkYXRhKVxceDIyPjwvZGl2Pl1cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcImdhbGxlcnktaW1hZ2VzXCIsIFwiPGRpdiBkYXRhLWJpbmQ9XFx4MjJmb3JlYWNoOiBpdGVtcy5jdXJyZW50UGFnZURhdGFcXHgyMj4gIDxkaXYgY2xhc3M9XFx4MjJkcmFnZ2FibGUtaXRlbVxceDIyIGRhdGEtYmluZD1cXHgyMmlmOiB0eXBlb2YgdGh1bWJuYWlsVXJsICE9ICd1bmRlZmluZWQnXFx4MjI+ICAgIDxkaXYgY2xhc3M9XFx4MjJkcmFnZ2FibGUgaW1hZ2VcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjbGljazogJHJvb3QuYWRkSW1hZ2UsIGV4dGRyYWdnYWJsZTogeyBkYXRhOiAkZGF0YSwgZHJvcENvbnRhaW5lcjogJyNtYWluLXd5c2l3eWctYXJlYScsIGRyYWdnaW5nOiAkcm9vdC5kcmFnZ2luZ0ltYWdlLCAnb3B0aW9ucyc6IHsgJ2FwcGVuZFRvJzogJyNwYWdlJyB9IH0sIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogJ3VybChcXFxcJycgKyB0aHVtYm5haWxVcmwgKyAnXFxcXCcpJyB9XFx4MjI+ICAgICAgPGltZyB0aXRsZT1cXHgyMkRyYWcgdGhpcyBpbWFnZSBhbmQgZHJvcCBpdCBvbiBhbnkgdGVtcGxhdGUgaW1hZ2UgcGxhY2Vob2xkZXJcXHgyMiBzdHlsZT1cXHgyMmRpc3BsYXk6IGJsb2NrO1xceDIyIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fSwgYXR0cjogeyBzcmM6IHRodW1ibmFpbFVybCwgJ3RpdGxlJzogJHJvb3QudCgnRHJhZyB0aGlzIGltYWdlIGFuZCBkcm9wIGl0IG9uIGFueSB0ZW1wbGF0ZSBpbWFnZSBwbGFjZWhvbGRlcicpIH1cXHgyMi8+ICAgIDwvZGl2PiAgPC9kaXY+PC9kaXY+PCEtLSBrbyBpZjogaXRlbXMucGFnZUNvdW50KCkgPiAxIC0tPjxkaXYgY2xhc3M9XFx4MjJnYWxsZXJ5UGFnZXJcXHgyMiBkYXRhLWJpbmQ9XFx4MjJidXR0b25zZXQ6IHt9XFx4MjI+ICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6IGl0ZW1zLm1vdmVGaXJzdCwgYnV0dG9uOiB7IGRpc2FibGVkOiBpdGVtcy5jdXJyZW50UGFnZSgpID09IDEsIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mYXN0LWJhY2t3YXJkJyB9LCB0ZXh0OiBmYWxzZSB9XFx4MjI+Rmlyc3Q8L2E+ICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6IGl0ZW1zLm1vdmVQcmV2aW91cywgYnV0dG9uOiB7IGRpc2FibGVkOiBpdGVtcy5jdXJyZW50UGFnZSgpID09IDEsIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1iYWNrd2FyZCcgfSwgdGV4dDogZmFsc2UgfVxceDIyPlByZXZpb3VzPC9hPiAgPHNwYW4gZGF0YS1iaW5kPVxceDIyYnV0dG9uOiB7IGRpc2FibGVkOiB0cnVlLCB0ZXh0OiB0cnVlLCBsYWJlbDogJyAnK2l0ZW1zLmN1cnJlbnRQYWdlKCkrJyBkaSAnK2l0ZW1zLnBhZ2VDb3VudCgpKycgJyB9XFx4MjI+IFggZGkgWSA8L3NwYW4+ICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6IGl0ZW1zLm1vdmVOZXh0LCBidXR0b246IHsgZGlzYWJsZWQ6IGl0ZW1zLmN1cnJlbnRQYWdlKCkgPT0gaXRlbXMucGFnZUNvdW50KCksIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mb3J3YXJkJyB9LCB0ZXh0OiBmYWxzZSB9XFx4MjI+TmV4dDwvYT4gIDxhIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjbGljazogaXRlbXMubW92ZUxhc3QsIGJ1dHRvbjogeyBkaXNhYmxlZDogaXRlbXMuY3VycmVudFBhZ2UoKSA9PSBpdGVtcy5wYWdlQ291bnQoKSwgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLWZhc3QtZm9yd2FyZCcgfSwgdGV4dDogZmFsc2UgfVxceDIyPkxhc3Q8L2E+PC9kaXY+PCEtLSAva28gLS0+XCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJpbWctd3lzaXd5Z1wiLCBcIjx0YWJsZSB0YWJmb2N1cz1cXHgyMjBcXHgyMiBjZWxsc3BhY2luZz1cXHgyMjBcXHgyMiBjZWxscGFkZGluZz1cXHgyMjBcXHgyMiBkYXRhLWRyb3AtY29udGVudD1cXHgyMkRyb3AgaGVyZVxceDIyIGRhdGEtYmluZD1cXHgyMnN0eWxlOiBfc3R5bGViaW5kLCBjbGljazogZnVuY3Rpb24ob2JqLCBldnQpIHsgJHJvb3Quc2VsZWN0SXRlbShfaXRlbSwgX2RhdGEpOyByZXR1cm4gdHJ1ZTsgfSwgY2xpY2tCdWJibGU6IGZhbHNlLCBmdWRyb3BwYWJsZTogeyBhY3RpdmVDbGFzczogJ3VpLXN0YXRlLWhpZ2hsaWdodCcsIGhvdmVyQ2xhc3M6ICd1aS1zdGF0ZS1kcmFnaG92ZXInIH0sIGRyb3BwYWJsZTogeyBvcHRpb25zOiB7IGFjY2VwdDogJy5pbWFnZScsIGFjdGl2ZUNsYXNzOiAndWktc3RhdGUtaGlnaGxpZ2h0JywgaG92ZXJDbGFzczogJ3VpLXN0YXRlLWRyYWdob3ZlcicgfSwgZGF0YTogX3NyYywgZHJhZ2dlZDogJHJvb3QuZmlsZVRvSW1hZ2UgfSwgY3NzOiB7IHNlbGVjdGVkaXRlbTogJHJvb3QuaXNTZWxlY3RlZEl0ZW0oX2l0ZW0pIH0sIHNjcm9sbEludG9WaWV3OiAkcm9vdC5pc1NlbGVjdGVkSXRlbShfaXRlbSksIGF0dHI6IHsgJ2RhdGEtZHJvcC1jb250ZW50JzogJHJvb3QudCgnRHJvcCBoZXJlJyksIHdpZHRoOiBfd2lkdGgsIGhlaWdodDogX2hlaWdodCwgYWxpZ246IF9hbGlnbiB9XFx4MjIgIGNsYXNzPVxceDIyaW1nLXd5c2l3eWcgc2VsZWN0YWJsZS1pbWdcXHgyMiBzdHlsZT1cXHgyMmRpc3BsYXk6IHRhYmxlO1xceDIyPjx0cj48dGQgY2xhc3M9XFx4MjJ1cGxvYWR6b25lXFx4MjI+ICA8ZGl2IGNsYXNzPVxceDIybW8taW1nc2VsZWN0aW9uaGVscGVyXFx4MjI+PC9kaXY+ICA8ZGl2IGNsYXNzPVxceDIybW8tdXBsb2Fkem9uZVxceDIyPjwvZGl2PiAgPGRpdiBjbGFzcz1cXHgyMmltZy1zaXplXFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogX3NpemVcXHgyMj5zaXplPC9kaXY+ICA8ZGl2IGNsYXNzPVxceDIybWlkdG9vbHNcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0b29sdGlwczoge31cXHgyMj4gICAgPCEtLSBrbyBpZjogX3NyYygpICE9ICcnIC0tPiAgICA8ZGl2IHRpdGxlPVxceDIyUmVtb3ZlIGltYWdlXFx4MjIgY2xhc3M9XFx4MjJ0b29sIGRlbGV0ZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1JlbW92ZSBpbWFnZScpIH0sIGNsaWNrOiBfc3JjLmJpbmQoX3NyYywgJycpLCBjbGlja0J1YmJsZTogZmFsc2VcXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLXRyYXNoLW9cXHgyMj48L2k+PC9kaXY+ICAgIDwhLS0ga28gaWY6IHR5cGVvZiAkcm9vdC5lZGl0SW1hZ2UgIT09ICd1bmRlZmluZWQnIC0tPiAgICA8ZGl2IHRpdGxlPVxceDIyT3BlbiB0aGUgaW1hZ2UgZWRpdGluZyB0b29sXFx4MjIgY2xhc3M9XFx4MjJ0b29sIGVkaXRcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdPcGVuIHRoZSBpbWFnZSBlZGl0aW5nIHRvb2wnKSB9LCBjbGljazogJHJvb3QuZWRpdEltYWdlLmJpbmQoJGVsZW1lbnQsIF9zcmMpLCBjbGlja0J1YmJsZTogZmFsc2VcXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLXBlbmNpbFxceDIyPjwvaT48L2Rpdj4gICAgPCEtLSAva28gLS0+ICAgIDwhLS0gL2tvIC0tPiAgICA8IS0tIGtvIGlmOiBfc3JjKCkgPT0gJycgLS0+ICAgIDxkaXYgdGl0bGU9XFx4MjJVcGxvYWQgYSBuZXcgaW1hZ2VcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdVcGxvYWQgYSBuZXcgaW1hZ2UnKSB9XFx4MjIgY2xhc3M9XFx4MjJ0b29sIHVwbG9hZFxceDIyIHN0eWxlPVxceDIycG9zaXRpb246IHJlbGF0aXZlOyBvdmVyZmxvdzogaGlkZGVuO1xceDIyPjxpIGNsYXNzPVxceDIyZmEgZmEtZncgZmEtdXBsb2FkXFx4MjI+PC9pPiAgICAgIDxpbnB1dCBjbGFzcz1cXHgyMmZpbGV1cGxvYWQgbm9maWxlXFx4MjIgdHlwZT1cXHgyMmZpbGVcXHgyMiBuYW1lPVxceDIyZmlsZXNbXVxceDIyIGRhdGEtYmluZD1cXHgyMmZpbGV1cGxvYWQ6IHsgZGF0YTogX3NyYywgb25lcnJvcjogJHJvb3Qubm90aWZpZXIuZXJyb3IsIG9uZmlsZTogJHJvb3QubG9hZEltYWdlLCBjYW52YXNQcmV2aWV3OiB0cnVlIH1cXHgyMiBzdHlsZT1cXHgyMnotaW5kZXg6IDIwOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsgbWluLXdpZHRoOiAxMDAlOyBtaW4taGVpZ2h0OiAxMDAlOyBmb250LXNpemU6IDk5OXB4OyB0ZXh0LWFsaWduOiByaWdodDsgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTApOyBvcGFjaXR5OiAwOyBvdXRsaW5lOiBub25lOyBjdXJzb3I6IGluaGVyaXQ7IGRpc3BsYXk6IGJsb2NrXFx4MjI+ICAgIDwvZGl2PiAgICA8IS0tIC9rbyAtLT4gIDwvZGl2PiAgPCEtLSBrbyB0ZW1wbGF0ZTogX3RlbXBsYXRlIC0tPjwhLS0gL2tvIC0tPiAgPCEtLSBrbyBpZjogX3NyYygpID09ICcnIC0tPiAgICA8IS0tICAgIDxpbWcgc3R5bGU9XFx4MjJkaXNwbGF5OiBibG9jaztcXHgyMiBjbGFzcz1cXHgyMmltZ3BsYWNlaG9sZGVyXFx4MjIgd2lkdGg9XFx4MjIyMDBcXHgyMiBzcmM9XFx4MjJcXHgyMiBhbHQ9XFx4MjJJbnNlcnQgYW4gaW1hZ2UgaGVyZVxceDIyIGRhdGEtYmluZD1cXHgyMnd5c2l3eWdTcmM6IHsgc3JjOiBfc3JjLnByZWxvYWRlZCwgcGxhY2Vob2xkZXI6IF9wbGFjZWhvbGRlcnNyYywgd2lkdGg6IF93aWR0aCwgaGVpZ2h0OiBfaGVpZ2h0LCBtZXRob2Q6IF9tZXRob2QgfVxceDIyIC8+ICAgIC0tPiAgICA8c3BhbiBjbGFzcz1cXHgyMmZpbGV1cGxvYWR0ZXh0XFx4MjIgc3R5bGU9XFx4MjJ0ZXh0LWFsaWduOiBjZW50ZXI7IGRpc3BsYXk6IC1tcy1mbGV4Ym94OyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBmbGV4LWFsaWduOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBwYWRkaW5nOiAxZW07IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwO1xceDIyPjxzcGFuIGNsYXNzPVxceDIydGV4dE1pZGRsZVxceDIyIHN0eWxlPVxceDIyIHRleHQtc2hhZG93OiAxcHggMXB4IDAgI0ZGRkZGRiwgMCAwIDEwcHggI0ZGRkZGRjsgZm9udC13ZWlnaHQ6IGJvbGQ7XFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnRHJvcCBhbiBpbWFnZSBoZXJlJylcXHgyMj5Ecm9wIGFuIGltYWdlIGhlcmU8L3NwYW4+PC9zcGFuPiAgPCEtLSAva28gLS0+ICA8IS0tIGtvIGlmOiBfc3JjKCkgIT0gJycgLS0+ICA8IS0tICAgIDxpbWcgc3R5bGU9XFx4MjJkaXNwbGF5OiBibG9jaztcXHgyMiB3aWR0aD1cXHgyMjIwMFxceDIyIHNyYz1cXHgyMlxceDIyIGRhdGEtYmluZD1cXHgyMnByZWxvYWRlcjogX3NyYywgd3lzaXd5Z1NyYzogeyBzcmM6IF9zcmMucHJlbG9hZGVkLCBwbGFjZWhvbGRlcjogX3BsYWNlaG9sZGVyc3JjLCB3aWR0aDogX3dpZHRoLCBoZWlnaHQ6IF9oZWlnaHQsIG1ldGhvZDogX21ldGhvZCB9XFx4MjIgLz4gICAgLS0+ICA8IS0tIC9rbyAtLT4gIDwhLS0gcHVsc2FudGUgcGVyIGxhIGNhbmNlbGxhemlvbmUgLS0+ICA8ZGl2IHRpdGxlPVxceDIyRHJvcCBhbiBpbWFnZSBoZXJlIG9yIGNsaWNrIHRoZSB1cGxvYWQgYnV0dG9uXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnRHJvcCBhbiBpbWFnZSBoZXJlIG9yIGNsaWNrIHRoZSB1cGxvYWQgYnV0dG9uJykgfSwgdG9vbHRpcHM6IHt9XFx4MjIgY2xhc3M9XFx4MjJ3b3Jrem9uZVxceDIyIHN0eWxlPVxceDIycG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7IG92ZXJmbG93OiBoaWRkZW47XFx4MjI+ICAgIDwhLS0ga28gaWY6IF9zcmMucHJlbG9hZGVkICYmIF9zcmMoKSAhPSBfc3JjLnByZWxvYWRlZCgpIC0tPlBSRUxPQURJTkcuLi4uPCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6IF9zcmMoKSAhPSAnJyAtLT4gICAgICA8aW5wdXQgY2xhc3M9XFx4MjJmaWxldXBsb2FkIHdpdGhmaWxlXFx4MjIgdHlwZT1cXHgyMmZpbGVcXHgyMiBuYW1lPVxceDIyZmlsZXNbXVxceDIyIGRhdGEtYmluZD1cXHgyMmZpbGV1cGxvYWQ6IHsgZGF0YTogX3NyYywgb25lcnJvcjogJHJvb3Qubm90aWZpZXIuZXJyb3IsIG9uZmlsZTogJHJvb3QuZ2FsbGVyeVJlY2VudC51bnNoaWZ0LmJpbmQoJHJvb3QuZ2FsbGVyeVJlY2VudCksIGNhbnZhc1ByZXZpZXc6IHRydWUgfVxceDIyIHN0eWxlPVxceDIyei1pbmRleDogLTIwOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsgbWluLXdpZHRoOiAxMDAlOyBtaW4taGVpZ2h0OiAxMDAlOyBmb250LXppZTogOTk5cHg7IHRleHQtYWxpZ246IHJpZ2h0OyBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7IG9wYWNpdHk6IDA7IG91dGxpbmU6IG5vbmU7IGN1cnNvcjogaW5oZXJpdDsgZGlzcGxheTogYmxvY2tcXHgyMj4gICAgPCEtLSAva28gLS0+ICAgIDxkaXYgY2xhc3M9XFx4MjJwcm9ncmVzc1xceDIyIHN0eWxlPVxceDIyb3BhY2l0eTogLjU7IHdpZHRoOiA4MCU7IG1hcmdpbi1sZWZ0OiAxMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgYm90dG9tOiAzMCU7IGhlaWdodDogMjBweDsgYm9yZGVyOiAycHggc29saWQgYmxhY2s7XFx4MjI+ICAgICAgPGRpdiBjbGFzcz1cXHgyMnByb2dyZXNzLWJhciBwcm9ncmVzcy1iYXItc3VjY2Vzc1xceDIyIHN0eWxlPVxceDIyaGVpZ2h0OiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgXFx4MjI+PC9kaXY+ICAgIDwvZGl2PiAgPC9kaXY+PC90YWJsZT5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcIm1haW5cIiwgXCI8ZGl2IGlkPVxceDIycGFnZVxceDIyIHN0eWxlPVxceDIyZGlzcGxheTogbm9uZTtcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ2aXNpYmxlOiB0cnVlLCBjc3M6IHsgd2l0aFRvb2xib3g6ICRyb290LnNob3dUb29sYm94LCB3aXRoUHJldmlld0ZyYW1lOiBzaG93UHJldmlld0ZyYW1lIH1cXHgyMj4gIDxkaXYgaWQ9XFx4MjJtYWluLWVkaXQtYXJlYVxceDIyIGRhdGEtYmluZD1cXHgyMmNsaWNrOiBmdW5jdGlvbihvYmosIGV2dCkgeyAkcm9vdC5zZWxlY3RCbG9jayhudWxsKTsgcmV0dXJuIHRydWU7IH0sIGNsaWNrQnViYmxlOiBmYWxzZVxceDIyPiAgICA8IS0tIGtvIHdpdGhQcm9wZXJ0aWVzOiB7IHRlbXBsYXRlTW9kZTogJ3d5c2l3eWcnLCB0ZW1wbGF0ZU1vZGVGYWxsYmFjazogJ3Nob3cnIH0gLS0+ICAgIDxkaXYgaWQ9XFx4MjJtYWluLXd5c2l3eWctYXJlYVxceDIyIGRhdGEtYmluZD1cXHgyMnd5c2l3eWdTY3JvbGxmaXg6IHRydWUsIHNjcm9sbGFibGU6IHRydWUsIGZ1ZHJvcHBhYmxlOiB7IGFjdGl2ZTogZHJhZ2dpbmdJbWFnZSB9LCBjc3M6IHsgaXNkcmFnZ2luZzogZHJhZ2dpbmcsIGlzZHJhZ2dpbmdpbWc6IGRyYWdnaW5nSW1hZ2UgfSwgYmxvY2s6IGNvbnRlbnRcXHgyMj48L2Rpdj4gICAgPCEtLSAva28gLS0+ICA8L2Rpdj4gIDxkaXYgaWQ9XFx4MjJ0b29sYmFyXFx4MjIgY2xhc3M9XFx4MjJtb1xceDIyIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fVxceDIyPiAgICA8IS0tIGtvIGlmOiB0eXBlb2YgJHJvb3QudW5kbyAhPSAndW5kZWZpbmVkJyAtLT4gICAgPHNwYW4gZGF0YS1iaW5kPVxceDIyYnV0dG9uc2V0OiB7IH1cXHgyMiBjbGFzcz1cXHgyMmxlZnRCdXR0b25zXFx4MjI+ICAgIDxhIHRpdGxlPVxceDIyVW5kbyBsYXN0IG9wZXJhdGlvblxceDIyIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdVbmRvIGxhc3Qgb3BlcmF0aW9uJykgfSwgY2xpY2s6ICRyb290LnVuZG8uZXhlY3V0ZSwgY2xpY2tCdWJibGU6IGZhbHNlLCBidXR0b246IHsgZGlzYWJsZWQ6ICEkcm9vdC51bmRvLmVuYWJsZWQoKSwgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLXJlcGx5JyB9LCBsYWJlbDogJHJvb3QudW5kby5uYW1lLCB0ZXh0OiB0cnVlIH1cXHgyMj5VTkRPPC9hPiAgICA8YSB0aXRsZT1cXHgyMlJlZG8gbGFzdCBvcGVyYXRpb25cXHgyMiBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnUmVkbyBsYXN0IG9wZXJhdGlvbicpIH0sIGNsaWNrOiAkcm9vdC5yZWRvLmV4ZWN1dGUsIGNsaWNrQnViYmxlOiBmYWxzZSwgYnV0dG9uOiB7IGRpc2FibGVkOiAhJHJvb3QucmVkby5lbmFibGVkKCksIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1zaGFyZScgfSwgbGFiZWw6ICRyb290LnJlZG8ubmFtZSwgdGV4dDogdHJ1ZSB9XFx4MjI+UkVETzwvYT4gICAgPC9zcGFuPiAgICA8IS0tIGtvIGlmOiAkcm9vdC5kZWJ1ZyAtLT4gICAgPGEgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmNsaWNrOiAkcm9vdC51bmRvUmVzZXQsIGNsaWNrQnViYmxlOiBmYWxzZSwgYnV0dG9uOiB7IGRpc2FibGVkOiAhJHJvb3QudW5kby5lbmFibGVkKCkgJiYgISRyb290LnJlZG8uZW5hYmxlZCgpLCBsYWJlbDogJ3Jlc2V0JywgdGV4dDogdHJ1ZSB9XFx4MjI+UkVTRVQ8L2E+ICAgIDwhLS0gL2tvIC0tPiAgICA8IS0tIC9rbyAtLT4gICAgPHNwYW4+ICAgIDxpbnB1dCBpZD1cXHgyMnNob3dHYWxsZXJ5XFx4MjIgdHlwZT1cXHgyMmNoZWNrYm94XFx4MjIgZGF0YS1iaW5kPVxceDIyY2hlY2tlZDogJHJvb3Quc2hvd0dhbGxlcnksIGJ1dHRvbjogeyByZWZyZXNoT246ICRyb290LnNob3dHYWxsZXJ5LCAgICAgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLWZ3IGZhLXBpY3R1cmUtbycsIHNlY29uZGFyeTogbnVsbCB9LCB0ZXh0OiB0cnVlLCBsYWJlbDogJHJvb3QudCgnR2FsbGVyeScpIH1cXHgyMj48bGFiZWwgdGl0bGU9XFx4MjJTaG93IGltYWdlIGdhbGxlcnlcXHgyMiBmb3I9XFx4MjJzaG93R2FsbGVyeVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1Nob3cgaW1hZ2UgZ2FsbGVyeScpIH1cXHgyMj5zaG93IGdhbGxlcnk8L2xhYmVsPjwvaW5wdXQ+ICAgIDwvc3Bhbj4gICAgPGlucHV0IGlkPVxceDIycHJldmlld0ZyYW1lVG9nZ2xlXFx4MjIgdHlwZT1cXHgyMmNoZWNrYm94XFx4MjIgZGF0YS1iaW5kPVxceDIyY2hlY2tlZDogJHJvb3Quc2hvd1ByZXZpZXdGcmFtZSwgYnV0dG9uOiB7IHJlZnJlc2hPbjogJHJvb3Quc2hvd1ByZXZpZXdGcmFtZSwgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLWZ3IGZhLXRhYmxldCcsIHNlY29uZGFyeTogbnVsbCB9LCB0ZXh0OiBmYWxzZSwgbGFiZWw6ICRyb290LnQoJ1ByZXZpZXcnKSB9XFx4MjI+PGxhYmVsIHRpdGxlPVxceDIyU2hvdyBsaXZlIHByZXZpZXdcXHgyMiBmb3I9XFx4MjJwcmV2aWV3RnJhbWVUb2dnbGVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdTaG93IGxpdmUgcHJldmlldycpIH1cXHgyMj5QUkVWSUVXPC9sYWJlbD48L2lucHV0PiAgICA8IS0tIGtvIGlmOiAkcm9vdC5kZWJ1ZyAtLT4gICAgPGEgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmNsaWNrOiAkcm9vdC5leHBvcnQsIGNsaWNrQnViYmxlOiBmYWxzZSwgYnV0dG9uOiB7IGxhYmVsOiAnZXhwb3J0JywgdGV4dDogdHJ1ZSB9XFx4MjI+RVhQT1JUPC9hPiAgICA8aW5wdXQgdHlwZT1cXHgyMmNoZWNrYm94XFx4MjIgZGF0YS1iaW5kPVxceDIyY2hlY2tlZDogJHJvb3QuZGVidWdcXHgyMiAvPiBkZWJ1ZyAgICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6ICRyb290LmxvYWREZWZhdWx0QmxvY2tzLCBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtdXBsb2FkJyB9LCBsYWJlbDogJ0RlZmF1bHQnLCB0ZXh0OiB0cnVlIH1cXHgyMj5MT0FEIEJMT0NLUzwvYT4gICAgWzxhIGlkPVxceDIyc3Vic2NyaXB0aW9uc0NvdW50XFx4MjIgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dmlld01vZGVsLmxvb3BTdWJzY3JpcHRpb25zQ291bnQoKVxceDIyPnN1YnM8L2E+XSAgICA8IS0tIC9rbyAtLT4gICAgPHNwYW4gZGF0YS1iaW5kPVxceDIydmlzaWJsZTogZmFsc2VcXHgyMj4gICAgPGlucHV0IHR5cGU9XFx4MjJjaGVja2JveFxceDIyIGRhdGEtYmluZD1cXHgyMmNoZWNrZWQ6ICRyb290LnNob3dUb29sYm94XFx4MjIgLz4gdG9vbGJveCAgICA8L3NwYW4+ICAgIDxkaXYgY2xhc3M9XFx4MjJyaWdodEJ1dHRvbnNcXHgyMj4gICAgPCEtLSBrbyBpZjogdHlwZW9mICRyb290LnNhdmUgIT09ICd1bmRlZmluZWQnIC0tPiAgICA8YSB0aXRsZT1cXHgyMlNhdmUgdGVtcGxhdGVcXHgyMiBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnU2F2ZSB0ZW1wbGF0ZScpIH0sIGNsaWNrOiAkcm9vdC5zYXZlLmV4ZWN1dGUsIGNsaWNrQnViYmxlOiBmYWxzZSwgYnV0dG9uOiB7IGRpc2FibGVkOiAhJHJvb3Quc2F2ZS5lbmFibGVkKCksIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mdyBmYS1jbG91ZC11cGxvYWQnIH0sIGxhYmVsOiAkcm9vdC50KCRyb290LnNhdmUubmFtZSksIHRleHQ6IHRydWUgfVxceDIyPlNBTFZBPC9hPiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogdHlwZW9mICRyb290LnRlc3QgIT09ICd1bmRlZmluZWQnIC0tPiAgICA8YSB0aXRsZT1cXHgyMlNob3cgcHJldmlldyBhbmQgc2VuZCB0ZXN0XFx4MjIgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1Nob3cgcHJldmlldyBhbmQgc2VuZCB0ZXN0JykgfSwgY2xpY2s6ICRyb290LnRlc3QuZXhlY3V0ZSwgY2xpY2tCdWJibGU6IGZhbHNlLCBidXR0b246IHsgZGlzYWJsZWQ6ICEkcm9vdC50ZXN0LmVuYWJsZWQoKSwgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLWZ3IGZhLXBhcGVyLXBsYW5lJyB9LCBsYWJlbDogJHJvb3QudCgkcm9vdC50ZXN0Lm5hbWUpLCB0ZXh0OiB0cnVlIH1cXHgyMj5URVNUPC9hPiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogdHlwZW9mICRyb290LmRvd25sb2FkICE9PSAndW5kZWZpbmVkJyAtLT4gICAgPGZvcm0gaWQ9XFx4MjJkb3dubG9hZEZvcm1cXHgyMiBhY3Rpb249XFx4MjIjXFx4MjIgbWV0aG9kPVxceDIyUE9TVFxceDIyPiAgICA8aW5wdXQgdHlwZT1cXHgyMmhpZGRlblxceDIyIG5hbWU9XFx4MjJhY3Rpb25cXHgyMiB2YWx1ZT1cXHgyMmRvd25sb2FkXFx4MjIgLz4gICAgPGlucHV0IHR5cGU9XFx4MjJoaWRkZW5cXHgyMiBuYW1lPVxceDIyZmlsZW5hbWVcXHgyMiB2YWx1ZT1cXHgyMmVtYWlsLmh0bWxcXHgyMiAvPiAgICA8aW5wdXQgdHlwZT1cXHgyMmhpZGRlblxceDIyIG5hbWU9XFx4MjJodG1sXFx4MjIgaWQ9XFx4MjJkb3dubG9hZEh0bWxUZXh0YXJlYVxceDIyIC8+ICAgIDxhIHRpdGxlPVxceDIyRG93bmxvYWQgdGVtcGxhdGVcXHgyMiBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnRG93bmxvYWQgdGVtcGxhdGUnKSB9LCBjbGljazogJHJvb3QuZG93bmxvYWQuZXhlY3V0ZSwgY2xpY2tCdWJibGU6IGZhbHNlLCBidXR0b246IHsgZGlzYWJsZWQ6ICEkcm9vdC5kb3dubG9hZC5lbmFibGVkKCksIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mdyBmYS1kb3dubG9hZCcgfSwgbGFiZWw6ICRyb290LnQoJHJvb3QuZG93bmxvYWQubmFtZSksIHRleHQ6IHRydWUgfVxceDIyPkRPV05MT0FEPC9hPiAgICA8L2Zvcm0+ICAgIDwhLS0gL2tvIC0tPiAgICA8L2Rpdj4gIDwvZGl2PiAgPCEtLSBrbyBpZjogJHJvb3Quc2hvd1Rvb2xib3ggLS0+ICA8ZGl2IGlkPVxceDIybWFpbi10b29sYm94XFx4MjIgY2xhc3M9XFx4MjJtb1xceDIyIGRhdGEtYmluZD1cXHgyMnNjcm9sbGFibGU6IHRydWUsIHdpdGhQcm9wZXJ0aWVzOiB7IHRlbXBsYXRlTW9kZTogJ2VkaXQnIH1cXHgyMj4gICAgPGRpdiBkYXRhLWJpbmQ9XFx4MjJ0ZW1wbGF0ZTogeyBuYW1lOiAndG9vbGJveCcgfVxceDIyPjwvZGl2PiAgPC9kaXY+ICA8IS0tIC9rbyAtLT4gICAgPGRpdiBpZD1cXHgyMm1haW4tcHJldmlld1xceDIyIGNsYXNzPVxceDIybW9cXHgyMiBkYXRhLWJpbmQ9XFx4MjJzY3JvbGxhYmxlOiB0cnVlLCBpZjogJHJvb3Quc2hvd1ByZXZpZXdGcmFtZVxceDIyPiAgICA8ZGl2IGlkPVxceDIycHJldmlldy10b29sYmFyXFx4MjI+ICAgICAgPGRpdiBkYXRhLWJpbmQ9XFx4MjJ2aXNpYmxlOiAkcm9vdC5zaG93UHJldmlld0ZyYW1lLCBidXR0b25zZXQ6IHsgfVxceDIyIHN0eWxlPVxceDIyZGlzcGxheTogaW5saW5lLWJsb2NrXFx4MjI+ICAgICAgICA8aW5wdXQgaWQ9XFx4MjJwcmV2aWV3TGFyZ2VcXHgyMiB0eXBlPVxceDIycmFkaW9cXHgyMiBuYW1lPVxceDIycHJldmlld01vZGVcXHgyMiB2YWx1ZT1cXHgyMmxhcmdlXFx4MjIgZGF0YS1iaW5kPVxceDIyY2hlY2tlZDogJHJvb3QucHJldmlld01vZGUsIGJ1dHRvbjogeyB0ZXh0OiBmYWxzZSwgbGFiZWw6ICdsYXJnZScsIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mdyBmYS1kZXNrdG9wJyB9IH1cXHgyMiAvPiAgICAgICAgPGxhYmVsIGZvcj1cXHgyMnByZXZpZXdMYXJnZVxceDIyIHRpdGxlPVxceDIyTGFyZ2Ugc2NyZWVuXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnTGFyZ2Ugc2NyZWVuJykgfVxceDIyPkxhcmdlIHNjcmVlbjwvbGFiZWw+ICAgICAgICA8aW5wdXQgaWQ9XFx4MjJwcmV2aWV3RGVza3RvcFxceDIyIHR5cGU9XFx4MjJyYWRpb1xceDIyIG5hbWU9XFx4MjJwcmV2aWV3TW9kZVxceDIyIHZhbHVlPVxceDIyZGVza3RvcFxceDIyIGRhdGEtYmluZD1cXHgyMmNoZWNrZWQ6ICRyb290LnByZXZpZXdNb2RlLCBidXR0b246IHsgdGV4dDogZmFsc2UsIGxhYmVsOiAnZGVza3RvcCcsIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mdyBmYS10YWJsZXQnIH0gfVxceDIyIC8+ICAgICAgICA8bGFiZWwgZm9yPVxceDIycHJldmlld0Rlc2t0b3BcXHgyMiB0aXRsZT1cXHgyMlRhYmxldFxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1RhYmxldCcpIH1cXHgyMj5UYWJsZXQ8L2xhYmVsPiAgICAgICAgPGlucHV0IGlkPVxceDIycHJldmlld01vYmlsZVxceDIyIHR5cGU9XFx4MjJyYWRpb1xceDIyIG5hbWU9XFx4MjJwcmV2aWV3TW9kZVxceDIyIHZhbHVlPVxceDIybW9iaWxlXFx4MjIgZGF0YS1iaW5kPVxceDIyY2hlY2tlZDogJHJvb3QucHJldmlld01vZGUsIGJ1dHRvbjogeyB0ZXh0OiBmYWxzZSwgbGFiZWw6ICdtb2JpbGUnLCBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtbW9iaWxlJyB9IH1cXHgyMiAvPiAgICAgICAgPGxhYmVsIGZvcj1cXHgyMnByZXZpZXdNb2JpbGVcXHgyMiB0aXRsZT1cXHgyMlNtYXJ0cGhvbmVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdTbWFydHBob25lJykgfVxceDIyPlNtYXJ0cGhvbmU8L2xhYmVsPiAgICAgIDwvZGl2PiAgICA8L2Rpdj4gICAgPGRpdiBpZD1cXHgyMmZyYW1lLWNvbnRhaW5lclxceDIyIGRhdGEtYmluZD1cXHgyMmNzczogeyBkZXNrdG9wOiAkcm9vdC5wcmV2aWV3TW9kZSgpID09ICdkZXNrdG9wJywgbW9iaWxlOiAkcm9vdC5wcmV2aWV3TW9kZSgpID09ICdtb2JpbGUnLCBsYXJnZTogJHJvb3QucHJldmlld01vZGUoKSA9PSAnbGFyZ2UnIH1cXHgyMj4gICAgICA8aWZyYW1lIGRhdGEtYmluZD1cXHgyMmJpbmRJZnJhbWU6ICRkYXRhXFx4MjI+PC9pZnJhbWU+ICAgIDwvZGl2PiAgPC9kaXY+ICA8ZGl2IGNsYXNzPVxceDIybW9cXHgyMiBpZD1cXHgyMm1vLWJvZHlcXHgyMj48L2Rpdj4gIDwhLS0gVE9ETyBSRU1PVkUgTUUgIDxkaXYgaWQ9XFx4MjJpbmNvbXBhdGlibGUtYnJvd3NlclxceDIyIHRpdGxlPVxceDIyVW5zdXBwb3J0ZWQgYnJvd3NlclxceDIyIHN0eWxlPVxceDIyZGlzcGxheTogbm9uZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1VzdXBwb3J0ZWQgYnJvd3NlcicpIH0sIGh0bWw6ICc8cD5Zb3VyIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZC48L3A+PHA+VXNlIGEgZGlmZmVyZW50IGJyb3dzZXIgb3IgdHJ5IHVwZGFyaW5nIHlvdXIgYnJvd3Nlci48L3A+PHA+U3VwcG9ydGVkIGJyb3dzZXJzOiA8dWw+PGxpPkludGVybmV0IEV4cGxvcmVyICZndDs9IDEwPC9saT48bGk+R29vZ2xlIENocm9tZSAmZ3Q7PSAzMDwvbGk+PGxpPkFwcGxlIFNhZmFyaSAmZ3Q7PSA1PC9saT48bGk+TW96aWxsYSBGaXJlZml4ICZndDs9IDIwPC9saT48L3VsPjwvcD4nXFx4MjI+ICAgIFVuc3VwcG9ydGVkIGJyb3dzZXIgIDwvZGl2PiAgLS0+ICA8ZGl2IGlkPVxceDIyaW5jb21wYXRpYmxlLXRlbXBsYXRlXFx4MjIgdGl0bGU9XFx4MjJTYXZlZCBtb2RlbCBpcyBvYnNvbGV0ZVxceDIyIHN0eWxlPVxceDIyZGlzcGxheTogbm9uZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1NhdmVkIG1vZGVsIGlzIG9ic29sZXRlJykgfSwgaHRtbDogJHJvb3QudCgnPHA+VGhlIHNhdmVkIG1vZGVsIGhhcyBiZWVuIGNyZWF0ZWQgd2l0aCBhIHByZXZpb3VzLCBub24gY29tcGxldGVseSBjb21wYXRpYmxlIHZlcnNpb24sIG9mIHRoZSB0ZW1wbGF0ZTwvcD48cD5Tb21lIGNvbnRlbnQgb3Igc3R5bGUgaW4gdGhlIG1vZGVsIDxiPkNPVUxEIEJFIExPU1Q8L2I+IGlmIHlvdSB3aWxsIDxiPnNhdmU8L2I+PC9wPjxwPkNvbnRhY3QgdXMgZm9yIG1vcmUgaW5mb3JtYXRpb25zITwvcD4nKVxceDIyPiAgICBJbmNvbXBhdGlibGUgdGVtcGxhdGUgIDwvZGl2PiAgPGRpdiBpZD1cXHgyMmZha2UtaW1hZ2UtZWRpdG9yXFx4MjIgdGl0bGU9XFx4MjJGYWtlIGltYWdlIGVkaXRvclxceDIyIHN0eWxlPVxceDIyZGlzcGxheTogbm9uZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ0Zha2UgaW1hZ2UgZWRpdG9yJykgfSwgaHRtbDogJHJvb3QudCgnPHA+RmFrZSBpbWFnZSBlZGl0b3I8L3A+JylcXHgyMj4gICAgPHA+RmFrZSBpbWFnZSBlZGl0b3I8L3A+ICA8L2Rpdj48L2Rpdj48IS0tIGtvIGlmOiAkcm9vdC5sb2dvUGF0aCAtLT48ZGl2IGlkPVxceDIybG9hZGluZ1xceDIyIGNsYXNzPVxceDIybG9hZGluZ1xceDIyIHN0eWxlPVxceDIyZGlzcGxheTogYmxvY2s7IHdpZHRoOiAzMDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBoZWlnaHQ6IDMycHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOjA7IGJvdHRvbTogMDsgbGVmdDogMDsgcmlnaHQ6IDA7ICBtYXJnaW46IGF1dG87XFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyBzdHlsZTogJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1cHg7IGxlZnQ6IDZweDsgei1pbmRleDogMTUwOyd9LCBjc3M6IHsgbG9hZGluZzogZmFsc2UgfVxceDIyPiAgPGEgaHJlZj1cXHgyMi9cXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IGhyZWY6ICRyb290LmxvZ29VcmwsIGFsdDogJHJvb3QubG9nb0FsdCB9XFx4MjI+PGltZyBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHNyYzogJHJvb3QubG9nb1BhdGggfVxceDIyIHdpZHRoPVxceDIyMzJcXHgyMiBoZWlnaHQ9XFx4MjIzMlxceDIyIGFsdD1cXHgyMm1vc2FpY29cXHgyMiBib3JkZXI9XFx4MjIwXFx4MjIgLz48L2E+ICA8ZGl2IHN0eWxlPVxceDIyb3BhY2l0eTogMFxceDIyIGRhdGEtYmluZD1cXHgyMnZpc2libGU6IGZhbHNlXFx4MjI+T3BwcHMuLi4gISE8L2Rpdj48L2Rpdj48IS0tIC9rbyAtLT5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcInRvb2xib3hcIiwgXCI8ZGl2IGlkPVxceDIydG9vbHRhYnNcXHgyMiBjbGFzcz1cXHgyMnRhYnNfaG9yaXpvbnRhbCBidXR0b25fY29sb3JcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0YWJzOiB7IGFjdGl2ZTogJHJvb3Quc2VsZWN0ZWRUb29sIH1cXHgyMj4gIDx1bD4gICAgPGxpIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fVxceDIyPjxhIHRpdGxlPVxceDIyQmxvY2tzIHJlYWR5IHRvIGJlIGFkZGVkIHRvIHRoZSB0ZW1wbGF0ZVxceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgaHJlZj1cXHgyMiN0b29sYmxvY2tzXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnQmxvY2tzIHJlYWR5IHRvIGJlIGFkZGVkIHRvIHRoZSB0ZW1wbGF0ZScpIH1cXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLWN1YmVzXFx4MjI+PC9pPiA8c3BhbiBkYXRhLWJpbmQ9XFx4MjJodG1sOiAkcm9vdC50KCdCbG9ja3MnKVxceDIyPkJsb2Nrczwvc3Bhbj48L2E+PC9saT4gICAgPGxpIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fVxceDIyPjxhIHRpdGxlPVxceDIyRWRpdCBjb250ZW50IG9wdGlvbnNcXHgyMiBocmVmPVxceDIyI3Rvb2xjb250ZW50c1xceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnRWRpdCBjb250ZW50IG9wdGlvbnMnKSB9XFx4MjI+PGkgY2xhc3M9XFx4MjJmYSBmYS1mdyBmYS1wZW5jaWxcXHgyMj48L2k+IDxzcGFuIGRhdGEtYmluZD1cXHgyMmh0bWw6ICRyb290LnQoJ0NvbnRlbnQnKVxceDIyPkNvbnRlbnQ8L3NwYW4+PC9hPjwvbGk+ICAgIDxsaSBkYXRhLWJpbmQ9XFx4MjJ0b29sdGlwczoge31cXHgyMj48YSB0aXRsZT1cXHgyMkVkaXQgc3R5bGUgb3B0aW9uc1xceDIyIGhyZWY9XFx4MjIjdG9vbHN0eWxlc1xceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnRWRpdCBzdHlsZSBvcHRpb25zJykgfVxceDIyPjxpIGNsYXNzPVxceDIyZmEgZmEtZncgZmEtcGFpbnQtYnJ1c2hcXHgyMj48L2k+IDxzcGFuIGRhdGEtYmluZD1cXHgyMmh0bWw6ICRyb290LnQoJ1N0eWxlJylcXHgyMj5TdHlsZTwvc3Bhbj48L2E+PC9saT4gIDwvdWw+ICA8ZGl2IGlkPVxceDIydG9vbGJsb2Nrc1xceDIyIGRhdGEtYmluZD1cXHgyMnNjcm9sbGFibGU6IHRydWVcXHgyMj4gICAgPGRpdiBjbGFzcz1cXHgyMmJsb2NrLWxpc3RcXHgyMiBkYXRhLWJpbmQ9XFx4MjJmb3JlYWNoOiBibG9ja0RlZnNcXHgyMiBzdHlsZT1cXHgyMnRleHQtYWxpZ246IGNlbnRlclxceDIyPiAgICAgIDxkaXYgY2xhc3M9XFx4MjJkcmFnZ2FibGUtaXRlbVxceDIyIGRhdGEtYmluZD1cXHgyMndpdGhQcm9wZXJ0aWVzOiB7IHRlbXBsYXRlTW9kZTogJ3Nob3cnIH1cXHgyMj4gICAgICAgIDxkaXYgY2xhc3M9XFx4MjJibG9ja1xceDIyIGRhdGEtYmluZD1cXHgyMmV4dGRyYWdnYWJsZTogeyBjb25uZWN0Q2xhc3M6ICdzb3J0YWJsZS1ibG9ja3MtZWRpdCcsIGRhdGE6ICRkYXRhLCBkcm9wQ29udGFpbmVyOiAnI21haW4td3lzaXd5Zy1hcmVhJywgZHJhZ2dpbmc6ICRyb290LmRyYWdnaW5nLCAnb3B0aW9ucyc6IHsgaGFuZGxlOiAnLmhhbmRsZScsIGRpc3RhbmNlOiAxMCwgJ2FwcGVuZFRvJzogJyNwYWdlJyB9IH0sIGNsaWNrOiAkcm9vdC5hZGRCbG9ja1xceDIyIHN0eWxlPVxceDIycG9zaXRpb246IHJlbGF0aXZlO1xceDIyPiAgICAgICAgICA8ZGl2IHRpdGxlPVxceDIyQ2xpY2sgb3IgZHJhZyB0byBhZGQgdGhpcyBibG9jayB0byB0aGUgdGVtcGxhdGVcXHgyMiBjbGFzcz1cXHgyMmhhbmRsZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ0NsaWNrIG9yIGRyYWcgdG8gYWRkIHRoaXMgYmxvY2sgdG8gdGhlIHRlbXBsYXRlJykgfSwgdG9vbHRpcHM6IHt9XFx4MjI+PC9kaXY+ICAgICAgICAgIDxpbWcgZGF0YS1iaW5kPVxceDIyYXR0cjogeyBhbHQ6ICRyb290LnQoJ0Jsb2NrIF9fbmFtZV9fJywgeyBuYW1lOiBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHR5cGUpIH0pLCBzcmM6ICRyb290LnRlbXBsYXRlUGF0aCgnZWRyZXMvJytrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHR5cGUpKycucG5nJykgfVxceDIyIGFsdD1cXHgyMkJsb2NrIF9fbmFtZV9fXFx4MjIgLz4gICAgICAgIDwvZGl2PiAgICAgICAgPGEgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGNsYXNzPVxceDIyYWRkYmxvY2tidXR0b25cXHgyMiBkYXRhLWJpbmQ9XFx4MjJjbGljazogJHJvb3QuYWRkQmxvY2ssIGJ1dHRvbjogeyBsYWJlbDogJHJvb3QudCgnQWRkJykgfVxceDIyPkFkZDwvYT4gICAgICA8L2Rpdj4gICAgPC9kaXY+ICA8L2Rpdj4gIDxkaXYgaWQ9XFx4MjJ0b29sY29udGVudHNcXHgyMiBkYXRhLWJpbmQ9XFx4MjJzY3JvbGxhYmxlOiB0cnVlXFx4MjI+ICAgIDwhLS0ga28gaWY6ICRyb290LnNlbGVjdGVkQmxvY2soKSAhPT0gbnVsbCAtLT4gICAgPGRpdiBkYXRhLWJpbmQ9XFx4MjJibG9jazogJHJvb3Quc2VsZWN0ZWRCbG9ja1xceDIyPjwvZGl2PiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogJHJvb3Quc2VsZWN0ZWRCbG9jaygpID09IG51bGwgLS0+ICAgIDxkaXYgY2xhc3M9XFx4MjJub1NlbGVjdGVkQmxvY2tcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0ZXh0OiAkcm9vdC50KCdCeSBjbGlja2luZyBvbiBtZXNzYWdlIHBhcnRzIHlvdSB3aWxsIHNlbGVjdCBhIGJsb2NrIGFuZCBjb250ZW50IG9wdGlvbnMsIGlmIGFueSwgd2lsbCBzaG93IGhlcmUnKVxceDIyPkJ5IGNsaWNraW5nIG9uIG1lc3NhZ2UgcGFydHMgeW91IHdpbGwgc2VsZWN0IGEgYmxvY2sgYW5kIGNvbnRlbnQgb3B0aW9ucywgaWYgYW55LCB3aWxsIHNob3cgaGVyZTwvZGl2PiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBibG9jazogY29udGVudCAtLT48IS0tIC9rbyAtLT4gIDwvZGl2PiAgICA8ZGl2IGlkPVxceDIydG9vbHN0eWxlc1xceDIyIGRhdGEtYmluZD1cXHgyMnNjcm9sbGFibGU6IHRydWUsIHdpdGhQcm9wZXJ0aWVzOiB7IHRlbXBsYXRlTW9kZTogJ3N0eWxlcicgfVxceDIyPiAgICA8IS0tIGtvIGlmOiB0eXBlb2YgJHJvb3QuY29udGVudCgpLnRoZW1lID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgJHJvb3QuY29udGVudCgpLnRoZW1lKCkuc2NoZW1lID09PSAndW5kZWZpbmVkJyB8fCAkcm9vdC5jb250ZW50KCkudGhlbWUoKS5zY2hlbWUoKSA9PT0gJ2N1c3RvbScgLS0+ICAgICAgPCEtLSBrbyBpZjogJHJvb3Quc2VsZWN0ZWRCbG9jaygpICE9PSBudWxsIC0tPiAgICAgIDxkaXYgZGF0YS1iaW5kPVxceDIyYmxvY2s6ICRyb290LnNlbGVjdGVkQmxvY2ssIGNzczogeyB3b3JrTG9jYWw6ICRyb290LnNlbGVjdGVkQmxvY2soKS5jdXN0b21TdHlsZSwgd29ya0dsb2JhbDogdHlwZW9mICRyb290LnNlbGVjdGVkQmxvY2soKS5jdXN0b21TdHlsZSA9PT0gJ3VuZGVmaW5lZCcgfHwgISRyb290LnNlbGVjdGVkQmxvY2soKS5jdXN0b21TdHlsZSgpIH1cXHgyMj48L2Rpdj4gICAgICA8IS0tIC9rbyAtLT4gICAgICA8IS0tIGtvIGlmOiAkcm9vdC5zZWxlY3RlZEJsb2NrKCkgPT0gbnVsbCAtLT4gICAgICA8ZGl2IGNsYXNzPVxceDIybm9TZWxlY3RlZEJsb2NrXFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnQnkgY2xpY2tpbmcgb24gbWVzc2FnZSBwYXJ0cyB5b3Ugd2lsbCBzZWxlY3QgYSBibG9jayBhbmQgc3R5bGUgb3B0aW9ucywgaWYgYXZhaWxhYmxlLCB3aWxsIHNob3cgaGVyZScpXFx4MjI+QnkgY2xpY2tpbmcgb24gbWVzc2FnZSBwYXJ0cyB5b3Ugd2lsbCBzZWxlY3QgYSBibG9jayBhbmQgc3R5bGUgb3B0aW9ucywgaWYgYXZhaWxhYmxlLCB3aWxsIHNob3cgaGVyZTwvZGl2PiAgICAgIDwhLS0gL2tvIC0tPiAgICAgIDxkaXYgY2xhc3M9XFx4MjJ3b3JrR2xvYmFsQ29udGVudFxceDIyPiAgICAgIDwhLS0ga28gYmxvY2s6IGNvbnRlbnQgLS0+PCEtLSAva28gLS0+ICAgICAgPC9kaXY+ICAgIDwhLS0gL2tvIC0tPiAgPC9kaXY+PC9kaXY+ICAgICAgICA8ZGl2IGlkPVxceDIydG9vbGltYWdlc1xceDIyIGNsYXNzPVxceDIyc2xpZGViYXJcXHgyMiBkYXRhLWJpbmQ9XFx4MjJzY3JvbGxhYmxlOiB0cnVlLCBjc3M6IHsgaGlkZGVuOiAkcm9vdC5zaG93R2FsbGVyeSgpID09PSBmYWxzZSB9XFx4MjI+ICA8ZGl2IGNsYXNzPVxceDIyY2xvc2VcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjbGljazogJHJvb3Quc2hvd0dhbGxlcnkuYmluZCgkZWxlbWVudCwgZmFsc2UpO1xceDIyPlg8L2Rpdj4gIDxzcGFuIGNsYXNzPVxceDIycGFuZS10aXRsZVxceDIyIGRhdGEtYmluZD1cXHgyMnRleHQ6ICRyb290LnQoJ0dhbGxlcnk6JylcXHgyMj5HYWxsZXJ5Ojwvc3Bhbj4gIDxkaXYgZGF0YS1kcm9wLWNvbnRlbnQ9XFx4MjJEcm9wIGhlcmVcXHgyMiBjbGFzcz1cXHgyMmltZy1kcm9wem9uZSBwYW5lIHVwbG9hZHpvbmVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7ICdkYXRhLWRyb3AtY29udGVudCc6ICRyb290LnQoJ0Ryb3AgaGVyZScpIH0sIGZ1ZHJvcHBhYmxlOiB7IGFjdGl2ZUNsYXNzOiAndWktc3RhdGUtaGlnaGxpZ2h0JywgaG92ZXJDbGFzczogJ3VpLXN0YXRlLWRyYWdob3ZlcicgfVxceDIyPiAgPGRpdiBjbGFzcz1cXHgyMm1vLXVwbG9hZHpvbmVcXHgyMiBzdHlsZT1cXHgyMnBvc2l0aW9uOiByZWxhdGl2ZTsgcGFkZGluZzogMmVtOyBib3JkZXI6IDJweCBkb3R0ZWQgIzgwODA4MFxceDIyPiAgICAgPGlucHV0IGNsYXNzPVxceDIyZmlsZXVwbG9hZFxceDIyIHR5cGU9XFx4MjJmaWxlXFx4MjIgbXVsdGlwbGUgbmFtZT1cXHgyMmZpbGVzW11cXHgyMiBkYXRhLWJpbmQ9XFx4MjJmaWxldXBsb2FkOiB7IG9uZXJyb3I6ICRyb290Lm5vdGlmaWVyLmVycm9yLCBvbmZpbGU6ICRyb290LmxvYWRJbWFnZSB9XFx4MjIgc3R5bGU9XFx4MjJ6LWluZGV4OiAxMDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7IG1pbi13aWR0aDogMTAwJTsgbWluLWhlaWdodDogMTAwJTsgZm9udC16aWU6IDk5OXB4OyB0ZXh0LWFsaWduOiByaWdodDsgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTApOyBvcGFjaXR5OiAwOyBvdXRsaW5lOiBub25lOyBjdXJzb3I6IGluaGVyaXQ7IGRpc3BsYXk6IGJsb2NrXFx4MjI+ICAgICA8c3BhbiBkYXRhLWJpbmQ9XFx4MjJ0ZXh0OiAkcm9vdC50KCdDbGljayBvciBkcmFnIGZpbGVzIGhlcmUnKVxceDIyPkNsaWNrIG9yIGRyYWcgZmlsZXMgaGVyZTwvc3Bhbj4gICAgIDxkaXYgY2xhc3M9XFx4MjJ3b3Jrem9uZVxceDIyIHN0eWxlPVxceDIycG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7IG92ZXJmbG93OiBoaWRkZW47XFx4MjI+ICAgICAgIDxkaXYgY2xhc3M9XFx4MjJwcm9ncmVzc1xceDIyIHN0eWxlPVxceDIyb3BhY2l0eTogLjU7IHdpZHRoOiA4MCU7IG1hcmdpbi1sZWZ0OiAxMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgYm90dG9tOiAzMCU7IGhlaWdodDogMjBweDsgYm9yZGVyOiAycHggc29saWQgYmxhY2s7XFx4MjI+ICAgICAgICAgPGRpdiBjbGFzcz1cXHgyMnByb2dyZXNzLWJhciBwcm9ncmVzcy1iYXItc3VjY2Vzc1xceDIyIHN0eWxlPVxceDIyaGVpZ2h0OiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgXFx4MjI+PC9kaXY+ICAgICAgIDwvZGl2PiAgICAgPC9kaXY+ICA8L2Rpdj4gIDwvZGl2PiAgPCEtLSBrbyBpZjogJHJvb3Quc2hvd0dhbGxlcnkoKSAtLT4gIDxkaXYgaWQ9XFx4MjJ0b29saW1hZ2VzdGFiXFx4MjIgY2xhc3M9XFx4MjJ0YWJzX2hvcml6b250YWxcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0YWJzOiB7IGFjdGl2ZTogJHJvb3Quc2VsZWN0ZWRJbWFnZVRhYiB9XFx4MjI+ICAgIDx1bD4gICAgICA8bGkgZGF0YS1iaW5kPVxceDIydG9vbHRpcHM6IHt9XFx4MjI+PGEgdGl0bGU9XFx4MjJTZXNzaW9uIGltYWdlc1xceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgaHJlZj1cXHgyMiN0b29saW1hZ2VzcmVjZW50XFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnU2Vzc2lvbiBpbWFnZXMnKSB9LCB0ZXh0OiAkcm9vdC50KCdSZWNlbnRzJylcXHgyMj5SZWNlbnRzPC9hPjwvbGk+ICAgICAgPGxpIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fVxceDIyPjxhIHRpdGxlPVxceDIyUmVtb3RlIGdhbGxlcnlcXHgyMiBkYXRhLWxvY2FsPVxceDIydHJ1ZVxceDIyIGhyZWY9XFx4MjIjdG9vbGltYWdlc2dhbGxlcnlcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdSZW1vdGUgZ2FsbGVyeScpIH0sIHRleHQ6ICRyb290LnQoJ0dhbGxlcnknKVxceDIyPkdhbGxlcnk8L2E+PC9saT4gICAgPC91bD4gICAgPGRpdiBpZD1cXHgyMnRvb2xpbWFnZXNyZWNlbnRcXHgyMj4gICAgICA8IS0tIGtvIGlmOiBnYWxsZXJ5UmVjZW50KCkubGVuZ3RoID09IDAgLS0+PGRpdiBjbGFzcz1cXHgyMmdhbGxlcnlFbXB0eVxceDIyIGRhdGEtYmluZD1cXHgyMnRleHQ6ICRyb290LnQoJ05vIGltYWdlcyB1cGxvYWRlZCwgeWV0JylcXHgyMj5ObyBpbWFnZXMgdXBsb2FkZWQsIHlldDwvZGl2PjwhLS0gL2tvIC0tPiAgICAgIDwhLS0ga28gdGVtcGxhdGU6IHtuYW1lOiAnZ2FsbGVyeS1pbWFnZXMnLCBkYXRhOiB7IGl0ZW1zOiBnYWxsZXJ5UmVjZW50IH0gfSAtLT4jIHJlY2VudCBnYWxsZXJ5ICM8IS0tIC9rbyAtLT4gICAgPC9kaXY+ICAgIDxkaXYgaWQ9XFx4MjJ0b29saW1hZ2VzZ2FsbGVyeVxceDIyIHN0eWxlPVxceDIydGV4dC1hbGlnbjogY2VudGVyXFx4MjI+ICAgIDwhLS0ga28gaWY6ICRyb290LmdhbGxlcnlMb2FkZWQoKSA9PT0gZmFsc2UgLS0+PGEgY2xhc3M9XFx4MjJsb2FkYnV0dG9uXFx4MjIgdGl0bGU9XFx4MjJTaG93IGltYWdlcyBmcm9tIHRoZSBnYWxsZXJ5XFx4MjIgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1Nob3cgaW1hZ2VzIGZyb20gdGhlIGdhbGxlcnknKSB9LCBjbGljazogJHJvb3QubG9hZEdhbGxlcnksIGJ1dHRvbjogeyBkaXNhYmxlZDogJHJvb3QuZ2FsbGVyeUxvYWRlZCwgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLWZ3IGZhLXBpY3R1cmUtbycgfSwgbGFiZWw6ICRyb290LmdhbGxlcnlMb2FkZWQoKSA9PSAnbG9hZGluZycgPyAkcm9vdC50KCdMb2FkaW5nLi4uJykgOiAkcm9vdC50KCdMb2FkIGdhbGxlcnknKSwgdGV4dDogdHJ1ZSB9XFx4MjI+IyBsb2FkIGdhbGx5ICM8L2E+PCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6ICRyb290LmdhbGxlcnlMb2FkZWQoKSA9PT0gJ2xvYWRpbmcnIC0tPjxkaXYgY2xhc3M9XFx4MjJnYWxsZXJ5RW1wdHlcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0ZXh0OiAkcm9vdC50KCdMb2FkaW5nIGdhbGxlcnkuLi4nKVxceDIyPkxvYWRpbmcgZ2FsbGVyeS4uLjwvZGl2PjwhLS0gL2tvIC0tPiAgICA8IS0tIGtvIGlmOiAkcm9vdC5nYWxsZXJ5TG9hZGVkKCkgPT09IDAgLS0+PGRpdiBjbGFzcz1cXHgyMmdhbGxlcnlFbXB0eVxceDIyIGRhdGEtYmluZD1cXHgyMnRleHQ6ICRyb290LnQoJ1RoZSBnYWxsZXJ5IGlzIGVtcHR5JylcXHgyMj5UaGUgZ2FsbGVyeSBpcyBlbXB0eTwvZGl2PjwhLS0gL2tvIC0tPiAgICA8IS0tIGtvIHRlbXBsYXRlOiB7bmFtZTogJ2dhbGxlcnktaW1hZ2VzJywgZGF0YTogeyBpdGVtczogZ2FsbGVyeVJlbW90ZSB9IH0gLS0+IyByZW1vdGUgZ2FsbGVyeSAjPCEtLSAva28gLS0+ICAgIDwvZGl2PiAgPC9kaXY+ICA8IS0tIC9rbyAtLT48L2Rpdj48ZGl2IGlkPVxceDIydG9vbGRlYnVnXFx4MjIgY2xhc3M9XFx4MjJzbGlkZWJhclxceDIyIGRhdGEtYmluZD1cXHgyMmNzczogeyBoaWRkZW46ICRyb290LmRlYnVnKCkgPT09IGZhbHNlIH1cXHgyMj4gIDxkaXYgY2xhc3M9XFx4MjJjbG9zZVxceDIyIGRhdGEtYmluZD1cXHgyMmNsaWNrOiAkcm9vdC5kZWJ1Zy5iaW5kKCRlbGVtZW50LCBmYWxzZSk7XFx4MjI+WDwvZGl2PiAgICA8IS0tIGtvIGlmOiAkcm9vdC5kZWJ1ZyAtLT4gIENvbnRlbnQ6ICA8cHJlIGRhdGEtYmluZD0ndGV4dDoga28udG9KU09OKGNvbnRlbnQsIG51bGwsIDIpJyBzdHlsZT1cXHgyMm92ZXJmbG93OiBhdXRvOyBoZWlnaHQ6IDIwJVxceDIyPjwvcHJlPiAgQmxvY2tEZWZzOiAgPHByZSBkYXRhLWJpbmQ9J3RleHQ6IGtvLnRvSlNPTihibG9ja0RlZnMsIG51bGwsIDIpJyBzdHlsZT1cXHgyMm92ZXJmbG93OiBhdXRvOyBoZWlnaHQ6IDIwJVxceDIyPjwvcHJlPiAgPCEtLSAva28gLS0+ICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6ICRyb290LmV4cG9ydEhUTUx0b1RleHRhcmVhLmJpbmQoJGVsZW1lbnQsICcjb3V0cHV0aHRtbCcpOyBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyB0ZXh0OiB0cnVlLCBsYWJlbDonR2VuZXJhdGUnIH1cXHgyMj5PdXRwdXQ8L2E+ICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6ICRyb290LmV4cG9ydEpTT050b1RleHRhcmVhLmJpbmQoJGVsZW1lbnQsICcjb3V0cHV0aHRtbCcpOyBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyB0ZXh0OiB0cnVlLCBsYWJlbDonRXhwb3J0JyB9XFx4MjI+RXhwb3J0PC9hPiAgPGEgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmNsaWNrOiAkcm9vdC5pbXBvcnRKU09OZnJvbVRleHRhcmVhLmJpbmQoJGVsZW1lbnQsICcjb3V0cHV0aHRtbCcpOyBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyB0ZXh0OiB0cnVlLCBsYWJlbDonSW1wb3J0JyB9XFx4MjI+SW1wb3J0PC9hPiAgPHRleHRhcmVhIGlkPVxceDIyb3V0cHV0aHRtbFxceDIyIHJvd3M9XFx4MjIxMFxceDIyIHN0eWxlPVxceDIyd2lkdGg6IDEwMCU7XFx4MjI+PC90ZXh0YXJlYT48L2Rpdj48ZGl2IGlkPVxceDIydG9vbHRoZW1lXFx4MjIgY2xhc3M9XFx4MjJ1aS13aWRnZXQgc2xpZGViYXJcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjc3M6IHsgaGlkZGVuOiAkcm9vdC5zaG93VGhlbWUoKSA9PT0gZmFsc2UgfVxceDIyPiAgPGRpdiBjbGFzcz1cXHgyMmNsb3NlXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6ICRyb290LnNob3dUaGVtZS5iaW5kKCRlbGVtZW50LCBmYWxzZSk7XFx4MjI+WDwvZGl2PiAgICA8IS0tIGtvIHdpdGhQcm9wZXJ0aWVzOiB7IHRlbXBsYXRlTW9kZTogJ3N0eWxlcicgfSAtLT4gICAgPCEtLSBrbyBpZjogJHJvb3Quc2hvd1RoZW1lIC0tPiAgICAgIDwhLS0ga28gYmxvY2s6ICRyb290LmNvbnRlbnQoKS50aGVtZSAtLT48IS0tIC9rbyAtLT4gICAgPCEtLSAva28gLS0+ICA8IS0tIC9rbyAtLT48L2Rpdj5cIik7XG59KTtcbiIsIi8vIGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1VuaXRfVGVzdGluZy8xLjBcbi8vXG4vLyBUSElTIElTIE5PVCBURVNURUQgTk9SIExJS0VMWSBUTyBXT1JLIE9VVFNJREUgVjghXG4vL1xuLy8gT3JpZ2luYWxseSBmcm9tIG5hcndoYWwuanMgKGh0dHA6Ly9uYXJ3aGFsanMub3JnKVxuLy8gQ29weXJpZ2h0IChjKSAyMDA5IFRob21hcyBSb2JpbnNvbiA8Mjgwbm9ydGguY29tPlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0b1xuLy8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGVcbi8vIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuLy8gc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU5cbi8vIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cbi8vIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyB3aGVuIHVzZWQgaW4gbm9kZSwgdGhpcyB3aWxsIGFjdHVhbGx5IGxvYWQgdGhlIHV0aWwgbW9kdWxlIHdlIGRlcGVuZCBvblxuLy8gdmVyc3VzIGxvYWRpbmcgdGhlIGJ1aWx0aW4gdXRpbCBtb2R1bGUgYXMgaGFwcGVucyBvdGhlcndpc2Vcbi8vIHRoaXMgaXMgYSBidWcgaW4gbm9kZSBtb2R1bGUgbG9hZGluZyBhcyBmYXIgYXMgSSBhbSBjb25jZXJuZWRcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbC8nKTtcblxudmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vLyAxLiBUaGUgYXNzZXJ0IG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbnMgdGhhdCB0aHJvd1xuLy8gQXNzZXJ0aW9uRXJyb3IncyB3aGVuIHBhcnRpY3VsYXIgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVGhlXG4vLyBhc3NlcnQgbW9kdWxlIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIGludGVyZmFjZS5cblxudmFyIGFzc2VydCA9IG1vZHVsZS5leHBvcnRzID0gb2s7XG5cbi8vIDIuIFRoZSBBc3NlcnRpb25FcnJvciBpcyBkZWZpbmVkIGluIGFzc2VydC5cbi8vIG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IoeyBtZXNzYWdlOiBtZXNzYWdlLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogYWN0dWFsLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCB9KVxuXG5hc3NlcnQuQXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihvcHRpb25zKSB7XG4gIHRoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG4gIHRoaXMuYWN0dWFsID0gb3B0aW9ucy5hY3R1YWw7XG4gIHRoaXMuZXhwZWN0ZWQgPSBvcHRpb25zLmV4cGVjdGVkO1xuICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvcjtcbiAgaWYgKG9wdGlvbnMubWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTtcbiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNZXNzYWdlKHRoaXMpO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IHRydWU7XG4gIH1cbiAgdmFyIHN0YWNrU3RhcnRGdW5jdGlvbiA9IG9wdGlvbnMuc3RhY2tTdGFydEZ1bmN0aW9uIHx8IGZhaWw7XG5cbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgc3RhY2tTdGFydEZ1bmN0aW9uKTtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyBub24gdjggYnJvd3NlcnMgc28gd2UgY2FuIGhhdmUgYSBzdGFja3RyYWNlXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuICAgIGlmIChlcnIuc3RhY2spIHtcbiAgICAgIHZhciBvdXQgPSBlcnIuc3RhY2s7XG5cbiAgICAgIC8vIHRyeSB0byBzdHJpcCB1c2VsZXNzIGZyYW1lc1xuICAgICAgdmFyIGZuX25hbWUgPSBzdGFja1N0YXJ0RnVuY3Rpb24ubmFtZTtcbiAgICAgIHZhciBpZHggPSBvdXQuaW5kZXhPZignXFxuJyArIGZuX25hbWUpO1xuICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIC8vIG9uY2Ugd2UgaGF2ZSBsb2NhdGVkIHRoZSBmdW5jdGlvbiBmcmFtZVxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHN0cmlwIG91dCBldmVyeXRoaW5nIGJlZm9yZSBpdCAoYW5kIGl0cyBsaW5lKVxuICAgICAgICB2YXIgbmV4dF9saW5lID0gb3V0LmluZGV4T2YoJ1xcbicsIGlkeCArIDEpO1xuICAgICAgICBvdXQgPSBvdXQuc3Vic3RyaW5nKG5leHRfbGluZSArIDEpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YWNrID0gb3V0O1xuICAgIH1cbiAgfVxufTtcblxuLy8gYXNzZXJ0LkFzc2VydGlvbkVycm9yIGluc3RhbmNlb2YgRXJyb3JcbnV0aWwuaW5oZXJpdHMoYXNzZXJ0LkFzc2VydGlvbkVycm9yLCBFcnJvcik7XG5cbmZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgaWYgKHV0aWwuaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuICcnICsgdmFsdWU7XG4gIH1cbiAgaWYgKHV0aWwuaXNOdW1iZXIodmFsdWUpICYmICFpc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgfVxuICBpZiAodXRpbC5pc0Z1bmN0aW9uKHZhbHVlKSB8fCB1dGlsLmlzUmVnRXhwKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gdHJ1bmNhdGUocywgbikge1xuICBpZiAodXRpbC5pc1N0cmluZyhzKSkge1xuICAgIHJldHVybiBzLmxlbmd0aCA8IG4gPyBzIDogcy5zbGljZSgwLCBuKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcztcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRNZXNzYWdlKHNlbGYpIHtcbiAgcmV0dXJuIHRydW5jYXRlKEpTT04uc3RyaW5naWZ5KHNlbGYuYWN0dWFsLCByZXBsYWNlciksIDEyOCkgKyAnICcgK1xuICAgICAgICAgc2VsZi5vcGVyYXRvciArICcgJyArXG4gICAgICAgICB0cnVuY2F0ZShKU09OLnN0cmluZ2lmeShzZWxmLmV4cGVjdGVkLCByZXBsYWNlciksIDEyOCk7XG59XG5cbi8vIEF0IHByZXNlbnQgb25seSB0aGUgdGhyZWUga2V5cyBtZW50aW9uZWQgYWJvdmUgYXJlIHVzZWQgYW5kXG4vLyB1bmRlcnN0b29kIGJ5IHRoZSBzcGVjLiBJbXBsZW1lbnRhdGlvbnMgb3Igc3ViIG1vZHVsZXMgY2FuIHBhc3Ncbi8vIG90aGVyIGtleXMgdG8gdGhlIEFzc2VydGlvbkVycm9yJ3MgY29uc3RydWN0b3IgLSB0aGV5IHdpbGwgYmVcbi8vIGlnbm9yZWQuXG5cbi8vIDMuIEFsbCBvZiB0aGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBtdXN0IHRocm93IGFuIEFzc2VydGlvbkVycm9yXG4vLyB3aGVuIGEgY29ycmVzcG9uZGluZyBjb25kaXRpb24gaXMgbm90IG1ldCwgd2l0aCBhIG1lc3NhZ2UgdGhhdFxuLy8gbWF5IGJlIHVuZGVmaW5lZCBpZiBub3QgcHJvdmlkZWQuICBBbGwgYXNzZXJ0aW9uIG1ldGhvZHMgcHJvdmlkZVxuLy8gYm90aCB0aGUgYWN0dWFsIGFuZCBleHBlY3RlZCB2YWx1ZXMgdG8gdGhlIGFzc2VydGlvbiBlcnJvciBmb3Jcbi8vIGRpc3BsYXkgcHVycG9zZXMuXG5cbmZ1bmN0aW9uIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgb3BlcmF0b3IsIHN0YWNrU3RhcnRGdW5jdGlvbikge1xuICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHtcbiAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgIGFjdHVhbDogYWN0dWFsLFxuICAgIGV4cGVjdGVkOiBleHBlY3RlZCxcbiAgICBvcGVyYXRvcjogb3BlcmF0b3IsXG4gICAgc3RhY2tTdGFydEZ1bmN0aW9uOiBzdGFja1N0YXJ0RnVuY3Rpb25cbiAgfSk7XG59XG5cbi8vIEVYVEVOU0lPTiEgYWxsb3dzIGZvciB3ZWxsIGJlaGF2ZWQgZXJyb3JzIGRlZmluZWQgZWxzZXdoZXJlLlxuYXNzZXJ0LmZhaWwgPSBmYWlsO1xuXG4vLyA0LiBQdXJlIGFzc2VydGlvbiB0ZXN0cyB3aGV0aGVyIGEgdmFsdWUgaXMgdHJ1dGh5LCBhcyBkZXRlcm1pbmVkXG4vLyBieSAhIWd1YXJkLlxuLy8gYXNzZXJ0Lm9rKGd1YXJkLCBtZXNzYWdlX29wdCk7XG4vLyBUaGlzIHN0YXRlbWVudCBpcyBlcXVpdmFsZW50IHRvIGFzc2VydC5lcXVhbCh0cnVlLCAhIWd1YXJkLFxuLy8gbWVzc2FnZV9vcHQpOy4gVG8gdGVzdCBzdHJpY3RseSBmb3IgdGhlIHZhbHVlIHRydWUsIHVzZVxuLy8gYXNzZXJ0LnN0cmljdEVxdWFsKHRydWUsIGd1YXJkLCBtZXNzYWdlX29wdCk7LlxuXG5mdW5jdGlvbiBvayh2YWx1ZSwgbWVzc2FnZSkge1xuICBpZiAoIXZhbHVlKSBmYWlsKHZhbHVlLCB0cnVlLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQub2spO1xufVxuYXNzZXJ0Lm9rID0gb2s7XG5cbi8vIDUuIFRoZSBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc2hhbGxvdywgY29lcmNpdmUgZXF1YWxpdHkgd2l0aFxuLy8gPT0uXG4vLyBhc3NlcnQuZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQuZXF1YWwgPSBmdW5jdGlvbiBlcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgIT0gZXhwZWN0ZWQpIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09JywgYXNzZXJ0LmVxdWFsKTtcbn07XG5cbi8vIDYuIFRoZSBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciB3aGV0aGVyIHR3byBvYmplY3RzIGFyZSBub3QgZXF1YWxcbi8vIHdpdGggIT0gYXNzZXJ0Lm5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdEVxdWFsID0gZnVuY3Rpb24gbm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsID09IGV4cGVjdGVkKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT0nLCBhc3NlcnQubm90RXF1YWwpO1xuICB9XG59O1xuXG4vLyA3LiBUaGUgZXF1aXZhbGVuY2UgYXNzZXJ0aW9uIHRlc3RzIGEgZGVlcCBlcXVhbGl0eSByZWxhdGlvbi5cbi8vIGFzc2VydC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQuZGVlcEVxdWFsID0gZnVuY3Rpb24gZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKCFfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCkge1xuICAvLyA3LjEuIEFsbCBpZGVudGljYWwgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbiAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcblxuICB9IGVsc2UgaWYgKHV0aWwuaXNCdWZmZXIoYWN0dWFsKSAmJiB1dGlsLmlzQnVmZmVyKGV4cGVjdGVkKSkge1xuICAgIGlmIChhY3R1YWwubGVuZ3RoICE9IGV4cGVjdGVkLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3R1YWwubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhY3R1YWxbaV0gIT09IGV4cGVjdGVkW2ldKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG5cbiAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBEYXRlIG9iamVjdCB0aGF0IHJlZmVycyB0byB0aGUgc2FtZSB0aW1lLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKGFjdHVhbCkgJiYgdXRpbC5pc0RhdGUoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblxuICAvLyA3LjMgSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZFxuICAvLyBwcm9wZXJ0aWVzIChgZ2xvYmFsYCwgYG11bHRpbGluZWAsIGBsYXN0SW5kZXhgLCBgaWdub3JlQ2FzZWApLlxuICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAoYWN0dWFsKSAmJiB1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSkge1xuICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiZcbiAgICAgICAgICAgYWN0dWFsLmdsb2JhbCA9PT0gZXhwZWN0ZWQuZ2xvYmFsICYmXG4gICAgICAgICAgIGFjdHVhbC5tdWx0aWxpbmUgPT09IGV4cGVjdGVkLm11bHRpbGluZSAmJlxuICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiZcbiAgICAgICAgICAgYWN0dWFsLmlnbm9yZUNhc2UgPT09IGV4cGVjdGVkLmlnbm9yZUNhc2U7XG5cbiAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuICAvLyBlcXVpdmFsZW5jZSBpcyBkZXRlcm1pbmVkIGJ5ID09LlxuICB9IGVsc2UgaWYgKCF1dGlsLmlzT2JqZWN0KGFjdHVhbCkgJiYgIXV0aWwuaXNPYmplY3QoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbCA9PSBleHBlY3RlZDtcblxuICAvLyA3LjUgRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpc1xuICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcbiAgLy8gd2l0aCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwpLCB0aGUgc2FtZSBzZXQgb2Yga2V5c1xuICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5XG4gIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG4gIC8vIGFjY291bnRzIGZvciBib3RoIG5hbWVkIGFuZCBpbmRleGVkIHByb3BlcnRpZXMgb24gQXJyYXlzLlxuICB9IGVsc2Uge1xuICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyhvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xufVxuXG5mdW5jdGlvbiBvYmpFcXVpdihhLCBiKSB7XG4gIGlmICh1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGEpIHx8IHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoYikpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvLyBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuXG4gIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTtcbiAgLy8gaWYgb25lIGlzIGEgcHJpbWl0aXZlLCB0aGUgb3RoZXIgbXVzdCBiZSBzYW1lXG4gIGlmICh1dGlsLmlzUHJpbWl0aXZlKGEpIHx8IHV0aWwuaXNQcmltaXRpdmUoYikpIHtcbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfVxuICB2YXIgYUlzQXJncyA9IGlzQXJndW1lbnRzKGEpLFxuICAgICAgYklzQXJncyA9IGlzQXJndW1lbnRzKGIpO1xuICBpZiAoKGFJc0FyZ3MgJiYgIWJJc0FyZ3MpIHx8ICghYUlzQXJncyAmJiBiSXNBcmdzKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmIChhSXNBcmdzKSB7XG4gICAgYSA9IHBTbGljZS5jYWxsKGEpO1xuICAgIGIgPSBwU2xpY2UuY2FsbChiKTtcbiAgICByZXR1cm4gX2RlZXBFcXVhbChhLCBiKTtcbiAgfVxuICB2YXIga2EgPSBvYmplY3RLZXlzKGEpLFxuICAgICAga2IgPSBvYmplY3RLZXlzKGIpLFxuICAgICAga2V5LCBpO1xuICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzXG4gIC8vIGhhc093blByb3BlcnR5KVxuICBpZiAoa2EubGVuZ3RoICE9IGtiLmxlbmd0aClcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksXG4gIGthLnNvcnQoKTtcbiAga2Iuc29ydCgpO1xuICAvL35+fmNoZWFwIGtleSB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKGthW2ldICE9IGtiW2ldKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmRcbiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAga2V5ID0ga2FbaV07XG4gICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyA4LiBUaGUgbm9uLWVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBmb3IgYW55IGRlZXAgaW5lcXVhbGl0eS5cbi8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdub3REZWVwRXF1YWwnLCBhc3NlcnQubm90RGVlcEVxdWFsKTtcbiAgfVxufTtcblxuLy8gOS4gVGhlIHN0cmljdCBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc3RyaWN0IGVxdWFsaXR5LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbi8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PT0nLCBhc3NlcnQuc3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG4vLyAxMC4gVGhlIHN0cmljdCBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciBzdHJpY3QgaW5lcXVhbGl0eSwgYXNcbi8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0Lm5vdFN0cmljdEVxdWFsID0gZnVuY3Rpb24gbm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9PScsIGFzc2VydC5ub3RTdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChleHBlY3RlZCkgPT0gJ1tvYmplY3QgUmVnRXhwXScpIHtcbiAgICByZXR1cm4gZXhwZWN0ZWQudGVzdChhY3R1YWwpO1xuICB9IGVsc2UgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIGV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoZXhwZWN0ZWQuY2FsbCh7fSwgYWN0dWFsKSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBfdGhyb3dzKHNob3VsZFRocm93LCBibG9jaywgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGFjdHVhbDtcblxuICBpZiAodXRpbC5pc1N0cmluZyhleHBlY3RlZCkpIHtcbiAgICBtZXNzYWdlID0gZXhwZWN0ZWQ7XG4gICAgZXhwZWN0ZWQgPSBudWxsO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBibG9jaygpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgYWN0dWFsID0gZTtcbiAgfVxuXG4gIG1lc3NhZ2UgPSAoZXhwZWN0ZWQgJiYgZXhwZWN0ZWQubmFtZSA/ICcgKCcgKyBleHBlY3RlZC5uYW1lICsgJykuJyA6ICcuJykgK1xuICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTtcblxuICBpZiAoc2hvdWxkVGhyb3cgJiYgIWFjdHVhbCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuICB9XG5cbiAgaWYgKCFzaG91bGRUaHJvdyAmJiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ0dvdCB1bndhbnRlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICBpZiAoKHNob3VsZFRocm93ICYmIGFjdHVhbCAmJiBleHBlY3RlZCAmJlxuICAgICAgIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fCAoIXNob3VsZFRocm93ICYmIGFjdHVhbCkpIHtcbiAgICB0aHJvdyBhY3R1YWw7XG4gIH1cbn1cblxuLy8gMTEuIEV4cGVjdGVkIHRvIHRocm93IGFuIGVycm9yOlxuLy8gYXNzZXJ0LnRocm93cyhibG9jaywgRXJyb3Jfb3B0LCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC50aHJvd3MgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cy5hcHBseSh0aGlzLCBbdHJ1ZV0uY29uY2F0KHBTbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbn07XG5cbi8vIEVYVEVOU0lPTiEgVGhpcyBpcyBhbm5veWluZyB0byB3cml0ZSBvdXRzaWRlIHRoaXMgbW9kdWxlLlxuYXNzZXJ0LmRvZXNOb3RUaHJvdyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG4gIF90aHJvd3MuYXBwbHkodGhpcywgW2ZhbHNlXS5jb25jYXQocFNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xufTtcblxuYXNzZXJ0LmlmRXJyb3IgPSBmdW5jdGlvbihlcnIpIHsgaWYgKGVycikge3Rocm93IGVycjt9fTtcblxudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duLmNhbGwob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn07XG4iLCJleHBvcnRzLmVuZGlhbm5lc3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnTEUnIH07XG5cbmV4cG9ydHMuaG9zdG5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhvc3RuYW1lXG4gICAgfVxuICAgIGVsc2UgcmV0dXJuICcnO1xufTtcblxuZXhwb3J0cy5sb2FkYXZnID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW10gfTtcblxuZXhwb3J0cy51cHRpbWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAwIH07XG5cbmV4cG9ydHMuZnJlZW1lbSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gTnVtYmVyLk1BWF9WQUxVRTtcbn07XG5cbmV4cG9ydHMudG90YWxtZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE51bWJlci5NQVhfVkFMVUU7XG59O1xuXG5leHBvcnRzLmNwdXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXSB9O1xuXG5leHBvcnRzLnR5cGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnQnJvd3NlcicgfTtcblxuZXhwb3J0cy5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmFwcFZlcnNpb247XG4gICAgfVxuICAgIHJldHVybiAnJztcbn07XG5cbmV4cG9ydHMubmV0d29ya0ludGVyZmFjZXNcbj0gZXhwb3J0cy5nZXROZXR3b3JrSW50ZXJmYWNlc1xuPSBmdW5jdGlvbiAoKSB7IHJldHVybiB7fSB9O1xuXG5leHBvcnRzLmFyY2ggPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnamF2YXNjcmlwdCcgfTtcblxuZXhwb3J0cy5wbGF0Zm9ybSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICdicm93c2VyJyB9O1xuXG5leHBvcnRzLnRtcGRpciA9IGV4cG9ydHMudG1wRGlyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnL3RtcCc7XG59O1xuXG5leHBvcnRzLkVPTCA9ICdcXG4nO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xufSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZztcbmV4cG9ydHMuZm9ybWF0ID0gZnVuY3Rpb24oZikge1xuICBpZiAoIWlzU3RyaW5nKGYpKSB7XG4gICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3RzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHZhciBpID0gMTtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIHN0ciA9IFN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnO1xuICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7XG4gICAgc3dpdGNoICh4KSB7XG4gICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWonOlxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9KTtcbiAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHtcbiAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkge1xuICAgICAgc3RyICs9ICcgJyArIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RyO1xufTtcblxuXG4vLyBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuLy8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbi8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG5leHBvcnRzLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKGZuLCBtc2cpIHtcbiAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC5cbiAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn07XG5cblxudmFyIGRlYnVncyA9IHt9O1xudmFyIGRlYnVnRW52aXJvbjtcbmV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG4gICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJztcbiAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7XG4gIGlmICghZGVidWdzW3NldF0pIHtcbiAgICBpZiAobmV3IFJlZ0V4cCgnXFxcXGInICsgc2V0ICsgJ1xcXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHtcbiAgICAgIHZhciBwaWQgPSBwcm9jZXNzLnBpZDtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlYnVnc1tzZXRdO1xufTtcblxuXG4vKipcbiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcbiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LlxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5mdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykge1xuICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgdmFyIGN0eCA9IHtcbiAgICBzZWVuOiBbXSxcbiAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuICB9O1xuICAvLyBsZWdhY3kuLi5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBjdHguY29sb3JzID0gYXJndW1lbnRzWzNdO1xuICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7XG4gICAgLy8gbGVnYWN5Li4uXG4gICAgY3R4LnNob3dIaWRkZW4gPSBvcHRzO1xuICB9IGVsc2UgaWYgKG9wdHMpIHtcbiAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG4gICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7XG4gIH1cbiAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcbiAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xufVxuZXhwb3J0cy5pbnNwZWN0ID0gaW5zcGVjdDtcblxuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncbmluc3BlY3QuY29sb3JzID0ge1xuICAnYm9sZCcgOiBbMSwgMjJdLFxuICAnaXRhbGljJyA6IFszLCAyM10sXG4gICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcbiAgJ2ludmVyc2UnIDogWzcsIDI3XSxcbiAgJ3doaXRlJyA6IFszNywgMzldLFxuICAnZ3JleScgOiBbOTAsIDM5XSxcbiAgJ2JsYWNrJyA6IFszMCwgMzldLFxuICAnYmx1ZScgOiBbMzQsIDM5XSxcbiAgJ2N5YW4nIDogWzM2LCAzOV0sXG4gICdncmVlbicgOiBbMzIsIDM5XSxcbiAgJ21hZ2VudGEnIDogWzM1LCAzOV0sXG4gICdyZWQnIDogWzMxLCAzOV0sXG4gICd5ZWxsb3cnIDogWzMzLCAzOV1cbn07XG5cbi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuaW5zcGVjdC5zdHlsZXMgPSB7XG4gICdzcGVjaWFsJzogJ2N5YW4nLFxuICAnbnVtYmVyJzogJ3llbGxvdycsXG4gICdib29sZWFuJzogJ3llbGxvdycsXG4gICd1bmRlZmluZWQnOiAnZ3JleScsXG4gICdudWxsJzogJ2JvbGQnLFxuICAnc3RyaW5nJzogJ2dyZWVuJyxcbiAgJ2RhdGUnOiAnbWFnZW50YScsXG4gIC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG4gICdyZWdleHAnOiAncmVkJ1xufTtcblxuXG5mdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cbiAgaWYgKHN0eWxlKSB7XG4gICAgcmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuICAgICAgICAgICAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICByZXR1cm4gc3RyO1xufVxuXG5cbmZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KSB7XG4gIHZhciBoYXNoID0ge307XG5cbiAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkge1xuICAgIGhhc2hbdmFsXSA9IHRydWU7XG4gIH0pO1xuXG4gIHJldHVybiBoYXNoO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuXG4gIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuICBpZiAoY3R4LmN1c3RvbUluc3BlY3QgJiZcbiAgICAgIHZhbHVlICYmXG4gICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG4gICAgICAvLyBGaWx0ZXIgb3V0IHRoZSB1dGlsIG1vZHVsZSwgaXQncyBpbnNwZWN0IGZ1bmN0aW9uIGlzIHNwZWNpYWxcbiAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG4gICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG4gICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpO1xuXG4gIGlmIChjdHguc2hvd0hpZGRlbikge1xuICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIH1cblxuICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG4gIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG4gIGlmIChpc0Vycm9yKHZhbHVlKVxuICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9XG4gICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcbiAgICB9XG4gICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107XG5cbiAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBhcnJheSA9IHRydWU7XG4gICAgYnJhY2VzID0gWydbJywgJ10nXTtcbiAgfVxuXG4gIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nO1xuICB9XG5cbiAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHNcbiAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG4gIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvclxuICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07XG4gIH1cblxuICBpZiAocmVjdXJzZVRpbWVzIDwgMCkge1xuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5zZWVuLnB1c2godmFsdWUpO1xuXG4gIHZhciBvdXRwdXQ7XG4gIGlmIChhcnJheSkge1xuICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgY3R4LnNlZW4ucG9wKCk7XG5cbiAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuICB9XG4gIGlmIChpc051bWJlcih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcbiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKGlzTnVsbCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgIH1cbiAgfVxuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG4gIGlmIChkZXNjLmdldCkge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkge1xuICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG4gIH1cbiAgaWYgKCFzdHIpIHtcbiAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHtcbiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuXG5mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcbiAgICBudW1MaW5lc0VzdCsrO1xuICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcbiAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG4gIH0sIDApO1xuXG4gIGlmIChsZW5ndGggPiA2MCkge1xuICAgIHJldHVybiBicmFjZXNbMF0gK1xuICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgYnJhY2VzWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcbn1cblxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuZnVuY3Rpb24gaXNBcnJheShhcikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcik7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gaXNPYmplY3QoZSkgJiZcbiAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG4gICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcbn1cbmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblxuZXhwb3J0cy5pc0J1ZmZlciA9IHJlcXVpcmUoJy4vc3VwcG9ydC9pc0J1ZmZlcicpO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuZnVuY3Rpb24gcGFkKG4pIHtcbiAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG59XG5cblxudmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLFxuICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTtcblxuLy8gMjYgRmViIDE2OjE5OjM0XG5mdW5jdGlvbiB0aW1lc3RhbXAoKSB7XG4gIHZhciBkID0gbmV3IERhdGUoKTtcbiAgdmFyIHRpbWUgPSBbcGFkKGQuZ2V0SG91cnMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcbiAgcmV0dXJuIFtkLmdldERhdGUoKSwgbW9udGhzW2QuZ2V0TW9udGgoKV0sIHRpbWVdLmpvaW4oJyAnKTtcbn1cblxuXG4vLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wXG5leHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTtcbn07XG5cblxuLyoqXG4gKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZVxuICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG4gKiBkdXJpbmcgYm9vdHN0cmFwcGluZyB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJld3JpdHRlbiB1c2luZyBzb21lIG5hdGl2ZVxuICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzXG4gKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlXG4gKiAgICAgcHJvdG90eXBlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uXG4gKi9cbmV4cG9ydHMuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG5leHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkge1xuICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0XG4gIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWRkKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG9yaWdpbltrZXlzW2ldXSA9IGFkZFtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gb3JpZ2luO1xufTtcblxuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cbi8qIGdsb2JhbCBYTUxIdHRwUmVxdWVzdDogZmFsc2UgKi9cblxudmFyIHRlbXBsYXRlTG9hZGVyID0gcmVxdWlyZSgnLi90ZW1wbGF0ZS1sb2FkZXIuanMnKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5yZXF1aXJlKFwiLi9rby1iaW5kaW5ncy5qc1wiKTtcbnZhciBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyID0gcmVxdWlyZShcIi4vdGltZWQtY2FsbC5qc1wiKS50aW1lZENhbGw7XG5cbnZhciBhZGRVbmRvU3RhY2tFeHRlbnNpb25NYWtlciA9IHJlcXVpcmUoXCIuL3VuZG9tYW5hZ2VyL3VuZG9tYWluLmpzXCIpO1xudmFyIGNvbG9yUGx1Z2luID0gcmVxdWlyZShcIi4vZXh0L2NvbG9yLmpzXCIpO1xudmFyIGlubGluZXJQbHVnaW4gPSByZXF1aXJlKFwiLi9leHQvaW5saW5lci5qc1wiKTtcblxudmFyIGxvY2FsU3RvcmFnZUxvYWRlciA9IHJlcXVpcmUoXCIuL2V4dC9sb2NhbHN0b3JhZ2UuanNcIik7XG5cbmlmICh0eXBlb2Yga28gPT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiQ2Fubm90IGZpbmQga25vY2tvdXQuanMgbGlicmFyeSFcIjtcbmlmICh0eXBlb2YgJCA9PSAndW5kZWZpbmVkJykgdGhyb3cgXCJDYW5ub3QgZmluZCBqcXVlcnkgbGlicmFyeSFcIjtcblxuZnVuY3Rpb24gX2Nhbm9uaWNhbGl6ZSh1cmwpIHtcbiAgdmFyIGRpdiA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGl2LmlubmVySFRNTCA9IFwiPGE+PC9hPlwiO1xuICBkaXYuZmlyc3RDaGlsZC5ocmVmID0gdXJsOyAvLyBFbnN1cmVzIHRoYXQgdGhlIGhyZWYgaXMgcHJvcGVybHkgZXNjYXBlZFxuICBkaXYuaW5uZXJIVE1MID0gZGl2LmlubmVySFRNTDsgLy8gUnVuIHRoZSBjdXJyZW50IGlubmVySFRNTCBiYWNrIHRocm91Z2ggdGhlIHBhcnNlclxuICByZXR1cm4gZGl2LmZpcnN0Q2hpbGQuaHJlZjtcbn1cblxudmFyIGFwcGx5QmluZGluZ09wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zLCBrbykge1xuICAvLyBwdXNoIFwiY29udmVydGVkVXJsXCIgbWV0aG9kIHRvIHRoZSB3eXNpd3lnU3JjIGJpbmRpbmdcbiAga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdTcmMuY29udmVydGVkVXJsID0gZnVuY3Rpb24oc3JjLCBtZXRob2QsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICB2YXIgaW1nUHJvY2Vzc29yQmFja2VuZCA9IG9wdGlvbnMuaW1nUHJvY2Vzc29yQmFja2VuZCA/IG9wdGlvbnMuaW1nUHJvY2Vzc29yQmFja2VuZCA6ICcuL3VwbG9hZCc7XG4gICAgdmFyIGJhY2tFbmRNYXRjaCA9IGltZ1Byb2Nlc3NvckJhY2tlbmQubWF0Y2goL14oaHR0cHM/OlxcL1xcL1teXFwvXSpcXC8pLiokLyk7XG4gICAgdmFyIHNyY01hdGNoID0gc3JjLm1hdGNoKC9eKGh0dHBzPzpcXC9cXC9bXlxcL10qXFwvKS4qJC8pO1xuICAgIGlmIChiYWNrRW5kTWF0Y2ggPT09IG51bGwgfHwgKHNyY01hdGNoICE9PSBudWxsICYmIGJhY2tFbmRNYXRjaFsxXSA9PSBzcmNNYXRjaFsxXSkpIHtcbiAgICAgIHZhciBzZXJpYWxpemVkUHJvY2Vzc29yQmFja2VuZFVybCA9IGltZ1Byb2Nlc3NvckJhY2tlbmQgKyBcIj9zcmM9XCIgKyBzcmMgKyBcIiZtZXRob2Q9XCIgKyBtZXRob2QgKyBcIiZwYXJhbXM9XCIgKyB3aWR0aCArIFwiLFwiICsgaGVpZ2h0O1xuICAgICAgcmV0dXJuIHNlcmlhbGl6ZWRQcm9jZXNzb3JCYWNrZW5kVXJsO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNhbm5vdCBhcHBseSBiYWNrZW5kIGltYWdlIHJlc2l6aW5nIHRvIG5vbi1sb2NhbCByZXNvdXJjZXMgXCIsIHNyYywgbWV0aG9kLCB3aWR0aCwgaGVpZ2h0LCBiYWNrRW5kTWF0Y2gsIHNyY01hdGNoKTtcbiAgICAgIHZhciBzZXJpYWxpemVkVXJsID0gc3JjICsgXCI/bWV0aG9kPVwiICsgbWV0aG9kICsgXCImd2lkdGg9XCIgKyB3aWR0aCArIChoZWlnaHQgIT09IG51bGwgPyBcIiZoZWlnaHQ9XCIgKyBoZWlnaHQgOiAnJyk7XG4gICAgICByZXR1cm4gc2VyaWFsaXplZFVybDtcbiAgICB9XG4gIH07XG5cbiAga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdTcmMucGxhY2Vob2xkZXJVcmwgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCB0ZXh0KSB7XG4gICAgdmFyIHNlcmlhbGl6ZWRQbGFjZWhvbGRlclVybCA9IG9wdGlvbnMuaW1nUHJvY2Vzc29yQmFja2VuZCArIFwiP21ldGhvZD1cIiArICdwbGFjZWhvbGRlcicgKyBcIiZwYXJhbXM9XCIgKyB3aWR0aCArIFwiLFwiICsgaGVpZ2h0O1xuICAgIHJldHVybiBzZXJpYWxpemVkUGxhY2Vob2xkZXJVcmw7XG4gIH07XG5cbiAgLy8gcHVzaGVzIGN1c3RvbSB0aW55bWNlIGNvbmZpZ3VyYXRpb25zIGZyb20gb3B0aW9ucyB0byB0aGUgYmluZGluZ1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnRpbnltY2VDb25maWcpXG4gICAga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWcuc3RhbmRhcmRPcHRpb25zID0gb3B0aW9ucy50aW55bWNlQ29uZmlnO1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnRpbnltY2VDb25maWdGdWxsKVxuICAgIGtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnLmZ1bGxPcHRpb25zID0gb3B0aW9ucy50aW55bWNlQ29uZmlnRnVsbDtcbn07XG5cbnZhciBzdGFydCA9IGZ1bmN0aW9uKG9wdGlvbnMsIHRlbXBsYXRlRmlsZSwgdGVtcGxhdGVNZXRhZGF0YSwganNvcmpzb24sIGN1c3RvbUV4dGVuc2lvbnMpIHtcblxuXG5cbiAgdGVtcGxhdGVMb2FkZXIuZml4UGFnZUV2ZW50cygpO1xuXG4gIHZhciBmaWxlVXBsb2FkTWVzc2FnZXNFeHRlbnNpb24gPSBmdW5jdGlvbih2bSkge1xuICAgIHZhciBmaWxldXBsb2FkQ29uZmlnID0ge1xuICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgdW5rbm93bkVycm9yOiB2bS50KCdVbmtub3duIGVycm9yJyksXG4gICAgICAgIHVwbG9hZGVkQnl0ZXM6IHZtLnQoJ1VwbG9hZGVkIGJ5dGVzIGV4Y2VlZCBmaWxlIHNpemUnKSxcbiAgICAgICAgbWF4TnVtYmVyT2ZGaWxlczogdm0udCgnTWF4aW11bSBudW1iZXIgb2YgZmlsZXMgZXhjZWVkZWQnKSxcbiAgICAgICAgYWNjZXB0RmlsZVR5cGVzOiB2bS50KCdGaWxlIHR5cGUgbm90IGFsbG93ZWQnKSxcbiAgICAgICAgbWF4RmlsZVNpemU6IHZtLnQoJ0ZpbGUgaXMgdG9vIGxhcmdlJyksXG4gICAgICAgIG1pbkZpbGVTaXplOiB2bS50KCdGaWxlIGlzIHRvbyBzbWFsbCcpLFxuICAgICAgICBwb3N0X21heF9zaXplOiB2bS50KCdUaGUgdXBsb2FkZWQgZmlsZSBleGNlZWRzIHRoZSBwb3N0X21heF9zaXplIGRpcmVjdGl2ZSBpbiBwaHAuaW5pJyksXG4gICAgICAgIG1heF9maWxlX3NpemU6IHZtLnQoJ0ZpbGUgaXMgdG9vIGJpZycpLFxuICAgICAgICBtaW5fZmlsZV9zaXplOiB2bS50KCdGaWxlIGlzIHRvbyBzbWFsbCcpLFxuICAgICAgICBhY2NlcHRfZmlsZV90eXBlczogdm0udCgnRmlsZXR5cGUgbm90IGFsbG93ZWQnKSxcbiAgICAgICAgbWF4X251bWJlcl9vZl9maWxlczogdm0udCgnTWF4aW11bSBudW1iZXIgb2YgZmlsZXMgZXhjZWVkZWQnKSxcbiAgICAgICAgbWF4X3dpZHRoOiB2bS50KCdJbWFnZSBleGNlZWRzIG1heGltdW0gd2lkdGgnKSxcbiAgICAgICAgbWluX3dpZHRoOiB2bS50KCdJbWFnZSByZXF1aXJlcyBhIG1pbmltdW0gd2lkdGgnKSxcbiAgICAgICAgbWF4X2hlaWdodDogdm0udCgnSW1hZ2UgZXhjZWVkcyBtYXhpbXVtIGhlaWdodCcpLFxuICAgICAgICBtaW5faGVpZ2h0OiB2bS50KCdJbWFnZSByZXF1aXJlcyBhIG1pbmltdW0gaGVpZ2h0JyksXG4gICAgICAgIGFib3J0OiB2bS50KCdGaWxlIHVwbG9hZCBhYm9ydGVkJyksXG4gICAgICAgIGltYWdlX3Jlc2l6ZTogdm0udCgnRmFpbGVkIHRvIHJlc2l6ZSBpbWFnZScpLFxuICAgICAgICBnZW5lcmljOiB2bS50KCdVbmV4cGVjdGVkIHVwbG9hZCBlcnJvcicpXG4gICAgICB9XG4gICAgfTtcbiAgICAvLyBmaWxlVXBsb2FkIG9wdGlvbnMuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5maWxldXBsb2FkQ29uZmlnKVxuICAgICAgZmlsZXVwbG9hZENvbmZpZyA9ICQuZXh0ZW5kKHRydWUsIGZpbGV1cGxvYWRDb25maWcsIG9wdGlvbnMuZmlsZXVwbG9hZENvbmZpZyk7XG5cbiAgICBrby5iaW5kaW5nSGFuZGxlcnNbJ2ZpbGV1cGxvYWQnXS5leHRlbmRPcHRpb25zID0gZmlsZXVwbG9hZENvbmZpZztcblxuICB9O1xuXG4gIHZhciBzaW1wbGVUcmFuc2xhdGlvblBsdWdpbiA9IGZ1bmN0aW9uKHZtKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHJpbmdzKSB7XG4gICAgICB2bS50ID0gZnVuY3Rpb24oa2V5LCBvYmpQYXJhbSkge1xuICAgICAgICB2YXIgcmVzID0gb3B0aW9ucy5zdHJpbmdzW2tleV07XG4gICAgICAgIGlmICh0eXBlb2YgcmVzID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiTWlzc2luZyB0cmFuc2xhdGlvbiBzdHJpbmcgZm9yXCIsa2V5LFwiOiB1c2luZyBkZWZhdWx0IHN0cmluZ1wiKTtcbiAgICAgICAgICByZXMgPSBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZtLnR0KHJlcywgb2JqUGFyYW0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgLy8gc2ltcGxlVHJhbnNsYXRpb25QbHVnaW4gbXVzdCBiZSBiZWZvcmUgdGhlIHVuZG9TdGFjayB0byB0cmFuc2xhdGUgdW5kby9yZWRvIGxhYmVsc1xuICB2YXIgZXh0ZW5zaW9ucyA9IFtzaW1wbGVUcmFuc2xhdGlvblBsdWdpbiwgYWRkVW5kb1N0YWNrRXh0ZW5zaW9uTWFrZXIocGVyZm9ybWFuY2VBd2FyZUNhbGxlciksIGNvbG9yUGx1Z2luLCBpbmxpbmVyUGx1Z2luXTtcbiAgaWYgKHR5cGVvZiBjdXN0b21FeHRlbnNpb25zICE9PSAndW5kZWZpbmVkJylcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IGN1c3RvbUV4dGVuc2lvbnMubGVuZ3RoOyBrKyspIGV4dGVuc2lvbnMucHVzaChjdXN0b21FeHRlbnNpb25zW2tdKTtcbiAgZXh0ZW5zaW9ucy5wdXNoKGZpbGVVcGxvYWRNZXNzYWdlc0V4dGVuc2lvbik7XG5cbiAgdmFyIGdhbGxlcnlVcmwgPSBvcHRpb25zLmZpbGV1cGxvYWRDb25maWcgPyBvcHRpb25zLmZpbGV1cGxvYWRDb25maWcudXJsIDogJy91cGxvYWQvJztcbiAgYXBwbHlCaW5kaW5nT3B0aW9ucyhvcHRpb25zLCBrbyk7XG5cbiAgLy8gVE9ETyB3aGF0IGFib3V0IGFwcGVuZGluZyB0byBhbm90aGVyIGVsZW1lbnQ/XG4gICQoXCI8IS0tIGtvIHRlbXBsYXRlOiAnbWFpbicgLS0+PCEtLSAva28gLS0+XCIpLmFwcGVuZFRvKGdsb2JhbC5kb2N1bWVudC5ib2R5KTtcblxuICAvLyB0ZW1wbGF0ZUZpbGUgbWF5IG92ZXJyaWRlIHRoZSB0ZW1wbGF0ZSBwYXRoIGluIHRlbXBsYXRlTWV0YWRhdGFcbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZUZpbGUgPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRlbXBsYXRlTWV0YWRhdGEgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0ZW1wbGF0ZUZpbGUgPSB0ZW1wbGF0ZU1ldGFkYXRhLnRlbXBsYXRlO1xuICB9XG4gIC8vIFRPRE8gY2Fub25pY2FsaXplIHRlbXBsYXRlRmlsZSB0byBhYnNvbHV0ZSBvciByZWxhdGl2ZSBkZXBlbmRpbmcgb24gXCJyZWxhdGl2ZVVybHNFeGNlcHRpb25cIiBwbHVnaW5cblxuICB0ZW1wbGF0ZUxvYWRlci5sb2FkKHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIsIHRlbXBsYXRlRmlsZSwgdGVtcGxhdGVNZXRhZGF0YSwganNvcmpzb24sIGV4dGVuc2lvbnMsIGdhbGxlcnlVcmwpO1xuXG59O1xuXG52YXIgaW5pdEZyb21Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbihvcHRpb25zLCBoYXNoX2tleSwgY3VzdG9tRXh0ZW5zaW9ucykge1xuICB0cnkge1xuICAgIHZhciBsc0RhdGEgPSBsb2NhbFN0b3JhZ2VMb2FkZXIoaGFzaF9rZXksIG9wdGlvbnMuZW1haWxQcm9jZXNzb3JCYWNrZW5kKTtcbiAgICB2YXIgZXh0ZW5zaW9ucyA9IHR5cGVvZiBjdXN0b21FeHRlbnNpb25zICE9PSAndW5kZWZpbmVkJyA/IGN1c3RvbUV4dGVuc2lvbnMgOiBbXTtcbiAgICBleHRlbnNpb25zLnB1c2gobHNEYXRhLmV4dGVuc2lvbik7XG4gICAgdmFyIHRlbXBsYXRlID0gX2Nhbm9uaWNhbGl6ZShsc0RhdGEubWV0YWRhdGEudGVtcGxhdGUpO1xuICAgIHN0YXJ0KG9wdGlvbnMsIHRlbXBsYXRlLCBsc0RhdGEubWV0YWRhdGEsIGxzRGF0YS5tb2RlbCwgZXh0ZW5zaW9ucyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVE9ETyBub3QgZm91bmQgXCIsIGhhc2hfa2V5LCBlKTtcbiAgfVxufTtcblxudmFyIGluaXQgPSBmdW5jdGlvbihvcHRpb25zLCBjdXN0b21FeHRlbnNpb25zKSB7XG5cbiAgdmFyIGhhc2ggPSBnbG9iYWwubG9jYXRpb24uaGFzaCA/IGdsb2JhbC5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiI1wiKVsxXSA6IHVuZGVmaW5lZDtcblxuICAvLyBMb2FkaW5nIGZyb20gY29uZmlndXJlZCB0ZW1wbGF0ZSBvciBjb25maWd1cmVkIG1ldGFkYXRhXG4gIGlmIChvcHRpb25zICYmIChvcHRpb25zLnRlbXBsYXRlIHx8IG9wdGlvbnMuZGF0YSkpIHtcbiAgICBpZiAob3B0aW9ucy5kYXRhKSB7XG4gICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2Uob3B0aW9ucy5kYXRhKTtcbiAgICAgIHN0YXJ0KG9wdGlvbnMsIHVuZGVmaW5lZCwgZGF0YS5tZXRhZGF0YSwgZGF0YS5jb250ZW50LCBjdXN0b21FeHRlbnNpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnQob3B0aW9ucywgb3B0aW9ucy50ZW1wbGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGN1c3RvbUV4dGVuc2lvbnMpO1xuICAgIH1cbiAgICAvLyBMb2FkaW5nIGZyb20gTG9jYWxTdG9yYWdlIChpZiB1cmwgaGFzaCBoYXMgYSA3Y2hhcnMga2V5KVxuICB9IGVsc2UgaWYgKGhhc2ggJiYgaGFzaC5sZW5ndGggPT0gNykge1xuICAgIGluaXRGcm9tTG9jYWxTdG9yYWdlKG9wdGlvbnMsIGhhc2gsIGN1c3RvbUV4dGVuc2lvbnMpO1xuICAgIC8vIExvYWRpbmcgZnJvbSB0ZW1wbGF0ZSB1cmwgYXMgaGFzaCAoaWYgaGFzaCBpcyBub3QgYSB2YWxpZCBsb2NhbHN0b3JhZ2Uga2V5KVxuICB9IGVsc2UgaWYgKGhhc2gpIHtcbiAgICBzdGFydChvcHRpb25zLCBfY2Fub25pY2FsaXplKGhhc2gpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY3VzdG9tRXh0ZW5zaW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzQ29tcGF0aWJsZTogdGVtcGxhdGVMb2FkZXIuaXNDb21wYXRpYmxlLFxuICBpbml0OiBpbml0LFxuICBzdGFydDogc3RhcnRcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcblxuLy8gQHNlZSBhbHNvIHNjcmlwdC10ZW1wbGF0ZS5qcyBwdXNoVGVtcGxhdGVcbnZhciBhZGRTY3JpcHRUZW1wbGF0ZSA9IGZ1bmN0aW9uKGRvYywgdGVtcGxhdGVOYW1lLCB0ZW1wbGF0ZU1hcmt1cCkge1xuICB2YXIgc2NyaXB0VGFnID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICBzY3JpcHRUYWcuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvaHRtbCcpO1xuICBzY3JpcHRUYWcuc2V0QXR0cmlidXRlKCdpZCcsIHRlbXBsYXRlTmFtZSk7XG4gIHNjcmlwdFRhZy50ZXh0ID0gdGVtcGxhdGVNYXJrdXA7XG4gIGRvYy5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdFRhZyk7XG4gIHJldHVybiBzY3JpcHRUYWc7XG4gIC8vICQoJzxzY3JpcHQgdHlwZT1cInRleHQvaHRtbFwiPjwvc2MnICsgJ3JpcHQ+JykudGV4dCh0ZW1wbGF0ZU1hcmt1cCkuYXR0cignaWQnLCB0ZW1wbGF0ZU5hbWUpLmFwcGVuZFRvKCQoJ2JvZHknKSk7XG59O1xuXG4vLyB1c2VkIGZvciBsaXZlIHByZXZpZXcgaW4gaWZyYW1lLlxua28uYmluZGluZ0hhbmRsZXJzLmJpbmRJZnJhbWUgPSB7XG4gIC8vIHRwbCB3aWxsIGJlIG92ZXJyaWRlbiB3aXRoIHRoZSBzdHJ1Y3R1cmUgcGFyc2VkIGJ5IHRoZSBpbnB1dCB0ZW1wbGF0ZS5cbiAgdHBsOiBcIjwhRE9DVFlQRSBodG1sPlxcclxcbjxodG1sPlxcclxcbjxoZWFkPlxcclxcbjwvaGVhZD5cXHJcXG48Ym9keT48ZGl2IGRhdGEtYmluZD1cXFwiYmxvY2s6IGNvbnRlbnRcXFwiPjwvZGl2PjwvYm9keT5cXHJcXG48L2h0bWw+XFxyXFxuXCIsXG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICBmdW5jdGlvbiBiaW5kSWZyYW1lKGxvY2FsKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgaWZyYW1lID0gZWxlbWVudC5jb250ZW50RG9jdW1lbnQ7XG4gICAgICAgIGlmcmFtZS5vcGVuKCk7XG4gICAgICAgIGlmcmFtZS53cml0ZShrby5iaW5kaW5nSGFuZGxlcnMuYmluZElmcmFtZS50cGwpO1xuICAgICAgICBpZnJhbWUuY2xvc2UoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBpZnJhbWVkb2MgPSBpZnJhbWUuYm9keTtcbiAgICAgICAgICBpZiAoaWZyYW1lZG9jKSB7XG4gICAgICAgICAgICAvLyBzY3JpcHRzIGhhdmUgdG8gYmUgZHVwbGljYXRlZCAobWF5YmUgdGhpcyBpcyBub3QgbmVlZGVkIGFueW1vcmUgc2luY2UgdXNpbmcgc3RyaW5nLXRlbXBsYXRlcylcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZXMgPSBlbGVtZW50LmNvbnRlbnRXaW5kb3cucGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcGxhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh0ZW1wbGF0ZXNbaV0uZ2V0QXR0cmlidXRlKCd0eXBlJykgPT0gJ3RleHQvaHRtbCcgJiYgdGVtcGxhdGVzW2ldLmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICAgICAgICAgIGFkZFNjcmlwdFRlbXBsYXRlKGlmcmFtZSwgdGVtcGxhdGVzW2ldLmdldEF0dHJpYnV0ZSgnaWQnKSwgdGVtcGxhdGVzW2ldLmlubmVySFRNTCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGh0bWwgPSBpZnJhbWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJIVE1MXCIpO1xuXG4gICAgICAgICAgICBrby51dGlscy5kb21Ob2RlRGlzcG9zYWwuYWRkRGlzcG9zZUNhbGxiYWNrKGVsZW1lbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBrby5jbGVhbk5vZGUoaHRtbFswXSB8fCBpZnJhbWVkb2MpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGtvLmFwcGx5QmluZGluZ3ModmFsdWVBY2Nlc3NvcigpLCBodG1sWzBdIHx8IGlmcmFtZWRvYyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm8gaWZyYW1lZG9jXCIsIGxvY2FsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIHJlYWRpbmcgaWZyYW1lLmJvZHlcIiwgZSwgbG9jYWwpO1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJlcnJvciByZWFkaW5nIGlmcmFtZSBjb250ZW50RG9jdW1lbnRcIiwgZSwgbG9jYWwpO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgICAvLyBpZ25vcmVkXG4gICAgICB9XG4gICAgfVxuICAgIGJpbmRJZnJhbWUoXCJmaXJzdCBjYWxsXCIpO1xuICAgIC8vIG9sZGVyIGJyb3dzZXJzIG5lZWRlZCB0aGlzXG4gICAgLy8ga28udXRpbHMucmVnaXN0ZXJFdmVudEhhbmRsZXIoZWxlbWVudCwgJ2xvYWQnLCBiaW5kSWZyYW1lKTtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbHMgZ2xvYmFsOmZhbHNlICovXG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cblxua28uYmluZGluZ0hhbmRsZXJzWyd3aXRoUHJvcGVydGllcyddID0ge1xuICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIC8vIE1ha2UgYSBtb2RpZmllZCBiaW5kaW5nIGNvbnRleHQsIHdpdGggYSBleHRyYSBwcm9wZXJ0aWVzLCBhbmQgYXBwbHkgaXQgdG8gZGVzY2VuZGFudCBlbGVtZW50c1xuICAgIHZhciBjaGlsZEJpbmRpbmdDb250ZXh0ID0gYmluZGluZ0NvbnRleHQuY3JlYXRlQ2hpbGRDb250ZXh0KFxuICAgICAgYmluZGluZ0NvbnRleHQuJHJhd0RhdGEsXG4gICAgICBudWxsLCAvLyBPcHRpb25hbGx5LCBwYXNzIGEgc3RyaW5nIGhlcmUgYXMgYW4gYWxpYXMgZm9yIHRoZSBkYXRhIGl0ZW0gaW4gZGVzY2VuZGFudCBjb250ZXh0c1xuICAgICAgZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICBrby51dGlscy5leHRlbmQoY29udGV4dCwgdmFsdWVBY2Nlc3NvcigpKTtcbiAgICAgIH1cbiAgICApO1xuICAgIGtvLmFwcGx5QmluZGluZ3NUb0Rlc2NlbmRhbnRzKGNoaWxkQmluZGluZ0NvbnRleHQsIGVsZW1lbnQpO1xuXG4gICAgLy8gQWxzbyB0ZWxsIEtPICpub3QqIHRvIGJpbmQgdGhlIGRlc2NlbmRhbnRzIGl0c2VsZiwgb3RoZXJ3aXNlIHRoZXkgd2lsbCBiZSBib3VuZCB0d2ljZVxuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sc0Rlc2NlbmRhbnRCaW5kaW5nczogdHJ1ZVxuICAgIH07XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd3aXRoUHJvcGVydGllcyddID0gdHJ1ZTtcblxua28uYmluZGluZ0hhbmRsZXJzWydsb2cnXSA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICBjb25zb2xlLmxvZyhcImxvZ1wiLCB2YWx1ZUFjY2Vzc29yKCkpO1xuICB9XG59O1xuXG5cbmtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXSA9IHtcblxuICB0ZW1wbGF0ZUV4aXN0czogZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgZWwgPSBnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGlmIChlbCkgcmV0dXJuIHRydWU7XG4gICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgX2Nob29zZVRlbXBsYXRlOiBmdW5jdGlvbihpc0FycmF5LCBwcmVmaXgsIGFjdGlvbiwgZmFsbGJhY2spIHtcbiAgICB2YXIgaWQgPSBwcmVmaXggKyAnLScgKyBhY3Rpb247XG4gICAgaWYgKGtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXS50ZW1wbGF0ZUV4aXN0cyhpZCkpIHJldHVybiBpZDtcbiAgICBpZiAodHlwZW9mIGZhbGxiYWNrICE9ICd1bmRlZmluZWQnICYmIGZhbGxiYWNrICE9PSBudWxsKSByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWydibG9jayddLl9jaG9vc2VUZW1wbGF0ZShpc0FycmF5LCBwcmVmaXgsIGZhbGxiYWNrKTtcbiAgICBlbHNlIHtcbiAgICAgIHZhciBmYWxsQmFja0lkID0gaXNBcnJheSA/ICdhcnJheScgOiAnb2JqZWN0LScgKyBhY3Rpb247XG4gICAgICBpZiAoa28uYmluZGluZ0hhbmRsZXJzWydibG9jayddLnRlbXBsYXRlRXhpc3RzKGZhbGxCYWNrSWQpKSByZXR1cm4gZmFsbEJhY2tJZDtcbiAgICAgIGVsc2UgdGhyb3cgXCJjYW5ub3QgZmluZCB0ZW1wbGF0ZSBmb3IgXCIgKyBpZCArIFwiL1wiICsgZmFsbEJhY2tJZDtcbiAgICB9XG4gIH0sXG5cbiAgLy8gY29tcHV0ZSBkaXNwbGF5TW9kZSBkZXBlbmRpbmcgb24gdGVtcGxhdGVNb2RlIHNldCB1c2luZyBcIndpdGhQcm9wZXJ0aWVzXCIgYmluZGluZy5cbiAgX2Rpc3BsYXlNb2RlOiBmdW5jdGlvbih1bndyYXBwZWQsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIHByZWZpeCA9IHR5cGVvZiB1bndyYXBwZWQudHlwZSAhPSAndW5kZWZpbmVkJyA/IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodW53cmFwcGVkLnR5cGUpIDogJ25vdGFibG9jay0nICsgdHlwZW9mKHVud3JhcHBlZCk7XG4gICAgdmFyIGlzQXJyYXkgPSB0eXBlb2YgdW53cmFwcGVkLnNwbGljZSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgdmFyIHRlbXBsYXRlTW9kZSA9IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA/IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA6ICdzaG93JztcbiAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWydibG9jayddLl9jaG9vc2VUZW1wbGF0ZShpc0FycmF5LCBwcmVmaXgsIHRlbXBsYXRlTW9kZSwgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlRmFsbGJhY2spO1xuICB9LFxuXG4gIF9tYWtlVGVtcGxhdGVWYWx1ZUFjY2Vzc29yOiBmdW5jdGlvbih2YWx1ZUFjY2Vzc29yLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHZhbHVlQWNjZXNzb3IoKSxcbiAgICAgICAgdW53cmFwcGVkVmFsdWUgPSBrby51dGlscy5wZWVrT2JzZXJ2YWJsZSh2YWx1ZSk7IC8vIFVud3JhcCB3aXRob3V0IHNldHRpbmcgYSBkZXBlbmRlbmN5IGhlcmVcblxuICAgICAgLy8gSWYgdW53cmFwcGVkVmFsdWUuZGF0YSBpcyB0aGUgYXJyYXksIHByZXNlcnZlIGFsbCByZWxldmFudCBvcHRpb25zIGFuZCB1bndyYXAgYWdhaW4gdmFsdWUgc28gd2UgZ2V0IHVwZGF0ZXNcbiAgICAgIHZhciBtb2RlbFZhbHVlO1xuICAgICAgdmFyIHRlbXBsYXRlO1xuXG4gICAgICBpZiAoKCF1bndyYXBwZWRWYWx1ZSkgfHwgKHR5cGVvZiB1bndyYXBwZWRWYWx1ZS5kYXRhICE9ICdvYmplY3QnICYmIHR5cGVvZiB1bndyYXBwZWRWYWx1ZS5kYXRhICE9ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIG1vZGVsVmFsdWUgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vZGVsVmFsdWUgPSB1bndyYXBwZWRWYWx1ZS5kYXRhO1xuICAgICAgICBpZiAodHlwZW9mIHVud3JhcHBlZFZhbHVlLnRlbXBsYXRlICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdmFyIHRlbXBsYXRlUGFyYW0gPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHVud3JhcHBlZFZhbHVlLnRlbXBsYXRlKTtcbiAgICAgICAgICB2YXIgdGVtcGxhdGVNb2RlID0gYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID8gYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlIDogJ3Nob3cnO1xuICAgICAgICAgIHRlbXBsYXRlID0ga28uYmluZGluZ0hhbmRsZXJzWydibG9jayddLl9jaG9vc2VUZW1wbGF0ZShmYWxzZSwgdGVtcGxhdGVQYXJhbSwgdGVtcGxhdGVNb2RlLCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGVGYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHVud3JhcHBlZE1vZGVsVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKG1vZGVsVmFsdWUpO1xuICAgICAgaWYgKGtvLmlzT2JzZXJ2YWJsZSh1bndyYXBwZWRNb2RlbFZhbHVlKSkgY29uc29sZS5sb2coXCJkb3VibGVPYnNlcnZhYmxlXCIsIHVud3JhcHBlZE1vZGVsVmFsdWUpO1xuXG4gICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIE5PVEUgSUU4IHVzZWQgdG8gYnJlYWsgaGVyZSwgYnV0IHdlIGRvbid0IHN1cHBvcnQgaXQgYW55bW9yZSwgc28gbWF5YmUgdGhpcyBpcyBub3QgbmVlZGVkLlxuICAgICAgICBpZiAobW9kZWxWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSAnZW1wdHknO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IGtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXS5fZGlzcGxheU1vZGUodW53cmFwcGVkTW9kZWxWYWx1ZSwgYmluZGluZ0NvbnRleHQpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUsIHVud3JhcHBlZE1vZGVsVmFsdWUsIGJpbmRpbmdDb250ZXh0WyckZGF0YSddLCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ25hbWUnOiB0ZW1wbGF0ZSxcbiAgICAgICAgJ2RhdGEnOiBtb2RlbFZhbHVlLFxuICAgICAgICAndGVtcGxhdGVFbmdpbmUnOiBrby5uYXRpdmVUZW1wbGF0ZUVuZ2luZS5pbnN0YW5jZVxuICAgICAgfTtcbiAgICB9O1xuICB9LFxuXG4gICdpbml0JzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlQWNjZXNzb3IoKSA9PT0gJ3VuZGVmaW5lZCcpIGNvbnNvbGUubG9nKFwiZm91bmQgYSBudWxsIGJsb2NrOiBjaGVjayBlbmRpbmcgY29tbWFzIGluIGFycmF5cyBkZWZzIGluIElFXCIpO1xuICAgIHZhciBuZXdWYWx1ZUFjY2Vzc29yID0ga28uYmluZGluZ0hhbmRsZXJzWydibG9jayddLl9tYWtlVGVtcGxhdGVWYWx1ZUFjY2Vzc29yKHZhbHVlQWNjZXNzb3IsIGJpbmRpbmdDb250ZXh0KTtcbiAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWyd0ZW1wbGF0ZSddWydpbml0J10oZWxlbWVudCwgbmV3VmFsdWVBY2Nlc3Nvcik7XG4gIH0sXG4gICd1cGRhdGUnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIHZhciBuZXdWYWx1ZUFjY2Vzc29yID0ga28uYmluZGluZ0hhbmRsZXJzWydibG9jayddLl9tYWtlVGVtcGxhdGVWYWx1ZUFjY2Vzc29yKHZhbHVlQWNjZXNzb3IsIGJpbmRpbmdDb250ZXh0KTtcbiAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWyd0ZW1wbGF0ZSddWyd1cGRhdGUnXShlbGVtZW50LCBuZXdWYWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCk7XG4gIH1cbn07XG5rby5leHByZXNzaW9uUmV3cml0aW5nLmJpbmRpbmdSZXdyaXRlVmFsaWRhdG9yc1snYmxvY2snXSA9IGZhbHNlOyAvLyBDYW4ndCByZXdyaXRlIGNvbnRyb2wgZmxvdyBiaW5kaW5nc1xua28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1snYmxvY2snXSA9IHRydWU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIHNjcmlwdCB0ZW1wbGF0ZSBpcyB0aGUgb25lIHByb3ZpZGVkIGJ5IEtPIGFuZCBkZWFscyB3aXRoIHRlbXBhbHRlcyBkZWZpbmVkIGFzIDxzY3JpcHQgdHlwZT10ZXh0L2h0bWwuXG4vLyBzdHJpbmcgdGVtcGxhdGUgZGVmaW5lcyB0aGVtIGluIG1lbW9yeSBhbmQgYXZvaWRzIHBvbGx1dGluZyB0aGUgSFRNTDogc2VlbXMgdG8gd29yayBiZXR0ZXIgaW4gTW9zYWljby5cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3N0cmluZy10ZW1wbGF0ZS5qcycpO1xuLy8gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3NjcmlwdC10ZW1wbGF0ZS5qcycpOyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cblxucmVxdWlyZShcImV2b2wtY29sb3JwaWNrZXJcIik7XG5cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBrb2pxdWkgPSByZXF1aXJlKFwia25vY2tvdXQtanF1ZXJ5dWlcIik7XG5cblxudmFyIENvbG9yUGlja2VyID0gZnVuY3Rpb24oKSB7XG4gIGtvanF1aS5CaW5kaW5nSGFuZGxlci5jYWxsKHRoaXMsICdjb2xvcnBpY2tlcicpO1xufTtcbkNvbG9yUGlja2VyLnByb3RvdHlwZSA9IGtvanF1aS51dGlscy5jcmVhdGVPYmplY3Qoa29qcXVpLkJpbmRpbmdIYW5kbGVyLnByb3RvdHlwZSk7XG5Db2xvclBpY2tlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb2xvclBpY2tlcjtcblxuQ29sb3JQaWNrZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncykge1xuICB2YXIgdmEgPSB2YWx1ZUFjY2Vzc29yKCk7XG4gIHZhciB2YWx1ZSA9IHZhLmNvbG9yO1xuXG4gIC8vIEluIG9yZGVyIHRvIGhhdmUgYSBjb3JyZWN0IGRlcGVuZGVuY3kgdHJhY2tpbmcgaW4gXCJpZlN1YnNcIiB3ZSBoYXZlIHRvIGVuc3VyZSB3ZSB1c2UgYSBzaW5nbGUgY29tcHV0ZXIgZm9yIGVhY2ggZWRpdGFibGVcbiAgLy8gcHJvcGVydHkuIEdpdmVuIHRoaXMgYmluZGluZyBuZWVkcyAyIG9mIHRoZW0sIHdlIGNyZWF0ZSBhIGNvbXB1dGVkIHNvIHRvIFwicHJveHlcIiB0aGUgZGVwZW5kZW5jaWVzLlxuICB2YXIgbmV3RE8gPSBrby5jb21wdXRlZCh7XG4gICAgcmVhZDogdmFsdWUsXG4gICAgd3JpdGU6IHZhbHVlLFxuICAgIGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogZWxlbWVudFxuICB9KTtcbiAgdmFyIG5ld1ZBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ld0RPO1xuICB9O1xuXG4gIGtvLmJpbmRpbmdIYW5kbGVycy52YWx1ZS5pbml0KGVsZW1lbnQsIG5ld1ZBLCBhbGxCaW5kaW5ncyk7XG5cbiAgdmFyIGNoYW5nZVByb3BhZ2F0b3IgPSBmdW5jdGlvbihldmVudCwgY29sb3IpIHtcbiAgICBpZiAodHlwZW9mIGNvbG9yICE9PSAndW5kZWZpbmVkJykgbmV3RE8oY29sb3IpO1xuICB9O1xuICAkKGVsZW1lbnQpLm9uKCdjaGFuZ2UuY29sb3InLCBjaGFuZ2VQcm9wYWdhdG9yKTtcblxuICBrby5jb21wdXRlZCh7XG4gICAgcmVhZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3B0ID0ge1xuICAgICAgICBjb2xvcjoga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShuZXdETyksXG4gICAgICAgIHNob3dPbjogJ2J1dHRvbidcbiAgICAgIH07XG4gICAgICBmb3IgKHZhciBwcm9wIGluIHZhKVxuICAgICAgICBpZiAocHJvcCAhPT0gJ2NvbG9yJyAmJiB2YS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgb3B0W3Byb3BdID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YVtwcm9wXSk7XG4gICAgICAkKGVsZW1lbnQpLmNvbG9ycGlja2VyKG9wdCk7XG4gICAgfSxcbiAgICBkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IGVsZW1lbnRcbiAgfSk7XG5cbiAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhlbGVtZW50LCBmdW5jdGlvbigpIHtcbiAgICAkKGVsZW1lbnQpLm9mZignY2hhbmdlLmNvbG9yJywgY2hhbmdlUHJvcGFnYXRvcik7XG4gICAgJChlbGVtZW50KS5jb2xvcnBpY2tlcignZGVzdHJveScpO1xuICB9KTtcblxufTtcbmtvanF1aS51dGlscy5yZWdpc3RlcihDb2xvclBpY2tlcik7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcblxuLyogaHR0cHM6Ly9naXRodWIuY29tL2tub2Nrb3V0L2tub2Nrb3V0L2lzc3Vlcy8xMTcxICovXG5rby5iaW5kaW5nSGFuZGxlcnMuY3NzVGV4dCA9IHtcbiAgJ3VwZGF0ZSc6IGZ1bmN0aW9uKG5vZGUsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzKSB7XG4gICAgdmFyIHRleHQgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSk7XG4gICAgdHJ5IHtcbiAgICAgIG5vZGUuaW5uZXJUZXh0ID0gdGV4dDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIW5vZGUuc3R5bGVTaGVldCkgbm9kZS5pbm5lckhUTUwgPSBcImF7fVwiO1xuICAgICAgbm9kZS5zdHlsZVNoZWV0LmNzc1RleHQgPSB0ZXh0O1xuICAgIH1cbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xuXG4vKiBrbm9ja291dCBkcm9wcGFibGUsIHdpdGggc2ltcGxpZmllZCBVTUQgKi9cbjsoZnVuY3Rpb24oZmFjdG9yeSkge1xuICBmYWN0b3J5KGtvLCAkKTtcbn0pKGZ1bmN0aW9uKGtvLCAkKSB7XG4gIHZhciBJVEVNS0VZID0gXCJrb19zb3J0SXRlbVwiLFxuICAgIElOREVYS0VZID0gXCJrb19zb3VyY2VJbmRleFwiLFxuICAgIExJU1RLRVkgPSBcImtvX3NvcnRMaXN0XCIsXG4gICAgUEFSRU5US0VZID0gXCJrb19wYXJlbnRMaXN0XCIsXG4gICAgRFJBR0tFWSA9IFwia29fZHJhZ0l0ZW1cIixcbiAgICB1bndyYXAgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlLFxuICAgIGRhdGFHZXQgPSBrby51dGlscy5kb21EYXRhLmdldCxcbiAgICBkYXRhU2V0ID0ga28udXRpbHMuZG9tRGF0YS5zZXQ7XG5cbiAga28uYmluZGluZ0hhbmRsZXJzLmRyb3BwYWJsZSA9IHtcbiAgICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KSB7XG4gICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLFxuICAgICAgICB2YWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKSB8fCB7fSxcbiAgICAgICAgZHJvcHBhYmxlID0ge30sXG4gICAgICAgIGRyb3BBY3R1YWw7XG5cbiAgICAgICQuZXh0ZW5kKHRydWUsIGRyb3BwYWJsZSwga28uYmluZGluZ0hhbmRsZXJzLmRyb3BwYWJsZSk7XG4gICAgICBpZiAodmFsdWUuZGF0YSkge1xuICAgICAgICBpZiAodmFsdWUub3B0aW9ucyAmJiBkcm9wcGFibGUub3B0aW9ucykge1xuICAgICAgICAgIGtvLnV0aWxzLmV4dGVuZChkcm9wcGFibGUub3B0aW9ucywgdmFsdWUub3B0aW9ucyk7XG4gICAgICAgICAgZGVsZXRlIHZhbHVlLm9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAga28udXRpbHMuZXh0ZW5kKGRyb3BwYWJsZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHJvcHBhYmxlLmRhdGEgPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgZHJvcEFjdHVhbCA9IGRyb3BwYWJsZS5vcHRpb25zLmRyb3A7XG5cbiAgICAgICRlbGVtZW50LmRyb3BwYWJsZShrby51dGlscy5leHRlbmQoZHJvcHBhYmxlLm9wdGlvbnMsIHtcbiAgICAgICAgZHJvcDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG5cbiAgICAgICAgICB2YXIgZWwgPSB1aS5kcmFnZ2FibGVbMF0sXG4gICAgICAgICAgICBpdGVtID0gZGF0YUdldChlbCwgSVRFTUtFWSkgfHwgZGF0YUdldChlbCwgRFJBR0tFWSk7XG5cbiAgICAgICAgICBpZiAoaXRlbSkge1xuXG4gICAgICAgICAgICBpZiAoaXRlbS5jbG9uZSkge1xuICAgICAgICAgICAgICBpdGVtID0gaXRlbS5jbG9uZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZHJvcHBhYmxlLmRyYWdnZWQpIHtcbiAgICAgICAgICAgICAgaXRlbSA9IGRyb3BwYWJsZS5kcmFnZ2VkLmNhbGwodGhpcywgaXRlbSwgZXZlbnQsIHVpKSB8fCBpdGVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZHJvcHBhYmxlLmRhdGEpIHtcbiAgICAgICAgICAgICAgZHJvcHBhYmxlLmRhdGEoaXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZHJvcEFjdHVhbCkge1xuICAgICAgICAgICAgZHJvcEFjdHVhbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICB9KSk7XG5cbiAgICAgIC8vaGFuZGxlIGVuYWJsaW5nL2Rpc2FibGluZ1xuICAgICAgaWYgKGRyb3BwYWJsZS5pc0VuYWJsZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBrby5jb21wdXRlZCh7XG4gICAgICAgICAgcmVhZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkZWxlbWVudC5kcm9wcGFibGUoa28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShkcm9wcGFibGUuaXNFbmFibGVkKSA/IFwiZW5hYmxlXCIgOiBcImRpc2FibGVcIik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IGVsZW1lbnRcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCkge1xuXG4gICAgfSxcbiAgICB0YXJnZXRJbmRleDogbnVsbCxcbiAgICBhZnRlck1vdmU6IG51bGwsXG4gICAgYmVmb3JlTW92ZTogbnVsbCxcbiAgICBvcHRpb25zOiB7fVxuICB9O1xufSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbi8qIHV0aWxpdHkgZm9yIHRvZ2V0aGVyanMgKi9cbmtvLmJpbmRpbmdIYW5kbGVycy5mb2N1c2FibGUgPSB7XG4gICdmb2N1cyc6IGZ1bmN0aW9uKCkge30sXG4gICdibHVyJzogZnVuY3Rpb24oKSB7fSxcbiAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhlbGVtZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICQoZWxlbWVudCkub2ZmKFwiZm9jdXNpblwiLCBrby5iaW5kaW5nSGFuZGxlcnMuZm9jdXNhYmxlLmZvY3VzKTtcbiAgICAgICQoZWxlbWVudCkub2ZmKFwiZm9jdXNvdXRcIiwga28uYmluZGluZ0hhbmRsZXJzLmZvY3VzYWJsZS5ibHVyKTtcbiAgICB9KTtcblxuICAgICQoZWxlbWVudCkub24oXCJmb2N1c2luXCIsIGtvLmJpbmRpbmdIYW5kbGVycy5mb2N1c2FibGUuZm9jdXMpO1xuICAgICQoZWxlbWVudCkub24oXCJmb2N1c291dFwiLCBrby5iaW5kaW5nSGFuZGxlcnMuZm9jdXNhYmxlLmJsdXIpO1xuXG4gIH1cbn07XG5cbmtvLmJpbmRpbmdIYW5kbGVycy5zY3JvbGxhYmxlID0ge1xuICAnc2Nyb2xsJzogZnVuY3Rpb24oKSB7fSxcbiAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhlbGVtZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICQoZWxlbWVudCkub2ZmKFwic2Nyb2xsXCIsIGtvLmJpbmRpbmdIYW5kbGVycy5zY3JvbGxhYmxlLnNjcm9sbCk7XG4gICAgfSk7XG5cbiAgICAkKGVsZW1lbnQpLm9uKFwic2Nyb2xsXCIsIGtvLmJpbmRpbmdIYW5kbGVycy5zY3JvbGxhYmxlLnNjcm9sbCk7XG5cbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xuXG5rby5leHRlbmRlcnMucGFnaW5nID0gZnVuY3Rpb24odGFyZ2V0LCBwYWdlU2l6ZSkge1xuICB2YXIgX3BhZ2VTaXplID0ga28ub2JzZXJ2YWJsZShwYWdlU2l6ZSB8fCAxMCksXG4gICAgLy8gZGVmYXVsdCBwYWdlU2l6ZSB0byAxMFxuICAgIF9jdXJyZW50UGFnZSA9IGtvLm9ic2VydmFibGUoMSk7IC8vIGRlZmF1bHQgY3VycmVudCBwYWdlIHRvIDFcbiAgdGFyZ2V0LnBhZ2VTaXplID0ga28uY29tcHV0ZWQoe1xuICAgIHJlYWQ6IF9wYWdlU2l6ZSxcbiAgICB3cml0ZTogZnVuY3Rpb24obmV3VmFsdWUpIHtcbiAgICAgIGlmIChuZXdWYWx1ZSA+IDApIHtcbiAgICAgICAgX3BhZ2VTaXplKG5ld1ZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9wYWdlU2l6ZSgxMCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB0YXJnZXQuY3VycmVudFBhZ2UgPSBrby5jb21wdXRlZCh7XG4gICAgcmVhZDogX2N1cnJlbnRQYWdlLFxuICAgIHdyaXRlOiBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgaWYgKG5ld1ZhbHVlID4gdGFyZ2V0LnBhZ2VDb3VudCgpKSB7XG4gICAgICAgIF9jdXJyZW50UGFnZSh0YXJnZXQucGFnZUNvdW50KCkpO1xuICAgICAgfSBlbHNlIGlmIChuZXdWYWx1ZSA8PSAwKSB7XG4gICAgICAgIF9jdXJyZW50UGFnZSgxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9jdXJyZW50UGFnZShuZXdWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB0YXJnZXQucGFnZUNvdW50ID0ga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbCh0YXJnZXQoKS5sZW5ndGggLyB0YXJnZXQucGFnZVNpemUoKSkgfHwgMTtcbiAgfSk7XG5cbiAgdGFyZ2V0LmN1cnJlbnRQYWdlRGF0YSA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYWdlU2l6ZSA9IF9wYWdlU2l6ZSgpLFxuICAgICAgcGFnZUluZGV4ID0gX2N1cnJlbnRQYWdlKCksXG4gICAgICBzdGFydEluZGV4ID0gcGFnZVNpemUgKiAocGFnZUluZGV4IC0gMSksXG4gICAgICBlbmRJbmRleCA9IHBhZ2VTaXplICogcGFnZUluZGV4O1xuXG4gICAgcmV0dXJuIHRhcmdldCgpLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcbiAgfSk7XG5cbiAgdGFyZ2V0Lm1vdmVGaXJzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRhcmdldC5jdXJyZW50UGFnZSgxKTtcbiAgfTtcbiAgdGFyZ2V0Lm1vdmVQcmV2aW91cyA9IGZ1bmN0aW9uKCkge1xuICAgIHRhcmdldC5jdXJyZW50UGFnZSh0YXJnZXQuY3VycmVudFBhZ2UoKSAtIDEpO1xuICB9O1xuICB0YXJnZXQubW92ZU5leHQgPSBmdW5jdGlvbigpIHtcbiAgICB0YXJnZXQuY3VycmVudFBhZ2UodGFyZ2V0LmN1cnJlbnRQYWdlKCkgKyAxKTtcbiAgfTtcbiAgdGFyZ2V0Lm1vdmVMYXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGFyZ2V0LmN1cnJlbnRQYWdlKHRhcmdldC5wYWdlQ291bnQoKSk7XG4gIH07XG5cbiAgcmV0dXJuIHRhcmdldDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWxzIGdsb2JhbDogdHJ1ZSAqL1xuXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgc29ydGFibGUgPSByZXF1aXJlKFwianF1ZXJ5LXVpL3NvcnRhYmxlXCIpO1xudmFyIGRyYWdnYWJsZSA9IHJlcXVpcmUoXCJqcXVlcnktdWkvZHJhZ2dhYmxlXCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnJlcXVpcmUoXCJrbm9ja291dC1zb3J0YWJsZVwiKTtcblxuaWYgKHR5cGVvZiBzb3J0YWJsZSA9PSAndW5kZWZpbmVkJykgdGhyb3cgXCJDYW5ub3QgZmluZCBqcXVlcnktdWkgc29ydGFibGUgd2lkZ2V0IGRlcGVuZGVuY3khXCI7XG5pZiAodHlwZW9mIGRyYWdnYWJsZSA9PSAndW5kZWZpbmVkJykgdGhyb3cgXCJDYW5ub3QgZmluZCBqcXVlcnktdWkgc29ydGFibGUgd2lkZ2V0IGRlcGVuZGVuY3khXCI7XG5cbnZhciBpc0RyYWdnaW5nSGVscGVyID0gZnVuY3Rpb24od3JpdGFibGUsIGUpIHtcbiAgaWYgKHdyaXRhYmxlKCkpIHtcbiAgICBpZiAoZS50eXBlID09IHdyaXRhYmxlKCkgKyAnc3RvcCcpIHdyaXRhYmxlKGZhbHNlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZS50eXBlID09ICdkcmFnc3RhcnQnIHx8IGUudHlwZSA9PSAnc29ydHN0YXJ0Jykgd3JpdGFibGUoZS50eXBlLnN1YnN0cmluZygwLCA0KSk7XG4gIH1cbn07XG5cbnZhciBtYWtlRXh0ZW5kZWRWYWx1ZUFjY2Vzc29yID0gZnVuY3Rpb24odmFsdWVBY2Nlc3Nvcikge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1vZGVsVmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCksXG4gICAgICB1bndyYXBwZWRWYWx1ZSA9IGtvLnV0aWxzLnBlZWtPYnNlcnZhYmxlKG1vZGVsVmFsdWUpOyAvLyBVbndyYXAgd2l0aG91dCBzZXR0aW5nIGEgZGVwZW5kZW5jeSBoZXJlXG5cbiAgICBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKG1vZGVsVmFsdWUpO1xuXG4gICAgaWYgKG1vZGVsVmFsdWUub3B0aW9ucyA9PSAndW5kZWZpbmVkJykge1xuICAgICAgbW9kZWxWYWx1ZS5vcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgdmFyIG9yaWdTdGFydCA9IG1vZGVsVmFsdWUub3B0aW9ucy5zdGFydDtcbiAgICBtb2RlbFZhbHVlLm9wdGlvbnMuc3RhcnQgPSBmdW5jdGlvbihlLCB1aSkge1xuICAgICAgaWYgKHR5cGVvZiBtb2RlbFZhbHVlLmRyYWdnaW5nICE9ICd1bmRlZmluZWQnICYmIGtvLmlzV3JpdGFibGVPYnNlcnZhYmxlKG1vZGVsVmFsdWUuZHJhZ2dpbmcpKSBpc0RyYWdnaW5nSGVscGVyKG1vZGVsVmFsdWUuZHJhZ2dpbmcsIGUpO1xuICAgICAgaWYgKHR5cGVvZiBtb2RlbFZhbHVlLmRyb3BDb250YWluZXIgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbW9kZWxWYWx1ZS5zY3JvbGxJbnRlcnZhbCA9IGdsb2JhbC5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgZm9vID0gJChtb2RlbFZhbHVlLmRyb3BDb250YWluZXIpLnNjcm9sbFRvcCgpO1xuICAgICAgICAgICQobW9kZWxWYWx1ZS5kcm9wQ29udGFpbmVyKS5zY3JvbGxUb3AoZm9vICsgbW9kZWxWYWx1ZS5hZGRpbmcpO1xuICAgICAgICB9LCAyMCk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG9yaWdTdGFydCAhPSAndW5kZWZpbmVkJykgcmV0dXJuIG9yaWdTdGFydChlLCB1aSk7XG4gICAgfTtcbiAgICB2YXIgb3JpZ1N0b3AgPSBtb2RlbFZhbHVlLm9wdGlvbnMuc3RvcDtcbiAgICBtb2RlbFZhbHVlLm9wdGlvbnMuc3RvcCA9IGZ1bmN0aW9uKGUsIHVpKSB7XG4gICAgICBpZiAodHlwZW9mIG1vZGVsVmFsdWUuZHJhZ2dpbmcgIT0gJ3VuZGVmaW5lZCcgJiYga28uaXNXcml0YWJsZU9ic2VydmFibGUobW9kZWxWYWx1ZS5kcmFnZ2luZykpIGlzRHJhZ2dpbmdIZWxwZXIobW9kZWxWYWx1ZS5kcmFnZ2luZywgZSk7XG4gICAgICBpZiAodHlwZW9mIG1vZGVsVmFsdWUuZHJvcENvbnRhaW5lciAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICBnbG9iYWwuY2xlYXJJbnRlcnZhbChtb2RlbFZhbHVlLnNjcm9sbEludGVydmFsKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygb3JpZ1N0b3AgIT0gJ3VuZGVmaW5lZCcpIHJldHVybiBvcmlnU3RvcChlLCB1aSk7XG4gICAgfTtcbiAgICB2YXIgb3JpZ0RyYWcgPSBtb2RlbFZhbHVlLm9wdGlvbnMuZHJhZztcbiAgICBtb2RlbFZhbHVlLm9wdGlvbnMuZHJhZyA9IGZ1bmN0aW9uKGUsIHVpKSB7XG4gICAgICBpZiAodHlwZW9mIG1vZGVsVmFsdWUuZHJvcENvbnRhaW5lciAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgdG9wID0gZS5wYWdlWSAtICQobW9kZWxWYWx1ZS5kcm9wQ29udGFpbmVyKS5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciBib3R0b20gPSB0b3AgLSAkKG1vZGVsVmFsdWUuZHJvcENvbnRhaW5lcikuaGVpZ2h0KCk7XG4gICAgICAgIC8vIEhhbmRsZSBzY3JvbGxpbmcgc3BlZWQgZGVwZW5kaW5nIG9uIGRpc3RhbmNlIGZyb20gYm9yZGVyLlxuICAgICAgICBpZiAodG9wIDwgLTIwKSB7XG4gICAgICAgICAgbW9kZWxWYWx1ZS5hZGRpbmcgPSAtMjA7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCI8PDxcIik7XG4gICAgICAgIH0gZWxzZSBpZiAodG9wIDwgMCkge1xuICAgICAgICAgIG1vZGVsVmFsdWUuYWRkaW5nID0gLTEwO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiPDxcIik7XG4gICAgICAgIH0gZWxzZSBpZiAodG9wIDwgMTApIHtcbiAgICAgICAgICBtb2RlbFZhbHVlLmFkZGluZyA9IC01O1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiPFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChib3R0b20gPiAyMCkge1xuICAgICAgICAgIG1vZGVsVmFsdWUuYWRkaW5nID0gMjA7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCI+Pj5cIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYm90dG9tID4gMCkge1xuICAgICAgICAgIG1vZGVsVmFsdWUuYWRkaW5nID0gMTA7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCI+PlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChib3R0b20gPiAtMTApIHtcbiAgICAgICAgICBtb2RlbFZhbHVlLmFkZGluZyA9IDU7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCI+XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1vZGVsVmFsdWUuYWRkaW5nID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvcmlnRHJhZyAhPSAndW5kZWZpbmVkJykgcmV0dXJuIG9yaWdEcmFnKGUsIHVpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG1vZGVsVmFsdWU7XG4gIH07XG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnMuZXh0c29ydGFibGUgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpIHtcbiAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzLnNvcnRhYmxlLmluaXQoZWxlbWVudCwgbWFrZUV4dGVuZGVkVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yKSwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCkge1xuICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnMuc29ydGFibGUudXBkYXRlKGVsZW1lbnQsIG1ha2VFeHRlbmRlZFZhbHVlQWNjZXNzb3IodmFsdWVBY2Nlc3NvciksIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpO1xuICB9XG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnMuZXh0ZHJhZ2dhYmxlID0ge1xuICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVycy5kcmFnZ2FibGUuaW5pdChlbGVtZW50LCBtYWtlRXh0ZW5kZWRWYWx1ZUFjY2Vzc29yKHZhbHVlQWNjZXNzb3IpLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVycy5kcmFnZ2FibGUudXBkYXRlKGVsZW1lbnQsIG1ha2VFeHRlbmRlZFZhbHVlQWNjZXNzb3IodmFsdWVBY2Nlc3NvciksIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpO1xuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UsIEltYWdlOiBmYWxzZSAqL1xuXG4vLyBUaGlzIG1vZHVsZSBkZXBlbmRzIG9uIHRob3NlIGZpbGVzLCBidXQgaXQgZG9lc24ndCBoYXZlIGEgZGlyZWN0IGRlcGVuZGVuY3ksIHNvIHdlIGRvbid0IHJlcXVpcmUgdGhlbSBoZXJlLlxuXG4vL3JlcXVpcmUoXCJibHVlaW1wLWNhbnZhcy10by1ibG9iXCIpO1xuLy9yZXF1aXJlKFwianF1ZXJ5LWZpbGUtdXBsb2FkL2pzL2pxdWVyeS5pZnJhbWUtdHJhbnNwb3J0LmpzXCIpO1xuLy9yZXF1aXJlKFwianF1ZXJ5LWZpbGUtdXBsb2FkL2pzL2pxdWVyeS5maWxldXBsb2FkLmpzXCIpO1xuLy9yZXF1aXJlKFwianF1ZXJ5LWZpbGUtdXBsb2FkL2pzL2pxdWVyeS5maWxldXBsb2FkLXByb2Nlc3MuanNcIik7XG4vL3JlcXVpcmUoXCJqcXVlcnktZmlsZS11cGxvYWQvanMvanF1ZXJ5LmZpbGV1cGxvYWQtaW1hZ2UuanNcIik7XG4vL3JlcXVpcmUoXCJqcXVlcnktZmlsZS11cGxvYWQvanMvanF1ZXJ5LmZpbGV1cGxvYWQtdmFsaWRhdGUuanNcIik7XG5cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbi8vIGV4cGVyaW1lbnRhbCBpbWFnZSBwcmVsb2FkaW5nLlxua28uYmluZGluZ0hhbmRsZXJzWydwcmVsb2FkZXInXSA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgIHZhciB2YWx1ZSA9IHZhbHVlQWNjZXNzb3IoKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlLnByZWxvYWRlZCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFsdWUucHJlbG9hZGVkID0ga28ub2JzZXJ2YWJsZShcIlwiKTtcblxuICAgICAgdmFyIHByZWxvYWRlciA9IGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmIChuZXdWYWx1ZSAhPSB2YWx1ZS5wcmVsb2FkZWQoKSkge1xuICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFsdWUucHJlbG9hZGVkKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YWx1ZS5wcmVsb2FkZWQobmV3VmFsdWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltZy5zcmMgPSBuZXdWYWx1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUucHJlbG9hZGVkKG5ld1ZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhbHVlLnN1YnNjcmliZShwcmVsb2FkZXIpO1xuICAgICAgcHJlbG9hZGVyKHZhbHVlKCkpO1xuICAgIH1cbiAgfVxufTtcblxuLy8gVE9ETyB3ZSBkb24ndCB1c2UgYWR2YXR0ciBhbmQgYWR2c3R5bGUsIG1heWJlIHdlIHNob3VsZCBzaW1wbHkgcmVtb3ZlIHRoaXMgY29kZS5cbmtvLmJpbmRpbmdIYW5kbGVyc1snYWR2YXR0ciddID0ge1xuICAnaW5pdCc6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIHZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkgfHwge30pO1xuICAgIGtvLnV0aWxzLm9iamVjdEZvckVhY2godmFsdWUsIGZ1bmN0aW9uKGF0dHJOYW1lLCBhdHRyVmFsdWVBY2Nlc3Nvcikge1xuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKTtcblxuICAgICAgaWYgKGtvLmlzV3JpdGVhYmxlT2JzZXJ2YWJsZShhdHRyVmFsdWVBY2Nlc3NvcikpIHtcbiAgICAgICAgdmFyIG9sZFZhbHVlID0gYXR0clZhbHVlQWNjZXNzb3IoKTtcbiAgICAgICAgaWYgKG9sZFZhbHVlICE9IGF0dHJWYWx1ZSkge1xuICAgICAgICAgIGF0dHJWYWx1ZUFjY2Vzc29yKGF0dHJWYWx1ZSk7XG4gICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFkdkF0dHIgZm91bmQgYSB2YWx1ZSBkaWZmZXJlbnQgZnJvbSB0aGUgZGVmYXVsdFwiLCBhdHRyTmFtZSwgb2xkVmFsdWUsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gICd1cGRhdGUnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncykge1xuICAgIHZhciB2YWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKSB8fCB7fTtcbiAgICBrby51dGlscy5vYmplY3RGb3JFYWNoKHZhbHVlLCBmdW5jdGlvbihhdHRyTmFtZSwgYXR0clZhbHVlKSB7XG4gICAgICBhdHRyVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGF0dHJWYWx1ZSk7XG4gICAgICAvLyBUbyBjb3ZlciBjYXNlcyBsaWtlIFwiYXR0cjogeyBjaGVja2VkOnNvbWVQcm9wIH1cIiwgd2Ugd2FudCB0byByZW1vdmUgdGhlIGF0dHJpYnV0ZSBlbnRpcmVseVxuICAgICAgLy8gd2hlbiBzb21lUHJvcCBpcyBhIFwibm8gdmFsdWVcIi1saWtlIHZhbHVlIChzdHJpY3RseSBudWxsLCBmYWxzZSwgb3IgdW5kZWZpbmVkKVxuICAgICAgLy8gKGJlY2F1c2UgdGhlIGFic2VuY2Ugb2YgdGhlIFwiY2hlY2tlZFwiIGF0dHIgaXMgaG93IHRvIG1hcmsgYW4gZWxlbWVudCBhcyBub3QgY2hlY2tlZCwgZXRjLilcbiAgICAgIHZhciB0b1JlbW92ZSA9IChhdHRyVmFsdWUgPT09IGZhbHNlKSB8fCAoYXR0clZhbHVlID09PSBudWxsKSB8fCAoYXR0clZhbHVlID09PSB1bmRlZmluZWQpO1xuICAgICAgaWYgKHRvUmVtb3ZlKSBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgICBlbHNlIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyVmFsdWUudG9TdHJpbmcoKSk7XG4gICAgfSk7XG4gIH1cbn07XG5rby5iaW5kaW5nSGFuZGxlcnNbJ2FkdnN0eWxlJ10gPSB7XG4gICdpbml0JzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgdmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSB8fCB7fSk7XG4gICAga28udXRpbHMub2JqZWN0Rm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24oc3R5bGVOYW1lLCBzdHlsZVZhbHVlQWNjZXNzb3IpIHtcbiAgICAgIHZhciBzdHlsZVZhbHVlO1xuICAgICAgaWYgKHN0eWxlTmFtZS5tYXRjaCgvUHgkLykpIHtcbiAgICAgICAgc3R5bGVOYW1lID0gc3R5bGVOYW1lLnN1YnN0cigwLCBzdHlsZU5hbWUubGVuZ3RoIC0gMik7XG4gICAgICAgIHN0eWxlVmFsdWUgPSBlbGVtZW50LnN0eWxlW3N0eWxlTmFtZV07XG4gICAgICAgIGlmIChzdHlsZVZhbHVlLm1hdGNoKC9weCQvKSkge1xuICAgICAgICAgIHN0eWxlVmFsdWUgPSBzdHlsZVZhbHVlLnJlcGxhY2UoL3B4JC8sICcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkFkdlN0eWxlIGJpbmRpbmcgZm91bmQgYW4gdW5leHBlY3RlZCBkZWZhdWx0IHZhbHVlXCIsIHN0eWxlTmFtZSwgc3R5bGVWYWx1ZSwgZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlVmFsdWUgPSBlbGVtZW50LnN0eWxlW3N0eWxlTmFtZV07XG4gICAgICB9XG5cbiAgICAgIGlmIChrby5pc1dyaXRlYWJsZU9ic2VydmFibGUoc3R5bGVWYWx1ZUFjY2Vzc29yKSkge1xuICAgICAgICB2YXIgb2xkVmFsdWUgPSBzdHlsZVZhbHVlQWNjZXNzb3IoKTtcbiAgICAgICAgaWYgKG9sZFZhbHVlICE9IHN0eWxlVmFsdWUpIHtcbiAgICAgICAgICBzdHlsZVZhbHVlQWNjZXNzb3Ioc3R5bGVWYWx1ZSk7XG4gICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFkdlN0eWxlIGZvdW5kIGEgdmFsdWUgZGlmZmVyZW50IGZyb20gdGhlIGRlZmF1bHRcIiwgc3R5bGVOYW1lLCBvbGRWYWx1ZSwgc3R5bGVWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gICd1cGRhdGUnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKSB7XG4gICAgdmFyIHZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkgfHwge30pO1xuICAgIGtvLnV0aWxzLm9iamVjdEZvckVhY2godmFsdWUsIGZ1bmN0aW9uKHN0eWxlTmFtZSwgc3R5bGVWYWx1ZSkge1xuICAgICAgc3R5bGVWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoc3R5bGVWYWx1ZSk7XG5cbiAgICAgIGlmIChzdHlsZVZhbHVlID09PSBudWxsIHx8IHR5cGVvZiBzdHlsZVZhbHVlID09PSAndW5kZWZpbmVkJyB8fCBzdHlsZVZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICBzdHlsZVZhbHVlID0gXCJcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0eWxlTmFtZS5tYXRjaCgvUHgkLykpIHtcbiAgICAgICAgc3R5bGVOYW1lID0gc3R5bGVOYW1lLnN1YnN0cigwLCBzdHlsZU5hbWUubGVuZ3RoIC0gMik7XG4gICAgICAgIHN0eWxlVmFsdWUgPSBzdHlsZVZhbHVlICsgXCJweFwiO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50LnN0eWxlW3N0eWxlTmFtZV0gPSBzdHlsZVZhbHVlO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBVdGlsaXR5IHRvIGxvZyBpbml6aWFsaXphdGlvbiBhbmQgZGlzcG9zYWwgb2YgRE9NIGVsZW1lbnRzLlxua28uYmluZGluZ0hhbmRsZXJzWydkb21sb2cnXSA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgIGNvbnNvbGUubG9nKFwiaW5pdGlhbGl6ZWRcIiwgZWxlbWVudCk7XG4gICAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhlbGVtZW50LCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZGlzcG9zZWRcIiwgZWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn07XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1snZnVkcm9wcGFibGUnXSA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgIHZhciBvcHQgPSB2YWx1ZUFjY2Vzc29yKCkgfHwge307XG4gICAgdmFyIHRpbWVvdXRzT2JqID0ge307XG5cbiAgICB2YXIgb3ZlciA9IGZ1bmN0aW9uKHRpbWVvdXRzLCBkcm9wWm9uZVRpbWVvdXQsIGVsZW1lbnQsIGNsYXNzTmFtZSwgb2JzZXJ2YWJsZSwgZXZlbnQpIHtcblxuICAgICAgaWYgKCF0aW1lb3V0c1tkcm9wWm9uZVRpbWVvdXRdKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrby5pc1dyaXRlYWJsZU9ic2VydmFibGUob2JzZXJ2YWJsZSkgJiYgIW9ic2VydmFibGUoKSkge1xuICAgICAgICAgIG9ic2VydmFibGUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdsb2JhbC5jbGVhclRpbWVvdXQodGltZW91dHNbZHJvcFpvbmVUaW1lb3V0XSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVvdXRzW2Ryb3Bab25lVGltZW91dF0gPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIGNsYXNzTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa28uaXNXcml0ZWFibGVPYnNlcnZhYmxlKG9ic2VydmFibGUpICYmIG9ic2VydmFibGUoKSkge1xuICAgICAgICAgIG9ic2VydmFibGUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZiAoZXZlbnQudHlwZSA9PSAnZHJhZ2xlYXZlJykgc3RvcCgpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIFVzaW5nIDEwMCBpdCBkb2Vucyd0IHdvcmsgZmluZSBvbiBMaW51eCAoY2hvbWUvZmlyZWZveCksIHVzaW5nIDIwMCBzdGlsbCBzaG93cyBpc3N1ZXMgb24gc2xvdyBMaW51eCBib3hlc1xuICAgICAgICB0aW1lb3V0c1tkcm9wWm9uZVRpbWVvdXRdID0gZ2xvYmFsLnNldFRpbWVvdXQoc3RvcCwgNTAwKTtcbiAgICAgIH1cblxuICAgIH07XG5cbiAgICBpZiAob3B0LmFjdGl2ZSB8fCBvcHQuYWN0aXZlQ2xhc3MpIHtcbiAgICAgIGtvLnV0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGdsb2JhbCwgJ2RyYWdvdmVyJywgb3Zlci5iaW5kKHVuZGVmaW5lZCwgdGltZW91dHNPYmosICdhY3RpdmVUaW1lb3V0JywgZWxlbWVudCwgb3B0LmFjdGl2ZUNsYXNzLCBvcHQuYWN0aXZlKSk7XG4gICAgfVxuICAgIGlmIChvcHQuaG92ZXJDbGFzcykge1xuICAgICAgLy8gZHJhZ2VudGVyIGFuZCBkcmFnbGVhdmUgYXJlIG5vdCByZXF1aXJlZCBidXQgdGhleSBzcGVlZHVwIGZlZWRiYWNrIHdoZW4gdXNlZC5cbiAgICAgIGtvLnV0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGVsZW1lbnQsICdkcmFnb3ZlciBkcmFnZW50ZXIgZHJhZ2xlYXZlJywgb3Zlci5iaW5kKHVuZGVmaW5lZCwgdGltZW91dHNPYmosICdob3ZlclRpbWVvdXQnLCBlbGVtZW50LCBvcHQuaG92ZXJDbGFzcywgdW5kZWZpbmVkKSk7XG4gICAgfVxuICB9XG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ2ZpbGV1cGxvYWQnXSA9IHtcbiAgZXh0ZW5kT3B0aW9uczoge30sXG4gIHJlbW90ZUZpbGVQcmVwcm9jZXNzb3I6IGZ1bmN0aW9uKHVybCkgeyByZXR1cm4gdXJsOyB9LFxuICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKSB7XG4gICAgLy8gVE9ETyBkb21ub2RlZGlzcG9zYWwgZG9lc24ndCB3b3JrIHdoZW4gdGhlIHVwbG9hZCBpcyBkb25lIGJ5IFwiY2xpY2tpbmdcIlxuICAgIC8vIFByb2JhYmx5IGpxdWVyeS1maWxldXBsb2FkIG1vdmVzIHRoZSBET00gc29tZXdoZXJlIGVsc2Ugc28gdGhhdCBLTyBkb2Vzbid0IFxuICAgIC8vIGRldGVjdCB0aGUgcmVtb3ZhbCBhbnltb3JlLlxuICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soZWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKGVsZW1lbnQpLmZpbGV1cGxvYWQoJ2Rlc3Ryb3knKTtcbiAgICB9KTtcblxuICAgIC8vIGlmIHdlIGxlYXZlIHRoZSB0aXRsZSB0aGUgbmF0aXZlIGNvbnRyb2wgd2lsbCBzaG93IHVzIGEgdG9vbHRpcCB3ZSBkb24ndCB3YW50LlxuICAgIC8vIEluIFdlYktpdCB0aGUgcmlnaHQgd2F5IHRvIHJlbW92ZSBpdCBpcyBsZWF2aW5nIGEgXCJ3aGl0ZXNwYWNlXCIuXG4gICAgLy8gSW4gR2Vja28gd2UgaGF2ZSB0byBzZXQgaXQgZW1wdHkuXG4gICAgaWYgKGdsb2JhbC53ZWJraXRVUkwpXG4gICAgICAkKGVsZW1lbnQpLmF0dHIoJ3RpdGxlJywgJyAnKTtcbiAgICBlbHNlXG4gICAgICAkKGVsZW1lbnQpLmF0dHIoJ3RpdGxlJywgJycpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgIHZhciBvcHRpb25zID0gdmFsdWVBY2Nlc3NvcigpIHx8IHt9O1xuXG4gICAgdmFyICRmdSA9ICQoZWxlbWVudCk7XG4gICAgdmFyICRwYXJlbnQgPSAkZnUucGFyZW50cygnLnVwbG9hZHpvbmUnKTtcblxuICAgIHZhciBkYXRhVmFsdWUgPSBvcHRpb25zLmRhdGE7XG4gICAgb3B0aW9ucy5kYXRhID0gdW5kZWZpbmVkO1xuXG4gICAgdmFyIGNhbnZhc1ByZXZpZXcgPSBvcHRpb25zLmNhbnZhc1ByZXZpZXc7XG5cbiAgICAvLyBUT0RPIHJlbW92ZSBoYXJkY29kZWQgdXJsXG4gICAga28udXRpbHMuZXh0ZW5kKG9wdGlvbnMsIHtcbiAgICAgIHVybDogJy91cGxvYWQvJyxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBkcm9wWm9uZTogJHBhcmVudC5maW5kKCcubW8tdXBsb2Fkem9uZScpWzBdLFxuICAgICAgYXV0b1VwbG9hZDogdHJ1ZSxcbiAgICAgIGFjY2VwdEZpbGVUeXBlczogLyhcXC58XFwvKShnaWZ8anBlP2d8cG5nKSQvaSxcbiAgICAgIG1heEZpbGVTaXplOiAxMDI0ICogMTAyNCxcbiAgICAgIC8vIEVuYWJsZSBpbWFnZSByZXNpemluZywgZXhjZXB0IGZvciBBbmRyb2lkIGFuZCBPcGVyYSxcbiAgICAgIC8vIHdoaWNoIGFjdHVhbGx5IHN1cHBvcnQgaW1hZ2UgcmVzaXppbmcsIGJ1dCBmYWlsIHRvXG4gICAgICAvLyBzZW5kIEJsb2Igb2JqZWN0cyB2aWEgWEhSIHJlcXVlc3RzOlxuICAgICAgZGlzYWJsZUltYWdlUmVzaXplOiAvQW5kcm9pZCg/IS4qQ2hyb21lKXxPcGVyYS8udGVzdChnbG9iYWwubmF2aWdhdG9yLnVzZXJBZ2VudCksXG4gICAgICBwcmV2aWV3TWF4V2lkdGg6IDIwMCxcbiAgICAgIHByZXZpZXdNYXhIZWlnaHQ6IDIwMCxcbiAgICAgIHByZXZpZXdDcm9wOiBmYWxzZSxcbiAgICAgIHJlcGxhY2VGaWxlSW5wdXQ6IGZhbHNlLCAvLyByZXBsYWNlRmlsZUlucHV0IHRydWUgYnJlYWtzIGFmdGVyIHVwbG9hZGluZyB1c2luZyBcImlucHV0XCIgKHVzaW5nIG1vdXNlIGNsaWMgaW5zdGVhZCBvZiBkcm9wcGluZylcblxuICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgLy8gY2xpZW50IHNpZGVcbiAgICAgICAgdW5rbm93bkVycm9yOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHVwbG9hZGVkQnl0ZXM6ICdVcGxvYWRlZCBieXRlcyBleGNlZWQgZmlsZSBzaXplJyxcbiAgICAgICAgbWF4TnVtYmVyT2ZGaWxlczogJ01heGltdW0gbnVtYmVyIG9mIGZpbGVzIGV4Y2VlZGVkJyxcbiAgICAgICAgYWNjZXB0RmlsZVR5cGVzOiAnRmlsZSB0eXBlIG5vdCBhbGxvd2VkJyxcbiAgICAgICAgbWF4RmlsZVNpemU6ICdGaWxlIGlzIHRvbyBsYXJnZScsXG4gICAgICAgIG1pbkZpbGVTaXplOiAnRmlsZSBpcyB0b28gc21hbGwnLFxuICAgICAgICAvLyBzZXJ2ZXIgc2lkZVxuICAgICAgICBwb3N0X21heF9zaXplOiAnVGhlIHVwbG9hZGVkIGZpbGUgZXhjZWVkcyB0aGUgcG9zdF9tYXhfc2l6ZSBkaXJlY3RpdmUgaW4gcGhwLmluaScsXG4gICAgICAgIG1heF9maWxlX3NpemU6ICdGaWxlIGlzIHRvbyBiaWcnLFxuICAgICAgICBtaW5fZmlsZV9zaXplOiAnRmlsZSBpcyB0b28gc21hbGwnLFxuICAgICAgICBhY2NlcHRfZmlsZV90eXBlczogJ0ZpbGV0eXBlIG5vdCBhbGxvd2VkJyxcbiAgICAgICAgbWF4X251bWJlcl9vZl9maWxlczogJ01heGltdW0gbnVtYmVyIG9mIGZpbGVzIGV4Y2VlZGVkJyxcbiAgICAgICAgbWF4X3dpZHRoOiAnSW1hZ2UgZXhjZWVkcyBtYXhpbXVtIHdpZHRoJyxcbiAgICAgICAgbWluX3dpZHRoOiAnSW1hZ2UgcmVxdWlyZXMgYSBtaW5pbXVtIHdpZHRoJyxcbiAgICAgICAgbWF4X2hlaWdodDogJ0ltYWdlIGV4Y2VlZHMgbWF4aW11bSBoZWlnaHQnLFxuICAgICAgICBtaW5faGVpZ2h0OiAnSW1hZ2UgcmVxdWlyZXMgYSBtaW5pbXVtIGhlaWdodCcsXG4gICAgICAgIGFib3J0OiAnRmlsZSB1cGxvYWQgYWJvcnRlZCcsXG4gICAgICAgIGltYWdlX3Jlc2l6ZTogJ0ZhaWxlZCB0byByZXNpemUgaW1hZ2UnLFxuICAgICAgICBnZW5lcmljOiAnVW5leHBlY3RlZCB1cGxvYWQgZXJyb3InXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBrby51dGlscy5leHRlbmQob3B0aW9ucywga28uYmluZGluZ0hhbmRsZXJzWydmaWxldXBsb2FkJ10uZXh0ZW5kT3B0aW9ucyk7XG5cbiAgICB2YXIgd29ya2luZyA9IDA7XG4gICAgdmFyIGZpcnN0V29ya2VkID0gJyc7XG5cbiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0td29ya2luZyA9PT0gMCkge1xuICAgICAgICBpZiAoZGF0YVZhbHVlKSB7XG4gICAgICAgICAgZGF0YVZhbHVlKGZpcnN0V29ya2VkKTtcbiAgICAgICAgfVxuICAgICAgICBmaXJzdFdvcmtlZCA9ICcnO1xuICAgICAgICBpZiAoY2FudmFzUHJldmlldykge1xuICAgICAgICAgICRwYXJlbnQuZmluZCgnaW1nJykuc2hvdygpO1xuICAgICAgICAgICRwYXJlbnQuZmluZCgnY2FudmFzJykucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgJHBhcmVudC5yZW1vdmVDbGFzcyhcInVwbG9hZGluZ1wiKTtcbiAgICAgICAgJHBhcmVudC5maW5kKCcucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIDApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgdHJhbnNsYXRlZE1lc3NhZ2UgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMubWVzc2FnZXMgPT0gJ29iamVjdCcgJiYgb3B0aW9ucy5tZXNzYWdlcyAhPT0gbnVsbCkge1xuICAgICAgICB2YXIgbWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eKFteIF0rKSguKikkLyk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5tZXNzYWdlc1ttYXRjaFsxXV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tZXNzYWdlc1ttYXRjaFsxXV0gKyBtYXRjaFsyXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH07XG5cbiAgICAkZnUuZmlsZXVwbG9hZChvcHRpb25zKTtcblxuICAgIHZhciBldmVudHMgPSBbJ2ZpbGV1cGxvYWRhZGQnLCAnZmlsZXVwbG9hZHByb2Nlc3NhbHdheXMnLCAnZmlsZXVwbG9hZHByb2dyZXNzYWxsJywgJ2ZpbGV1cGxvYWRkb25lJywgJ2ZpbGV1cGxvYWRmYWlsJ107XG4gICAgdmFyIGV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uKGUsIGRhdGEpIHtcbiAgICAgIGlmIChlLnR5cGUgPT0gJ2ZpbGV1cGxvYWRhZGQnKSB7XG4gICAgICAgIHdvcmtpbmcrKztcbiAgICAgIH1cbiAgICAgIGlmIChlLnR5cGUgPT0gJ2ZpbGV1cGxvYWRmYWlsJykge1xuICAgICAgICBjb25zb2xlLmxvZyhcImZpbGV1cGxvYWRmYWlsXCIsIGUsIGRhdGEpO1xuICAgICAgICBpZiAob3B0aW9ucy5vbmVycm9yKSB7XG4gICAgICAgICAgaWYgKGRhdGEuZXJyb3JUaHJvd24gPT09ICcnICYmIGRhdGEudGV4dFN0YXR1cyA9PSAnZXJyb3InKSB7XG4gICAgICAgICAgICBvcHRpb25zLm9uZXJyb3IodHJhbnNsYXRlZE1lc3NhZ2UoJ2dlbmVyaWMnKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25lcnJvcih0cmFuc2xhdGVkTWVzc2FnZSgnZ2VuZXJpYyAoJyArIGRhdGEuZXJyb3JUaHJvd24gKyAnKScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfVxuICAgICAgaWYgKGUudHlwZSA9PSAnZmlsZXVwbG9hZGRvbmUnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5yZXN1bHQuZmlsZXNbMF0udXJsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChvcHRpb25zLm9uZmlsZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnJlc3VsdC5maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBkYXRhLnJlc3VsdC5maWxlc1tpXSA9IGtvLmJpbmRpbmdIYW5kbGVyc1snZmlsZXVwbG9hZCddLnJlbW90ZUZpbGVQcmVwcm9jZXNzb3IoZGF0YS5yZXN1bHQuZmlsZXNbaV0pO1xuICAgICAgICAgICAgICBvcHRpb25zLm9uZmlsZShkYXRhLnJlc3VsdC5maWxlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGZpcnN0V29ya2VkID09PSAnJykgZmlyc3RXb3JrZWQgPSBkYXRhLnJlc3VsdC5maWxlc1swXS51cmw7XG5cbiAgICAgICAgICBpZiAoY2FudmFzUHJldmlldykge1xuICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGNsZWFudXA7XG4gICAgICAgICAgICBpbWcub25lcnJvciA9IGNsZWFudXA7XG4gICAgICAgICAgICBpbWcuc3JjID0gZGF0YS5yZXN1bHQuZmlsZXNbMF0udXJsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhLnJlc3VsdC5maWxlc1swXS5lcnJvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInJlbW90ZSBlcnJvclwiLCBlLCBkYXRhKTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5vbmVycm9yKSB7XG4gICAgICAgICAgICBvcHRpb25zLm9uZXJyb3IodHJhbnNsYXRlZE1lc3NhZ2UoZGF0YS5yZXN1bHQuZmlsZXNbMF0uZXJyb3IpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5leHBlY3RlZCBlcnJvclwiLCBlLCBkYXRhKTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5vbmVycm9yKSB7XG4gICAgICAgICAgICBvcHRpb25zLm9uZXJyb3IodHJhbnNsYXRlZE1lc3NhZ2UoJ2dlbmVyaWMgKFVuZXhwZWN0ZWQgRXJyb3IgcmV0cmlldmluZyB1cGxvYWRlZCBmaWxlKScpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZS50eXBlID09ICdmaWxldXBsb2FkcHJvY2Vzc2Fsd2F5cycpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gZGF0YS5pbmRleCxcbiAgICAgICAgICBmaWxlID0gZGF0YS5maWxlc1tpbmRleF07XG4gICAgICAgIGlmIChmaWxlLnByZXZpZXcgJiYgaW5kZXggPT09IDApIHtcbiAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgY2FudmFzIHdlIGhhZCBtdWx0aXBsZSB1cGxvYWRlZCBmaWxlc1xuICAgICAgICAgIGlmICgkcGFyZW50LmZpbmQoJ2NhbnZhcycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKGNhbnZhc1ByZXZpZXcpIHtcbiAgICAgICAgICAgICAgdmFyIGVsID0gJChmaWxlLnByZXZpZXcpLmNzcygnd2lkdGgnLCAnMTAwJScpOyAvLyAuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpLmNzcygnbGVmdCcsICcwJyk7XG4gICAgICAgICAgICAgICRwYXJlbnQuZmluZCgnaW1nJykuaGlkZSgpO1xuICAgICAgICAgICAgICAkcGFyZW50LnByZXBlbmQoZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHBhcmVudC5hZGRDbGFzcyhcInVwbG9hZGluZ1wiKTtcbiAgICAgICAgICAgICRwYXJlbnQuZmluZCgnLnByb2dyZXNzLWJhcicpLmNzcygnd2lkdGgnLCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbGUuZXJyb3IpIHtcbiAgICAgICAgICAvLyBGaWxlIHR5cGUgbm90IGFsbG93ZWRcbiAgICAgICAgICAvLyBGaWxlIGlzIHRvbyBsYXJnZVxuICAgICAgICAgIGlmIChvcHRpb25zLm9uZXJyb3IpIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25lcnJvcih0cmFuc2xhdGVkTWVzc2FnZShmaWxlLmVycm9yKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGUudHlwZSA9PSAnZmlsZXVwbG9hZHByb2dyZXNzYWxsJykge1xuICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBwYXJzZUludChkYXRhLmxvYWRlZCAvIGRhdGEudG90YWwgKiAxMDAsIDEwKTtcbiAgICAgICAgJHBhcmVudC5maW5kKCcucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIHByb2dyZXNzICsgJyUnKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZvciAodmFyIGkgPSBldmVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBldmVudE5hbWUgPSBldmVudHNbaV07XG4gICAgICAkZnUub24oZXZlbnROYW1lLCBldmVudEhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAoISQuc3VwcG9ydC5maWxlSW5wdXQpIHtcbiAgICAgICRmdS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLnBhcmVudCgpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcblxua28uYmluZGluZ0hhbmRsZXJzWydpZlN1YnMnXSA9IHtcbiAgLy8gY2xvbmVOb2RlcyBmcm9tIGtvLnV0aWxzLmNsb25lTm9kZXMgKG1pc3NpbmcgaW4gbWluaW1pemVkIEtPKVxuICBjbG9uZU5vZGVzOiBmdW5jdGlvbihub2Rlc0FycmF5LCBzaG91bGRDbGVhbk5vZGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSBub2Rlc0FycmF5Lmxlbmd0aCwgbmV3Tm9kZXNBcnJheSA9IFtdOyBpIDwgajsgaSsrKSB7XG4gICAgICB2YXIgY2xvbmVkTm9kZSA9IG5vZGVzQXJyYXlbaV0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgbmV3Tm9kZXNBcnJheS5wdXNoKHNob3VsZENsZWFuTm9kZXMgPyBrby5jbGVhbk5vZGUoY2xvbmVkTm9kZSkgOiBjbG9uZWROb2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld05vZGVzQXJyYXk7XG4gIH0sXG4gICdpbml0JzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgZGlkRGlzcGxheU9uTGFzdFVwZGF0ZSxcbiAgICAgIHNhdmVkTm9kZXMsXG4gICAgICB2YWx1ZUFjYyA9IHZhbHVlQWNjZXNzb3IoKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlQWNjLmRhdGEuc3Vic0NvdW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAga28uZXh0ZW5kZXJzWydzdWJzY3JpcHRpb25zQ291bnQnXSh2YWx1ZUFjYy5kYXRhKTtcbiAgICAgIC8vIE5PVEUgSSBjYW4ndCBzaW1wbHkgbGlzdGVuIG9uIFwidGhyZXNob2xkc1wiIGJlY2F1c2UgbXVsdGlwbGUgYmluZGluZ3MgdG8gdGhlIHNhbWUgb2JzZXJ2YWJsZSBjb3VsZCB1c2UgZGlmZmVyZW50IHRocmVzaG9sZHMuXG4gICAgfVxuICAgIGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRhdGFWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpLmRhdGEuc3Vic0NvdW50KSxcbiAgICAgICAgaXNGaXJzdFJlbmRlciA9ICFzYXZlZE5vZGVzLFxuICAgICAgICBzaG91bGREaXNwbGF5LCBuZWVkc1JlZnJlc2gsIGd1dHRlcjtcblxuICAgICAgZ3V0dGVyID0gLSh0eXBlb2YgdmFsdWVBY2Nlc3NvcigpLmd1dHRlciAhPT0gJ3VuZGVmaW5lZCcgPyB2YWx1ZUFjY2Vzc29yKCkuZ3V0dGVyIDogMSk7XG4gICAgICBzaG91bGREaXNwbGF5ID0gZGF0YVZhbHVlICsgKGRpZERpc3BsYXlPbkxhc3RVcGRhdGUgPyBndXR0ZXIgOiAwKSA+PSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjLnRocmVzaG9sZCk7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlQWNjZXNzb3IoKS5ub3QgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlQWNjZXNzb3IoKS5ub3QpIHtcbiAgICAgICAgc2hvdWxkRGlzcGxheSA9ICFzaG91bGREaXNwbGF5O1xuICAgICAgfVxuICAgICAgbmVlZHNSZWZyZXNoID0gaXNGaXJzdFJlbmRlciB8fCAoc2hvdWxkRGlzcGxheSAhPT0gZGlkRGlzcGxheU9uTGFzdFVwZGF0ZSk7XG5cbiAgICAgIGlmIChuZWVkc1JlZnJlc2gpIHtcbiAgICAgICAgLy8gU2F2ZSBhIGNvcHkgb2YgdGhlIGlubmVyIG5vZGVzIG9uIHRoZSBpbml0aWFsIHVwZGF0ZSwgYnV0IG9ubHkgaWYgd2UgaGF2ZSBkZXBlbmRlbmNpZXMuXG4gICAgICAgIGlmIChpc0ZpcnN0UmVuZGVyICYmIGtvLmNvbXB1dGVkQ29udGV4dC5nZXREZXBlbmRlbmNpZXNDb3VudCgpKSB7XG4gICAgICAgICAgc2F2ZWROb2RlcyA9IGtvLmJpbmRpbmdIYW5kbGVyc1snaWZTdWJzJ10uY2xvbmVOb2Rlcyhrby52aXJ0dWFsRWxlbWVudHMuY2hpbGROb2RlcyhlbGVtZW50KSwgdHJ1ZSAvKiBzaG91bGRDbGVhbk5vZGVzICovICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hvdWxkRGlzcGxheSkge1xuICAgICAgICAgIGlmICghaXNGaXJzdFJlbmRlcikge1xuICAgICAgICAgICAga28udmlydHVhbEVsZW1lbnRzLnNldERvbU5vZGVDaGlsZHJlbihlbGVtZW50LCBrby5iaW5kaW5nSGFuZGxlcnNbJ2lmU3VicyddLmNsb25lTm9kZXMoc2F2ZWROb2RlcykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBrby5hcHBseUJpbmRpbmdzVG9EZXNjZW5kYW50cyhiaW5kaW5nQ29udGV4dCwgZWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAga28udmlydHVhbEVsZW1lbnRzLmVtcHR5Tm9kZShlbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpZERpc3BsYXlPbkxhc3RVcGRhdGUgPSBzaG91bGREaXNwbGF5O1xuICAgICAgfVxuICAgIH0sIG51bGwsIHtcbiAgICAgIGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogZWxlbWVudFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAnY29udHJvbHNEZXNjZW5kYW50QmluZGluZ3MnOiB0cnVlXG4gICAgfTtcbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ2lmU3VicyddID0gdHJ1ZTtcblxuLy8ga28uaXNXcml0YWJsZU9ic2VydmFibGUgKHdpdGhvdXQgXCJlXCIpIGhhcyBiZWVuIGludHJvZHVjZWQgaW4gMy4yLjAsIHRoYXQgaXMgYWxzbyBvdXIgbWluIHJlcXVpcmVtZW50LlxuLy8gbWluaW1pemVkIGtub2Nrb3V0IFwib2JmdXNjYXRlXCIgdGhlIGJlZm9yZVN1YnNjcmlwdGlvbkFkZCBhbmQgYWZ0ZXJTdWJzY3JpcHRpb25SZW1vdmUgbWV0aG9kcyB0aGF0IHdlIGhhY2sgaGVyZS5cbi8vIHNvIHdlIGhhdmUgdG8gZXhwbGljaXRseSBrbm93IHRoYXQuXG4vLyBOb3RlOiB3ZSB1c2VkIHRvIHVzZSBrby5ERUJVRyB0byBkZXRlY3QgdGhlIGRlYnVnIHZlcnNpb24gb2YgS08sIGJ1dCB0aGlzIHdhcyByZW1vdmVkIGluIEtPIDMuNC4wKywgXG4vLyAgICAgICBzbyB3ZSBzd2l0Y2hlZCB0byBrby5zdWJzY3JpcHRpb24gZnVuY3Rpb24gdGhhdCBvbmx5IGV4aXN0cyBpbiBERUJVRyB2ZXJzaW9ucy5cbnZhciBiZWZvcmVTdWJzY3JpcHRpb25Qcm9wO1xudmFyIGFmdGVyU3Vic2NyaXB0aW9uUHJvcDtcbmlmICh0eXBlb2Yga28uc3Vic2NyaXB0aW9uID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGtvLmlzV3JpdGFibGVPYnNlcnZhYmxlICE9PSAndW5kZWZpbmVkJykge1xuICBiZWZvcmVTdWJzY3JpcHRpb25Qcm9wID0gJ2JlZm9yZVN1YnNjcmlwdGlvbkFkZCc7XG4gIGFmdGVyU3Vic2NyaXB0aW9uUHJvcCA9ICdhZnRlclN1YnNjcmlwdGlvblJlbW92ZSc7XG59IGVsc2UgaWYgKGtvLnZlcnNpb24gPT0gXCIzLjIuMFwiKSB7XG4gIGJlZm9yZVN1YnNjcmlwdGlvblByb3AgPSAndmEnO1xuICBhZnRlclN1YnNjcmlwdGlvblByb3AgPSAnbmInO1xufSBlbHNlIGlmIChrby52ZXJzaW9uID09IFwiMy4zLjBcIikge1xuICBiZWZvcmVTdWJzY3JpcHRpb25Qcm9wID0gJ2phJztcbiAgYWZ0ZXJTdWJzY3JpcHRpb25Qcm9wID0gJ3VhJztcbn0gZWxzZSBpZiAoa28udmVyc2lvbiA9PSBcIjMuNC4wXCIpIHtcbiAgYmVmb3JlU3Vic2NyaXB0aW9uUHJvcCA9ICdzYSc7XG4gIGFmdGVyU3Vic2NyaXB0aW9uUHJvcCA9ICdJYSc7XG59IGVsc2UgaWYgKGtvLnZlcnNpb24gPT0gXCIzLjQuMVwiKSB7XG4gIGJlZm9yZVN1YnNjcmlwdGlvblByb3AgPSAnc2EnO1xuICBhZnRlclN1YnNjcmlwdGlvblByb3AgPSAnSWEnO1xufVxuZWxzZSB0aHJvdyBcIlVuc3VwcG9ydGVkIG1pbmltaXplZCBLbm9ja291dCB2ZXJzaW9uIFwiICsga28udmVyc2lvbiArIFwiIChzdXBwb3J0ZWQgREVCVUcgb3IgbWluaW1pemVkIDMuMi4wIC4uLiAzLjQuMSlcIjtcblxuLy8gaW50ZXJuYWxseSB1c2VkIGJ5IGlmc3VicyBiaW5kaW5nLlxuLy8gV0FSTklORyB0aGlzIGJyZWFrIHdoZW4gdXNlZCB3aXRoIHB1cmVDb21wdXRlZCBvciBkZWZlcnJlZEV2YWx1YXRlZFxua28uZXh0ZW5kZXJzWydzdWJzY3JpcHRpb25zQ291bnQnXSA9IGZ1bmN0aW9uKHRhcmdldCwgbDEsIGwyKSB7XG4gIGlmICh0eXBlb2YgdGFyZ2V0LnN1YnNDb3VudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0YXJnZXQuc3Vic0NvdW50ID0ga28ub2JzZXJ2YWJsZSh0YXJnZXQuZ2V0U3Vic2NyaXB0aW9uc0NvdW50KCkpLmV4dGVuZCh7XG4gICAgICBub3RpZnk6ICdhbHdheXMnXG4gICAgfSk7XG4gICAgdmFyIHVuZGVybHlpbmdCZWZvcmVTdWJzY3JpcHRpb25BZGRGdW5jdGlvbiA9IHRhcmdldFtiZWZvcmVTdWJzY3JpcHRpb25Qcm9wXTtcbiAgICB2YXIgdW5kZXJseWluZ0FmdGVyU3Vic2NyaXB0aW9uUmVtb3ZlRnVuY3Rpb24gPSB0YXJnZXRbYWZ0ZXJTdWJzY3JpcHRpb25Qcm9wXTtcbiAgICB0YXJnZXRbYmVmb3JlU3Vic2NyaXB0aW9uUHJvcF0gPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKHVuZGVybHlpbmdCZWZvcmVTdWJzY3JpcHRpb25BZGRGdW5jdGlvbikgdW5kZXJseWluZ0JlZm9yZVN1YnNjcmlwdGlvbkFkZEZ1bmN0aW9uLmNhbGwodGFyZ2V0LCBldmVudCk7XG4gICAgICB2YXIgYyA9IHRhcmdldC5nZXRTdWJzY3JpcHRpb25zQ291bnQoKSArIDE7XG4gICAgICBpZiAodHlwZW9mIGwxID09PSAndW5kZWZpbmVkJyB8fCBjID09IGwxIHx8IHR5cGVvZiBsMiA9PT0gJ3VuZGVmaW5lZCcgfHwgYyA9PSBsMikgdGFyZ2V0LnN1YnNDb3VudChjKTtcbiAgICB9O1xuICAgIHRhcmdldFthZnRlclN1YnNjcmlwdGlvblByb3BdID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICh1bmRlcmx5aW5nQWZ0ZXJTdWJzY3JpcHRpb25SZW1vdmVGdW5jdGlvbikgdW5kZXJseWluZ0FmdGVyU3Vic2NyaXB0aW9uUmVtb3ZlRnVuY3Rpb24uY2FsbCh0YXJnZXQsIGV2ZW50KTtcbiAgICAgIHZhciBjID0gdGFyZ2V0LmdldFN1YnNjcmlwdGlvbnNDb3VudCgpO1xuICAgICAgaWYgKHR5cGVvZiBsMSA9PT0gJ3VuZGVmaW5lZCcgfHwgYyA9PSBsMSB8fCB0eXBlb2YgbDIgPT09ICd1bmRlZmluZWQnIHx8IGMgPT0gbDIpIHRhcmdldC5zdWJzQ291bnQoYyk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcImFscmVhZHkgYXBwbGllZCBzdWJzY3JpcHRpb25Db3VudCB0byBvYnNlcnZhYmxlXCIpO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBPdmVycmlkZXMgbmF0aXZlIGpRdWVyeSBzcGlubmVyIHRvIGF2b2lkIHZhbGlkYXRpb24gb2YgdGhlIFwic3RlcFwiLlxuLy8gV2Ugd2FudHMgdG8gdXNlIHRoZSBzdGVwIGJ1dCBhbHNvIHdhbnRzIHRvIGxlYXZlIHRoZSB1c2VyIHRoZSBhYmlsaXR5IHRvIHNlbGVjdCBzcGVjaWZpYyB2YWx1ZXMuXG5cbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgc3Bpbm5lciA9IHJlcXVpcmUoXCJqcXVlcnktdWkvc3Bpbm5lclwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZSgnY29uc29sZScpO1xuXG5pZiAodHlwZW9mIHNwaW5uZXIgPT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiQ2Fubm90IGZpbmQganF1ZXJ5LXVpIHNwaW5uZXIgd2lkZ2V0IGRlcGVuZGVuY3khXCI7XG5cbiQud2lkZ2V0KFwidWkuc3Bpbm5lclwiLCBzcGlubmVyLCB7XG4gIF9hZGp1c3RWYWx1ZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgYWRqID0gdGhpcy5fc3VwZXIodmFsdWUpO1xuXG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAvLyBmaXggcHJlY2lzaW9uIGZyb20gYmFkIEpTIGZsb2F0aW5nIHBvaW50IG1hdGhcbiAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUudG9GaXhlZCh0aGlzLl9wcmVjaXNpb24oKSkpO1xuXG4gICAgLy8gY2xhbXAgdGhlIHZhbHVlXG4gICAgaWYgKG9wdGlvbnMubWF4ICE9PSBudWxsICYmIHZhbHVlID4gb3B0aW9ucy5tYXgpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLm1heDtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubWluICE9PSBudWxsICYmIHZhbHVlIDwgb3B0aW9ucy5taW4pIHtcbiAgICAgIHJldHVybiBvcHRpb25zLm1pbjtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIE92ZXJyaWRlcyBuYXRpdmUgalF1ZXJ5IHRhYnMgdG8gbWFrZSB0YWJzIHdvcmtpbmcgYWxzbyB3aGVuIHVzaW5nIGEgYmFzZSB0YWdcbi8vIGluIG9yZGVyIHRvIGF2b2lkIGNvbmZsaWN0cyB5b3UgaGF2ZSB0byBhZGQgYSBkYXRhLWxvY2FsPVwidHJ1ZVwiIGF0dHJpYnV0ZSB0byB5b3VyIHRhYiBsaW5rcy5cblxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZSgnY29uc29sZScpO1xudmFyIHRhYnMgPSByZXF1aXJlKFwianF1ZXJ5LXVpL3RhYnNcIik7XG5cbmlmICh0eXBlb2YgdGFicyA9PSAndW5kZWZpbmVkJykgdGhyb3cgXCJDYW5ub3QgZmluZCBqcXVlcnktdWkgdGFicyB3aWRnZXQgZGVwZW5kZW5jeSFcIjtcblxuJC53aWRnZXQoXCJ1aS50YWJzXCIsIHRhYnMsIHtcbiAgX2lzTG9jYWw6IGZ1bmN0aW9uKCBhbmNob3IgKSB7XG4gICAgaWYgKGFuY2hvci5nZXRBdHRyaWJ1dGUoJ2RhdGEtbG9jYWwnKSA9PSBcInRydWVcIikgcmV0dXJuIHRydWU7XG4gICAgZWxzZSByZXR1cm4gdGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XG4gIH1cbn0pOyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFscyBnbG9iYWw6IGZhbHNlICovXG5cbmZ1bmN0aW9uIHB1c2hUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWUsIHRlbXBsYXRlVGV4dCkge1xuICB2YXIgc2NyaXB0VGFnID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICBzY3JpcHRUYWcuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvaHRtbCcpO1xuICBzY3JpcHRUYWcuc2V0QXR0cmlidXRlKCdpZCcsIHRlbXBsYXRlTmFtZSk7XG4gIHNjcmlwdFRhZy50ZXh0ID0gdGVtcGxhdGVUZXh0O1xuICBnbG9iYWwuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHRUYWcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWUpIHtcbiAgdmFyIGVsID0gZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlTmFtZSk7XG4gIGlmIChlbCkgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG59XG5cbmZ1bmN0aW9uIGluaXQoKSB7fVxuXG5mdW5jdGlvbiBnZXRUZW1wbGF0ZUNvbnRlbnQoaWQpIHtcbiAgdmFyIGVsID0gZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgaWYgKGVsKSByZXR1cm4gZWwuaW5uZXJIVE1MO1xuICBlbHNlIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpbml0OiBpbml0LFxuICBhZGRUZW1wbGF0ZTogcHVzaFRlbXBsYXRlLFxuICByZW1vdmVUZW1wbGF0ZTogcmVtb3ZlVGVtcGxhdGUsXG4gIGdldFRlbXBsYXRlQ29udGVudDogZ2V0VGVtcGxhdGVDb250ZW50XG59OyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cblxudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnZhciB0aW55bWNlID0gcmVxdWlyZShcInRpbnltY2VcIik7XG5cbnZhciB0aW1lb3V0O1xuXG52YXIgcmVuZGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgdGltZW91dCA9IHVuZGVmaW5lZDtcblxuICBpZiAodHlwZW9mIHRpbnltY2UuYWN0aXZlRWRpdG9yICE9PSAndW5kZWZpbmVkJyAmJiB0aW55bWNlLmFjdGl2ZUVkaXRvciAhPT0gbnVsbCAmJlxuICAgICAgdHlwZW9mIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lICE9PSAndW5kZWZpbmVkJyAmJiB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZSAhPT0gbnVsbCAmJiBcbiAgICAgIHR5cGVvZiB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdGlueW1jZS5hY3RpdmVFZGl0b3IudGhlbWUucGFuZWwgIT09IG51bGwgJiZcbiAgICAgIHR5cGVvZiB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbC52aXNpYmxlICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEBzZWUgRmxvYXRQYW5lbC5qcyBmdW5jdGlvbiByZXBvc2l0aW9uUGFuZWwocGFuZWwpXG4gICAgLy8gRmlyc3QgY29uZGl0aW9uIGdyb3VwIGlzIGZvciBUaW55bWNlIDQuMC80LjFcbiAgICAvLyBTZWNvbmQgY29uZGl0aW9uIGdyb3VwIGlzIGZvciBUaW55bWNlIDQuMi80LjMgd2hlcmUgXCIuX3Byb3BlcnR5XCIgYXJlIG5vdyBhdmFpbGFibGUgYXMgXCIuc3RhdGUuZ2V0KCdwcm9wZXJ0eScpXCIuXG4gICAgaWYgKCh0eXBlb2YgdGlueW1jZS5hY3RpdmVFZGl0b3IudGhlbWUucGFuZWwuX3Zpc2libGUgIT09ICd1bmRlZmluZWQnICYmIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLl92aXNpYmxlICYmIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLl9maXhlZCkgfHwgXG4gICAgICAgICh0eXBlb2YgdGlueW1jZS5hY3RpdmVFZGl0b3IudGhlbWUucGFuZWwuc3RhdGUgIT09ICd1bmRlZmluZWQnICYmIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLnN0YXRlLmdldCgndmlzaWJsZScpICYmIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLnN0YXRlLmdldCgnZml4ZWQnKSkpIHtcbiAgICAgIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLmZpeGVkKGZhbHNlKTtcbiAgICB9XG5cbiAgICB0aW55bWNlLmFjdGl2ZUVkaXRvci5ub2RlQ2hhbmdlZCgpO1xuICAgIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLnZpc2libGUodHJ1ZSk7XG4gICAgaWYgKHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLmxheW91dFJlY3QoKS55IDw9IDQwKVxuICAgICAgdGlueW1jZS5hY3RpdmVFZGl0b3IudGhlbWUucGFuZWwubW92ZUJ5KDAsIDQwIC0gdGlueW1jZS5hY3RpdmVFZGl0b3IudGhlbWUucGFuZWwubGF5b3V0UmVjdCgpLnkpO1xuXG4gIH1cbn07XG5cbmtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnU2Nyb2xsZml4ID0ge1xuICAnc2Nyb2xsJzogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodGltZW91dCkgZ2xvYmFsLmNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gZ2xvYmFsLnNldFRpbWVvdXQocmVuZGVyLCA1MCk7XG4gIH0sXG4gICdpbml0JzogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soZWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKGVsZW1lbnQpLm9mZihcInNjcm9sbFwiLCBrby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z1Njcm9sbGZpeC5zY3JvbGwpO1xuICAgIH0pO1xuXG4gICAgJChlbGVtZW50KS5vbihcInNjcm9sbFwiLCBrby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z1Njcm9sbGZpeC5zY3JvbGwpO1xuXG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbnZhciBfc2Nyb2xsSW50b1ZpZXcgPSBmdW5jdGlvbigkZWxlbWVudCwgYWxpZ25Ub3AsIHNjcm9sbFBhcmVudCwgbW92ZUJ5KSB7XG4gIHZhciBjdXJyZW50U2Nyb2xsVG9wID0gc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpO1xuICB2YXIgbmV3U2Nyb2xsVG9wID0gY3VycmVudFNjcm9sbFRvcCAtIG1vdmVCeSAtIChhbGlnblRvcCA/IDIwIDogLTIwKTtcbiAgLy8gaWZyYW1lIHNjcm9sbHMgdGhlIHdpbmRvdyBhbmQgYW5pbWF0aW9uIGlzIG5vdCBzdXBwb3J0ZWRcbiAgdmFyIGFuaW1hdGUgPSB0eXBlb2Ygc2Nyb2xsUGFyZW50WzBdLm5vZGVUeXBlICE9PSAndW5kZWZpbmVkJztcbiAgaWYgKGFuaW1hdGUpIHtcbiAgICB2YXIgYWN0aW9uID0ge1xuICAgICAgJ3Njcm9sbFRvcCc6IFwiXCIgKyBNYXRoLnJvdW5kKG5ld1Njcm9sbFRvcCkgKyBcInB4XCJcbiAgICB9O1xuICAgIHZhciB0aW1lID0gTWF0aC5yb3VuZChNYXRoLmFicyhuZXdTY3JvbGxUb3AgLSBjdXJyZW50U2Nyb2xsVG9wKSk7XG4gICAgc2Nyb2xsUGFyZW50LnN0b3AoKS5hbmltYXRlKGFjdGlvbiwgdGltZSk7XG4gIH0gZWxzZSB7XG4gICAgc2Nyb2xsUGFyZW50LnNjcm9sbFRvcChuZXdTY3JvbGxUb3ApO1xuICB9XG4gIC8vIG5hdGl2ZSBzY3JvbGxJbnRvVmlldyBpcyBub3Qgd2VsbCBzdXBwb3J0ZWQgYW5kIGRvZXNuJ3Qgd29yayBmaW5lLlxuICAvLyBlbGVtZW50LnNjcm9sbEludG9WaWV3KGFsaWduVG9wKTtcbn07XG5cbmtvLmJpbmRpbmdIYW5kbGVycy5zY3JvbGxJbnRvVmlldyA9IHtcbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIHNlbGVjdGVkID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpO1xuICAgIGlmICghc2VsZWN0ZWQpIHJldHVybjtcbiAgICB0cnkge1xuXG4gICAgICB3aGlsZSAoZWxlbWVudC5ub2RlVHlwZSA9PT0gOCkge1xuICAgICAgICAvLyBlbGVtZW50IGlzIGEgY29tbWVudCwgbW92ZSB0byB0aGUgbmV4dCBzaWJsaW5nLi4uXG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDgpIHtcbiAgICAgICAgdmFyIHNjcm9sbFBhcmVudCA9ICQoZWxlbWVudCkuc2Nyb2xsUGFyZW50KCk7XG5cbiAgICAgICAgdmFyIHBhcmVudFRvcDtcbiAgICAgICAgdmFyIHJlbGF0aXZlT2Zmc2V0ID0gZmFsc2U7XG4gICAgICAgIGlmIChzY3JvbGxQYXJlbnRbMF0ubm9kZVR5cGUgPT0gOSkge1xuICAgICAgICAgIC8vIHNjcm9sbHBhcmVudCBpcyBkb2N1bWVudCwgcmVwbGFjaW5nIHdpdGggYm9keS4uLlxuICAgICAgICAgIHNjcm9sbFBhcmVudCA9ICQoc2Nyb2xsUGFyZW50WzBdLmRlZmF1bHRWaWV3KTtcbiAgICAgICAgICBwYXJlbnRUb3AgPSAwO1xuICAgICAgICAgIHJlbGF0aXZlT2Zmc2V0ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJlbnRUb3AgPSBzY3JvbGxQYXJlbnQub2Zmc2V0KCkudG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcmVudEhlaWdodCA9IHNjcm9sbFBhcmVudC5oZWlnaHQoKTtcbiAgICAgICAgdmFyIHBhcmVudFNjcm9sbCA9IHNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTtcbiAgICAgICAgdmFyIHBhcmVudEJvdHRvbSA9IHBhcmVudFRvcCArIHBhcmVudEhlaWdodDtcblxuICAgICAgICAvLyBzY3JvbGxQYXJlbnQgaXMgdGhlIGRvY3VtZW50LlxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICAgICAgICB2YXIgZWxUb3AgPSAkZWxlbWVudC5vZmZzZXQoKS50b3A7XG4gICAgICAgIC8vIHdoZW4gd2UgYXJlIGluIFwiaWZyYW1lXCIgd2l0aCBzY3JvbGxiYXIgZXZlcnl0aGlqbmcgY2hhbmdlcy5cbiAgICAgICAgaWYgKHJlbGF0aXZlT2Zmc2V0KSBlbFRvcCA9IGVsVG9wIC0gcGFyZW50U2Nyb2xsO1xuICAgICAgICB2YXIgZWxIZWlnaHQgPSAkZWxlbWVudC5oZWlnaHQoKTtcbiAgICAgICAgdmFyIGVsQm90dG9tID0gZWxUb3AgKyBlbEhlaWdodDtcbiAgICAgICAgaWYgKGVsVG9wID4gcGFyZW50VG9wICYmIGVsVG9wICsgZWxIZWlnaHQgPCBwYXJlbnRCb3R0b20pIHtcbiAgICAgICAgICAvLyBib3RoIGJvcmRlcnMgYXJlIHZpc2libGUgPT4gZG9uJ3QgZG8gYW55dGhpbmcuXG4gICAgICAgIH0gZWxzZSBpZiAoZWxIZWlnaHQgPCBwYXJlbnRIZWlnaHQpIHtcbiAgICAgICAgICAvLyBpZiB0aGUgYmxvY2sgaXMgc21hbGxlciB0aGFuIHRoZSB2aWV3UG9ydFxuICAgICAgICAgIGlmIChlbFRvcCA8IHBhcmVudFRvcCkgX3Njcm9sbEludG9WaWV3KGVsZW1lbnQsIHRydWUsIHNjcm9sbFBhcmVudCwgcGFyZW50VG9wIC0gZWxUb3ApO1xuICAgICAgICAgIC8vIC0+IGlmIHRoZSB1cHBlciBib3JkZXIgaXMgaGlnaGVyIHRoYW4gdGhlIHRvcCwgdGhlbiBJIG1vdmUgaXQgdG8gdGhlIHRvcC5cbiAgICAgICAgICBpZiAoZWxCb3R0b20gPiBwYXJlbnRCb3R0b20pIF9zY3JvbGxJbnRvVmlldyhlbGVtZW50LCBmYWxzZSwgc2Nyb2xsUGFyZW50LCBwYXJlbnRCb3R0b20gLSBlbEJvdHRvbSk7XG4gICAgICAgICAgLy8gLT4gaWYgdGhlIGJvdHRvbSBib3JkZXIgaXMgbG93ZXIgdGhhbiB0aGUgYm90dG9tIHRoZW4gSSBtb3ZlIGl0IHRvIHRoZSBib3R0b20uXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gaWYgdGhlIGJsb2NrIGlzIGxhcmdlciB0aGFuIHRoZSB2aWV3UG9ydCB3ZSBkbyB0aGUgb3Bwb3NpdGUhXG4gICAgICAgICAgLy8gLT4gaWYgdGhlIHVwcGVyIGJvcmRlciBpcyBoaWdoZXIgdGhhbiB0aGUgdG9wIGFuZCB0aGUgbG93ZXIgaXMgaGlnaGVyIHRoYW4gdGhlIGJvdHRvbSBJIG1vdmUgdGhlIGxvd2VyIGl0IHRvIHRoZSBib3R0b20uXG4gICAgICAgICAgaWYgKGVsVG9wIDwgcGFyZW50VG9wICYmIGVsQm90dG9tIDwgcGFyZW50Qm90dG9tKSBfc2Nyb2xsSW50b1ZpZXcoZWxlbWVudCwgZmFsc2UsIHNjcm9sbFBhcmVudCwgcGFyZW50Qm90dG9tIC0gZWxCb3R0b20pO1xuICAgICAgICAgIC8vIC0+IGlmIHRoZSBib3R0b20gYm9yZGVyIGlsIGxvd2VyIHRoYW4gYm90dG9tIGFuZCB0aGUgdXBwZXIgaXMgbG93ZXIgdGhhbiB0aGUgdG9wIEkgbW92ZSB0aGUgdXBwZXIgYm9yZGVyIHRvIHRoZSB2aWV3cG9ydCB0b3BcbiAgICAgICAgICBpZiAoZWxUb3AgPiBwYXJlbnRUb3AgJiYgZWxCb3R0b20gPiBwYXJlbnRCb3R0b20pIF9zY3JvbGxJbnRvVmlldyhlbGVtZW50LCB0cnVlLCBzY3JvbGxQYXJlbnQsIHBhcmVudFRvcCAtIGVsVG9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coXCJUT0RPIGV4Y2VwdGlvbiBzY3JvbGxpbmcgaW50byB2aWV3XCIsIGUpO1xuICAgIH1cbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3Njcm9sbEludG9WaWV3J10gPSB0cnVlOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgb3JpZ1RlbXBsYXRlU3lzdGVtID0gcmVxdWlyZShcIi4vc2NyaXB0LXRlbXBsYXRlLmpzXCIpO1xuXG52YXIgdGVtcGxhdGVzID0ge307XG5cbi8vZGVmaW5lIGEgdGVtcGxhdGUgc291cmNlIHRoYXQgc2ltcGx5IHRyZWF0cyB0aGUgdGVtcGxhdGUgbmFtZSBhcyBpdHMgY29udGVudFxua28udGVtcGxhdGVTb3VyY2VzLnN0cmluZ1RlbXBsYXRlID0gZnVuY3Rpb24odGVtcGxhdGVOYW1lLCB0ZW1wbGF0ZSkge1xuICB0aGlzLnRlbXBsYXRlTmFtZSA9IHRlbXBsYXRlTmFtZTtcbiAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICB0aGlzLl9kYXRhID0ge307XG59O1xuXG5rby51dGlscy5leHRlbmQoa28udGVtcGxhdGVTb3VyY2VzLnN0cmluZ1RlbXBsYXRlLnByb3RvdHlwZSwge1xuICBkYXRhOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJkYXRhXCIsIGtleSwgdmFsdWUsIHRoaXMudGVtcGxhdGVOYW1lKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RhdGFba2V5XTtcbiAgICB9XG5cbiAgICB0aGlzLl9kYXRhW2tleV0gPSB2YWx1ZTtcbiAgfSxcbiAgdGV4dDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcInRleHRcIiwgdmFsdWUsIHRoaXMudGVtcGxhdGVOYW1lKVxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZTtcbiAgICB9XG4gICAgdGhpcy50ZW1wbGF0ZSA9IHZhbHVlO1xuICB9XG59KTtcblxuXG4vL21vZGlmeSBhbiBleGlzdGluZyB0ZW1wbGF0ZUVuZ2luZSB0byB3b3JrIHdpdGggc3RyaW5nIHRlbXBsYXRlc1xuZnVuY3Rpb24gY3JlYXRlU3RyaW5nVGVtcGxhdGVFbmdpbmUodGVtcGxhdGVFbmdpbmUpIHtcbiAgdmFyIG9yaWcgPSB0ZW1wbGF0ZUVuZ2luZS5tYWtlVGVtcGxhdGVTb3VyY2U7XG4gIHRlbXBsYXRlRW5naW5lLm1ha2VUZW1wbGF0ZVNvdXJjZSA9IGZ1bmN0aW9uKHRlbXBsYXRlTmFtZSkge1xuICAgIGlmICh0eXBlb2YgdGVtcGxhdGVzW3RlbXBsYXRlTmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gbmV3IGtvLnRlbXBsYXRlU291cmNlcy5zdHJpbmdUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWUsIHRlbXBsYXRlc1t0ZW1wbGF0ZU5hbWVdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9yaWcodGVtcGxhdGVOYW1lKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiB0ZW1wbGF0ZUVuZ2luZTtcbn1cblxuZnVuY3Rpb24gcHVzaFRlbXBsYXRlKHRlbXBsYXRlTmFtZSwgdGVtcGxhdGVUZXh0KSB7XG4gIHRlbXBsYXRlc1t0ZW1wbGF0ZU5hbWVdID0gdGVtcGxhdGVUZXh0O1xufVxuXG5mdW5jdGlvbiByZW1vdmVUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWUpIHtcbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZXNbdGVtcGxhdGVOYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0ZW1wbGF0ZXNbdGVtcGxhdGVOYW1lXSA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICBvcmlnVGVtcGxhdGVTeXN0ZW0ucmVtb3ZlVGVtcGxhdGUodGVtcGxhdGVOYW1lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0KCkge1xuICBrby5zZXRUZW1wbGF0ZUVuZ2luZShjcmVhdGVTdHJpbmdUZW1wbGF0ZUVuZ2luZShuZXcga28ubmF0aXZlVGVtcGxhdGVFbmdpbmUoKSkpO1xufVxuXG5mdW5jdGlvbiBnZXRUZW1wbGF0ZUNvbnRlbnQoaWQpIHtcbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZXNbaWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB0ZW1wbGF0ZXNbaWRdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBvcmlnVGVtcGxhdGVTeXN0ZW0uZ2V0VGVtcGxhdGVDb250ZW50KGlkKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaW5pdDogaW5pdCxcbiAgYWRkVGVtcGxhdGU6IHB1c2hUZW1wbGF0ZSxcbiAgcmVtb3ZlVGVtcGxhdGU6IHJlbW92ZVRlbXBsYXRlLFxuICBnZXRUZW1wbGF0ZUNvbnRlbnQ6IGdldFRlbXBsYXRlQ29udGVudFxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGtvanF1aSA9IHJlcXVpcmUoXCJrbm9ja291dC1qcXVlcnl1aVwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbnZhciBleHRlbmRWYWx1ZUFjY2Vzc29yID0gZnVuY3Rpb24odmFsdWVBY2Nlc3Nvciwgb2JqKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBrby51dGlscy5leHRlbmQob2JqLCB2YWx1ZUFjY2Vzc29yKCkpO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG59O1xuXG52YXIgb3B0aW9ucyA9IHtcbiAgc2hvdzoge1xuICAgIGRlbGF5OiA1MDBcbiAgfSxcbiAgdHJhY2s6IHRydWUsXG4gIGl0ZW1zOiAnW3RpdGxlXVt0aXRsZSE9XCJcIl1bdGl0bGUhPVwiIFwiXSdcbn07XG5cbmtvLmJpbmRpbmdIYW5kbGVycy50b29sdGlwcyA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgJC5mbi50b29sdGlwICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Yga28uYmluZGluZ0hhbmRsZXJzLnRvb2x0aXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBwb3NpdGlvbjogeyBteTogXCJsZWZ0KzE1IHRvcCsxNVwiLCBhdDogXCJjZW50ZXIrMzAgY2VudGVyKzMwXCIgfVxuICAgICAgLy8gTk9URSB0aXRsZSB3aXRoIFwiXCIgYW5kIFwiIFwiIGlzIG5lZWRlZCB0byBhdm9pZCBkZWZhdWx0IHRvb2x0aXBzIGluIG5hdGl2ZSBmaWxlIHVwbG9hZCBjb250cm9sc1xuICAgICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVycy50b29sdGlwLmluaXQoZWxlbWVudCwgZXh0ZW5kVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yLCBvcHRpb25zKSwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCk7XG4gICAgfVxuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mICQuZm4udG9vbHRpcCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGtvLmJpbmRpbmdIYW5kbGVycy50b29sdGlwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVycy50b29sdGlwLnVwZGF0ZShlbGVtZW50LCBleHRlbmRWYWx1ZUFjY2Vzc29yKHZhbHVlQWNjZXNzb3IsIG9wdGlvbnMpLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KTtcbiAgICB9XG4gIH0sXG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIga28gPSByZXF1aXJlKCdrbm9ja291dCcpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKCdjb25zb2xlJyk7XG5cbi8vIGVxdWFscyB0byBcInZhbHVlXCIgYmluZGluZyBidXQgYXBwbHkgXCJpbnZhbGlkXCIgY2xhc3MgaWYgXCJwYXR0ZXJuXCIgYXR0cmlidXRlIGlzIGRlZmluZWQgYW5kIHZhbHVlIG1hdGNoZXMgdGhlIHJ1bGVcbmtvLmJpbmRpbmdIYW5kbGVyc1sndmFsaWRhdGVkVmFsdWUnXSA9IHtcblx0aW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MpIHtcblx0XHR2YXIgbmV3VmFsdWVBY2Nlc3NvciA9IHZhbHVlQWNjZXNzb3I7XG5cdFx0aWYgKHR5cGVvZiBlbGVtZW50LnBhdHRlcm4gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR2YXIgcmUgPSBuZXcgUmVnRXhwKCdeKD86JyArIGVsZW1lbnQucGF0dGVybiArICcpJCcpO1xuXHRcdFx0dmFyIGNvbXB1dGVkID0ga28uY29tcHV0ZWQoe1xuXHRcdFx0XHRyZWFkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgcmVzID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpO1xuXHRcdFx0XHRcdC8vIFRPRE8gc3VwcG9ydCBmb3IgZWxlbWVudC5yZXF1aXJlZCA/XG5cdFx0XHRcdFx0dmFyIHZhbGlkID0gcmVzID09PSBudWxsIHx8IHJlcyA9PT0gJycgfHwgcmUudGVzdChyZXMpO1xuXHRcdFx0XHRcdC8vIElFMTEgZG9lc24ndCBzdXBwb3J0IGNsYXNzTGlzdC50b2dnbGUoJ2ludmFsaWQnLCBzdGF0ZSlcblx0XHRcdFx0XHRpZiAodmFsaWQpIHtcblx0XHRcdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ludmFsaWQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0fSxcblx0XHRcdFx0d3JpdGU6IGtvLmlzV3JpdGVhYmxlT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpICYmIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRcdFx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vdm9pZGxhYnMvbW9zYWljby9pc3N1ZXMvMTAzXG5cdFx0XHRcdFx0a28uc2VsZWN0RXh0ZW5zaW9ucy53cml0ZVZhbHVlKGVsZW1lbnQsIHZhbHVlKTtcblx0XHRcdFx0XHR2YXIgdXBkVmFsdWUgPSBrby5zZWxlY3RFeHRlbnNpb25zLnJlYWRWYWx1ZShlbGVtZW50KTtcblx0XHRcdFx0XHR2YWx1ZUFjY2Vzc29yKCkodXBkVmFsdWUpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IGVsZW1lbnRcblx0XHRcdH0pO1xuXHRcdFx0bmV3VmFsdWVBY2Nlc3NvciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gY29tcHV0ZWQ7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRrby5iaW5kaW5nSGFuZGxlcnNbJ3ZhbHVlJ10uaW5pdChlbGVtZW50LCBuZXdWYWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncyk7XG5cdH1cbn07XG5rby5leHByZXNzaW9uUmV3cml0aW5nLl90d29XYXlCaW5kaW5nc1sndmFsaWRhdGVkVmFsdWUnXSA9IHRydWU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbHMgZ2xvYmFsOmZhbHNlICovXG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1sndW5pcXVlSWQnXSA9IHtcbiAgY3VycmVudEluZGV4OiAwLFxuICAnaW5pdCc6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICB2YXIgZGF0YSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKSB8fCB7fTtcbiAgICBpZiAoZGF0YS5pZCgpID09PSAnJykge1xuICAgICAgdmFyIGlkLCBlbCwgcHJlZml4O1xuICAgICAgLy8gVE9ETyB3ZSBuZWVkIGEgYmV0dGVyIHByZWZpeFxuICAgICAgcHJlZml4ID0gJ2tvXycgKyAodHlwZW9mIGRhdGEudHlwZSAhPT0gJ3VuZGVmaW5lZCcgPyBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGRhdGEudHlwZSkgOiAnYmxvY2snKTtcbiAgICAgIC8vIHdoZW4gbG9hZGluZyBhbiBleGlzaW5nIG1vZGVsLCBJRHMgY291bGQgYmUgYWxyZWFkeSBhc3NpZ25lZC5cbiAgICAgIGRvIHtcbiAgICAgICAgaWQgPSBwcmVmaXggKyAnXycgKyAoKytrby5iaW5kaW5nSGFuZGxlcnNbJ3VuaXF1ZUlkJ10uY3VycmVudEluZGV4KTtcbiAgICAgICAgZWwgPSBnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAvLyB3aGVuIGxvYWRpbmcgYW4gZXhpc3RpbmcgbW9kZWwgbXkgXCJjdXJyZW50SW5kZXhcIiBpcyBlbXB0eS5cbiAgICAgICAgICAvLyBidXQgd2UgaGF2ZSBleGlzdGluZyBibG9ja3MsIHNvIEkgbXVzdCBiZSBzdXJlIEkgZG9uJ3QgcmV1c2UgdGhlaXIgSURzLlxuICAgICAgICAgIC8vIFdlIHVzZSBkaWZmZXJlbnQgcHJlZml4ZXMgKHBlciBibG9jayB0eXBlKSBzbyB0aGF0IGEgaGlkZGVuIGJsb2NrIFxuICAgICAgICAgIC8vIChmb3Igd2hpY2ggd2UgaGF2ZSBubyBpZCBpbiB0aGUgcGFnZSwgZS5nOiBwcmVoZWFkZXIgaW4gdmVyc2FmaXgtMSlcbiAgICAgICAgICAvLyB3aWxsIGJyZWFrIGV2ZXJ0aGluZyBvbmNlIHdlIHJldXNlIGl0cyBuYW1lLlxuICAgICAgICB9XG4gICAgICB9IHdoaWxlIChlbCk7XG4gICAgICBkYXRhLmlkKGlkKTtcbiAgICB9XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd1bmlxdWVJZCddID0gdHJ1ZTtcblxua28uYmluZGluZ0hhbmRsZXJzWyd2aXJ0dWFsQXR0ciddID0ge1xuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSAhPT0gOCkge1xuICAgICAga28uYmluZGluZ0hhbmRsZXJzWydhdHRyJ10udXBkYXRlKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpO1xuICAgIH1cbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3ZpcnR1YWxBdHRyJ10gPSB0cnVlO1xuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ3ZpcnR1YWxBdHRyU3R5bGUnXSA9IHtcbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDgpIHtcbiAgICAgIC8vIEluIFwicHJldmlld1wiIHdlIGFsc28gc2V0IFwicmVwbGFjZWRzdHlsZVwiIHNvIHRvIGhhdmUgYW4gYXR0cmlidXRlIHRvIGJlIHVzZWQgYnkgSUUgKElFIGJyZWFrcyB0aGUgU1RZTEUpIHRvIGRvIHRoZSBleHBvcnQuXG4gICAgICB2YXIgaXNOb3RXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID09ICd1bmRlZmluZWQnIHx8IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAnd3lzaXd5ZycpO1xuICAgICAgdmFyIGF0dHJzID0gW1wic3R5bGVcIl07XG4gICAgICBpZiAoaXNOb3RXeXNpd3lnTW9kZSkgYXR0cnMucHVzaChcInJlcGxhY2Vkc3R5bGVcIik7XG4gICAgICB2YXIgYXR0clZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYXR0ck5hbWUgPSBhdHRyc1tpXTtcbiAgICAgICAgdmFyIHRvUmVtb3ZlID0gKGF0dHJWYWx1ZSA9PT0gZmFsc2UpIHx8IChhdHRyVmFsdWUgPT09IG51bGwpIHx8IChhdHRyVmFsdWUgPT09IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICh0b1JlbW92ZSlcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0clZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3ZpcnR1YWxBdHRyU3R5bGUnXSA9IHRydWU7XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1sndmlydHVhbFN0eWxlJ10gPSB7XG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSA4KSB7XG4gICAgICBrby5iaW5kaW5nSGFuZGxlcnNbJ3N0eWxlJ10udXBkYXRlKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpO1xuICAgIH1cbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3ZpcnR1YWxTdHlsZSddID0gdHJ1ZTtcblxuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ3ZpcnR1YWxIdG1sJ10gPSB7XG4gIGluaXQ6IGtvLmJpbmRpbmdIYW5kbGVyc1snaHRtbCddLmluaXQsXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSA4KSB7XG4gICAgICB2YXIgaHRtbCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcblxuICAgICAga28udmlydHVhbEVsZW1lbnRzLmVtcHR5Tm9kZShlbGVtZW50KTtcbiAgICAgIGlmICgoaHRtbCAhPT0gbnVsbCkgJiYgKGh0bWwgIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBodG1sICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGh0bWwgPSBodG1sLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFyc2VkTm9kZXMgPSBrby51dGlscy5wYXJzZUh0bWxGcmFnbWVudChodG1sKTtcbiAgICAgICAgaWYgKHBhcnNlZE5vZGVzKSB7XG4gICAgICAgICAgdmFyIGVuZENvbW1lbnROb2RlID0gZWxlbWVudC5uZXh0U2libGluZztcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IHBhcnNlZE5vZGVzLmxlbmd0aDsgaSA8IGo7IGkrKylcbiAgICAgICAgICAgIGVuZENvbW1lbnROb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHBhcnNlZE5vZGVzW2ldLCBlbmRDb21tZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBwbGFpbiBub2RlXG4gICAgICBrby5iaW5kaW5nSGFuZGxlcnNbJ2h0bWwnXS51cGRhdGUoZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcik7XG4gICAgfVxuXG4gICAgLy8gQ29udGVudCBmb3IgdmlydHVhbEhUTUwgbXVzdCBub3QgYmUgcGFyc2VkIGJ5IEtPLCBpdCBpcyBzaW1wbGUgY29udGVudC5cbiAgICByZXR1cm4ge1xuICAgICAgY29udHJvbHNEZXNjZW5kYW50QmluZGluZ3M6IHRydWVcbiAgICB9O1xuICB9XG59O1xua28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1sndmlydHVhbEh0bWwnXSA9IHRydWU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWwgZ2xvYmFsOiBmYWxzZSAqL1xuXG52YXIgdGlueW1jZSA9IHJlcXVpcmUoXCJ0aW55bWNlXCIpO1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnJlcXVpcmUoXCIuL2V2ZW50YWJsZS5qc1wiKTtcblxua28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdPckh0bWwgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgaXNOb3RXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID09ICd1bmRlZmluZWQnIHx8IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAnd3lzaXd5ZycpO1xuXG4gICAgaWYgKGlzTm90V3lzaXd5Z01vZGUpXG4gICAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWyd2aXJ0dWFsSHRtbCddLmluaXQoKTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWcuaW5pdChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIGlzTm90V3lzaXd5Z01vZGUgPSAodHlwZW9mIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA9PSAndW5kZWZpbmVkJyB8fCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgIT0gJ3d5c2l3eWcnKTtcbiAgICBpZiAoaXNOb3RXeXNpd3lnTW9kZSlcbiAgICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnNbJ3ZpcnR1YWxIdG1sJ10udXBkYXRlKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpO1xuICAgIC8vZWxzZSBcbiAgICAvLyAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnLnVwZGF0ZShlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KTtcbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3d5c2l3eWdPckh0bWwnXSA9IHRydWU7XG5cbmtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnSHJlZiA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSA4KSB7XG4gICAgICB2YXIgdiA9IHZhbHVlQWNjZXNzb3IoKTtcblxuICAgICAgdmFyIGlzTm90V3lzaXd5Z01vZGUgPSAodHlwZW9mIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA9PSAndW5kZWZpbmVkJyB8fCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgIT0gJ3d5c2l3eWcnKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiWFhYXCIsIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSwgaXNOb3RXeXNpd3lnTW9kZSwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpKTtcbiAgICAgIGlmIChpc05vdFd5c2l3eWdNb2RlKSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnX25ldycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLypqc2hpbnQgc2NyaXB0dXJsOnRydWUqL1xuICAgICAgICAvLyAyMDE1MDIyNjogcmVtb3ZlZCBocmVmIHRvIHdvcmsgYXJvdW5kIEZGIGlzc3VlcyB3aXRoIDxhIGhyZWY9XCJcIj48ZGl2IGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4uLjwvZGl2PjwvYT5cbiAgICAgICAgLy8gZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnamF2YXNjcmlwdDp2b2lkKDApJyk7XG4gICAgICAgIC8vIDIwMTUwMzA5OiBvbiBJRSwgYW4gZWRpdGFibGUgPGEgaHJlZj1cIlwiIGRhdGEtZWRpdGFibGU9XCJcIj4gcHJldmVudCB0aW55bWNlIHRvb2xiYXIgdG8gYmUgc2hvd24uXG4gICAgICAgIC8vICAgICAgICAgICBzbyBJIGNoYW5nZSBiZWhhdmlvdXIgYmFzZWQgb24gdGhlIHVzZSBvZiBcInd5c2l3eWdPckh0bWxcIlxuICAgICAgICAvLyBAc2VlOiBodHRwOi8vd3d3LnRpbnltY2UuY29tL2RldmVsb3AvYnVndHJhY2tlcl92aWV3LnBocD9pZD03NDMyXG4gICAgICAgIHZhciBhbGxiaW5kaW5ncyA9IGFsbEJpbmRpbmdzQWNjZXNzb3IoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBhbGxiaW5kaW5ncy53eXNpd3lnT3JIdG1sICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgJ2phdmFzY3JpcHQ6dm9pZCgwKScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkaHJlZicsICcjJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSA4KSB7XG4gICAgICB2YXIgaXNOb3RXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID09ICd1bmRlZmluZWQnIHx8IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAnd3lzaXd5ZycpO1xuICAgICAgLy8gTk9URSB0aGlzIHVud3JhcCBpcyBuZWVkZWQgYWxzbyBpbiBcInd5c2l3eWdcIiBtb2RlLCBvdGhlcndpc2UgZGVwZW5kZW5jeSB0cmFja2luZyBkaWVzLlxuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcbiAgICAgIGlmIChpc05vdFd5c2l3eWdNb2RlKSB7XG4gICAgICAgIGlmICgoYXR0clZhbHVlID09PSBmYWxzZSkgfHwgKGF0dHJWYWx1ZSA9PT0gbnVsbCkgfHwgKGF0dHJWYWx1ZSA9PT0gdW5kZWZpbmVkKSlcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBhdHRyVmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xua28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1snd3lzaXd5Z0hyZWYnXSA9IHRydWU7XG5cbmtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnU3JjID0ge1xuICBjb252ZXJ0ZWRVcmw6IGZ1bmN0aW9uKHNyYywgbWV0aG9kLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdmFyIHJlcyA9IHNyYyArIFwiP21ldGhvZD1cIiArIG1ldGhvZCArIFwiJndpZHRoPVwiICsgd2lkdGggKyAoaGVpZ2h0ICE9PSBudWxsID8gXCImaGVpZ2h0PVwiICsgaGVpZ2h0IDogJycpO1xuICAgIGNvbnNvbGUubG9nKFwiYmFzaWMgY29udmVydGVyVXJsXCIsIHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSxcbiAgcGxhY2Vob2xkZXJVcmw6IGZ1bmN0aW9uKHBsd2lkdGgsIHBsaGVpZ2h0LCBwbHRleHQpIHtcbiAgICB2YXIgcGxhY2Vob2xkZXJzcmMgPSBcIidodHRwOi8vbG9yZW1waXhlbC5jb20vZy8nK1wiICsgcGx3aWR0aCArIFwiKycvJytcIiArIHBsaGVpZ2h0ICsgXCIrJy9hYnN0cmFjdC8nK2VuY29kZVVSSUNvbXBvbmVudChcIiArIHBsdGV4dCArIFwiKVwiO1xuICAgIC8vIGh0dHA6Ly9wbGFjZWhvbGQuaXQvMjAweDE1MC5wbmcvY2NjY2NjLzMzMzMzMyZ0ZXh0PXBsYWNlaG9sZC5pdCNzdGhhc2gubkEzcjI2dlIuZHB1ZlxuICAgIC8vIHBsYWNlaG9sZGVyc3JjID0gXCInaHR0cDovL3BsYWNlaG9sZC5pdC8nK1wiK3dpZHRoK1wiKyd4JytcIitoZWlnaHQrXCIrJy5wbmcvY2NjY2NjLzMzMzMzMyZ0ZXh0PScrXCIrc2l6ZTtcbiAgICAvLyBwbGFjZWhvbGRlcnNyYyA9IFwiJ1wiK2NvbnZlcnRlclV0aWxzLmFkZFNsYXNoZXMoZGVmYXVsdFZhbHVlKStcIidcIjtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIHZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpO1xuICAgIHZhciBhdHRyVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlLnNyYyk7XG4gICAgdmFyIHBsYWNlaG9sZGVyVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlLnBsYWNlaG9sZGVyKTtcbiAgICB2YXIgd2lkdGggPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlLndpZHRoKTtcbiAgICB2YXIgaGVpZ2h0ID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZS5oZWlnaHQpO1xuICAgIGlmICgoYXR0clZhbHVlID09PSBmYWxzZSkgfHwgKGF0dHJWYWx1ZSA9PT0gbnVsbCkgfHwgKGF0dHJWYWx1ZSA9PT0gdW5kZWZpbmVkKSB8fCAoYXR0clZhbHVlID09PSAnJykpIHtcbiAgICAgIGlmICh0eXBlb2YgcGxhY2Vob2xkZXJWYWx1ZSA9PSAnb2JqZWN0JyAmJiBwbGFjZWhvbGRlclZhbHVlICE9PSBudWxsKSBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3JjJywga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdTcmMucGxhY2Vob2xkZXJVcmwocGxhY2Vob2xkZXJWYWx1ZS53aWR0aCwgcGxhY2Vob2xkZXJWYWx1ZS5oZWlnaHQsIHBsYWNlaG9sZGVyVmFsdWUudGV4dCkpO1xuICAgICAgZWxzZSBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBtZXRob2QgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlLm1ldGhvZCk7XG4gICAgICBpZiAoIW1ldGhvZCkgbWV0aG9kID0gd2lkdGggPiAwICYmIGhlaWdodCA+IDAgPyAnY292ZXInIDogJ3Jlc2l6ZSc7XG4gICAgICB2YXIgc3JjID0ga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdTcmMuY29udmVydGVkVXJsKGF0dHJWYWx1ZS50b1N0cmluZygpLCBtZXRob2QsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNyYyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2lkdGggIT09ICd1bmRlZmluZWQnICYmIHdpZHRoICE9PSBudWxsKSBlbGVtZW50LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHdpZHRoKTtcbiAgICBlbHNlIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwid2lkdGhcIik7XG4gICAgaWYgKHR5cGVvZiBoZWlnaHQgIT09ICd1bmRlZmluZWQnICYmIGhlaWdodCAhPT0gbnVsbCkgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcbiAgICBlbHNlIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiaGVpZ2h0XCIpO1xuICB9XG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z0lkID0ge1xuICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIGlzTm90V3lzaXd5Z01vZGUgPSAodHlwZW9mIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA9PSAndW5kZWZpbmVkJyB8fCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgIT0gJ3d5c2l3eWcnKTtcbiAgICBpZiAoIWlzTm90V3lzaXd5Z01vZGUpXG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnaWQnLCBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSkpO1xuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgaXNOb3RXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID09ICd1bmRlZmluZWQnIHx8IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAnd3lzaXd5ZycpO1xuICAgIGlmICghaXNOb3RXeXNpd3lnTW9kZSlcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKSk7XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd3eXNpd3lnSWQnXSA9IHRydWU7XG5cbi8vIHVzZWQgb24gZWRpdGFibGUgXCJpdGVtXCIgc28gdG8gYmluZCBjbGlja3Mgb25seSBpbiB3eXNpd3lnIG1vZGUuXG5rby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z0NsaWNrID0ge1xuICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIGlzTm90V3lzaXd5Z01vZGUgPSAodHlwZW9mIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA9PSAndW5kZWZpbmVkJyB8fCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgIT0gJ3d5c2l3eWcnKTtcbiAgICBpZiAoIWlzTm90V3lzaXd5Z01vZGUpXG4gICAgICBrby5iaW5kaW5nSGFuZGxlcnMuY2xpY2suaW5pdChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KTtcbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3d5c2l3eWdDbGljayddID0gdHJ1ZTtcblxuLy8gdXNlZCBvbiBlZGl0YWJsZSBcIml0ZW1cIiBzbyB0byBiaW5kIGNzcyBvbmx5IGluIHd5c2l3eWcgbW9kZS5cbmtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnQ3NzID0ge1xuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgaXNOb3RXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID09ICd1bmRlZmluZWQnIHx8IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAnd3lzaXd5ZycpO1xuICAgIGlmICghaXNOb3RXeXNpd3lnTW9kZSlcbiAgICAgIGtvLmJpbmRpbmdIYW5kbGVycy5jc3MudXBkYXRlKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpO1xuICB9XG59O1xua28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1snd3lzaXd5Z0NzcyddID0gdHJ1ZTtcblxua28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdJbWcgPSB7XG4gIG1ha2VUZW1wbGF0ZVZhbHVlQWNjZXNzb3I6IGZ1bmN0aW9uKHZhbHVlQWNjZXNzb3IsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGlzV3lzaXd5Z01vZGUgPSAodHlwZW9mIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAndW5kZWZpbmVkJyAmJiBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgPT0gJ3d5c2l3eWcnKTtcblxuICAgICAgdmFyIG1vZGVsVmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCksXG4gICAgICAgIHVud3JhcHBlZFZhbHVlID0ga28udXRpbHMucGVla09ic2VydmFibGUobW9kZWxWYWx1ZSk7IC8vIFVud3JhcCB3aXRob3V0IHNldHRpbmcgYSBkZXBlbmRlbmN5IGhlcmVcblxuICAgICAgLy8gSWYgdW53cmFwcGVkVmFsdWUuZGF0YSBpcyB0aGUgYXJyYXksIHByZXNlcnZlIGFsbCByZWxldmFudCBvcHRpb25zIGFuZCB1bndyYXAgYWdhaW4gdmFsdWUgc28gd2UgZ2V0IHVwZGF0ZXNcbiAgICAgIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUobW9kZWxWYWx1ZSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgICduYW1lJzogaXNXeXNpd3lnTW9kZSA/IHVud3JhcHBlZFZhbHVlWydfZWRpdFRlbXBsYXRlJ10gOiB1bndyYXBwZWRWYWx1ZVsnX3RlbXBsYXRlJ10sXG4gICAgICAgICd0ZW1wbGF0ZUVuZ2luZSc6IGtvLm5hdGl2ZVRlbXBsYXRlRW5naW5lLmluc3RhbmNlXG4gICAgICB9O1xuICAgIH07XG4gIH0sXG4gICdpbml0JzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWyd0ZW1wbGF0ZSddWydpbml0J10oZWxlbWVudCwga28uYmluZGluZ0hhbmRsZXJzWyd3eXNpd3lnSW1nJ10ubWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yLCBiaW5kaW5nQ29udGV4dCkpO1xuICB9LFxuICAndXBkYXRlJzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICBiaW5kaW5nQ29udGV4dCA9IGJpbmRpbmdDb250ZXh0WydleHRlbmQnXSh2YWx1ZUFjY2Vzc29yKCkpO1xuICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnNbJ3RlbXBsYXRlJ11bJ3VwZGF0ZSddKGVsZW1lbnQsIGtvLmJpbmRpbmdIYW5kbGVyc1snd3lzaXd5Z0ltZyddLm1ha2VUZW1wbGF0ZVZhbHVlQWNjZXNzb3IodmFsdWVBY2Nlc3NvciwgYmluZGluZ0NvbnRleHQpLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCk7XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd3eXNpd3lnSW1nJ10gPSB0cnVlO1xuXG4vLyBOT1RFOiB0aGVyZSBhcmUgaXNzdWVzIHdpdGggdGhlIFwicmF3XCIgZm9ybWF0IGFuZCB0cmFzaCBsZWZ0IGFyb3VuZCBieSB0aW55bWNlIHdvcmthcm91bmRzIGZvciBjb250ZW50ZWRpdGFibGUgaXNzdWVzLlxuLy8gc2V0dGluZyBcImZvcmNlZF9yb290X2Jsb2NrOiBmYWxzZVwiIGRpc2FibGUgdGhlIGRlZmF1bHQgYmVoYXZpb3VyIG9mIGFkZGluZyBhIHdyYXBwZXIgPHA+IHdoZW4gbmVlZGVkIGFuZCB0aGlzIHNlZW1zIHRvIGZpeCBtYW55IGlzc3VlcyBpbiBJRS5cbi8vIGFsc28sIG1heWJlIHdlIHNob3VsZCB1c2UgdGhlIFwicmF3XCIgb25seSBmb3IgdGhlIFwiYmVmb3JlIFNldENvbnRlbnRcIiBhbmQgaW5zdGVhZCByZWFkIHRoZSBcIm5vbi1yYXdcIiBjb250ZW50ICh0aGUgcmF3IGNvbnRlbnQgc29tZXRpbWVzIGhhdmUgZGF0YS0gYXR0cmlidXRlcyBhbmQgdG9vIG1hbnkgZW5kaW5nIDxicj4gaW4gdGhlIGNvZGUpXG5rby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5ZyA9IHtcbiAgY3VycmVudEluZGV4OiAwLFxuICBzdGFuZGFyZE9wdGlvbnM6IHt9LFxuICBmdWxsT3B0aW9uczoge1xuICAgIHRvb2xiYXIxOiAnYm9sZCBpdGFsaWMgZm9yZWNvbG9yIGJhY2tjb2xvciBociBzdHlsZXNlbGVjdCByZW1vdmVmb3JtYXQgfCBsaW5rIHVubGluayB8IHBhc3RldGV4dCBjb2RlJyxcbiAgICAvL3Rvb2xiYXIxOiBcImJvbGQgaXRhbGljIHwgZm9yZWNvbG9yIGJhY2tjb2xvciB8IGxpbmsgdW5saW5rIHwgaHIgfCBwYXN0ZXRleHQgY29kZVwiLCAvLyB8IG5ld3NsZXR0ZXJfcHJvZmlsZSBuZXdzbGV0dGVyX29wdGxpbmsgbmV3c2xldHRlcl91bnN1YnNjcmliZSBuZXdzbGV0dGVyX3Nob3dsaW5rXCI7XG4gICAgLy90b29sYmFyMjogXCJmb3JtYXRzZWxlY3QgZm9udHNlbGVjdCBmb250c2l6ZXNlbGVjdCB8IGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IGFsaWduanVzdGlmeSB8IGJ1bGxpc3QgbnVtbGlzdFwiLFxuICAgIHBsdWdpbnM6IFtcImxpbmsgaHIgcGFzdGUgbGlzdHMgdGV4dGNvbG9yIGNvZGVcIl0sXG4gICAgLy8gdmFsaWRfZWxlbWVudHM6ICdzdHJvbmcvYixlbS9pLCpbKl0nLFxuICAgIC8vIGV4dGVuZGVkX3ZhbGlkX2VsZW1lbnRzOiAnc3Ryb25nL2IsZW0vaSwqWypdJyxcbiAgICAvLyBSZW1vdmVkOiBpbWFnZSBmdWxsc2NyZWVuIGNvbnRleHRtZW51IFxuICAgIC8vIGRvd25sb2FkIGN1c3RvbTpcbiAgICAvLyBqcXVlcnkgdmVyc2lvbiBjb24gbGVnYWN5b3V0cHV0LCBhbmNob3IsIGNvZGUsIGltcG9ydGNzcywgbGluaywgcGFzdGUsIHRleHRjb2xvciwgaHIsIGxpc3RzXG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICAvLyBUT0RPIHVnbHksIGJ1dCB3b3Jrcy4uLlxuICAgIGtvLmJpbmRpbmdIYW5kbGVycy5mb2N1c2FibGUuaW5pdChlbGVtZW50KTtcblxuICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soZWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICB0aW55bWNlLnJlbW92ZSgnIycgKyBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSk7XG4gICAgfSk7XG5cbiAgICB2YXIgdmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCk7XG5cbiAgICBpZiAoIWtvLmlzT2JzZXJ2YWJsZSh2YWx1ZSkpIHRocm93IFwiV3lzaXd5ZyBiaW5kaW5nIGNhbGxlZCB3aXRoIG5vbiBvYnNlcnZhYmxlXCI7XG4gICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IDgpIHRocm93IFwiV3lzaXd5ZyBiaW5kaW5nIGNhbGxlZCBvbiB2aXJ0dWFsIG5vZGUsIGlnbm9yaW5nLi4uLlwiICsgZWxlbWVudC5pbm5lckhUTUw7XG5cbiAgICB2YXIgc2VsZWN0b3JJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgIGlmICghc2VsZWN0b3JJZCkge1xuICAgICAgc2VsZWN0b3JJZCA9ICd3eXNpd3lnXycgKyAoKytrby5iaW5kaW5nSGFuZGxlcnNbJ3d5c2l3eWcnXS5jdXJyZW50SW5kZXgpO1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgc2VsZWN0b3JJZCk7XG4gICAgfVxuXG4gICAgdmFyIGZ1bGxFZGl0b3IgPSBlbGVtZW50LnRhZ05hbWUgPT0gJ0RJVicgfHwgZWxlbWVudC50YWdOYW1lID09ICdURCc7XG4gICAgdmFyIGlzU3Vic2NyaWJlckNoYW5nZSA9IGZhbHNlO1xuICAgIHZhciB0aGlzRWRpdG9yO1xuICAgIHZhciBpc0VkaXRvckNoYW5nZSA9IGZhbHNlO1xuXG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBzZWxlY3RvcjogJyMnICsgc2VsZWN0b3JJZCxcbiAgICAgIGlubGluZTogdHJ1ZSxcbiAgICAgIC8vIG1heWJlIG5vdCBuZWVkZWQsIGJ1dCB3b24ndCBodXJ0LlxuICAgICAgaGlkZGVuX2lucHV0OiBmYWxzZSxcbiAgICAgIHBsdWdpbnM6IFtcInBhc3RlXCJdLFxuICAgICAgdG9vbGJhcjE6IFwiYm9sZCBpdGFsaWNcIixcbiAgICAgIHRvb2xiYXIyOiBcIlwiLFxuICAgICAgLy8gd2UgaGF2ZSB0byBkaXNhYmxlIHByZXZpZXdfc3R5bGVzIG90aGVyd2lzZSB0aW55bWNlIHB1c2ggaW5saW5lIGV2ZXJ5IHN0eWxlIGhlIHRoaW5ncyB3aWxsIGJlIGFwcGxpZWQgYW5kIHRoaXMgbWFrZXMgdGhlIHN0eWxlIG1lbnUgdG8gaW5oZXJpdCBjb2xvci9mb250LWZhbWlseSBhbmQgbW9yZS5cbiAgICAgIHByZXZpZXdfc3R5bGVzOiBmYWxzZSxcbiAgICAgIHBhc3RlX2FzX3RleHQ6IHRydWUsXG4gICAgICBsYW5ndWFnZTogJ2VuJyxcbiAgICAgIHNjaGVtYTogXCJodG1sNVwiLFxuICAgICAgZXh0ZW5kZWRfdmFsaWRfZWxlbWVudHM6ICdzdHJvbmcvYixlbS9pLCpbKl0nLFxuICAgICAgbWVudWJhcjogZmFsc2UsXG4gICAgICBza2luOiAnZ3JheS1mbGF0JyxcbiAgICAgIHNldHVwOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgLy8gVE9ETyBjaGFuZ2Ugc29tZXRpbWVzIGRvZXNuJ3QgdHJpZ2dlciAod2UgaGF2ZSB0byBkb2N1bWVudCB3aGVuKVxuICAgICAgICAvLyBsaXN0ZW5pbmcgb24ga2V5dXAgd291bGQgaW5jcmVhc2UgY29ycmVjdG5lc3MgYnV0IHdlIHdvdWxkIG5lZWQgYSByYXRlTGltaXQgdG8gYXZvaWQgZmxvb2RpbmcuXG4gICAgICAgIGVkaXRvci5vbignY2hhbmdlIHJlZG8gdW5kbycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghaXNTdWJzY3JpYmVyQ2hhbmdlKSB7XG4gICAgICAgICAgICBpc0VkaXRvckNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAvLyB3ZSBmYWlsZWQgd2l0aCBvdGhlciB3YXlzIHRvIGRvIHRoaXM6XG4gICAgICAgICAgICAvLyB2YWx1ZSgkKGVsZW1lbnQpLmh0bWwoKSk7XG4gICAgICAgICAgICAvLyB2YWx1ZShlbGVtZW50LmlubmVySFRNTCk7XG4gICAgICAgICAgICB2YWx1ZShlZGl0b3IuZ2V0Q29udGVudCh7XG4gICAgICAgICAgICAgIGZvcm1hdDogJ3JhdydcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlzRWRpdG9yQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gQ2xpY2tpbmcgb24gdGhlIGVsZW1lbnQgb24gZm9jdXMgY2hhbmdlIGFsbG93IHRoZSBcImNsaWNcIiBjb2RlIHRvIGJlIHRyaWdnZXJlZCBhbmQgcHJvcGFnYXRlIHRoZSBzZWxlY3Rpb24uXG4gICAgICAgIC8vIE5vdCBlbGVnYW50LCBtYXliZSB3ZSBoYXZlIGJldHRlciBvcHRpb25zLlxuICAgICAgICBlZGl0b3Iub24oJ2ZvY3VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gVXNlZCBieSBzY3JvbGxmaXguanMgKG1heWJlIHRoaXMgaXMgbm90IG5lZWRlZCBieSBuZXcgc2Nyb2xsZml4LmpzKVxuICAgICAgICAgIGVkaXRvci5ub2RlQ2hhbmdlZCgpO1xuICAgICAgICAgIGVkaXRvci5nZXRFbGVtZW50KCkuY2xpY2soKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTk9URTogdGhpcyBmaXhlcyBpc3N1ZSB3aXRoIFwibGVhZGluZyBzcGFjZXNcIiBpbiBkZWZhdWx0IGNvbnRlbnQgdGhhdCB3ZXJlIGxvc3QgZHVyaW5nIGluaXRpYWxpemF0aW9uLlxuICAgICAgICBlZGl0b3Iub24oJ0JlZm9yZVNldENvbnRlbnQnLCBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgaWYgKGFyZ3MuaW5pdGlhbCkgYXJncy5mb3JtYXQgPSAncmF3JztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogTk9URTogZGlzYWJsaW5nIFwiRU5URVJcIiBpbiB0aW55IGVkaXRvciwgbm90IGEgZ29vZCB0aGluZyBidXQgbWF5IGJlIG5lZWRlZCB0byB3b3JrIGFyb3VuZCBjb250ZW50ZWRpdGFibGUgaXNzdWVzXG4gICAgICAgIGlmICghZnVsbEVkaXRvcikge1xuICAgICAgICAgIC8vIHNlIG5vbiBhYmJpYW1vIGlsIFwiZnVsbCBFZGl0b3JcIiwgZGlzYWJpbGl0aWFtbyBsJ2ludmlvLiAodmFyaSBidWcpXG4gICAgICAgICAgZWRpdG9yLm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgeyBlLnByZXZlbnREZWZhdWx0KCk7IH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAqL1xuXG4gICAgICAgIHRoaXNFZGl0b3IgPSBlZGl0b3I7XG5cbiAgICAgIH1cbiAgICB9O1xuXG4gICAga28udXRpbHMuZXh0ZW5kKG9wdGlvbnMsIGtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnLnN0YW5kYXJkT3B0aW9ucyk7XG4gICAgaWYgKGZ1bGxFZGl0b3IpIGtvLnV0aWxzLmV4dGVuZChvcHRpb25zLCBrby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Zy5mdWxsT3B0aW9ucyk7XG5cbiAgICAvLyB3ZSBoYXZlIHRvIHB1dCBpbml0aWFsaXphdGlvbiBpbiBhIHNldHRpbWVvdXQsIG90aGVyd2lzZSBzd2l0Y2hpbmcgZnJvbSBcIjFcIiB0byBcIjJcIiBjb2x1bW5zIGJsb2Nrc1xuICAgIC8vIHdpbGwgc3RhcnQgdGhlIG5ldyBlZGl0b3JzIGJlZm9yZSBkaXNwb3NpbmcgdGhlIG9sZCBvbmVzIGFuZCBJRHMgZ2V0IHRlbXBvcmFyaWx5IGR1cGxpY2F0ZWQuXG4gICAgLy8gdXNpbmcgc2V0VGltZW91dCB0aGUgZGlzcG9zZS9jcmVhdGUgb3JkZXIgaXMgY29ycmVjdCBvbiBldmVyeSBicm93c2VyIHRlc3RlZC5cbiAgICBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHRpbnltY2UuaW5pdChvcHRpb25zKTtcbiAgICB9KTtcblxuICAgIGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSk7XG4gICAgICBpZiAoIWlzRWRpdG9yQ2hhbmdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaXNTdWJzY3JpYmVyQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAvLyB3ZSBmYWlsZWQgc2V0dGluZyBjb250ZW50cyBpbiBvdGhlciB3YXlzLi4uXG4gICAgICAgICAgLy8gJChlbGVtZW50KS5odG1sKGNvbnRlbnQpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpc0VkaXRvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXNFZGl0b3Iuc2V0Q29udGVudChjb250ZW50LCB7XG4gICAgICAgICAgICAgIGZvcm1hdDogJ3JhdydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBrby51dGlscy5zZXRIdG1sKGVsZW1lbnQsIGNvbnRlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVE9ETyBleGNlcHRpb24gc2V0dGluZyBjb250ZW50IHRvIGVkaXRhYmxlIGVsZW1lbnRcIiwgdHlwZW9mIHRoaXNFZGl0b3IsIGUpO1xuICAgICAgICB9XG4gICAgICAgIGlzU3Vic2NyaWJlckNoYW5nZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sIG51bGwsIHtcbiAgICAgIGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogZWxlbWVudFxuICAgIH0pO1xuXG4gICAgLy8gZG8gbm90IHBhcnNlIGh0bWwgY29udGVudCBmb3IgS08gYmluZGluZ3MhIVxuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sc0Rlc2NlbmRhbnRCaW5kaW5nczogdHJ1ZVxuICAgIH07XG5cbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbi8vIHJldHVybnMgMCBpZiBlcXVhbCAoMC4wLnggcmVsZWFzZSksIDEgd2l0aCBiYWNrd2FyZCBjb21wYXRpYmxlIGFkZGl0aW9ucyAoMC54LjAgcmVsZWFzZSksIDIgb24gbG9zdCBkYXRhIG9yIGluY29tcGF0aWJsZSBkYXRhICh4LjAuMCByZWxlYXNlKVxudmFyIGNoZWNrTW9kZWwgPSBmdW5jdGlvbihyZWZlcmVuY2UsIGJsb2NrRGVmcywgbW9kZWwsIG9yaWdQcmVmaXgsIHJldmVyc2UpIHtcbiAgdmFyIGJsb2NrRGVmc09iaiwgaSwgcHJlZml4O1xuICB2YXIgdmFsaWQgPSAwO1xuICBpZiAodHlwZW9mIHJldmVyc2UgPT0gJ3VuZGVmaW5lZCcpIHJldmVyc2UgPSBmYWxzZTtcbiAgaWYgKHR5cGVvZiBibG9ja0RlZnMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBibG9ja0RlZnMuc3BsaWNlID09ICdmdW5jdGlvbicpIHtcbiAgICBibG9ja0RlZnNPYmogPSB7fTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYmxvY2tEZWZzLmxlbmd0aDsgaSsrKSBibG9ja0RlZnNPYmpbYmxvY2tEZWZzW2ldLnR5cGVdID0gYmxvY2tEZWZzW2ldO1xuICB9IGVsc2Uge1xuICAgIGJsb2NrRGVmc09iaiA9IGJsb2NrRGVmcztcbiAgfVxuICBmb3IgKHZhciBwcm9wIGluIHJlZmVyZW5jZSlcbiAgICBpZiAocmVmZXJlbmNlLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICBwcmVmaXggPSB0eXBlb2Ygb3JpZ1ByZWZpeCAhPT0gJ3VuZGVmaW5lZCcgPyBvcmlnUHJlZml4ICsgXCIuXCIgKyBwcm9wIDogcHJvcDtcbiAgICAgIGlmICghbW9kZWwuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJXQVJOIFByb3BlcnR5IFwiLCBwcmVmaXgsIFwiZm91bmQgaW4gbW9kZWwgaXMgbm90IGRlZmluZWQgYnkgdGVtcGxhdGU6IHJlbW92aW5nIGl0IVwiKTtcbiAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgICAgICBkZWxldGUgcmVmZXJlbmNlW3Byb3BdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiSU5GTyBQcm9wZXJ0eSBcIiwgcHJlZml4LCBcIm1pc3NpbmcgaW4gbW9kZWwsIGNsb25pbmcgZnJvbSByZWZlcmVuY2UhXCIpO1xuICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDEpO1xuICAgICAgICAgIG1vZGVsW3Byb3BdID0gcmVmZXJlbmNlW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlbFtwcm9wXSAhPSB0eXBlb2YgcmVmZXJlbmNlW3Byb3BdKSB7XG4gICAgICAgIC8vIHNlIHNvbm8gZGkgdGlwbyBkaXZlcnNvIGFsbG9yYSBwcm92byBhIHZlZGVyZSBzZSBsJ2FsdHJvLCBjb252ZXJ0aXRvIGRpIHRpcG8gbWFudGllbmUgdW4gdmFsb3JlIGVxdWl2YWxlbnRlLlxuICAgICAgICBpZiAobW9kZWxbcHJvcF0gIT09IG51bGwgJiYgcmVmZXJlbmNlW3Byb3BdICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBtb2RlbFtwcm9wXSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKFN0cmluZyhyZWZlcmVuY2VbcHJvcF0pICE9IHJlZmVyZW5jZVtwcm9wXSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRPRE8gRGlmZmVyZW50IHR5cGUgMSBcIiwgcHJlZml4LCB0eXBlb2YgbW9kZWxbcHJvcF0sIHR5cGVvZiByZWZlcmVuY2VbcHJvcF0sIG1vZGVsW3Byb3BdLCByZWZlcmVuY2VbcHJvcF0pO1xuICAgICAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlbFtwcm9wXSA9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgaWYgKE51bWJlcihyZWZlcmVuY2VbcHJvcF0pICE9IHJlZmVyZW5jZVtwcm9wXSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRPRE8gRGlmZmVyZW50IHR5cGUgMiBcIiwgcHJlZml4LCB0eXBlb2YgbW9kZWxbcHJvcF0sIHR5cGVvZiByZWZlcmVuY2VbcHJvcF0sIG1vZGVsW3Byb3BdLCByZWZlcmVuY2VbcHJvcF0pO1xuICAgICAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUT0RPIERpZmZlcmVudCB0eXBlIDMgXCIsIHByZWZpeCwgdHlwZW9mIG1vZGVsW3Byb3BdLCB0eXBlb2YgcmVmZXJlbmNlW3Byb3BdLCBtb2RlbFtwcm9wXSwgcmVmZXJlbmNlW3Byb3BdKTtcbiAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVmZXJlbmNlW3Byb3BdID09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChyZWZlcmVuY2VbcHJvcF0gIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHJlZmVyZW5jZVtwcm9wXS5zcGxpY2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAocmVmZXJlbmNlW3Byb3BdLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgaWYgKG1vZGVsW3Byb3BdLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPIG5lZWRzIHNvcnRpbmc/XG4gICAgICAgICAgICAgICAgdmFyIGogPSAwO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBtb2RlbFtwcm9wXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtb2RlbFtwcm9wXVtpXS50eXBlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgcmVmZXJlbmNlW3Byb3BdLmxlbmd0aCAmJiByZWZlcmVuY2VbcHJvcF1bal0udHlwZSAhPT0gbW9kZWxbcHJvcF1baV0udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaWdub3JpbmcgXCIsIHByZWZpeCwgcmVmZXJlbmNlW3Byb3BdW2pdLnR5cGUsIFwiIGJsb2NrIHR5cGUgaW4gcmVmZXJlbmNlIG5vdCBmb3VuZCBpbiBtb2RlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGogPj0gcmVmZXJlbmNlW3Byb3BdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTiBjYW5ub3QgZmluZCBcIiwgcHJlZml4LCBtb2RlbFtwcm9wXVtpXS50eXBlLCBcIiBibG9jayBpbiByZWZlcmVuY2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBNYXRoLm1heCh2YWxpZCwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmV2ZXJzZSBjb25kaXRpb24gc28gdG8gc2tpcCBcImRlZXAgdHJhdmVyc2luZ1wiIG9uIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIGNoZWNrTW9kZWwocmVmZXJlbmNlW3Byb3BdW2pdLCB1bmRlZmluZWQsIG1vZGVsW3Byb3BdW2ldLCBwcmVmaXggKyBcIltcIiArIGkgKyBcIi5cIiArIG1vZGVsW3Byb3BdW2ldLnR5cGUgKyBcIl1cIikpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGUgY2FzZSBvZiBkaWZmZXJlbnQgYXJyYXkgd2UgY2hlY2sgYmxvY2tEZWZzXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlZmVyZW5jZVtwcm9wXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWZlcmVuY2VbcHJvcF1baV0udHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUT0RPIGZvdW5kIGFuIG9iamVjdCB3aXRoIG5vIHR5cGVcIiwgcHJlZml4LCByZWZlcmVuY2VbcHJvcF1baV0pO1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWJsb2NrRGVmc09iai5oYXNPd25Qcm9wZXJ0eShyZWZlcmVuY2VbcHJvcF1baV0udHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVE9ETyB0aGUgbW9kZWwgdXNlcyBhIGJsb2NrIHR5cGUgbm90IGRlZmluZWQgYnkgdGhlIHRlbXBsYXRlLiBSRU1PVklORyBJVCEhXCIsIHByZWZpeCwgcmVmZXJlbmNlW3Byb3BdW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlW3Byb3BdLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIGNoZWNrTW9kZWwoYmxvY2tEZWZzT2JqW3JlZmVyZW5jZVtwcm9wXVtpXS50eXBlXSwgYmxvY2tEZWZzT2JqLCByZWZlcmVuY2VbcHJvcF1baV0sIHByZWZpeCArIFwiW1wiICsgaSArIFwiLlwiICsgcmVmZXJlbmNlW3Byb3BdW2ldLnR5cGUgKyBcIl1cIikpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobW9kZWxbcHJvcF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIldBUk4gTnVsbCBvYmplY3QgaW4gbW9kZWwgXCIsIHByZWZpeCwgXCJpbnN0ZWFkIG9mXCIsIHJlZmVyZW5jZVtwcm9wXSwgXCJkZWxldGluZyBpdFwiKTtcbiAgICAgICAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVmZXJlbmNlW3Byb3BdO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSU5GTyBOdWxsIG9iamVjdCBpbiBtb2RlbCBcIiwgcHJlZml4LCBcImluc3RlYWQgb2ZcIiwgcmVmZXJlbmNlW3Byb3BdLCBcImNsb25pbmcgaXQgZnJvbSB0aGUgcmVmZXJlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDEpO1xuICAgICAgICAgICAgICAgIG1vZGVsW3Byb3BdID0gcmVmZXJlbmNlW3Byb3BdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCBjaGVja01vZGVsKHJlZmVyZW5jZVtwcm9wXSwgYmxvY2tEZWZzT2JqLCBtb2RlbFtwcm9wXSwgcHJlZml4LCByZXZlcnNlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG1vZGVsW3Byb3BdICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJUT0RPIE51bGwgaW4gcmVmZXJlbmNlIGJ1dCBub3QgbnVsbCBpbiBtb2RlbFwiLCBwcmVmaXgsIG1vZGVsW3Byb3BdKTtcbiAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVmZXJlbmNlW3Byb3BdICE9PSAnc3RyaW5nJyAmJiB0eXBlb2YgcmVmZXJlbmNlW3Byb3BdICE9PSAnYm9vbGVhbicgJiYgdHlwZW9mIHJlZmVyZW5jZVtwcm9wXSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJUT0RPIHVuc3VwcG9ydGVkIHR5cGVcIiwgcHJlZml4LCB0eXBlb2YgcmVmZXJlbmNlW3Byb3BdKTtcbiAgICAgICAgdmFsaWQgPSBNYXRoLm1heCh2YWxpZCwgMik7XG4gICAgICB9XG5cbiAgICB9XG4gIGlmICghcmV2ZXJzZSkgdmFsaWQgPSBNYXRoLm1heCh2YWxpZCwgY2hlY2tNb2RlbChtb2RlbCwgYmxvY2tEZWZzLCByZWZlcmVuY2UsIHR5cGVvZiBvcmlnUHJlZml4ICE9PSAndW5kZWZpbmVkJyA/IG9yaWdQcmVmaXggKyBcIiFSXCIgOiBcIiFSXCIsIHRydWUpKTtcbiAgcmV0dXJuIHZhbGlkO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjaGVja01vZGVsOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBQYXJzZXMgQ1NTIGRlY2xhcmF0aW9ucyBhbmQgc3VwcG9ydHMgdGhlIHByb3BlcnR5IGxhbmd1YWdlICgta28tKikgZm91bmQgYmV0d2VlbiB0aGVtLlxuLy8gQ3JlYXRlIEtPIGJpbmRpbmdzIGJ1dCBkb2Vzbid0IGRlcGVuZCBvbiBLTy5cbi8vIE5lZWRzIGEgYmluZGluZ1Byb3ZpZGVyLlxuXG52YXIgY29udmVydGVyVXRpbHMgPSByZXF1aXJlKFwiLi91dGlscy5qc1wiKTtcbnZhciBjc3NQYXJzZSA9IHJlcXVpcmUoXCJtZW5zY2gvbGliL3BhcnNlci5qc1wiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG52YXIgZG9tdXRpbHMgPSByZXF1aXJlKFwiLi9kb211dGlscy5qc1wiKTtcblxudmFyIF9kZWNsYXJhdGlvblZhbHVlTG9va3VwID0gZnVuY3Rpb24oZGVjbGFyYXRpb25zLCBwcm9wZXJ0eW5hbWUsIHRlbXBsYXRlVXJsQ29udmVydGVyKSB7XG4gIGZvciAodmFyIGkgPSBkZWNsYXJhdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoZGVjbGFyYXRpb25zW2ldLnR5cGUgPT0gJ3Byb3BlcnR5JyAmJiBkZWNsYXJhdGlvbnNbaV0ubmFtZSA9PSBwcm9wZXJ0eW5hbWUpIHtcbiAgICAgIHJldHVybiBfZGVjbGFyYXRpb25WYWx1ZVVybFByZWZpeGVyKGRlY2xhcmF0aW9uc1tpXS52YWx1ZSwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbnZhciBfcHJvcFRvQ2FtZWxDYXNlID0gZnVuY3Rpb24ocHJvcE5hbWUpIHtcbiAgcmV0dXJuIHByb3BOYW1lLnJlcGxhY2UoLy0oW2Etel0pL2csIGZ1bmN0aW9uKG1hdGNoLCBjb250ZW50cywgb2Zmc2V0LCBzKSB7XG4gICAgcmV0dXJuIGNvbnRlbnRzLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xufTtcblxudmFyIF9kZWNsYXJhdGlvblZhbHVlVXJsUHJlZml4ZXIgPSBmdW5jdGlvbih2YWx1ZSwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpIHtcbiAgaWYgKHZhbHVlLm1hdGNoKC91cmxcXCguKlxcKS8pKSB7XG4gICAgdmFyIHJlcGxhY2VkID0gdmFsdWUucmVwbGFjZSgvKHVybFxcKCkoW15cXCldKikoXFwpKS9nLCBmdW5jdGlvbihtYXRjaGVkLCBwcmVmaXgsIHVybCwgcG9zdGZpeCkge1xuICAgICAgdmFyIHRyaW1tZWQgPSB1cmwudHJpbSgpO1xuICAgICAgdmFyIGFwaWNlID0gdXJsLnRyaW0oKS5jaGFyQXQoMCk7XG4gICAgICBpZiAoYXBpY2UgPT0gJ1xcJycgfHwgYXBpY2UgPT0gJ1wiJykge1xuICAgICAgICB0cmltbWVkID0gdHJpbW1lZC5zdWJzdHIoMSwgdHJpbW1lZC5sZW5ndGggLSAyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwaWNlID0gJyc7XG4gICAgICB9XG4gICAgICB2YXIgbmV3VXJsID0gdGVtcGxhdGVVcmxDb252ZXJ0ZXIodHJpbW1lZCk7XG4gICAgICBpZiAobmV3VXJsICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBwcmVmaXggKyBhcGljZSArIG5ld1VybCArIGFwaWNlICsgcG9zdGZpeDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVkO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXBsYWNlZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbnZhciBlbGFib3JhdGVEZWNsYXJhdGlvbnMgPSBmdW5jdGlvbihzdHlsZSwgZGVjbGFyYXRpb25zLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgYmluZGluZ1Byb3ZpZGVyLCBlbGVtZW50LCBiYXNpY0JpbmRpbmdzLCByZW1vdmVEaXNwbGF5Tm9uZSkge1xuICB2YXIgbmV3QmluZGluZ3MgPSB0eXBlb2YgYmFzaWNCaW5kaW5ncyA9PSAnb2JqZWN0JyAmJiBiYXNpY0JpbmRpbmdzICE9PSBudWxsID8gYmFzaWNCaW5kaW5ncyA6IHt9O1xuICB2YXIgbmV3U3R5bGUgPSBudWxsO1xuICB2YXIgc2tpcExpbmVzID0gMDtcbiAgaWYgKHR5cGVvZiBkZWNsYXJhdGlvbnMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc3R5bGVTaGVldCA9IGNzc1BhcnNlKFwiI3tcXG5cIiArIHN0eWxlICsgXCJ9XCIsIHtcbiAgICAgIGNvbW1lbnRzOiB0cnVlLFxuICAgICAgcG9zaXRpb246IHRydWVcbiAgICB9KTtcbiAgICBkZWNsYXJhdGlvbnMgPSBzdHlsZVNoZWV0LnN0eWxlc2hlZXQucnVsZXNbMF0uZGVjbGFyYXRpb25zO1xuICAgIHNraXBMaW5lcyA9IDE7XG4gIH1cbiAgZm9yICh2YXIgaSA9IGRlY2xhcmF0aW9ucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICBpZiAoZGVjbGFyYXRpb25zW2ldLnR5cGUgPT0gJ3Byb3BlcnR5Jykge1xuICAgICAgaWYgKHJlbW92ZURpc3BsYXlOb25lID09PSB0cnVlICYmIGRlY2xhcmF0aW9uc1tpXS5uYW1lID09ICdkaXNwbGF5JyAmJiBkZWNsYXJhdGlvbnNbaV0udmFsdWUgPT0gJ25vbmUnKSB7XG4gICAgICAgIGlmIChuZXdTdHlsZSA9PT0gbnVsbCkgbmV3U3R5bGUgPSBzdHlsZTtcbiAgICAgICAgbmV3U3R5bGUgPSBjb252ZXJ0ZXJVdGlscy5yZW1vdmVTdHlsZShuZXdTdHlsZSwgZGVjbGFyYXRpb25zW2ldLnBvc2l0aW9uLnN0YXJ0LCBkZWNsYXJhdGlvbnNbaV0ucG9zaXRpb24uZW5kLCBza2lwTGluZXMsIDAsIDAsICcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBkZWNsID0gZGVjbGFyYXRpb25zW2ldLm5hbWUubWF0Y2goL14ta28tKGJpbmQtfGF0dHItKT8oW2EtejAtOS1dKj8pKC1pZnwtaWZub3QpPyQvKTtcbiAgICAgICAgaWYgKGRlY2wgIT09IG51bGwpIHtcbiAgICAgICAgICAvLyByaW1vemlvbmUgZGVsbG8gc3RpbGUgLWtvLSBkYWxsJ2F0dHJpYnV0byBzdHlsZS5cbiAgICAgICAgICBpZiAobmV3U3R5bGUgPT09IG51bGwgJiYgdHlwZW9mIHN0eWxlICE9ICd1bmRlZmluZWQnKSBuZXdTdHlsZSA9IHN0eWxlO1xuXG4gICAgICAgICAgdmFyIGlzQXR0ciA9IGRlY2xbMV0gPT0gJ2F0dHItJztcbiAgICAgICAgICB2YXIgaXNCaW5kID0gZGVjbFsxXSA9PSAnYmluZC0nO1xuICAgICAgICAgIHZhciBwcm9wTmFtZSA9IGRlY2xbMl07XG5cbiAgICAgICAgICB2YXIgaXNJZiA9IGRlY2xbM10gPT0gJy1pZicgfHwgZGVjbFszXSA9PSAnLWlmbm90JztcbiAgICAgICAgICB2YXIgY29uZERlY2w7XG4gICAgICAgICAgdmFyIGJpbmRWYWx1ZTtcbiAgICAgICAgICB2YXIgcHJvcERlZmF1bHRWYWx1ZTtcblxuICAgICAgICAgIGlmIChpc0lmKSB7XG4gICAgICAgICAgICBjb25kRGVjbCA9IGRlY2xhcmF0aW9uc1tpXS5uYW1lLnN1YnN0cigwLCBkZWNsYXJhdGlvbnNbaV0ubmFtZS5sZW5ndGggLSBkZWNsWzNdLmxlbmd0aCk7XG4gICAgICAgICAgICB2YXIgY29uZGl0aW9uZWREZWNsYXJhdGlvbiA9IF9kZWNsYXJhdGlvblZhbHVlTG9va3VwKGRlY2xhcmF0aW9ucywgY29uZERlY2wsIHRlbXBsYXRlVXJsQ29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb25lZERlY2xhcmF0aW9uID09PSBudWxsKSB0aHJvdyBcIlVuYWJsZSB0byBmaW5kIGRlY2xhcmF0aW9uIFwiICsgY29uZERlY2wgKyBcIiBmb3IgXCIgKyBkZWNsYXJhdGlvbnNbaV0ubmFtZTtcbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBpZiAoKGlzQXR0ciB8fCBpc0JpbmQpICYmICh0eXBlb2YgZWxlbWVudCA9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygc3R5bGUgIT0gJ3VuZGVmaW5lZCcpKSB0aHJvdyBcIkF0dHJpYnV0ZXMgYW5kIGJpbmQgZGVjbGFyYXRpb25zIGFyZSBvbmx5IGFsbG93ZWQgaW4gaW5saW5lIHN0eWxlcyFcIjtcblxuICAgICAgICAgICAgdmFyIG5lZWREZWZhdWx0VmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGJpbmRUeXBlO1xuICAgICAgICAgICAgaWYgKGlzQXR0cikge1xuICAgICAgICAgICAgICBwcm9wRGVmYXVsdFZhbHVlID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsIHByb3BOYW1lKTtcbiAgICAgICAgICAgICAgbmVlZERlZmF1bHRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICBiaW5kVHlwZSA9ICd2aXJ0dWFsQXR0cic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc0JpbmQpIHtcbiAgICAgICAgICAgICAgbmVlZERlZmF1bHRWYWx1ZSA9IHR5cGVvZiBzdHlsZSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgICAgICAgIGlmIChuZWVkRGVmYXVsdFZhbHVlKSBwcm9wRGVmYXVsdFZhbHVlID0gX2RlY2xhcmF0aW9uVmFsdWVMb29rdXAoZGVjbGFyYXRpb25zLCBwcm9wTmFtZSwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICBiaW5kVHlwZSA9ICd2aXJ0dWFsU3R5bGUnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYmluZFR5cGUgPSBudWxsO1xuICAgICAgICAgICAgICBpZiAocHJvcE5hbWUgPT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgcHJvcERlZmF1bHRWYWx1ZSA9IGRvbXV0aWxzLmdldElubmVyVGV4dChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgbmVlZERlZmF1bHRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wTmFtZSA9PSAnaHRtbCcpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBwcm9wRGVmYXVsdFZhbHVlID0gZG9tdXRpbHMuZ2V0SW5uZXJIdG1sKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBuZWVkRGVmYXVsdFZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5lZWREZWZhdWx0VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmVlZERlZmF1bHRWYWx1ZSAmJiBwcm9wRGVmYXVsdFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3QgZmluZCBkZWZhdWx0IHZhbHVlIGZvclwiLCBkZWNsYXJhdGlvbnNbaV0ubmFtZSwgZGVjbGFyYXRpb25zKTtcbiAgICAgICAgICAgICAgdGhyb3cgXCJDYW5ub3QgZmluZCBkZWZhdWx0IHZhbHVlIGZvciBcIiArIGRlY2xhcmF0aW9uc1tpXS5uYW1lICsgXCI6IFwiICsgZGVjbGFyYXRpb25zW2ldLnZhbHVlICsgXCIgaW4gXCIgKyBlbGVtZW50ICsgXCIgKFwiICsgdHlwZW9mIHN0eWxlICsgXCIvXCIgKyBwcm9wTmFtZSArIFwiKVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJpbmREZWZhdWx0VmFsdWUgPSBwcm9wRGVmYXVsdFZhbHVlO1xuXG4gICAgICAgICAgICB2YXIgYmluZE5hbWUgPSBfcHJvcFRvQ2FtZWxDYXNlKHByb3BOYW1lKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYmluZFZhbHVlID0gY29udmVydGVyVXRpbHMuZXhwcmVzc2lvbkJpbmRpbmcoZGVjbGFyYXRpb25zW2ldLnZhbHVlLCBiaW5kaW5nUHJvdmlkZXIsIGJpbmREZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTW9kZWwgZW5zdXJlIHBhdGggZmFpbGVkXCIsIGUuc3RhY2ssIFwibmFtZVwiLCBkZWNsYXJhdGlvbnNbaV0ubmFtZSwgXCJ2YWx1ZVwiLCBkZWNsYXJhdGlvbnNbaV0udmFsdWUsIFwiZGVmYXVsdFwiLCBwcm9wRGVmYXVsdFZhbHVlLCBcImVsZW1lbnRcIiwgZWxlbWVudCk7XG4gICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChiaW5kVHlwZSAhPT0gbnVsbCAmJiB0eXBlb2YgbmV3QmluZGluZ3NbYmluZFR5cGVdID09ICd1bmRlZmluZWQnKSBuZXdCaW5kaW5nc1tiaW5kVHlwZV0gPSB7fTtcblxuXG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBIUkVGc1xuICAgICAgICAgICAgaWYgKGJpbmRUeXBlID09ICd2aXJ0dWFsQXR0cicgJiYgYmluZE5hbWUgPT0gJ2hyZWYnKSB7XG4gICAgICAgICAgICAgIGJpbmRUeXBlID0gbnVsbDtcbiAgICAgICAgICAgICAgYmluZE5hbWUgPSAnd3lzaXd5Z0hyZWYnO1xuICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRvIHJlbW92ZSBpdCwgb3RoZXJ3aXNlIHdlIGVuZHMgdXAgd2l0aCAyIHJ1bGVzIHdyaXRpbmcgaXQuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudCAhPSAndW5kZWZpbmVkJyAmJiBlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsIFwiaHJlZlwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUT0RPIGV2YWx1YXRlIHRoZSB1c2Ugb2YgXCItdGhlblwiIChhbmQgLWVsc2UpIHBvc3RmaXhlcyB0byBjb21wbGV0ZSB0aGUgLWlmIGluc3RlYWQgb2YgcmVsYXlpbmdcbiAgICAgICAgICAgIC8vIG9uIHRoZSBzYW1lIGJhc2ljIHNpbnRheCAob3IgbWF5YmUgaXQgaXMgYmV0dGVyIHRvIHN1cHBvcnQgdGVybmFyeSBvcGVyYXRvciBDT05EID8gVEhFTiA6IEVMU0UpLlxuICAgICAgICAgICAgdmFyIGRlY2xhcmF0aW9uQ29uZGl0aW9uID0gX2RlY2xhcmF0aW9uVmFsdWVMb29rdXAoZGVjbGFyYXRpb25zLCBkZWNsYXJhdGlvbnNbaV0ubmFtZSArICctaWYnLCB0ZW1wbGF0ZVVybENvbnZlcnRlcik7XG4gICAgICAgICAgICB2YXIgbm90ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoZGVjbGFyYXRpb25Db25kaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZGVjbGFyYXRpb25Db25kaXRpb24gPSBfZGVjbGFyYXRpb25WYWx1ZUxvb2t1cChkZWNsYXJhdGlvbnMsIGRlY2xhcmF0aW9uc1tpXS5uYW1lICsgJy1pZm5vdCcsIHRlbXBsYXRlVXJsQ29udmVydGVyKTtcbiAgICAgICAgICAgICAgbm90ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChfZGVjbGFyYXRpb25WYWx1ZUxvb2t1cChkZWNsYXJhdGlvbnMsIGRlY2xhcmF0aW9uc1tpXS5uYW1lICsgJy1pZm5vdCcsIHRlbXBsYXRlVXJsQ29udmVydGVyKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVW5leHBlY3RlZCBlcnJvcjogY2Fubm90IHVzZSBib3RoIC1pZiBhbmQgLWlmbm90IHByb3BlcnR5IGNvbmRpdGlvbnNcIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlY2xhcmF0aW9uQ29uZGl0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGJpbmRpbmdDb25kID0gY29udmVydGVyVXRpbHMuY29uZGl0aW9uQmluZGluZyhkZWNsYXJhdGlvbkNvbmRpdGlvbiwgYmluZGluZ1Byb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICBiaW5kVmFsdWUgPSAobm90ID8gJyEnIDogJycpICsgXCIoXCIgKyBiaW5kaW5nQ29uZCArIFwiKSA/IFwiICsgYmluZFZhbHVlICsgXCIgOiBudWxsXCI7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5hYmxlIHRvIGRlYWwgd2l0aCAta28gc3R5bGUgYmluZGluZyBjb25kaXRpb25cIiwgZGVjbGFyYXRpb25Db25kaXRpb24sIGRlY2xhcmF0aW9uc1tpXS5uYW1lKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChiaW5kVHlwZSAhPT0gbnVsbCkgbmV3QmluZGluZ3NbYmluZFR5cGVdW2JpbmROYW1lXSA9IGJpbmRWYWx1ZTtcbiAgICAgICAgICAgIGVsc2UgbmV3QmluZGluZ3NbYmluZE5hbWVdID0gYmluZFZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHBhcnNpbmcgQHN1cHBvcnRzIDpwcmV2aWV3XG4gICAgICAgICAgaWYgKG5ld1N0eWxlICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vIGlmIFwiZWxlbWVudFwiIGlzIGRlZmluZWQgdGhlbiB3ZSBhcmUgcGFyc2luZyBhbiBcImlubGluZVwiIHN0eWxlIGFuZCB3ZSB3YW50IHRvIHJlbW92ZSBpdC5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ICE9ICd1bmRlZmluZWQnICYmIGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXdTdHlsZSA9IGNvbnZlcnRlclV0aWxzLnJlbW92ZVN0eWxlKG5ld1N0eWxlLCBkZWNsYXJhdGlvbnNbaV0ucG9zaXRpb24uc3RhcnQsIGRlY2xhcmF0aW9uc1tpXS5wb3NpdGlvbi5lbmQsIHNraXBMaW5lcywgMCwgMCwgJycpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB3ZSBhcmUgcGFyc2luZyBhIGZ1bGwgc3R5bGVzaGVldC4uIGxldCdzIHJld3JpdGUgdGhlIGZ1bGwgXCJwcm9wOiB2YWx1ZVwiIHdpdGhvdXQgY2FyaW5nIGFib3V0IHRoZSBvcmlnaW5hbCBzeW50YXguXG4gICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VkV2l0aCA9ICcnO1xuICAgICAgICAgICAgICAgIC8vIGlmIGl0IGlzIGFuIFwiaWZcIiB3ZSBzaW1wbHkgaGF2ZSB0byByZW1vdmUgaXQsIG90aGVyd2lzZSB3ZSByZXBsYWNlIHRoZSBpbnB1dCBjb2RlIHdpdGggXCJwcm9wOiB2YWx1ZVwiIGdlbmVyYXRpbmcgZXhwcmVzc2lvbi5cbiAgICAgICAgICAgICAgICBpZiAoIWlzSWYpIHJlcGxhY2VkV2l0aCA9IHByb3BOYW1lICsgJzogPCEtLSBrbyB0ZXh0OiAnICsgYmluZFZhbHVlICsgJyAtLT4nICsgcHJvcERlZmF1bHRWYWx1ZSArICc8IS0tIC9rbyAtLT4nO1xuICAgICAgICAgICAgICAgIG5ld1N0eWxlID0gY29udmVydGVyVXRpbHMucmVtb3ZlU3R5bGUobmV3U3R5bGUsIGRlY2xhcmF0aW9uc1tpXS5wb3NpdGlvbi5zdGFydCwgZGVjbGFyYXRpb25zW2ldLnBvc2l0aW9uLmVuZCwgc2tpcExpbmVzLCAwLCAwLCByZXBsYWNlZFdpdGgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlJlbW92ZSBzdHlsZSBmYWlsZWRcIiwgZSwgXCJuYW1lXCIsIGRlY2xhcmF0aW9uc1tpXSk7XG4gICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBwcmVmaXhpbmcgdXJsc1xuICAgICAgICAgIHZhciByZXBsYWNlZFZhbHVlID0gX2RlY2xhcmF0aW9uVmFsdWVVcmxQcmVmaXhlcihkZWNsYXJhdGlvbnNbaV0udmFsdWUsIHRlbXBsYXRlVXJsQ29udmVydGVyKTtcbiAgICAgICAgICBpZiAocmVwbGFjZWRWYWx1ZSAhPSBkZWNsYXJhdGlvbnNbaV0udmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChuZXdTdHlsZSA9PT0gbnVsbCAmJiB0eXBlb2Ygc3R5bGUgIT09ICd1bmRlZmluZWQnKSBuZXdTdHlsZSA9IHN0eWxlO1xuICAgICAgICAgICAgaWYgKG5ld1N0eWxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3U3R5bGUgPSBjb252ZXJ0ZXJVdGlscy5yZW1vdmVTdHlsZShuZXdTdHlsZSwgZGVjbGFyYXRpb25zW2ldLnBvc2l0aW9uLnN0YXJ0LCBkZWNsYXJhdGlvbnNbaV0ucG9zaXRpb24uZW5kLCBza2lwTGluZXMsIDAsIDAsIGRlY2xhcmF0aW9uc1tpXS5uYW1lICsgXCI6IFwiICsgcmVwbGFjZWRWYWx1ZSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbW92ZSBzdHlsZSBmYWlsZWQgcmVwbGFjaW5nIHVybFwiLCBlLCBcIm5hbWVcIiwgZGVjbGFyYXRpb25zW2ldKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3R5bGUgaGFuZGxpbmcgYnkgY29uY2F0ZW5hdGVkIFwic3R5bGUgYXR0cmlidXRlXCIgKHdvcnNlIHBlcmZvcm1hbmNlIGJ1dCBtb3JlIHN0YWJsZSB0aGFuIGRpcmVjdCBzdHlsZSBoYW5kbGluZylcbiAgICAgICAgICB2YXIgYmluZE5hbWUyID0gX3Byb3BUb0NhbWVsQ2FzZShkZWNsYXJhdGlvbnNbaV0ubmFtZSk7XG4gICAgICAgICAgdmFyIGJpbmQgPSAndmlydHVhbEF0dHJTdHlsZSc7XG4gICAgICAgICAgdmFyIGJpbmRWYWwyID0gdHlwZW9mIG5ld0JpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXSAhPT0gJ3VuZGVmaW5lZCcgPyBuZXdCaW5kaW5nc1sndmlydHVhbFN0eWxlJ11bYmluZE5hbWUyXSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgIHZhciBkaXN0ID0gJyAnO1xuICAgICAgICAgIGlmICh0eXBlb2YgbmV3QmluZGluZ3NbYmluZF0gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG5ld0JpbmRpbmdzW2JpbmRdID0gXCInJ1wiO1xuICAgICAgICAgICAgZGlzdCA9ICcnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlb2YgYmluZFZhbDIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBuZXdCaW5kaW5nc1tiaW5kXSA9IFwiJ1wiICsgZGVjbGFyYXRpb25zW2ldLm5hbWUgKyBcIjogJysoXCIgKyBiaW5kVmFsMiArIFwiKSsnO1wiICsgZGlzdCArIFwiJytcIiArIG5ld0JpbmRpbmdzW2JpbmRdO1xuICAgICAgICAgICAgZGVsZXRlIG5ld0JpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXVtiaW5kTmFtZTJdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdCaW5kaW5nc1tiaW5kXSA9IFwiJ1wiICsgZGVjbGFyYXRpb25zW2ldLm5hbWUgKyBcIjogXCIgKyBjb252ZXJ0ZXJVdGlscy5hZGRTbGFzaGVzKHJlcGxhY2VkVmFsdWUpICsgXCI7XCIgKyBkaXN0ICsgXCInK1wiICsgbmV3QmluZGluZ3NbYmluZF07XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgaWYgKHR5cGVvZiBlbGVtZW50ICE9ICd1bmRlZmluZWQnICYmIGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIG5ld0JpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXSlcbiAgICAgIGlmIChuZXdCaW5kaW5nc1sndmlydHVhbFN0eWxlJ10uaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJVbmV4cGVjdGVkIHZpcnR1YWxTdHlsZSBiaW5kaW5nIGFmdGVyIGNvbnZlcnNpb24gdG8gdmlydHVhbEF0dHIuc3R5bGVcIiwgcHJvcCwgbmV3QmluZGluZ3NbJ3ZpcnR1YWxTdHlsZSddW3Byb3BdLCBzdHlsZSk7XG4gICAgICAgIHRocm93IFwiVW5leHBlY3RlZCB2aXJ0dWFsU3R5bGUgYmluZGluZyBhZnRlciBjb252ZXJzaW9uIHRvIHZpcnR1YWxBdHRyLnN0eWxlIGZvciBcIiArIHByb3A7XG4gICAgICB9XG4gICAgZGVsZXRlIG5ld0JpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXTtcblxuICAgIHZhciBjdXJyZW50QmluZGluZ3MgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtYmluZCcpO1xuICAgIHZhciBkYXRhQmluZCA9IChjdXJyZW50QmluZGluZ3MgIT09IG51bGwgPyBjdXJyZW50QmluZGluZ3MgKyBcIiwgXCIgOiBcIlwiKSArIF9iaW5kaW5nU2VyaWFsaXplcihuZXdCaW5kaW5ncyk7XG4gICAgZG9tdXRpbHMuc2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWJpbmQnLCBkYXRhQmluZCk7XG4gIH1cblxuICAvLyBUT0RPIGEgZnVuY3Rpb24gd2hvc2UgcmV0dXJuIHR5cGUgZGVwZW5kcyBvbiB0aGUgaW5wdXQgcGFyYW1ldGVycyBpcyB2ZXJ5IHVnbHkuLiBwbGVhc2UgRklYIE1FLlxuICBpZiAodHlwZW9mIHN0eWxlID09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gY2xlYW4gdmlydHVhbFN0eWxlIGlmIGVtcHR5XG4gICAgdmFyIGhhc1ZpcnR1YWxTdHlsZSA9IGZhbHNlO1xuICAgIGZvciAodmFyIHByb3AxIGluIG5ld0JpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXSlcbiAgICAgIGlmIChuZXdCaW5kaW5nc1sndmlydHVhbFN0eWxlJ10uaGFzT3duUHJvcGVydHkocHJvcDEpKSB7XG4gICAgICAgIGhhc1ZpcnR1YWxTdHlsZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIGlmICghaGFzVmlydHVhbFN0eWxlKSBkZWxldGUgbmV3QmluZGluZ3NbJ3ZpcnR1YWxTdHlsZSddO1xuICAgIGVsc2Uge1xuICAgICAgLy8gcmVtb3ZlIGFuZCBhZGQgYmFjayB2aXJ0dWFsQXR0clN0eWxlIHNvIGl0IGdldHMgYXBwZW5kZWQgQkVGT1JFIHZpcnR1YWxBdHRyU3R5bGUgKF9iaW5kaW5nU2VyaWFsaXplciByZXZlcnNlIHRoZW0uLi4pXG4gICAgICBpZiAodHlwZW9mIG5ld0JpbmRpbmdzWyd2aXJ0dWFsQXR0clN0eWxlJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciB2cyA9IG5ld0JpbmRpbmdzWyd2aXJ0dWFsQXR0clN0eWxlJ107XG4gICAgICAgIGRlbGV0ZSBuZXdCaW5kaW5nc1sndmlydHVhbEF0dHJTdHlsZSddO1xuICAgICAgICBuZXdCaW5kaW5nc1sndmlydHVhbEF0dHJTdHlsZSddID0gdnM7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHJldHVybnMgbmV3IHNlcmlhbGl6ZWQgYmluZGluZ3NcbiAgICByZXR1cm4gX2JpbmRpbmdTZXJpYWxpemVyKG5ld0JpbmRpbmdzKTtcbiAgfVxuXG4gIHJldHVybiBuZXdTdHlsZTtcbn07XG5cbnZhciBfYmluZGluZ1NlcmlhbGl6ZXIgPSBmdW5jdGlvbih2YWwpIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBwcm9wIGluIHZhbClcbiAgICBpZiAodmFsLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbFtwcm9wXSA9PSAnb2JqZWN0JykgcmVzLnB1c2gocHJvcCArIFwiOiBcIiArIFwieyBcIiArIF9iaW5kaW5nU2VyaWFsaXplcih2YWxbcHJvcF0pICsgXCIgfVwiKTtcbiAgICAgIGVsc2UgcmVzLnB1c2gocHJvcCArIFwiOiBcIiArIHZhbFtwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gcmVzLnJldmVyc2UoKS5qb2luKCcsICcpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBlbGFib3JhdGVEZWNsYXJhdGlvbnM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFRoaXMgZGVhbHMgd2l0aCBDaGVlcmlvL2pRdWVyeSBpc3N1ZXMuXG4vLyBNb3N0IG9mIHRoaXMgY291bGQgYmUgZG9uZSB3aXRob3V0IGpRdWVyeSwgdG9vLCBidXQgalF1ZXJ5IGlzIGVhc2llciB0byBiZSBtb2NrZWQgd2l0aCBDaGVlcmlvXG4vLyBPdGhlcndpc2Ugd2Ugd291bGQgbmVlZCBqc0RvbSB0byBydW4gdGhlIGNvbXBpbGVyIGluIHRoZSBzZXJ2ZXIgKHdpdGhvdXQgYSByZWFsIGJyb3dzZXIpXG5cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuZnVuY3Rpb24gX2V4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xuICBpZiAoc291cmNlKSB7XG4gICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG52YXIgb2JqRXh0ZW5kID0gZnVuY3Rpb24ob2JqLCBleHRlbmRlcikge1xuICBpZiAodHlwZW9mICQuZXh0ZW5kID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gJC5leHRlbmQodHJ1ZSwgb2JqLCBleHRlbmRlcik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIF9leHRlbmQob2JqLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV4dGVuZGVyKSkpO1xuICB9XG59O1xuXG52YXIgZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlKSB7XG4gIHZhciByZXMgPSAkKGVsZW1lbnQpLmF0dHIoYXR0cmlidXRlKTtcbiAgaWYgKHR5cGVvZiByZXMgPT0gJ3VuZGVmaW5lZCcpIHJlcyA9IG51bGw7XG4gIHJldHVybiByZXM7XG4gIC8vIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xufTtcblxudmFyIHNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgJChlbGVtZW50KS5hdHRyKGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAvLyBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbn07XG5cbnZhciByZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGUpIHtcbiAgJChlbGVtZW50KS5yZW1vdmVBdHRyKGF0dHJpYnV0ZSk7XG4gIC8vIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG59O1xuXG52YXIgZ2V0SW5uZXJUZXh0ID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICByZXR1cm4gJChlbGVtZW50KS50ZXh0KCk7XG4gIC8vIGlmICh0eXBlb2YgZWxlbWVudC5pbm5lclRleHQgIT0gJ3VuZGVmaW5lZCcpIHJldHVybiBlbGVtZW50LmlubmVyVGV4dDtcbiAgLy8gZWxzZSByZXR1cm4gZWxlbWVudC50ZXh0Q29udGVudDtcbn07XG5cbnZhciBnZXRJbm5lckh0bWwgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gIHJldHVybiAkKGVsZW1lbnQpLmh0bWwoKTtcbiAgLy8gcmV0dXJuIGVsZW1lbnQuaW5uZXJIVE1MO1xufTtcblxudmFyIGdldExvd2VyVGFnTmFtZSA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgLy8gc29tZXRpbWVzIGNoZWVyaW8gZG9lc24ndCBoYXZlIHRhZ05hbWUgYnV0IFwibmFtZVwiLlxuICAvLyBCcm93c2VycyBoYXZlIFwibmFtZVwiIHdpdGggZW1wdHkgc3RyaW5nXG4gIC8vIFNvbWV0aW1lcyBjaGVlcmlvIGhhcyB0YWdOYW1lIGJ1dCBubyBwcm9wIGZ1bmN0aW9uLlxuICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnJyAmJiB0eXBlb2YgZWxlbWVudC5uYW1lID09ICdzdHJpbmcnKSByZXR1cm4gZWxlbWVudC5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChlbGVtZW50LnRhZ05hbWUgIT09ICcnKSByZXR1cm4gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAkKGVsZW1lbnQpLnByb3AoXCJ0YWdOYW1lXCIpLnRvTG93ZXJDYXNlKCk7XG4gIC8vIHJldHVybiBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbn07XG5cbnZhciBzZXRDb250ZW50ID0gZnVuY3Rpb24oZWxlbWVudCwgY29udGVudCkge1xuICAkKGVsZW1lbnQpLmh0bWwoY29udGVudCk7XG4gIC8vIGVsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudDtcbn07XG5cbnZhciByZXBsYWNlSHRtbCA9IGZ1bmN0aW9uKGVsZW1lbnQsIGh0bWwpIHtcbiAgJChlbGVtZW50KS5yZXBsYWNlV2l0aChodG1sKTtcbiAgLy8gZWxlbWVudC5vdXRlckhUTUwgPSBodG1sO1xufTtcblxudmFyIHJlbW92ZUVsZW1lbnRzID0gZnVuY3Rpb24oJGVsZW1lbnRzLCB0cnlEZXRhY2gpIHtcbiAgaWYgKHRyeURldGFjaCAmJiB0eXBlb2YgJGVsZW1lbnRzLmRldGFjaCAhPT0gJ3VuZGVmaW5lZCcpICRlbGVtZW50cy5kZXRhY2goKTtcbiAgLy8gTk9URTogd2UgZG9uJ3QgbmVlZCBhbiBlbHNlLCBhcyBkZXRhY2ggaXMgc2ltcGx5IGFuIG9wdGltaXphdGlvblxuICAkZWxlbWVudHMucmVtb3ZlKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0QXR0cmlidXRlOiBnZXRBdHRyaWJ1dGUsXG4gIHNldEF0dHJpYnV0ZTogc2V0QXR0cmlidXRlLFxuICByZW1vdmVBdHRyaWJ1dGU6IHJlbW92ZUF0dHJpYnV0ZSxcbiAgZ2V0SW5uZXJUZXh0OiBnZXRJbm5lclRleHQsXG4gIGdldElubmVySHRtbDogZ2V0SW5uZXJIdG1sLFxuICBnZXRMb3dlclRhZ05hbWU6IGdldExvd2VyVGFnTmFtZSxcbiAgc2V0Q29udGVudDogc2V0Q29udGVudCxcbiAgcmVwbGFjZUh0bWw6IHJlcGxhY2VIdG1sLFxuICByZW1vdmVFbGVtZW50czogcmVtb3ZlRWxlbWVudHMsXG4gIG9iakV4dGVuZDogb2JqRXh0ZW5kXG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xudmFyIGVsYWJvcmF0ZURlY2xhcmF0aW9ucyA9IHJlcXVpcmUoXCIuL2RlY2xhcmF0aW9ucy5qc1wiKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbnZhciBtb2RlbERlZiA9IHJlcXVpcmUoJy4vbW9kZWwuanMnKTtcblxudmFyIF9nZXRPcHRpb25zT2JqZWN0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICB2YXIgb3B0aW9uc0NvdXBsZXMgPSBvcHRpb25zLnNwbGl0KCd8Jyk7XG4gIHZhciBvcHRzID0ge307XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9uc0NvdXBsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgb3B0ID0gb3B0aW9uc0NvdXBsZXNbaV0uc3BsaXQoJz0nKTtcbiAgICBvcHRzW29wdFswXV0gPSBvcHQubGVuZ3RoID4gMSA/IG9wdFsxXSA6IG9wdFswXTtcbiAgfVxuICByZXR1cm4gb3B0cztcbn07XG5cbi8vIFRPRE8gdGhpcyBzaG91bGQgbm90IGhhdmUgaGFyZGNvZGVkIHJ1bGVzICh3ZSBub3cgaGF2ZSBhIHdheSB0byBkZWNsYXJlIHRoZW0gaW4gdGhlIHRlbXBsYXRlIGRlZmluaXRpb24pXG4vLyBDYXRlZ29yeSBcInN0eWxlXCIgaXMgdXNlZCBieSBlZGl0VHlwZSBcInN0eWxlclwiXG4vLyBDYXRlb2dyeSBcImNvbnRlbnRcIiBpcyB1c2VkIGJ5IGVkaXRUeXBlIFwiZWRpdFwiXG4vLyBUT0RPIG1heWJlIHdlIHNob3VsZCB1c2UgYSBjb21tb24gc3RyaW5nIGhlcmUsIGFuZCByZWx5IG9ubHkgb24gdGhlIG9yaWdpbmFsIGNhdGVnb3J5LlxudmFyIF9maWx0ZXJQcm9wcyA9IGZ1bmN0aW9uKG1vZGVsLCBlZGl0VHlwZSwgbGV2ZWwpIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBwcm9wIGluIG1vZGVsKVxuICAgIGlmICghcHJvcC5tYXRjaCgvXmN1c3RvbVN0eWxlJC8pICYmICFwcm9wLm1hdGNoKC9eXy8pICYmIG1vZGVsLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICB2YXIgaXNTdHlsZVByb3AgPSBtb2RlbFtwcm9wXSAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWxbcHJvcF0uX2NhdGVnb3J5ICE9ICd1bmRlZmluZWQnICYmIG1vZGVsW3Byb3BdLl9jYXRlZ29yeSA9PSAnc3R5bGUnO1xuICAgICAgaWYgKHByb3AgPT0gJ2lkJyB8fCBwcm9wID09ICd0eXBlJyB8fCBwcm9wLm1hdGNoKC9CbG9ja3MkLykpIHt9IGVsc2UgaWYgKGVkaXRUeXBlID09ICdzdHlsZXInKSB7XG4gICAgICAgIGlmIChpc1N0eWxlUHJvcCB8fCBsZXZlbCA+IDApIHJlcy5wdXNoKHByb3ApO1xuICAgICAgfSBlbHNlIGlmIChlZGl0VHlwZSA9PSAnZWRpdCcpIHtcbiAgICAgICAgLy8gRWRpdGluZyBmb3IgcHJvcGVydGllcyBpbiB0aGUgXCJjb250ZW50XCIgY2F0ZWdvcnkgYnV0IG5vdCBkZWZpbmVkIGluIHRoZSBjb250ZXh0IG9mIGEgYmxvY2tcbiAgICAgICAgdmFyIGlzQ29udGVudFByb3AgPSBtb2RlbFtwcm9wXSAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWxbcHJvcF0uX2NhdGVnb3J5ICE9ICd1bmRlZmluZWQnICYmIG1vZGVsW3Byb3BdLl9jYXRlZ29yeSA9PSAnY29udGVudCcgJiZcbiAgICAgICAgICAodHlwZW9mIG1vZGVsW3Byb3BdLl9jb250ZXh0ID09ICd1bmRlZmluZWQnIHx8IG1vZGVsW3Byb3BdLl9jb250ZXh0ICE9ICdibG9jaycpO1xuICAgICAgICBpZiAoaXNDb250ZW50UHJvcCkgcmVzLnB1c2gocHJvcCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlZGl0VHlwZSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXMucHVzaChwcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIHJldHVybiByZXM7XG59O1xuXG52YXIgX3Byb3BJbnB1dCA9IGZ1bmN0aW9uKG1vZGVsLCBwcm9wLCBwcm9wQWNjZXNzb3IsIGVkaXRUeXBlLCB3aWRnZXRzKSB7XG4gIHZhciBodG1sID0gXCJcIjtcbiAgdmFyIHdpZGdldDtcbiAgaWYgKG1vZGVsICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbC5fd2lkZ2V0ICE9ICd1bmRlZmluZWQnKSB3aWRnZXQgPSBtb2RlbC5fd2lkZ2V0O1xuXG4gIGlmICh0eXBlb2Ygd2lkZ2V0ID09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgXCJVbmtub3duIGRhdGEgdHlwZSBmb3IgXCIgKyBwcm9wO1xuICB9XG5cbiAgLy8gRm9yIGNvbnRlbnQgZWRpdG9ycyB3ZSBkZWFsIHdpdGggZm9jdXNpbmcgKGNsaWNraW5nIGlzIGhhbmRsZWQgYnkgdGhlIGNvbnRhaW5lciBESVYpLlxuICB2YXIgb25mb2N1c2JpbmRpbmcgPSAnZm9jdXNhYmxlOiB0cnVlJztcbiAgaWYgKGVkaXRUeXBlID09ICdlZGl0Jykge1xuICAgIG9uZm9jdXNiaW5kaW5nICs9ICcsIGV2ZW50OiB7IGZvY3VzOiBmdW5jdGlvbih1aSwgZXZlbnQpIHsgJCgkZWxlbWVudCkuY2xpY2soKTsgfSB9ICc7XG4gIH1cblxuICBodG1sICs9ICc8bGFiZWwgY2xhc3M9XCJkYXRhLScgKyB3aWRnZXQgKyAnXCInICsgKHdpZGdldCA9PSAnYm9vbGVhbicgPyAnIGRhdGEtYmluZD1cImV2ZW50OiB7IG1vdXNlZG93bjogZnVuY3Rpb24odWksIGV2dCkgeyBpZiAoZXZ0LmJ1dHRvbiA9PSAwKSB7IHZhciBpbnB1dCA9ICQoJGVsZW1lbnQpLmZpbmQoXFwnaW5wdXRcXCcpOyB2YXIgY2ggPSBpbnB1dC5wcm9wKFxcJ2NoZWNrZWRcXCcpOyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBpbnB1dC5jbGljaygpOyBpbnB1dC5wcm9wKFxcJ2NoZWNrZWRcXCcsICFjaCk7IGlucHV0LnRyaWdnZXIoXFwnY2hhbmdlXFwnKTsgfSwgMCk7IH0gfSB9LCBjbGljazogZnVuY3Rpb24odWksIGV2dCkgeyBldnQucHJldmVudERlZmF1bHQoKTsgfSwgY2xpY2tCdWJibGU6IGZhbHNlXCInIDogJycpICsgJz4nO1xuXG4gIGlmICh0eXBlb2Ygd2lkZ2V0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpZGdldHNbd2lkZ2V0XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgdyA9IHdpZGdldHNbd2lkZ2V0XTtcbiAgICB2YXIgcGFyYW1ldGVycyA9IHt9O1xuICAgIGlmICh0eXBlb2Ygdy5wYXJhbWV0ZXJzICE9PSAndW5kZWZpbmVkJylcbiAgICAgIGZvciAodmFyIHAgaW4gdy5wYXJhbWV0ZXJzKVxuICAgICAgICBpZiAody5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KHApICYmIHR5cGVvZiBtb2RlbFsnXycrcF0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgIHBhcmFtZXRlcnNbcF0gPSBtb2RlbFsnXycrcF07XG4gICAgaHRtbCArPSB3Lmh0bWwocHJvcEFjY2Vzc29yLCBvbmZvY3VzYmluZGluZywgcGFyYW1ldGVycyk7XG4gIH0gZWxzZSBpZiAod2lkZ2V0ID09ICdib29sZWFuJykge1xuICAgIGh0bWwgKz0gJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiB2YWx1ZT1cIm5vdGhpbmdcIiBkYXRhLWJpbmQ9XCJjaGVja2VkOiAnICsgcHJvcEFjY2Vzc29yICsgJywgJyArIG9uZm9jdXNiaW5kaW5nICsgJ1wiIC8+JztcbiAgICBodG1sICs9ICc8c3BhbiBjbGFzcz1cImNoZWNrYm94LXJlcGxhY2VyXCIgPjwvc3Bhbj4nOyAvKiBkYXRhLWJpbmQ9XCJjc3M6IHsgY2hlY2tlZDogJytwcm9wQWNjZXNzb3IrJyB9XCIgKi9cbiAgfSBlbHNlIGlmICh3aWRnZXQgPT0gJ2NvbG9yJykge1xuICAgIGh0bWwgKz0gJzxpbnB1dCBzaXplPVwiN1wiIHR5cGU9XCJ0ZXh0XCIgZGF0YS1iaW5kPVwiY29sb3JwaWNrZXI6IHsgY29sb3I6ICcgKyBwcm9wQWNjZXNzb3IgKyAnLCBzdHJpbmdzOiAkcm9vdC50KFxcJ1RoZW1lIENvbG9ycyxTdGFuZGFyZCBDb2xvcnMsV2ViIENvbG9ycyxUaGVtZSBDb2xvcnMsQmFjayB0byBQYWxldHRlLEhpc3RvcnksTm8gaGlzdG9yeSB5ZXQuXFwnKSB9LCAnICsgJywgJyArIG9uZm9jdXNiaW5kaW5nICsgJ1wiIC8+JztcbiAgfSBlbHNlIGlmICh3aWRnZXQgPT0gJ3NlbGVjdCcpIHtcbiAgICBpZiAodHlwZW9mIG1vZGVsLl9vcHRpb25zICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgb3B0cyA9IF9nZXRPcHRpb25zT2JqZWN0KG1vZGVsLl9vcHRpb25zKTtcbiAgICAgIC8vIHZhciBvcHRzID0gbW9kZWwuX29wdGlvbnM7XG4gICAgICBodG1sICs9ICc8c2VsZWN0IGRhdGEtYmluZD1cInZhbHVlOiAnICsgcHJvcEFjY2Vzc29yICsgJywgJyArIG9uZm9jdXNiaW5kaW5nICsgJ1wiPic7XG4gICAgICBmb3IgKHZhciBvcHQgaW4gb3B0cylcbiAgICAgICAgaWYgKG9wdHMuaGFzT3duUHJvcGVydHkob3B0KSkge1xuICAgICAgICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgb3B0ICsgJ1wiIGRhdGEtYmluZD1cInRleHQ6ICRyb290LnV0KFxcJ3RlbXBsYXRlXFwnLCBcXCcnICsgdXRpbHMuYWRkU2xhc2hlcyhvcHRzW29wdF0pICsgJ1xcJylcIj4nICsgb3B0c1tvcHRdICsgJzwvb3B0aW9uPic7XG4gICAgICAgIH1cbiAgICAgIGh0bWwgKz0gJzwvc2VsZWN0Pic7XG4gICAgfVxuICB9IGVsc2UgaWYgKHdpZGdldCA9PSAnZm9udCcpIHtcbiAgICBodG1sICs9ICc8c2VsZWN0IHR5cGU9XCJ0ZXh0XCIgZGF0YS1iaW5kPVwidmFsdWU6ICcgKyBwcm9wQWNjZXNzb3IgKyAnLCAnICsgb25mb2N1c2JpbmRpbmcgKyAnXCI+JztcbiAgICBodG1sICs9ICc8b3B0Z3JvdXAgbGFiZWw9XCJTYW5zLVNlcmlmIEZvbnRzXCI+JztcbiAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiQXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWZcIj5BcmlhbDwvb3B0aW9uPic7XG4gICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIlxcJ0NvbWljIFNhbnMgTVNcXCcsY3Vyc2l2ZSxzYW5zLXNlcmlmXCI+Q29taWMgU2FucyBNUzwvb3B0aW9uPic7XG4gICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIkltcGFjdCxDaGFyY29hbCxzYW5zLXNlcmlmXCI+SW1wYWN0PC9vcHRpb24+JztcbiAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiXFwnVHJlYnVjaGV0IE1TXFwnLEhlbHZldGljYSxzYW5zLXNlcmlmXCI+VHJlYnVjaGV0IE1TPC9vcHRpb24+JztcbiAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZlwiPlZlcmRhbmE8L29wdGlvbj4nO1xuICAgIGh0bWwgKz0gJzwvb3B0Z3JvdXA+JztcbiAgICBodG1sICs9ICc8b3B0Z3JvdXAgbGFiZWw9XCJTZXJpZiBGb250c1wiPic7XG4gICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIkdlb3JnaWEsc2VyaWZcIj5HZW9yZ2lhPC9vcHRpb24+JztcbiAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiXFwnVGltZXMgTmV3IFJvbWFuXFwnLFRpbWVzLHNlcmlmXCI+VGltZXMgTmV3IFJvbWFuPC9vcHRpb24+JztcbiAgICBodG1sICs9ICc8L29wdGdyb3VwPic7XG4gICAgaHRtbCArPSAnPG9wdGdyb3VwIGxhYmVsPVwiTW9ub3NwYWNlIEZvbnRzXCI+JztcbiAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiXFwnQ291cmllciBOZXdcXCcsQ291cmllcixtb25vc3BhY2VcIj5Db3VyaWVyIE5ldzwvb3B0aW9uPic7XG4gICAgaHRtbCArPSAnPC9vcHRncm91cD4nO1xuICAgIGh0bWwgKz0gJzwvc2VsZWN0Pic7XG4gIH0gZWxzZSBpZiAod2lkZ2V0ID09ICd1cmwnKSB7XG4gICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInVpLXRleHRidXR0b25cIj4nO1xuICAgIC8vIDxhIGNsYXNzPVwidWktc3Bpbm5lci1idXR0b24gdWktc3Bpbm5lci1kb3duIHVpLWNvcm5lci1iciB1aS1idXR0b24gdWktd2lkZ2V0IHVpLXN0YXRlLWRlZmF1bHQgdWktYnV0dG9uLXRleHQtb25seVwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiYnV0dG9uXCI+PHNwYW4gY2xhc3M9XCJ1aS1idXR0b24tdGV4dFwiPjxzcGFuIGNsYXNzPVwidWktaWNvbiBmYSBmYS1mdyBjYXJldC1kb3duXCI+4pa8PC9zcGFuPjwvc3Bhbj48L2E+XG4gICAgaHRtbCArPSAnPGlucHV0IGNsYXNzPVwidWktdGV4dGJ1dHRvbi1pbnB1dFwiIHNpemU9XCI3XCIgdHlwZT1cInVybFwiIHBhdHRlcm49XCIobWFpbHRvOi4rQC4rfGh0dHBzPzovLy4rXFxcXC4uK3xcXFxcWy4qXFxcXF0uKilcIiB2YWx1ZT1cIm5vdGhpbmdcIiBkYXRhLWJpbmQ9XCJjc3M6IHsgd2l0aEJ1dHRvbjogdHlwZW9mICRyb290LmxpbmtEaWFsb2cgIT09IFxcJ3VuZGVmaW5lZFxcJyB9LCB2YWxpZGF0ZWRWYWx1ZTogJyArIHByb3BBY2Nlc3NvciArICcsICcgKyBvbmZvY3VzYmluZGluZyArICdcIiAvPic7XG4gICAgaHRtbCArPSAnPGEgY2xhc3M9XCJ1aS10ZXh0YnV0dG9uLWJ1dHRvblwiIGRhdGEtYmluZD1cInZpc2libGU6IHR5cGVvZiAkcm9vdC5saW5rRGlhbG9nICE9PSBcXCd1bmRlZmluZWRcXCcsIGNsaWNrOiB0eXBlb2YgJHJvb3QubGlua0RpYWxvZyAhPT0gXFwndW5kZWZpbmVkXFwnID8gJHJvb3QubGlua0RpYWxvZy5iaW5kKCRlbGVtZW50LnByZXZpb3VzU2libGluZykgOiBmYWxzZSwgYnV0dG9uOiB7IGljb25zOiB7IHByaW1hcnk6IFxcJ2ZhIGZhLWZ3IGZhLWVsbGlwc2lzLWhcXCcgfSwgbGFiZWw6IFxcJ09wemlvbmlcXCcsIHRleHQ6IGZhbHNlIH1cIj5PcHppb25pPC9hPic7XG4gICAgaHRtbCArPSAnPC9kaXY+JztcbiAgfSBlbHNlIGlmICh3aWRnZXQgPT0gJ2ludGVnZXInKSB7XG4gICAgLy8gYXQgdGhpcyB0aW1lIHRoZSBcInN0ZXBcIiBkZXBlbmRzIG9uIG1heCBiZWluZyBncmVhdGVyIHRoYW4gMTAwLlxuICAgIC8vIG1heWJlIHdlIHNob3VsZCBleHBvc2UgXCJzdGVwXCIgYXMgYSBjb25maWd1cmF0aW9uLCB0b29cbiAgICB2YXIgbWluID0gMDtcbiAgICB2YXIgbWF4ID0gMTAwMDtcbiAgICBpZiAobW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLl9tYXggIT09ICd1bmRlZmluZWQnKSBtYXggPSBtb2RlbC5fbWF4O1xuICAgIGlmIChtb2RlbCAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWwuX21pbiAhPT0gJ3VuZGVmaW5lZCcpIG1pbiA9IG1vZGVsLl9taW47XG4gICAgdmFyIHN0ZXAgPSAobWF4IC0gbWluKSA+PSAxMDAgPyAxMCA6IDE7XG4gICAgdmFyIHBhZ2UgPSBzdGVwICogNTtcbiAgICBodG1sICs9ICc8aW5wdXQgY2xhc3M9XCJudW1iZXItc3Bpbm5lclwiIHNpemU9XCI3XCIgc3RlcD1cIicgKyBzdGVwICsgJ1wiIHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIi0xXCIgZGF0YS1iaW5kPVwic3Bpbm5lcjogeyBtaW46ICcgKyBtaW4gKyAnLCBtYXg6ICcgKyBtYXggKyAnLCBwYWdlOiAnICsgcGFnZSArICcsIHZhbHVlOiAnICsgcHJvcEFjY2Vzc29yICsgJyB9LCB2YWx1ZVVwZGF0ZTogW1xcJ2NoYW5nZVxcJywgXFwnc3BpblxcJ10nICsgJywgJyArIG9uZm9jdXNiaW5kaW5nICsgJ1wiIC8+JztcbiAgfSBlbHNlIHtcbiAgICBodG1sICs9ICc8aW5wdXQgc2l6ZT1cIjdcIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwibm90aGluZ1wiIGRhdGEtYmluZD1cInZhbHVlOiAnICsgcHJvcEFjY2Vzc29yICsgJywgJyArIG9uZm9jdXNiaW5kaW5nICsgJ1wiIC8+JztcbiAgfVxuXG4gIGh0bWwgKz0gJzwvbGFiZWw+JztcblxuICByZXR1cm4gaHRtbDtcbn07XG5cbnZhciBfZ2V0R2xvYmFsU3R5bGVQcm9wID0gZnVuY3Rpb24oZ2xvYmFsU3R5bGVzLCBtb2RlbCwgcHJvcCwgcGF0aCkge1xuICB2YXIgZ2xvYmFsU3R5bGVQcm9wO1xuICBpZiAodHlwZW9mIG1vZGVsICE9PSAnb2JqZWN0JyB8fCBtb2RlbCA9PT0gbnVsbCB8fCB0eXBlb2YgbW9kZWwuX3dpZGdldCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIHByb3AgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwYXRoICE9PSAndW5kZWZpbmVkJyAmJiBwYXRoLmxlbmd0aCA+IDAgJiYgdHlwZW9mIGdsb2JhbFN0eWxlcyA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgZ2xvYmFsU3R5bGVzW3BhdGhdICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICBnbG9iYWxTdHlsZVByb3AgPSBnbG9iYWxTdHlsZXNbcGF0aF07XG4gICAgfVxuICB9XG4gIHJldHVybiBnbG9iYWxTdHlsZVByb3A7XG59O1xuXG52YXIgX3Byb3BFZGl0b3IgPSBmdW5jdGlvbih3aXRoQmluZGluZ1Byb3ZpZGVyLCB3aWRnZXRzLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgbW9kZWwsIHRoZW1lTW9kZWwsIHBhdGgsIHByb3AsIGVkaXRUeXBlLCBsZXZlbCwgYmFzZVRocmVzaG9sZCwgZ2xvYmFsU3R5bGVzLCBnbG9iYWxTdHlsZVByb3AsIHRyYWNrVXNhZ2UsIHJvb3RQcmV2aWV3QmluZGluZywgcHJldmlld0JhY2tncm91bmQpIHtcbiAgaWYgKHR5cGVvZiBsZXZlbCA9PSAndW5kZWZpbmVkJykgbGV2ZWwgPSAwO1xuXG4gIGlmICh0eXBlb2YgcHJvcCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZGVsID09ICdvYmplY3QnICYmIG1vZGVsICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbC5fdXNlY291bnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc29sZS5sb2coXCJUT0RPIEVESVRPUiBpZ25vcmluZ1wiLCBwYXRoLCBcInByb3BlcnR5IGJlY2F1c2UgaXQgaXMgbm90IHVzZWQgYnkgdGhlIHRlbXBsYXRlXCIsIFwicHJvcDpcIiwgcHJvcCwgXCJ0eXBlOlwiLCBlZGl0VHlwZSwgXCJsZXZlbDpcIiwgbGV2ZWwsIHdpdGhCaW5kaW5nUHJvdmlkZXIuX3RlbXBsYXRlTmFtZSk7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICB2YXIgcHJvcEFjY2Vzc29yID0gdHlwZW9mIGdsb2JhbFN0eWxlUHJvcCAhPSAndW5kZWZpbmVkJyA/IHByb3AgKyAnLl9kZWZhdWx0Q29tcHV0ZWQnIDogcHJvcDtcblxuICB2YXIgaHRtbCA9IFwiXCI7XG4gIHZhciB0aXRsZTtcbiAgdmFyIGlmU3Vic1Byb3AgPSBwcm9wQWNjZXNzb3I7XG4gIHZhciBpZlN1YnNHdXR0ZXIgPSAxO1xuICAvLyB0eXBlb2YgZ2xvYmFsU3R5bGVQcm9wICE9ICd1bmRlZmluZWQnID8gMSA6IDI7XG4gIHZhciBpZlN1YnNUaHJlc2hvbGQgPSAxO1xuXG4gIC8vIFRoZSB2aXNpYmlsaXR5IGhhbmRsaW5nIGlzIGEgUElUQVxuICAvLyBcbiAgLy8gSGVyZSBhcmUgc29tZSBcImVkZ2UgY2FzZXNcIiB0byB0ZXN0IHdoZW5ldmVyIHdlIGNoYW5nZSBzb21ldGhpbmcgaGVyZTpcbiAgLy8gTE0gc29jaWFsIGZvb3RlcjogcmVtb3Zpbmcgc2hhcmVWaXNpYmlsZSBtdXN0IGJlIHJlZmxlY3RlZCBpbiB0aGUgYm9vbGVhbnMgc3ViLWNoZWNrc1xuICAvLyBGTFVJRCBzb2NpYWwgYmxvY2s6IG11bHRpcGxlIGNsaWNrcyBvbiB0aGUgXCJ3YW5kXCIgc2hvdWxkIG5vdCBtYWtlIHRoZSBlZGl0b3IgaW52aXNpYmxlXG4gIC8vIEJJUyBoZXJvTWVudSAtIEJ5IGNoYW5naW5nIHRoZSBtZW51IHZpc2liaWxpdHkgaXQgc2hvdWxkIGJlIHJlZmxlY3RlZCBpbiBzdHlsZSBlZGl0b3JzIGZvciB0aGUgbWVudSBsaW5rc1xuICAvLyBGTFVJRCBhbG1vc3QgZXZlcnkgYmxvY2sgd2l0aCBhIGNvbG9yIHZhcmlhbnQgc29tZXRpbWVzIGtlZXBzIHNob3dpbmcgc3R5bGUgZWRpdG9yIGZvciB0aGUgaGlkZGVuIHZhcmlhbnQuXG4gIGlmICh0eXBlb2YgbW9kZWwgPT0gJ29iamVjdCcgJiYgbW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLl93aWRnZXQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBEbyBub3RoaW5nIGhlcmVcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFN0eWxlUHJvcCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWZTdWJzR3V0dGVyICs9IDE7XG4gICAgfVxuICB9XG5cbiAgLy8gTk9URSBiYXNlVGhyZXNob2xkIGlzIGFkZGVkIG9ubHkgd2hlbiBnbG9iYWxTdHlsZSBpcyBub3QgZGVmaW5lZCBiZWNhdXNlIHdoZW4gd2UgaGF2ZSBnbG9iYWxTdHlsZVxuICAvLyB3ZSdyZSBnb2luZyB0byBiaW5kIHRoZSBjb21wdXRlZCB2YWx1ZXMgYW5kIG5vdCB0aGUgb3JpZ2luYWwgYW5kIHRoaXMgd2F5IHdlIGRvbid0IGFkZCBvdXJzZXJmIHRvIHRoZSBkZXBlbmRlbmN5IFxuICAvLyB0cmFja2luZyAoc3Vic2NyaXB0aW9uQ291bnQpXG4gIC8vIE5PVEUgYmFzZVRocmVzaG9sZCBpcyBhbiBcImV4cHJlc3Npb25cIiBhbmQgbm90IGEgZml4ZWQgbnVtYmVyLCBzbyB0aGlzIGlzIGEgY29uY2F0ZW5hdGlvblxuICBpZiAodHlwZW9mIGdsb2JhbFN0eWxlUHJvcCA9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgYmFzZVRocmVzaG9sZCAhPT0gJ3VuZGVmaW5lZCcpIGlmU3Vic1RocmVzaG9sZCArPSBiYXNlVGhyZXNob2xkO1xuXG4gIGlmICh0eXBlb2YgcHJvcCAhPSAndW5kZWZpbmVkJyAmJiAhIXRyYWNrVXNhZ2UpIHtcbiAgICBodG1sICs9ICc8IS0tIGtvIGlmU3ViczogeyBkYXRhOiAnICsgaWZTdWJzUHJvcCArICcsIHRocmVzaG9sZDogJyArIGlmU3Vic1RocmVzaG9sZCArICcsIGd1dHRlcjogJyArIGlmU3Vic0d1dHRlciArICcgfSAtLT4nO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwcm9wICE9ICd1bmRlZmluZWQnICYmIChtb2RlbCA9PT0gbnVsbCB8fCB0eXBlb2YgbW9kZWwuX25hbWUgPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgLy8gVE9ETyB0aHJvdyBleGNlcHRpb24/XG4gICAgY29uc29sZS5sb2coXCJUT0RPIFdBUk4gTWlzc2luZyBsYWJlbCBmb3IgcHJvcGVydHkgXCIsIHByb3ApO1xuICB9XG4gIGlmICh0eXBlb2YgcHJvcCA9PSAndW5kZWZpbmVkJyAmJiBtb2RlbCAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWwuX25hbWUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLmxvZyhcIlRPRE8gV0FSTiBNaXNzaW5nIGxhYmVsIGZvciBvYmplY3QgXCIsIG1vZGVsLnR5cGUgLyosIG1vZGVsICovICk7XG4gIH1cblxuICBpZiAodHlwZW9mIG1vZGVsID09ICdvYmplY3QnICYmIG1vZGVsICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbC5fd2lkZ2V0ID09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHByb3BzID0gX2ZpbHRlclByb3BzKG1vZGVsLCBlZGl0VHlwZSwgbGV2ZWwpO1xuXG4gICAgdmFyIGhhc0N1c3RvbVN0eWxlID0gZWRpdFR5cGUgPT0gJ3N0eWxlcicgJiYgbW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLmN1c3RvbVN0eWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZ2xvYmFsU3R5bGVQcm9wICE9PSAndW5kZWZpbmVkJztcbiAgICB2YXIgc2VsZWN0ZWRJdGVtQmluZGluZyA9ICcnO1xuICAgIHZhciBhZGRpdGlvbmFsQ2xhc3NlcyA9ICcnO1xuICAgIGlmICh0eXBlb2YgcHJvcCAhPT0gJ3VuZGVmaW5lZCcgJiYgZWRpdFR5cGUgPT0gJ2VkaXQnKSB7XG4gICAgICBzZWxlY3RlZEl0ZW1CaW5kaW5nID0gJywgY2xpY2s6IGZ1bmN0aW9uKG9iaiwgZXZ0KSB7ICRyb290LnNlbGVjdEl0ZW0oJyArIHByb3AgKyAnLCAkZGF0YSk7IHJldHVybiBmYWxzZSB9LCBjbGlja0J1YmJsZTogZmFsc2UsIGNzczogeyBzZWxlY3RlZGl0ZW06ICRyb290LmlzU2VsZWN0ZWRJdGVtKCcgKyBwcm9wICsgJykgfSwgc2Nyb2xsSW50b1ZpZXc6ICRyb290LmlzU2VsZWN0ZWRJdGVtKCcgKyBwcm9wICsgJyksICc7XG4gICAgICBhZGRpdGlvbmFsQ2xhc3NlcyArPSAnIHNlbGVjdGFibGUnO1xuICAgIH1cbiAgICBpZiAoaGFzQ3VzdG9tU3R5bGUpIHtcbiAgICAgIGFkZGl0aW9uYWxDbGFzc2VzICs9ICcgc3VwcG9ydHNDdXN0b21TdHlsZXMnO1xuICAgIH1cbiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwib2JqRWRpdCBsZXZlbCcgKyBsZXZlbCArIGFkZGl0aW9uYWxDbGFzc2VzICsgJ1wiIGRhdGEtYmluZD1cInRvb2x0aXBzOiB7fScgKyBzZWxlY3RlZEl0ZW1CaW5kaW5nICsgJ1wiPic7XG4gICAgdmFyIG1vZGVsTmFtZSA9IChtb2RlbCAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWwuX25hbWUgIT0gJ3VuZGVmaW5lZCcgPyBtb2RlbC5fbmFtZSA6ICh0eXBlb2YgcHJvcCAhPT0gJ3VuZGVmaW5lZCcgPyAnWycgKyBwcm9wICsgJ10nIDogJycpKTtcbiAgICBpZiAoaGFzQ3VzdG9tU3R5bGUpIHtcbiAgICAgIHZhciB0aGVtZVNlY3Rpb25OYW1lID0gJ1N0aWxlJztcbiAgICAgIGlmICh0eXBlb2YgdGhlbWVNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhlbWVNb2RlbCAhPT0gbnVsbCAmJiB0eXBlb2YgdGhlbWVNb2RlbC5fbmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhlbWVTZWN0aW9uTmFtZSA9IHRoZW1lTW9kZWwuX25hbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRPRE8gbWlzc2luZyBsYWJlbCBmb3IgdGhlbWUgc2VjdGlvbiBcIiwgcHJvcCwgbW9kZWwgIT09IG51bGwgPyBtb2RlbC50eXBlIDogJy0nKTtcbiAgICAgIH1cblxuICAgICAgbW9kZWxOYW1lID0gJzxzcGFuIGNsYXNzPVwiYmxvY2tTZWxlY3Rpb25NZXRob2RcIiBkYXRhLWJpbmQ9XCJ0ZXh0OiBjdXN0b21TdHlsZSgpID8gJHJvb3QudXQoXFwndGVtcGxhdGVcXCcsIFxcJycgKyB1dGlscy5hZGRTbGFzaGVzKG1vZGVsTmFtZSkgKyAnXFwnKSA6ICRyb290LnV0KFxcJ3RlbXBsYXRlXFwnLCBcXCcnICsgdXRpbHMuYWRkU2xhc2hlcyh0aGVtZVNlY3Rpb25OYW1lKSArICdcXCcpXCI+QmxvY2s8L3NwYW4+JztcbiAgICB9IGVsc2Uge1xuICAgICAgbW9kZWxOYW1lID0gJzxzcGFuIGRhdGEtYmluZD1cInRleHQ6ICRyb290LnV0KFxcJ3RlbXBsYXRlXFwnLCBcXCcnICsgdXRpbHMuYWRkU2xhc2hlcyhtb2RlbE5hbWUpICsgJ1xcJylcIj4nICsgbW9kZWxOYW1lICsgJzwvc3Bhbj4nO1xuICAgIH1cbiAgICB0aXRsZSA9IG1vZGVsICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbC5faGVscCAhPT0gJ3VuZGVmaW5lZCcgPyAnIHRpdGxlPVwiJyArIHV0aWxzLmFkZFNsYXNoZXMobW9kZWwuX2hlbHApICsgJ1wiIGRhdGEtYmluZD1cImF0dHI6IHsgdGl0bGU6ICRyb290LnV0KFxcJ3RlbXBsYXRlXFwnLCBcXCcnICsgdXRpbHMuYWRkU2xhc2hlcyhtb2RlbC5faGVscCkgKyAnXFwnKSB9XCInIDogJyc7XG4gICAgaHRtbCArPSAnPHNwYW4nICsgdGl0bGUgKyAnIGNsYXNzPVwib2JqTGFiZWwgbGV2ZWwnICsgbGV2ZWwgKyAnXCI+JyArIG1vZGVsTmFtZSArICc8L3NwYW4+JztcblxuICAgIGlmIChlZGl0VHlwZSA9PSAnZWRpdCcgJiYgdHlwZW9mIG1vZGVsLl9ibG9ja0Rlc2NyaXB0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImJsb2NrRGVzY3JpcHRpb25cIiBkYXRhLWJpbmQ9XCJodG1sOiAkcm9vdC51dChcXCd0ZW1wbGF0ZVxcJywgXFwnJyArIHV0aWxzLmFkZFNsYXNoZXMobW9kZWwuX2Jsb2NrRGVzY3JpcHRpb24pICsgJ1xcJylcIj4nICsgbW9kZWwuX2Jsb2NrRGVzY3JpcHRpb24gKyAnPC9kaXY+JztcbiAgICB9XG5cbiAgICAvKiBDVVNUT00gU1RZTEUgKi9cbiAgICBpZiAoaGFzQ3VzdG9tU3R5bGUpIHtcbiAgICAgIGh0bWwgKz0gJzxsYWJlbCBjbGFzcz1cImRhdGEtYm9vbGVhbiBibG9ja0NoZWNrXCIgZGF0YS1iaW5kPVwidG9vbHRpcHM6IHsgfVwiPic7XG4gICAgICBodG1sICs9ICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgdmFsdWU9XCJub3RoaW5nXCIgZGF0YS1iaW5kPVwiZm9jdXNhYmxlOiB0cnVlLCBjaGVja2VkOiBjdXN0b21TdHlsZVwiIC8+JztcbiAgICAgIGh0bWwgKz0gJzxzcGFuIHRpdGxlPVwiU3dpdGNoIGJldHdlZW4gZ2xvYmFsIGFuZCBibG9jayBsZXZlbCBzdHlsZXMgZWRpdGluZ1wiIGRhdGEtYmluZD1cImF0dHI6IHsgdGl0bGU6ICRyb290LnQoXFwnU3dpdGNoIGJldHdlZW4gZ2xvYmFsIGFuZCBibG9jayBsZXZlbCBzdHlsZXMgZWRpdGluZ1xcJykgfVwiIGNsYXNzPVwiY2hlY2tib3gtcmVwbGFjZXIgY2hlY2tib3gtcmVwbGFjZXItb25vZmZcIj48L3NwYW4+JzsgLy8gIGRhdGEtYmluZD1cInRvb2x0aXA6IHsgY29udGVudDogXFwncGVyc29uYWxpenphIHR1dHRpXFwnIH1cIlxuICAgICAgaHRtbCArPSAnPC9sYWJlbD4nO1xuICAgICAgaHRtbCArPSAnPCEtLSBrbyB0ZW1wbGF0ZTogeyBuYW1lOiBcXCdjdXN0b21zdHlsZVxcJywgaWY6IGN1c3RvbVN0eWxlIH0gLS0+PCEtLSAva28gLS0+JztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHByb3AgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGh0bWwgKz0gJzwhLS0ga28gd2l0aDogJyArIHByb3AgKyAnIC0tPic7XG5cbiAgICAgIC8qIFBSRVZJRVcgKi9cbiAgICAgIGlmIChsZXZlbCA9PSAxICYmIHR5cGVvZiBwcm9wICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbW9kZWwuX3ByZXZpZXdCaW5kaW5ncyAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2l0aEJpbmRpbmdQcm92aWRlciAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygcm9vdFByZXZpZXdCaW5kaW5nICE9ICd1bmRlZmluZWQnKSBodG1sICs9ICc8IS0tIGtvIHdpdGg6ICRyb290LmNvbnRlbnQoKSAtLT48ZGl2IGNsYXNzPVwib2JqUHJldmlld1wiIGRhdGEtYmluZD1cIicgKyByb290UHJldmlld0JpbmRpbmcgKyAnXCI+PC9kaXY+PCEtLSAva28gLS0+JztcbiAgICAgICAgICBpZiAodHlwZW9mIHByZXZpZXdCYWNrZ3JvdW5kICE9ICd1bmRlZmluZWQnKSBodG1sICs9ICc8IS0tIGtvIHdpdGg6ICRwYXJlbnQgLS0+PGRpdiBjbGFzcz1cIm9ialByZXZpZXdcIiBkYXRhLWJpbmQ9XCInICsgcHJldmlld0JhY2tncm91bmQgKyAnXCI+PC9kaXY+PCEtLSAva28gLS0+JztcbiAgICAgICAgICB2YXIgcHJldmlld0JpbmRpbmdzID0gZWxhYm9yYXRlRGVjbGFyYXRpb25zKHVuZGVmaW5lZCwgbW9kZWwuX3ByZXZpZXdCaW5kaW5ncywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHdpdGhCaW5kaW5nUHJvdmlkZXIuYmluZCh0aGlzLCBwYXRoICsgJy4nKSk7XG4gICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cIm9ialByZXZpZXdcIj48ZGl2IGNsYXNzPVwib2JqUHJldmlld0lubmVyXCIgZGF0YS1iaW5kPVwiJyArIHByZXZpZXdCaW5kaW5ncyArICdcIj48L2Rpdj48L2Rpdj4nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogUFJFVklFVyAqL1xuICAgIHZhciBwcmV2aWV3Qkc7XG4gICAgaWYgKGxldmVsID09PSAwKSB7XG4gICAgICBpZiAodHlwZW9mIG1vZGVsLl9wcmV2aWV3QmluZGluZ3MgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJldmlld0JHID0gZWxhYm9yYXRlRGVjbGFyYXRpb25zKHVuZGVmaW5lZCwgbW9kZWwuX3ByZXZpZXdCaW5kaW5ncywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHdpdGhCaW5kaW5nUHJvdmlkZXIuYmluZCh0aGlzLCBwYXRoLmxlbmd0aCA+IDAgPyBwYXRoICsgJy4nIDogJycpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaSwgbmV3UGF0aDtcblxuICAgIHZhciBiZWZvcmUgPSBodG1sLmxlbmd0aDtcblxuICAgIHZhciBuZXdUaGVtZU1vZGVsO1xuICAgIHZhciBuZXdHbG9iYWxTdHlsZVByb3A7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5ld1BhdGggPSBwYXRoLmxlbmd0aCA+IDAgPyBwYXRoICsgXCIuXCIgKyBwcm9wc1tpXSA6IHByb3BzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBtb2RlbFtwcm9wc1tpXV0gIT0gJ29iamVjdCcgfHwgbW9kZWxbcHJvcHNbaV1dID09PSBudWxsIHx8IHR5cGVvZiBtb2RlbFtwcm9wc1tpXV0uX3dpZGdldCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICBuZXdHbG9iYWxTdHlsZVByb3AgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChsZXZlbCA9PT0gMCAmJiBwcm9wc1tpXSA9PSAndGhlbWUnKVxuICAgICAgICAgIGh0bWwgKz0gX3Byb3BFZGl0b3Iod2l0aEJpbmRpbmdQcm92aWRlciwgd2lkZ2V0cywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIG1vZGVsW3Byb3BzW2ldXSwgbmV3VGhlbWVNb2RlbCwgbmV3UGF0aCwgcHJvcHNbaV0sIGVkaXRUeXBlLCAwLCBiYXNlVGhyZXNob2xkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJhY2tVc2FnZSwgcm9vdFByZXZpZXdCaW5kaW5nKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbmV3R2xvYmFsU3R5bGVQcm9wID0gX2dldEdsb2JhbFN0eWxlUHJvcChnbG9iYWxTdHlsZXMsIG1vZGVsW3Byb3BzW2ldXSwgcHJvcHNbaV0sIG5ld1BhdGgpO1xuICAgICAgICAgIGh0bWwgKz0gX3Byb3BFZGl0b3Iod2l0aEJpbmRpbmdQcm92aWRlciwgd2lkZ2V0cywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIG1vZGVsW3Byb3BzW2ldXSwgbmV3VGhlbWVNb2RlbCwgbmV3UGF0aCwgcHJvcHNbaV0sIGVkaXRUeXBlLCBsZXZlbCArIDEsIGJhc2VUaHJlc2hvbGQsIGdsb2JhbFN0eWxlcywgbmV3R2xvYmFsU3R5bGVQcm9wLCB0cmFja1VzYWdlLCByb290UHJldmlld0JpbmRpbmcsIHByZXZpZXdCRyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBuZXdQYXRoID0gcGF0aC5sZW5ndGggPiAwID8gcGF0aCArIFwiLlwiICsgcHJvcHNbaV0gOiBwcm9wc1tpXTtcbiAgICAgIGlmICghKHR5cGVvZiBtb2RlbFtwcm9wc1tpXV0gIT0gJ29iamVjdCcgfHwgbW9kZWxbcHJvcHNbaV1dID09PSBudWxsIHx8IHR5cGVvZiBtb2RlbFtwcm9wc1tpXV0uX3dpZGdldCAhPSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgbmV3R2xvYmFsU3R5bGVQcm9wID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAobGV2ZWwgPT09IDAgJiYgcHJvcHNbaV0gPT0gJ3RoZW1lJylcbiAgICAgICAgICBodG1sICs9IF9wcm9wRWRpdG9yKHdpdGhCaW5kaW5nUHJvdmlkZXIsIHdpZGdldHMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBtb2RlbFtwcm9wc1tpXV0sIG5ld1RoZW1lTW9kZWwsIG5ld1BhdGgsIHByb3BzW2ldLCBlZGl0VHlwZSwgMCwgYmFzZVRocmVzaG9sZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRyYWNrVXNhZ2UsIHJvb3RQcmV2aWV3QmluZGluZyk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIG5ld0dsb2JhbFN0eWxlUHJvcCA9IF9nZXRHbG9iYWxTdHlsZVByb3AoZ2xvYmFsU3R5bGVzLCBtb2RlbFtwcm9wc1tpXV0sIHByb3BzW2ldLCBuZXdQYXRoKTtcbiAgICAgICAgICBodG1sICs9IF9wcm9wRWRpdG9yKHdpdGhCaW5kaW5nUHJvdmlkZXIsIHdpZGdldHMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBtb2RlbFtwcm9wc1tpXV0sIG5ld1RoZW1lTW9kZWwsIG5ld1BhdGgsIHByb3BzW2ldLCBlZGl0VHlwZSwgbGV2ZWwgKyAxLCBiYXNlVGhyZXNob2xkLCBnbG9iYWxTdHlsZXMsIG5ld0dsb2JhbFN0eWxlUHJvcCwgdHJhY2tVc2FnZSwgcm9vdFByZXZpZXdCaW5kaW5nLCBwcmV2aWV3QkcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGFkZGVkID0gaHRtbC5sZW5ndGggLSBiZWZvcmU7XG4gICAgaWYgKGFkZGVkID09PSAwKSB7XG4gICAgICAvLyBObyBlZGl0YWJsZSBjb250ZW50OiBpZiB0aGlzIGlzIGluIGNvbnRleHQgXCJ0ZW1wbGF0ZVwiIHdlIGxlYXZlIGl0IGVtcHR5LCBvdGhlcndpc2Ugd2Ugc2hvdyBhbiBoZWxwLlxuICAgICAgaWYgKHR5cGVvZiBtb2RlbCA9PSAnb2JqZWN0JyAmJiBtb2RlbCAhPT0gbnVsbCAmJiBtb2RlbC5fY29udGV4dCA9PSAndGVtcGxhdGUnKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRPRE8gbW92ZSBtZSB0byBhIHRtcGw/XG4gICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJvYmpFbXB0eVwiIGRhdGEtYmluZD1cImh0bWw6ICRyb290LnQoXFwnU2VsZWN0ZWQgZWxlbWVudCBoYXMgbm8gZWRpdGFibGUgcHJvcGVydGllc1xcJylcIj5TZWxlY3RlZCBlbGVtZW50IGhhcyBubyBlZGl0YWJsZSBwcm9wZXJ0aWVzPC9kaXY+JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHByb3AgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGh0bWwgKz0gJzwhLS0gL2tvIC0tPic7XG4gICAgfVxuICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgfSBlbHNlIHtcbiAgICB2YXIgY2hlY2tib3hlcyA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIGdsb2JhbFN0eWxlcyA9PSAndW5kZWZpbmVkJykgY2hlY2tib3hlcyA9IGZhbHNlO1xuXG4gICAgaWYgKG1vZGVsID09PSBudWxsIHx8IHR5cGVvZiBtb2RlbCAhPSAnb2JqZWN0JyB8fCB0eXBlb2YgbW9kZWwuX3dpZGdldCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIGJpbmRpbmdzID0gW107XG5cbiAgICAgIGlmICh0eXBlb2YgZ2xvYmFsU3R5bGVQcm9wICE9ICd1bmRlZmluZWQnKSBiaW5kaW5ncy5wdXNoKCdjc3M6IHsgbm90bnVsbDogJyArIHByb3AgKyAnKCkgIT09IG51bGwgfScpO1xuICAgICAgdGl0bGUgPSBtb2RlbCAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWwuX2hlbHAgIT09ICd1bmRlZmluZWQnID8gJyB0aXRsZT1cIicgKyB1dGlscy5hZGRTbGFzaGVzKG1vZGVsLl9oZWxwKSArICdcIiBkYXRhLWJpbmQ9XCJhdHRyOiB7IHRpdGxlOiAkcm9vdC51dChcXCd0ZW1wbGF0ZVxcJywgXFwnJyArIHV0aWxzLmFkZFNsYXNoZXMobW9kZWwuX2hlbHApICsgJ1xcJykgfVwiJyA6ICcnO1xuICAgICAgaWYgKHRpdGxlLmxlbmd0aCA+IDApIGJpbmRpbmdzLnB1c2goJ3Rvb2x0aXBzOiB7fScpO1xuICAgICAgdmFyIGJpbmQgPSBiaW5kaW5ncy5sZW5ndGggPiAwID8gJ2RhdGEtYmluZD1cIicgKyB1dGlscy5hZGRTbGFzaGVzKGJpbmRpbmdzLmpvaW4oKSkgKyAnXCInIDogJyc7XG4gICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwicHJvcEVkaXRvciAnICsgKGNoZWNrYm94ZXMgPyAnY2hlY2tib3hlcycgOiAnJykgKyAnXCInICsgYmluZCArICc+JztcblxuICAgICAgdmFyIG1vZGVsTmFtZTIgPSAobW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLl9uYW1lICE9ICd1bmRlZmluZWQnID8gbW9kZWwuX25hbWUgOiAodHlwZW9mIHByb3AgIT09ICd1bmRlZmluZWQnID8gJ1snICsgcHJvcCArICddJyA6ICcnKSk7XG4gICAgICBtb2RlbE5hbWUyID0gJzxzcGFuIGRhdGEtYmluZD1cInRleHQ6ICRyb290LnV0KFxcJ3RlbXBsYXRlXFwnLCBcXCcnICsgdXRpbHMuYWRkU2xhc2hlcyhtb2RlbE5hbWUyKSArICdcXCcpXCI+JyArIG1vZGVsTmFtZTIgKyAnPC9zcGFuPic7XG4gICAgICBodG1sICs9ICc8c3BhbicgKyB0aXRsZSArICcgY2xhc3M9XCJwcm9wTGFiZWxcIj4nICsgbW9kZWxOYW1lMiArICc8L3NwYW4+JztcbiAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJwcm9wSW5wdXQgJyArICh0eXBlb2YgZ2xvYmFsU3R5bGVzICE9ICd1bmRlZmluZWQnID8gJ2xvY2FsJyA6ICcnKSArICdcIiBkYXRhLWJpbmQ9XCJjc3M6IHsgZGVmYXVsdDogJyArIHByb3AgKyAnKCkgPT09IG51bGwgfVwiPic7XG4gICAgICBodG1sICs9IF9wcm9wSW5wdXQobW9kZWwsIHByb3AsIHByb3BBY2Nlc3NvciwgZWRpdFR5cGUsIHdpZGdldHMpO1xuICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICAgIGlmICh0eXBlb2YgZ2xvYmFsU3R5bGVQcm9wICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJwcm9wSW5wdXQgZ2xvYmFsXCIgZGF0YS1iaW5kPVwiY3NzOiB7IG92ZXJyaWRkZW46ICcgKyBwcm9wICsgJygpICE9PSBudWxsIH1cIj4nO1xuICAgICAgICBodG1sICs9IF9wcm9wSW5wdXQobW9kZWwsIHByb3AsIGdsb2JhbFN0eWxlUHJvcCwgZWRpdFR5cGUsIHdpZGdldHMpO1xuICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgIGlmIChjaGVja2JveGVzKSB7XG4gICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInByb3BDaGVja1wiPjxsYWJlbCBkYXRhLWJpbmQ9XCJ0b29sdGlwczoge31cIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgZGF0YS1iaW5kPVwiZm9jdXNhYmxlOiB0cnVlLCBjbGljazogZnVuY3Rpb24oZXZ0LCBvYmopIHsgJHJvb3QubG9jYWxHbG9iYWxTd2l0Y2goJyArIHByb3AgKyAnLCAnICsgZ2xvYmFsU3R5bGVQcm9wICsgJyk7IHJldHVybiB0cnVlOyB9LCBjaGVja2VkOiAnICsgcHJvcCArICcoKSAhPT0gbnVsbFwiPic7XG4gICAgICAgICAgaHRtbCArPSAnPHNwYW4gY2xhc3M9XCJjaGVja2JveC1yZXBsYWNlclwiIGRhdGEtYmluZD1cImNzczogeyBjaGVja2VkOiAnICsgcHJvcCArICcoKSAhPT0gbnVsbCB9LCBhdHRyOiB7IHRpdGxlOiAkcm9vdC50KFxcJ1RoaXMgc3R5bGUgaXMgc3BlY2lmaWMgZm9yIHRoaXMgYmxvY2s6IGNsaWNrIGhlcmUgdG8gcmVtb3ZlIHRoZSBjdXN0b20gc3R5bGUgYW5kIHJldmVydCB0byB0aGUgdGhlbWUgdmFsdWVcXCcpIH1cIj48L3NwYW4+JztcbiAgICAgICAgICBodG1sICs9ICc8L2xhYmVsPjwvZGl2Pic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG4gICAgfSBlbHNlIGlmIChtb2RlbCA9PT0gbnVsbCB8fCB0eXBlb2YgbW9kZWwgIT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIFRPRE8gcmVtb3ZlIGRlYnVnIG91dHB1dFxuICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInByb3BFZGl0b3IgdW5rbm93blwiPltBfCcgKyBwcm9wICsgXCJ8XCIgKyB0eXBlb2YgbW9kZWwgKyAnXTwvZGl2Pic7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE8gcmVtb3ZlIGRlYnVnIG91dHB1dFxuICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInByb3BFZGl0b3IgdW5rbm93blwiPltCfCcgKyBwcm9wICsgXCJ8XCIgKyB0eXBlb2YgbW9kZWwgKyAnXTwvZGl2Pic7XG4gICAgfVxuXG5cbiAgfVxuXG4gIGlmICh0eXBlb2YgcHJvcCAhPSAndW5kZWZpbmVkJyAmJiAhIXRyYWNrVXNhZ2UpIHtcbiAgICBodG1sICs9ICc8IS0tIC9rbyAtLT4nO1xuICAgIGh0bWwgKz0gJzwhLS0ga28gaWZTdWJzOiB7IG5vdDogdHJ1ZSwgZGF0YTogJyArIGlmU3Vic1Byb3AgKyAnLCB0aHJlc2hvbGQ6ICcgKyBpZlN1YnNUaHJlc2hvbGQgKyAnLCBndXR0ZXI6IDAgfSAtLT4nO1xuICAgIGh0bWwgKz0gJzxzcGFuIGNsYXNzPVwibGFiZWwgbm90dXNlZFwiPignICsgcHJvcCArICcpPC9zcGFuPic7XG4gICAgaHRtbCArPSAnPCEtLSAva28gLS0+JztcbiAgfVxuXG4gIHJldHVybiBodG1sO1xufTtcblxuXG52YXIgY3JlYXRlQmxvY2tFZGl0b3IgPSBmdW5jdGlvbihkZWZzLCB3aWRnZXRzLCB0aGVtZVVwZGF0ZXIsIHRlbXBsYXRlVXJsQ29udmVydGVyLCByb290TW9kZWxOYW1lLCB0ZW1wbGF0ZU5hbWUsIGVkaXRUeXBlLCB0ZW1wbGF0ZUNyZWF0b3IsIGJhc2VUaHJlc2hvbGQsIHRyYWNrR2xvYmFsU3R5bGVzLCB0cmFja1VzYWdlLCBmcm9tTGV2ZWwpIHtcbiAgaWYgKHR5cGVvZiB0cmFja1VzYWdlID09ICd1bmRlZmluZWQnKSB0cmFja1VzYWdlID0gdHJ1ZTtcbiAgdmFyIG1vZGVsID0gbW9kZWxEZWYuZ2V0RGVmKGRlZnMsIHRlbXBsYXRlTmFtZSk7XG5cbiAgdmFyIHJvb3RNb2RlbCA9IG1vZGVsRGVmLmdldERlZihkZWZzLCByb290TW9kZWxOYW1lKTtcbiAgdmFyIHJvb3RQcmV2aWV3QmluZGluZ3M7XG4gIGlmICh0eXBlb2Ygcm9vdE1vZGVsLl9wcmV2aWV3QmluZGluZ3MgIT0gJ3VuZGVmaW5lZCcgJiYgdGVtcGxhdGVOYW1lICE9ICd0aGFlbWUnICYmIGVkaXRUeXBlID09ICdzdHlsZXInKSB7XG4gICAgcm9vdFByZXZpZXdCaW5kaW5ncyA9IGVsYWJvcmF0ZURlY2xhcmF0aW9ucyh1bmRlZmluZWQsIHJvb3RNb2RlbC5fcHJldmlld0JpbmRpbmdzLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgbW9kZWxEZWYuZ2V0QmluZFZhbHVlLmJpbmQodW5kZWZpbmVkLCBkZWZzLCB0aGVtZVVwZGF0ZXIsIHJvb3RNb2RlbE5hbWUsIHJvb3RNb2RlbE5hbWUsICcnKSk7XG4gIH1cblxuICB2YXIgZ2xvYmFsU3R5bGVzID0gdHlwZW9mIHRyYWNrR2xvYmFsU3R5bGVzICE9ICd1bmRlZmluZWQnICYmIHRyYWNrR2xvYmFsU3R5bGVzID8gZGVmc1t0ZW1wbGF0ZU5hbWVdLl9nbG9iYWxTdHlsZXMgOiB1bmRlZmluZWQ7XG4gIHZhciBnbG9iYWxTdHlsZVByb3AgPSB0eXBlb2YgdHJhY2tHbG9iYWxTdHlsZXMgIT0gJ3VuZGVmaW5lZCcgJiYgdHJhY2tHbG9iYWxTdHlsZXMgPyBkZWZzW3RlbXBsYXRlTmFtZV0uX2dsb2JhbFN0eWxlIDogdW5kZWZpbmVkO1xuXG5cbiAgdmFyIHRoZW1lTW9kZWw7XG4gIGlmICh0eXBlb2YgZ2xvYmFsU3R5bGVQcm9wICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBtbSA9IG1vZGVsRGVmLmdldERlZihkZWZzLCAndGhlbWUnKTtcbiAgICAvLyBUT0RPIHJlbW92ZSBkZXByZWNhdGVkICR0aGVtZVxuICAgIHRoZW1lTW9kZWwgPSBtbVtnbG9iYWxTdHlsZVByb3AucmVwbGFjZSgvXihcXCR0aGVtZXxfdGhlbWVfKVxcLi8sICcnKV07XG4gIH1cblxuXG4gIHZhciB3aXRoQmluZGluZ1Byb3ZpZGVyID0gbW9kZWxEZWYuZ2V0QmluZFZhbHVlLmJpbmQodW5kZWZpbmVkLCBkZWZzLCB0aGVtZVVwZGF0ZXIsIHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSk7XG4gIHdpdGhCaW5kaW5nUHJvdmlkZXIuX3RlbXBsYXRlTmFtZSA9IHRlbXBsYXRlTmFtZTtcblxuICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiZWRpdG9yXCI+JztcbiAgaHRtbCArPSBcIjxkaXYgY2xhc3M9XFxcImJsb2NrVHlwZVwiICsgKHR5cGVvZiBnbG9iYWxTdHlsZXMgIT0gJ3VuZGVmaW5lZCcgPyBcIiB3aXRoZGVmYXVsdHNcIiA6IFwiXCIpICsgXCJcXFwiPlwiICsgbW9kZWwudHlwZSArIFwiPC9kaXY+XCI7XG5cbiAgdmFyIGVkaXRvckNvbnRlbnQgPSBfcHJvcEVkaXRvcih3aXRoQmluZGluZ1Byb3ZpZGVyLCB3aWRnZXRzLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgbW9kZWwsIHRoZW1lTW9kZWwsIFwiXCIsIHVuZGVmaW5lZCwgZWRpdFR5cGUsIGZyb21MZXZlbCwgYmFzZVRocmVzaG9sZCwgZ2xvYmFsU3R5bGVzLCBnbG9iYWxTdHlsZVByb3AsIHRyYWNrVXNhZ2UsIHJvb3RQcmV2aWV3QmluZGluZ3MpO1xuICBpZiAoZWRpdG9yQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgaHRtbCArPSBlZGl0b3JDb250ZW50O1xuICB9XG5cbiAgaHRtbCArPSAnPC9kaXY+JztcblxuICB0ZW1wbGF0ZUNyZWF0b3IoaHRtbCwgdGVtcGxhdGVOYW1lLCBlZGl0VHlwZSk7XG59O1xuXG52YXIgY3JlYXRlQmxvY2tFZGl0b3JzID0gZnVuY3Rpb24oZGVmcywgd2lkZ2V0cywgdGhlbWVVcGRhdGVyLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgcm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lLCB0ZW1wbGF0ZUNyZWF0b3IsIGJhc2VUaHJlc2hvbGQpIHtcbiAgY3JlYXRlQmxvY2tFZGl0b3IoZGVmcywgd2lkZ2V0cywgdGhlbWVVcGRhdGVyLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgcm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lLCAnZWRpdCcsIHRlbXBsYXRlQ3JlYXRvciwgYmFzZVRocmVzaG9sZCk7XG4gIGNyZWF0ZUJsb2NrRWRpdG9yKGRlZnMsIHdpZGdldHMsIHRoZW1lVXBkYXRlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSwgJ3N0eWxlcicsIHRlbXBsYXRlQ3JlYXRvciwgYmFzZVRocmVzaG9sZCwgdHJ1ZSk7XG59O1xuXG52YXIgZ2VuZXJhdGVFZGl0b3JzID0gZnVuY3Rpb24odGVtcGxhdGVEZWYsIHdpZGdldHMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCB0ZW1wbGF0ZUNyZWF0b3IsIGJhc2VUaHJlc2hvbGQpIHtcbiAgdmFyIGRlZnMgPSB0ZW1wbGF0ZURlZi5fZGVmcztcbiAgdmFyIHRlbXBsYXRlTmFtZSA9IHRlbXBsYXRlRGVmLnRlbXBsYXRlTmFtZTtcbiAgdmFyIGJsb2NrcyA9IHRlbXBsYXRlRGVmLl9ibG9ja3M7XG4gIHZhciBpZHg7XG4gIHZhciBibG9ja0RlZnMgPSBbXTtcbiAgZm9yIChpZHggPSAwOyBpZHggPCBibG9ja3MubGVuZ3RoOyBpZHgrKykge1xuICAgIGlmICh0eXBlb2YgYmxvY2tzW2lkeF0uY29udGFpbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgYmxvY2tEZWZzLnB1c2gobW9kZWxEZWYuZ2VuZXJhdGVNb2RlbChkZWZzLCBibG9ja3NbaWR4XS5ibG9jaykpO1xuICAgIH1cbiAgICBjcmVhdGVCbG9ja0VkaXRvcnMoZGVmcywgd2lkZ2V0cywgdW5kZWZpbmVkLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgYmxvY2tzW2lkeF0ucm9vdCwgYmxvY2tzW2lkeF0uYmxvY2ssIHRlbXBsYXRlQ3JlYXRvciwgYmFzZVRocmVzaG9sZCk7XG4gIH1cblxuICBpZiAodHlwZW9mIGRlZnNbJ3RoZW1lJ10gIT0gJ3VuZGVmaW5lZCcpIGNyZWF0ZUJsb2NrRWRpdG9yKGRlZnMsIHdpZGdldHMsIHVuZGVmaW5lZCwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHRlbXBsYXRlTmFtZSwgJ3RoZW1lJywgJ3N0eWxlcicsIHRlbXBsYXRlQ3JlYXRvciwgdW5kZWZpbmVkLCBmYWxzZSwgZmFsc2UsIC0xKTtcbiAgcmV0dXJuIGJsb2NrRGVmcztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZ2VuZXJhdGVFZGl0b3JzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWwgZ2xvYmFsOiBmYWxzZSAqL1xuXG52YXIgbW9kZWxEZWYgPSByZXF1aXJlKFwiLi9tb2RlbC5qc1wiKTtcblxudmFyIHdyYXBwZWRSZXN1bHRNb2RlbCA9IGZ1bmN0aW9uKHRlbXBsYXRlRGVmKSB7XG4gIHZhciBkZWZzID0gdGVtcGxhdGVEZWYuX2RlZnM7XG4gIHZhciB0ZW1wbGF0ZU5hbWUgPSB0ZW1wbGF0ZURlZi50ZW1wbGF0ZU5hbWU7XG4gIHZhciBmaW5hbE1vZGVsQ29udGVudERlZiA9IG1vZGVsRGVmLmdldERlZihkZWZzLCB0ZW1wbGF0ZU5hbWUpO1xuXG4gIHZhciBmaW5hbE1vZGVsQ29udGVudCA9IG1vZGVsRGVmLmdlbmVyYXRlUmVzdWx0TW9kZWwodGVtcGxhdGVEZWYpO1xuXG4gIHZhciB3cmFwcGVyID0gcmVxdWlyZShcIi4vd3JhcHBlci5qc1wiKTtcbiAgdmFyIHJlcyA9IHdyYXBwZXIoZmluYWxNb2RlbENvbnRlbnQsIGZpbmFsTW9kZWxDb250ZW50RGVmLCBkZWZzKTtcblxuICByZXR1cm4gcmVzO1xufTtcblxuLy8gcmVxdWlyZXMgb25seSB3aGVuIGltcG9ydGVkXG52YXIgdHJhbnNsYXRlVGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHR0ID0gcmVxdWlyZSgnLi9wYXJzZXIuanMnKTtcbiAgcmV0dXJuIHR0LmFwcGx5KHR0LCBhcmd1bWVudHMpO1xufTtcblxuLy8gcmVxdWlyZXMgb25seSB3aGVuIGltcG9ydGVkXG52YXIgZ2VuZXJhdGVFZGl0b3JzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBnZSA9IHJlcXVpcmUoJy4vZWRpdG9yLmpzJyk7XG4gIHJldHVybiBnZS5hcHBseShnZSwgYXJndW1lbnRzKTtcbn07XG5cbnZhciBjaGVja01vZGVsID0gZnVuY3Rpb24oKSB7XG4gIHZhciBjbSA9IHJlcXVpcmUoJy4vY2hlY2ttb2RlbC5qcycpO1xuICByZXR1cm4gY20uYXBwbHkoY20sIGFyZ3VtZW50cyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdHJhbnNsYXRlVGVtcGxhdGU6IHRyYW5zbGF0ZVRlbXBsYXRlLFxuICB3cmFwcGVkUmVzdWx0TW9kZWw6IHdyYXBwZWRSZXN1bHRNb2RlbCxcbiAgZ2VuZXJhdGVSZXN1bHRNb2RlbDogbW9kZWxEZWYuZ2VuZXJhdGVSZXN1bHRNb2RlbCxcbiAgZ2VuZXJhdGVFZGl0b3JzOiBnZW5lcmF0ZUVkaXRvcnMsXG4gIGNoZWNrTW9kZWw6IGNoZWNrTW9kZWxcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBvYmpFeHRlbmQgPSByZXF1aXJlKFwiLi9kb211dGlscy5qc1wiKS5vYmpFeHRlbmQ7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xuXG52YXIgX3ZhbHVlU2V0ID0gZnVuY3Rpb24oZGVmcywgbW9kZWwsIHByb3AsIHZhbHVlKSB7XG4gIHZhciBkb3RQb3MgPSBwcm9wLmluZGV4T2YoJy4nKTtcbiAgaWYgKGRvdFBvcyA9PSAtMSkge1xuICAgIGlmICh0eXBlb2YgbW9kZWxbcHJvcF0gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiVW5kZWZpbmVkIHByb3AgXCIgKyBwcm9wICsgXCIgd2hpbGUgc2V0dGluZyB2YWx1ZSBcIiArIHZhbHVlICsgXCIgaW4gbW9kZWwuX3ZhbHVlU2V0XCIpO1xuICAgIH0gZWxzZSBpZiAobW9kZWxbcHJvcF0gPT09IG51bGwpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlLnB1c2ggPT0gJ3VuZGVmaW5lZCcpIGNvbnNvbGUubG9nKFwibnVsbHByb3BvYmplY3R2YWx1ZVwiLCBwcm9wLCB2YWx1ZSk7XG4gICAgICBtb2RlbFtwcm9wXSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZGVsW3Byb3BdID09ICdvYmplY3QnICYmIHR5cGVvZiBtb2RlbFtwcm9wXS5wdXNoID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciB2YWx1ZXM7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICB2YXIgdmFsdWVzU3RyaW5nID0gdmFsdWUubWF0Y2goL15cXFsoLiopXFxdJC8pO1xuICAgICAgICBpZiAodmFsdWVzU3RyaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgdmFsdWVzID0gdmFsdWVzU3RyaW5nWzFdLnNwbGl0KCcsJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIGRlZmF1bHQgdmFsdWUgZm9yIGFycmF5IHByb3BlcnR5IFwiICsgcHJvcCArIFwiOiBcIiArIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLnB1c2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhbHVlcyA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIGRlZmF1bHQgdmFsdWUgZm9yIGFycmF5IHByb3BlcnR5IFwiICsgcHJvcCArIFwiOiBcIiArIHZhbHVlICsgXCIgdHlwZW9mIFwiICsgKHR5cGVvZiB2YWx1ZSk7XG4gICAgICB9XG4gICAgICB2YXIgcmVzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodmFsdWVzW2ldLnN1YnN0cigwLCAxKSA9PSAnQCcpIHtcbiAgICAgICAgICAvLyBUT0RPIHJlbW92ZSB0aGlzIGxlZ2FjeSBzdXBwb3J0IChAKSwgc28gd2UgY2FuIHJlbW92ZSBcImRlZnNcIiBmcm9tIHRoaXMgZnVuY3Rpb24sIHRvby5cbiAgICAgICAgICByZXMucHVzaChfZ2VuZXJhdGVNb2RlbChkZWZzLCB2YWx1ZXNbaV0uc3Vic3RyKDEpKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWVzW2ldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXMucHVzaCh2YWx1ZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBtb2RlbFtwcm9wXSA9IHJlcztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlbFtwcm9wXSA9PSAnc3RyaW5nJyB8fCB0eXBlb2YgbW9kZWxbcHJvcF0gPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAvLyBUT0RPIGRvZXMgdGhpcyBzdGlsbCBoYXBwZW4/IERlYnVnL3Rlc3QgbWUuXG4gICAgICBtb2RlbFtwcm9wXSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZGVsW3Byb3BdID09ICdvYmplY3QnICYmIG1vZGVsW3Byb3BdICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbFtwcm9wXS5fd2lkZ2V0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSBjb25zb2xlLmxvZyhcIm9iamVjdHZhbHVlXCIsIHByb3AsIG1vZGVsW3Byb3BdLl93aWRnZXQsIHZhbHVlKTtcbiAgICAgIC8vIF9kYXRhIGlzIGRlZmluZWQgZm9yIHByaW1pdGl2ZSB0eXBlc1xuICAgICAgbW9kZWxbcHJvcF0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJzZXR0aW5nXCIsIHR5cGVvZiBtb2RlbFtwcm9wXSwgbW9kZWxbcHJvcF0sIHByb3AsIHZhbHVlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIHByb3BOYW1lID0gcHJvcC5zdWJzdHIoMCwgZG90UG9zKTtcbiAgICBfdmFsdWVTZXQoZGVmcywgbW9kZWxbcHJvcE5hbWVdLCBwcm9wLnN1YnN0cihkb3RQb3MgKyAxKSwgdmFsdWUpO1xuICB9XG59O1xuXG52YXIgX21vZGVsQ3JlYXRlT3JVcGRhdGVCbG9ja0RlZiA9IGZ1bmN0aW9uKGRlZnMsIHRlbXBsYXRlTmFtZSwgcHJvcGVydGllcywgbmFtZWRQcm9wZXJ0aWVzKSB7XG4gIGlmICh0eXBlb2YgZGVmc1t0ZW1wbGF0ZU5hbWVdICE9PSAndW5kZWZpbmVkJyAmJiBkZWZzW3RlbXBsYXRlTmFtZV0uX2luaXRpYWxpemVkICYmICFkZWZzW3RlbXBsYXRlTmFtZV0uX3dyaXRlYWJsZSkge1xuICAgIGNvbnNvbGUubG9nKFwiX21vZGVsQ3JlYXRlT3JVcGRhdGVCbG9ja0RlZlwiLCBkZWZzLCB0ZW1wbGF0ZU5hbWUsIHByb3BlcnRpZXMsIG5hbWVkUHJvcGVydGllcyk7XG4gICAgdGhyb3cgXCJUcnlpbmcgdG8gYWx0ZXIgbm9uIHdyaXRlYWJsZSBtb2RlbDogXCIgKyB0ZW1wbGF0ZU5hbWUgKyBcIiAvIFwiICsgcHJvcGVydGllcztcbiAgfVxuXG4gIGlmICh0eXBlb2YgZGVmc1t0ZW1wbGF0ZU5hbWVdID09ICd1bmRlZmluZWQnKSB7XG4gICAgZGVmc1t0ZW1wbGF0ZU5hbWVdID0ge1xuICAgICAgX3dyaXRlYWJsZTogdHJ1ZVxuICAgIH07XG4gICAgLy8gRmFsbGJhY2sgY29tcHV0YXRpb24gb2YgXCJjYXRlZ29yeVwiIGRlcGVuZGluZyBvbiB0aGUgcHJvcGVydHkgbmFtZVxuICAgIC8vIFRPRE8gcmVtb3ZlIG1lOiB0aGlzIHNob3VsZCBiZSBhbHdheXMgZGVmaW5lZCBpbiB0aGUgdGVtcGxhdGUgZGVmaW5pdGlvbiwgbm8gbmVlZCB0byBoYXJkY29kZSB0aGlzIHN0dWZmLlxuICAgIGlmICh0eXBlb2YgbmFtZWRQcm9wZXJ0aWVzID09ICd1bmRlZmluZWQnKSBuYW1lZFByb3BlcnRpZXMgPSB7fTtcbiAgICBpZiAodHlwZW9mIG5hbWVkUHJvcGVydGllcy5jYXRlZ29yeSA9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGVmc1t0ZW1wbGF0ZU5hbWVdLl9jYXRlZ29yeSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRlbXBsYXRlTmFtZS5tYXRjaCgvKF50fC5UKWhlbWUkLykgfHwgdGVtcGxhdGVOYW1lLm1hdGNoKC8oXnN8LlMpdHlsZSQvKSB8fCB0ZW1wbGF0ZU5hbWUubWF0Y2goLyheY3wuQylvbG9yJC8pIHx8IHRlbXBsYXRlTmFtZS5tYXRjaCgvKF5yfC5SKWFkaXVzJC8pKSB7XG4gICAgICAgIG5hbWVkUHJvcGVydGllcy5jYXRlZ29yeSA9ICdzdHlsZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuYW1lZFByb3BlcnRpZXMuY2F0ZWdvcnkgPSAnY29udGVudCc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICBpZiAodHlwZW9mIG5hbWVkUHJvcGVydGllcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBUT0RPIGNoZWNrIGlmIHRoaXMgaXMgbmVlZGVkIGJlZm9yZSB0aGUgZW5kaW5nIG5hbWVkUHJvcGVydHkgXCJsb29wXCIgb3Igbm90LlxuICAgIGlmICh0eXBlb2YgbmFtZWRQcm9wZXJ0aWVzLm5hbWUgIT0gJ3VuZGVmaW5lZCcpIGRlZnNbdGVtcGxhdGVOYW1lXS5fbmFtZSA9IG5hbWVkUHJvcGVydGllcy5uYW1lO1xuXG4gICAgaWYgKHR5cGVvZiBuYW1lZFByb3BlcnRpZXMudGhlbWVPdmVycmlkZSAhPSAndW5kZWZpbmVkJykge1xuICAgICAgZGVmc1t0ZW1wbGF0ZU5hbWVdLl90aGVtZU92ZXJyaWRlID0gbmFtZWRQcm9wZXJ0aWVzLnRoZW1lT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbmFtZWRQcm9wZXJ0aWVzLmdsb2JhbFN0eWxlICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICBkZWZzW3RlbXBsYXRlTmFtZV0uX2dsb2JhbFN0eWxlID0gbmFtZWRQcm9wZXJ0aWVzLmdsb2JhbFN0eWxlO1xuICAgICAgLy8gVE9ETyByZW1vdmUgZGVwcmVjYXRlZCAkdGhlbWVcbiAgICAgIHZhciBnbG9iYWxTdHlsZVN1YiA9IG5hbWVkUHJvcGVydGllcy5nbG9iYWxTdHlsZS5yZXBsYWNlKC9eKFxcJHRoZW1lfF90aGVtZV8pXFwuLywgJycpO1xuICAgICAgdmFyIHAgPSBnbG9iYWxTdHlsZVN1Yi5pbmRleE9mKCcuJyk7XG4gICAgICB2YXIgZ3MgPSBwICE9IC0xID8gZ2xvYmFsU3R5bGVTdWIuc3Vic3RyKDAsIHApIDogZ2xvYmFsU3R5bGVTdWI7XG4gICAgICBfbW9kZWxDcmVhdGVPclVwZGF0ZUJsb2NrRGVmKGRlZnMsICd0aGVtZScsIGdzKTtcblxuICAgICAgaWYgKHR5cGVvZiBkZWZzW3RlbXBsYXRlTmFtZV0uX3RoZW1lT3ZlcnJpZGUgPT09ICd1bmRlZmluZWQnIHx8ICEhZGVmc1t0ZW1wbGF0ZU5hbWVdLl90aGVtZU92ZXJyaWRlKSB7XG4gICAgICAgIF9tb2RlbENyZWF0ZU9yVXBkYXRlQmxvY2tEZWYoZGVmcywgdGVtcGxhdGVOYW1lLCBcImN1c3RvbVN0eWxlPWZhbHNlXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIG5hbWVkUHJvcGVydGllcy5jb250ZXh0TmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRlZnNbdGVtcGxhdGVOYW1lXS5fY29udGV4dCA9IG5hbWVkUHJvcGVydGllcy5jb250ZXh0TmFtZTtcbiAgICAgIC8vIFRPRE8gaXMgaXQgY29ycmVjdCB0byBmYWxsYmFjayB0byBcImJvZHlUaGVtZVwiIGZvciBibG9ja3Mgbm90IGRlY2xhcmluZyBhIGRlZmF1bHQgdGhlbWU/XG4gICAgICAvLyBNYXliZSBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gc2ltcGx5IGRlY2xhcmUgaXQgYXMgbWFuZGF0b3J5IGJ1dCBsZWF2ZSB0aGUgZGVmYXVsdCBjb25maWd1dGF0aW9uXG4gICAgICAvLyB0byB0aGUgdGVtcGxhdGUgZGVmaW5pdGlvbi5cbiAgICAgIGlmIChuYW1lZFByb3BlcnRpZXMuY29udGV4dE5hbWUgPT0gJ2Jsb2NrJyAmJiB0eXBlb2YgZGVmc1t0ZW1wbGF0ZU5hbWVdLl9nbG9iYWxTdHlsZSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkZWZzW3RlbXBsYXRlTmFtZV0uX2dsb2JhbFN0eWxlID0gJ190aGVtZV8uYm9keVRoZW1lJztcbiAgICAgICAgX21vZGVsQ3JlYXRlT3JVcGRhdGVCbG9ja0RlZihkZWZzLCAndGhlbWUnLCAnYm9keVRoZW1lJyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkZWZzW3RlbXBsYXRlTmFtZV0uX3RoZW1lT3ZlcnJpZGUgPT0gJ3VuZGVmaW5lZCcgfHwgZGVmc1t0ZW1wbGF0ZU5hbWVdLl90aGVtZU92ZXJyaWRlKSB7XG4gICAgICAgICAgX21vZGVsQ3JlYXRlT3JVcGRhdGVCbG9ja0RlZihkZWZzLCB0ZW1wbGF0ZU5hbWUsIFwiY3VzdG9tU3R5bGU9ZmFsc2VcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBuYW1lZFByb3BlcnRpZXMuZXh0ZW5kICE9ICd1bmRlZmluZWQnKSBkZWZzW3RlbXBsYXRlTmFtZV0udHlwZSA9IG5hbWVkUHJvcGVydGllcy5leHRlbmQ7XG4gIH1cblxuICBmb3IgKHZhciBucCBpbiBuYW1lZFByb3BlcnRpZXMpIGlmIChuYW1lZFByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobnApICYmIHR5cGVvZiBuYW1lZFByb3BlcnRpZXNbbnBdICE9PSAndW5kZWZpbmVkJyAmJiBbJ25hbWUnLCAnZXh0ZW5kJywgJ2NvbnRleHROYW1lJywgJ2dsb2JhbFN0eWxlJywndGhlbWVPdmVycmlkZSddLmluZGV4T2YobnApID09IC0xKSB7XG4gICAgZGVmc1t0ZW1wbGF0ZU5hbWVdWydfJytucF0gPSBuYW1lZFByb3BlcnRpZXNbbnBdO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9ICd1bmRlZmluZWQnICYmIHByb3BlcnRpZXMubGVuZ3RoID4gMCkge1xuICAgIGRlZnNbdGVtcGxhdGVOYW1lXS5fcHJvcHMgPSB0eXBlb2YgZGVmc1t0ZW1wbGF0ZU5hbWVdLl9wcm9wcyAhPSAndW5kZWZpbmVkJyAmJiBkZWZzW3RlbXBsYXRlTmFtZV0uX3Byb3BzLmxlbmd0aCA+IDAgPyBkZWZzW3RlbXBsYXRlTmFtZV0uX3Byb3BzICsgXCIgXCIgKyBwcm9wZXJ0aWVzIDogcHJvcGVydGllcztcbiAgfVxufTtcblxuLy8gcmVtb3ZlIHRoZSBmaXJzdCBcInNlcXVlbmNlXCIgaW4gYSBjYW1lbGNhc2VkIHdvcmQgKGUuZzogbXlDYW1lbENhc2UgPT4gY2FtZWxDYXNlKS5cbnZhciBfcmVtb3ZlUHJlZml4ID0gZnVuY3Rpb24oc3RyKSB7XG4gIHZhciByZXMgPSBzdHIubWF0Y2goL15bXkEtWl0rKFtBLVpdKSguKikkLyk7XG4gIHJldHVybiByZXMgIT09IG51bGwgPyByZXNbMV0udG9Mb3dlckNhc2UoKSArIHJlc1syXSA6IG51bGw7XG59O1xuXG4vLyBUT0RPIGRlZnMgaXMgbmVlZGVkIG9ubHkgYmVjYXVzZSBfdmFsdWVTZXQgbmVlZHMgaXQuLiB3ZSBzaG91bGQgcmVtb3ZlIGl0IGRvd25zdHJlYW0uXG52YXIgX2dlbmVyYXRlTW9kZWxGcm9tRGVmID0gZnVuY3Rpb24obW9kZWxEZWYsIGRlZnMpIHtcbiAgdmFyIHJlcyA9IHt9O1xuXG4gIGZvciAodmFyIHByb3AgaW4gbW9kZWxEZWYpXG4gICAgaWYgKCFwcm9wLm1hdGNoKC9eXy4qLykgJiYgbW9kZWxEZWYuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IG1vZGVsRGVmW3Byb3BdO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUuX2NvbXBsZXggIT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUuX2NvbXBsZXgpIHtcbiAgICAgICAgcmVzW3Byb3BdID0gX2dlbmVyYXRlTW9kZWxGcm9tRGVmKHZhbHVlLCBkZWZzKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PSAndHlwZScpIHtcbiAgICAgICAgcmVzW3Byb3BdID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBtb3N0IHRpbWVzIHRoaXMgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSBfdmFsdWVTZXRcbiAgICAgICAgcmVzW3Byb3BdID0gbnVsbDtcbiAgICAgICAgLy8gZm9yIGN1c3RvbVN0eWxlIHRoaXMgaXMgc2V0IHRvIG51bGwuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5leHBlY3RlZCBtb2RlbCBkZWZcIiwgcHJvcCwgdmFsdWUsIG1vZGVsRGVmKTtcbiAgICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIG1vZGVsIGRlZiBbXCIgKyBwcm9wICsgXCJdPVwiICsgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gIGlmICh0eXBlb2YgbW9kZWxEZWYuX2RlZmF1bHRWYWx1ZXMgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgZGVmYXVsdHMgPSBtb2RlbERlZi5fZGVmYXVsdFZhbHVlcztcbiAgICBmb3IgKHZhciBwcm9wMiBpbiBkZWZhdWx0cylcbiAgICAgIGlmIChkZWZhdWx0cy5oYXNPd25Qcm9wZXJ0eShwcm9wMikpIHtcbiAgICAgICAgX3ZhbHVlU2V0KGRlZnMsIHJlcywgcHJvcDIsIGRlZmF1bHRzW3Byb3AyXSk7XG4gICAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzO1xufTtcblxudmFyIF9nZW5lcmF0ZU1vZGVsID0gZnVuY3Rpb24oZGVmcywgbmFtZSkge1xuICB2YXIgbW9kZWxEZWYgPSBfZ2V0TW9kZWxEZWYoZGVmcywgbmFtZSwgZmFsc2UsIHRydWUpO1xuICByZXR1cm4gX2dlbmVyYXRlTW9kZWxGcm9tRGVmKG1vZGVsRGVmLCBkZWZzKTtcbn07XG5cbnZhciBfZ2V0RGVmID0gZnVuY3Rpb24oZGVmcywgbmFtZSkge1xuICByZXR1cm4gX2dldE1vZGVsRGVmKGRlZnMsIG5hbWUsIGZhbHNlLCB0cnVlKTtcbn07XG5cbnZhciBfZ2V0TW9kZWxEZWYgPSBmdW5jdGlvbihkZWZzLCBuYW1lLCByZXR1cm5DbG9uZSwgcmVhZG9ubHkpIHtcbiAgLy8gbG9va3VwIFwibmFtZVwiIGluIHRoZSB0ZW1wbGF0ZSBkZWZpbml0aW9uXG4gIGlmICh0eXBlb2YgZGVmc1tuYW1lXSA9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIGlmIHRoZSBuYW1lIGhhcyBhIHNwYWNlIHRoZW4gcmV0dXJucy5cbiAgICBpZiAobmFtZS5pbmRleE9mKCcgJykgIT0gLTEpIHJldHVybiBudWxsO1xuICAgIC8vIG90aGVyd2lzZSB0cnkgbG9va2luZyB1cCB1c2luZyBhIGRlcHJlZml4ZWQgbmFtZS5cbiAgICB2YXIgcmVzID0gX3JlbW92ZVByZWZpeChuYW1lKTtcbiAgICBpZiAocmVzICE9PSBudWxsKSB7XG4gICAgICAvLyBUT0RPIHRoZSBkZXByZWZpeGluZyBpcyBwb3dlcmZ1bCwgYnV0IG1heWJlIG5vdCByZWFsbHkgbmVlZGVkLlxuICAgICAgcmV0dXJuIF9nZXRNb2RlbERlZihkZWZzLCByZXMsIHJldHVybkNsb25lLCByZWFkb25seSk7XG4gICAgfVxuICAgIC8vIG5vdCBhIHByZWZpeGVkIG5hbWVcbiAgICAvLyBUT0RPIHNob3VsZCB3ZSByYWlzZSBhbiBlcnJvcj9cbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICAvLyB3aGVuIHRoZSBuYW1lIGlzIGFscmVhZHkgZGVmaW5lZC4uLlxuICAgIHZhciBkZWZPYmogPSBkZWZzW25hbWVdO1xuICAgIGlmICh0eXBlb2YgZGVmT2JqICE9ICdvYmplY3QnKSB0aHJvdyBcIkJsb2NrIGRlZmluaXRpb24gbXVzdCBiZSBhbiBvYmplY3Q6IGZvdW5kIFwiICsgZGVmT2JqICsgXCIgZm9yIFwiICsgbmFtZTtcblxuICAgIGlmICh0eXBlb2YgZGVmT2JqLl9pbml0aWFsaXplZCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUG9wdWxhdGUgXCJ0eXBlXCIgZGVwZW5kaW5nIG9uIG5hbWVcbiAgICAgIGlmICh0eXBlb2YgZGVmT2JqLnR5cGUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKG5hbWUuaW5kZXhPZignICcpID09IC0xKSB7XG4gICAgICAgICAgZGVmT2JqLnR5cGUgPSBuYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZk9iai50eXBlID0gbmFtZS5zdWJzdHIobmFtZS5pbmRleE9mKCcgJykgKyAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBpdCBpcyBub3QgYSBcImRhdGFcIiB0eXBlIHRoZW4gbGV0J3MgZGVhbCB3aXRoIGluaGVyaXRhbmNlXG4gICAgICBpZiAoZGVmT2JqLnR5cGUgIT0gbmFtZSAmJiB0eXBlb2YgZGVmT2JqLl93aWRnZXQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIHR5cGVEZWYgPSBfZ2V0TW9kZWxEZWYoZGVmcywgZGVmT2JqLnR5cGUsIHRydWUpO1xuICAgICAgICB2YXIgZXh0ZW5kZWQgPSBvYmpFeHRlbmQodHlwZURlZiwgZGVmT2JqKTtcbiAgICAgICAgZGVmT2JqID0gZXh0ZW5kZWQ7XG4gICAgICAgIGRlZnNbbmFtZV0gPSBkZWZPYmo7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZPYmouX3dpZGdldCA9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGVmT2JqLl9wcm9wcyA9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGVmT2JqLl9jb21wbGV4ID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFRPRE8gaGVyZSBJIHRyaWVkIHRvIGRlYWwgd2l0aCBpbmhlcml0YW5jZSBmb3IgZXZlcnkgb2JqZWN0IHdpdGhvdXQgYSBcInR5cGVcIiBieSB1c2luZyBhIHNpbXBsZSBkZXByZWZpeC5cbiAgICAgICAgLy8gYnV0IHRoaXMgYnJlYWsgb24gdGhlbWUgY29udGFpbmluZyBcInBhZ2VUaGVtZVwiIHRoYXQgd291bGQgaW5oZXJpdCBmcm9tIGlzIHBhcmVudC4gKGNyZWF0aW5nIGEgbG9vcClcbiAgICAgICAgLypcbiAgICAgICAgdmFyIHN1cGVyVHlwZSA9IF9yZW1vdmVQcmVmaXgoZGVmT2JqLnR5cGUpO1xuICAgICAgICBpZiAoc3VwZXJUeXBlICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJFeHRlbmRpbmdcIiwgdHlwZURlZiwgbmFtZSwgc3VwZXJUeXBlLCBkZWZPYmoudHlwZSk7XG4gICAgICAgICAgdmFyIHR5cGVEZWYgPSBfZ2V0TW9kZWxEZWYoZGVmcywgc3VwZXJUeXBlLCB0cnVlKTtcbiAgICAgICAgICBcbiAgICAgICAgICB2YXIgZXh0ZW5kZWQgPSBqUXVlcnkuZXh0ZW5kKHRydWUsIHR5cGVEZWYsIGRlZk9iaik7XG4gICAgICAgICAgZGVmT2JqID0gZXh0ZW5kZWQ7XG4gICAgICAgICAgZGVmc1tuYW1lXSA9IGRlZk9iajtcbiAgICAgICAgfVxuICAgICAgICAqL1xuICAgICAgfVxuICAgICAgZGVmT2JqLl93cml0ZWFibGUgPSB0cnVlO1xuICAgICAgZGVmT2JqLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkZWZPYmouX3Byb3BzICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgZGVmID0gZGVmT2JqLl9wcm9wcztcbiAgICAgIGRlZiA9IGRlZi5zcGxpdChcIiBcIik7XG5cbiAgICAgIGlmIChkZWYubGVuZ3RoID4gMCAmJiB0eXBlb2YgZGVmT2JqLl93cml0ZWFibGUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFsdGVyaW5nIGEgbm9uIHdyaXRhYmxlIG9iamVjdCBcIiwgbmFtZSwgZGVmLCBkZWZPYmopO1xuICAgICAgICB0aHJvdyBcIkFsdGVyaW5nIGEgbm9uIHdyaXRhYmxlIG9iamVjdDogXCIgKyBuYW1lICsgXCIgZGVmOiBcIiArIGRlZjtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBkZWZPYmouX3Byb2Nlc3NlZERlZnMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVmT2JqLl9wcm9jZXNzZWREZWZzID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZGVmT2JqLl9nbG9iYWxTdHlsZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVmT2JqLl9nbG9iYWxTdHlsZXMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBkZWZPYmouX2RlZmF1bHRWYWx1ZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVmT2JqLl9kZWZhdWx0VmFsdWVzID0ge307XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVmLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwcm9wID0gZGVmW2ldO1xuICAgICAgICBpZiAocHJvcC5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgICAgICB2YXIgb3JpZ1Byb3AgPSBwcm9wO1xuICAgICAgICB2YXIgZGVmVmFsdWUgPSBudWxsO1xuICAgICAgICAvLyBwYXJzZXMgIFwicHJvcFwiIFwicHJvcD12YWx1ZVwiIGFuZCBcInByb3BbXVwiIGRlY2xhcmF0aW9uc1xuICAgICAgICB2YXIgcHJvcERlZiA9IHByb3AubWF0Y2goL14oW149XFxbXFxdXSspKFxcW1xcXSk/KD0/KSguKikkLyk7XG4gICAgICAgIGlmIChwcm9wRGVmICE9PSBudWxsKSB7XG4gICAgICAgICAgcHJvcCA9IHByb3BEZWZbMV07XG4gICAgICAgICAgLy8gVE9ETyBhcnJheSBkZWZpbml0aW9uIHNob3VsZCBiZSBkb25lIGRpZmZlcmVudGx5XG4gICAgICAgICAgaWYgKHByb3BEZWZbMl0gPT0gJ1tdJykge1xuICAgICAgICAgICAgLy8gVE9ETyB0eXBlIHNob3VsZCBub3QgYmUgZGVmaW5lZCBpbiB0aGlzIGZ1bmN0aW9uXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRlZk9ialtwcm9wXSA9PSAndW5kZWZpbmVkJykgZGVmT2JqW3Byb3BdID0gW107XG4gICAgICAgICAgICBkZWZWYWx1ZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJvcERlZlszXSA9PSAnPScpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gcmVtb3ZlIGhhcmRjb2RlZCBcInZpc2libGVcIiBtYXRjaGluZyAodGhpcyBzaG91bGQgYmUgZGVmaW5lZCBpbiB0aGUgdGVtcGxhdGUgZGVmaW5pdGlvbilcbiAgICAgICAgICAgIGlmIChwcm9wLm1hdGNoKC8oXnZ8Vilpc2libGUkLykpIGRlZlZhbHVlID0gU3RyaW5nKHByb3BEZWZbNF0pLnRvTG93ZXJDYXNlKCkgPT0gJ3RydWUnO1xuICAgICAgICAgICAgZWxzZSBpZiAocHJvcC5tYXRjaCgvXmN1c3RvbVN0eWxlJC8pKSB7XG4gICAgICAgICAgICAgIGRlZlZhbHVlID0gU3RyaW5nKHByb3BEZWZbNF0pLnRvTG93ZXJDYXNlKCkgPT0gJ3RydWUnO1xuICAgICAgICAgICAgfSBlbHNlIGRlZlZhbHVlID0gcHJvcERlZls0XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGVmYXVsdCB2YWx1ZXMgZm91bmQgaW4gXCJwcm9wZXJ0aWVzXCIgYXJlIG5vdCBiZWluZyBwcm9jZXNzZWQgYnkgXCJtb2RlbEVuc3VyZVZhbHVlXCIgYW5kIGJ5IGNvbnNlcXVlbmNlIGRvIG5vdCBjYWxsIFwidGhlbWVVcGRhdGVyXCIuXG4gICAgICAgIC8vIFRPRE8gZG9jdW1lbnQgd2h5IHRoaXMgaXMgbmVlZGVkLCBvciByZW1vdmUuXG4gICAgICAgIGlmIChkZWZWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgZGVmT2JqLl9kZWZhdWx0VmFsdWVzW3Byb3BdID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyBpZiAocHJvcC5tYXRjaCgvXl8vKSkgY29uc29sZS5sb2coXCJkZWZWYWx1ZSBmb3JcIiwgcHJvcCwgXCJpblwiLCBuYW1lKTtcbiAgICAgICAgICAgIGRlZk9iai5fZGVmYXVsdFZhbHVlc1twcm9wXSA9IGRlZlZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZGVmT2JqW3Byb3BdID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdmFyIHZhbCA9IF9nZXRNb2RlbERlZihkZWZzLCBuYW1lICsgJyAnICsgcHJvcCwgdHJ1ZSk7XG4gICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdmFsID0gX2dldE1vZGVsRGVmKGRlZnMsIHByb3AsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZPYmpbcHJvcF0gPSB2YWw7XG4gICAgICAgIH1cblxuICAgICAgICBkZWZPYmouX3Byb2Nlc3NlZERlZnNbcHJvcF0gPSBvcmlnUHJvcDtcbiAgICAgICAgZGVmT2JqLl9jb21wbGV4ID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIGRlZk9iai5fcHJvcHM7XG4gICAgfVxuXG4gICAgaWYgKHJldHVybkNsb25lKSB7XG4gICAgICBkZWZPYmouX3dyaXRlYWJsZSA9IGZhbHNlO1xuICAgICAgdmFyIGNsb25lZCA9IG9iakV4dGVuZCh7fSwgZGVmT2JqKTtcbiAgICAgIHJldHVybiBjbG9uZWQ7XG4gICAgfSBlbHNlIGlmIChyZWFkb25seSkge1xuICAgICAgZGVmT2JqLl93cml0ZWFibGUgPSBmYWxzZTtcbiAgICAgIHJldHVybiBkZWZPYmo7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgZGVmT2JqLl93cml0ZWFibGUgPT0gJ3VuZGVmaW5lZCcgfHwgZGVmT2JqLl93cml0ZWFibGUgPT09IGZhbHNlKSB0aHJvdyBcIlJldHJpZXZpbmcgbm9uIHdyaXRlYWJsZSBvYmplY3QgZGVmaW5pdGlvbjogXCIgKyBuYW1lO1xuICAgICAgcmV0dXJuIGRlZk9iajtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBfaW5jcmVhc2VVc2VDb3VudCA9IGZ1bmN0aW9uKHJlYWRvbmx5LCBtb2RlbCkge1xuICBpZiAoIXJlYWRvbmx5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2RlbC5fdXNlY291bnQgPT0gJ3VuZGVmaW5lZCcpIG1vZGVsLl91c2Vjb3VudCA9IDA7XG4gICAgbW9kZWwuX3VzZWNvdW50Kys7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZGVsLl91c2Vjb3VudCA9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUiB0cnlpbmcgdG8gYmluZCBhbiB1bnVzZWQgcHJvcGVydHkgd2hpbGUgcmVhZG9ubHlcIiwgbW9kZWwpO1xuICAgIHRocm93IFwiRVJST1IgdHJ5aW5nIHRvIGJpbmQgYW4gdW51c2VkIHByb3BlcnR5XCI7XG4gIH1cbn07XG5cbnZhciBlbnN1cmVHbG9iYWxTdHlsZSA9IGZ1bmN0aW9uKGRlZnMsIHJlYWRvbmx5LCBnc0JpbmRpbmdQcm92aWRlciwgbW9kZWxOYW1lLCBwYXRoLCBnc0Z1bGxQYXRoLCBkZWZhdWx0VmFsdWUsIG92ZXJyaWRlRGVmYXVsdCkge1xuXG4gIHZhciBnbG9iYWxTdHlsZUJpbmRpbmdCaW5kVmFsdWUgPSBnc0JpbmRpbmdQcm92aWRlcihnc0Z1bGxQYXRoLCBkZWZhdWx0VmFsdWUsIG92ZXJyaWRlRGVmYXVsdCk7XG5cbiAgaWYgKHR5cGVvZiBkZWZzW21vZGVsTmFtZV0uX2dsb2JhbFN0eWxlc1twYXRoXSA9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChyZWFkb25seSkgdGhyb3cgXCJDYW5ub3QgZmluZCBfZ2xvYmFsU3R5bGUgZm9yIFwiICsgcGF0aCArIFwiIGluIFwiICsgbW9kZWxOYW1lICsgXCIhXCI7XG4gICAgaWYgKHBhdGguaW5kZXhPZignLicpICE9IC0xIHx8ICh0eXBlb2YgZGVmc1ttb2RlbE5hbWVdW3BhdGhdID09ICdvYmplY3QnICYmIHR5cGVvZiBkZWZzW21vZGVsTmFtZV1bcGF0aF0uX3dpZGdldCAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICBkZWZzW21vZGVsTmFtZV0uX2dsb2JhbFN0eWxlc1twYXRoXSA9IGdsb2JhbFN0eWxlQmluZGluZ0JpbmRWYWx1ZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZGVmc1ttb2RlbE5hbWVdLl9nbG9iYWxTdHlsZXNbcGF0aF0gIT0gZ2xvYmFsU3R5bGVCaW5kaW5nQmluZFZhbHVlKSB0aHJvdyBcIlVuZXhwZWN0ZWQgY29uZmxpY3RpbmcgZ2xvYmFsU3R5bGUgWzJdIGZvciBcIiArIG1vZGVsTmFtZSArIFwiL1wiICsgcGF0aCArIFwiOiBvbGQ9XCIgKyBkZWZzW21vZGVsTmFtZV0uX2dsb2JhbFN0eWxlc1twYXRoXSArIFwiIG5ldz1cIiArIGdsb2JhbFN0eWxlQmluZGluZ0JpbmRWYWx1ZTtcbn07XG5cbi8vIHRoZW1lVXBkYXRlciwgZGVmYXVsdFZhbHVlLCBvdmVycmlkZURlZmF1bHQsIHNldGNhdGVnb3J5IGFyZSBvbmx5IHVzZWQgaW4gIXJlYWRvbmx5IG1vZGVcbnZhciBtb2RlbEVuc3VyZVBhdGhBbmRHZXRCaW5kVmFsdWUgPSBmdW5jdGlvbihyZWFkb25seSwgZGVmcywgdGhlbWVVcGRhdGVyLCByb290TW9kZWxOYW1lLCB0ZW1wbGF0ZU5hbWUsIHdpdGhpbiwgZnVsbFBhdGgsIGRlZmF1bHRWYWx1ZSwgb3ZlcnJpZGVEZWZhdWx0LCBzZXRjYXRlZ29yeSkge1xuICB2YXIgbW9kZWxOYW1lO1xuICB2YXIgcmVzO1xuICB2YXIgcGF0aDtcbiAgLy8gVE9ETyByZW1vdmUgJyQnIGFuZCAnIycgaGFuZGluZ1xuICBpZiAoZnVsbFBhdGguc3Vic3RyKDAsIDEpID09ICckJykge1xuICAgIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQgJCBpbiBiaW5kaW5nUHJvdmlkZXI6IFwiLCBmdWxsUGF0aCwgdGVtcGxhdGVOYW1lKTtcbiAgICB2YXIgcCA9IGZ1bGxQYXRoLmluZGV4T2YoJy4nKTtcbiAgICBpZiAocCA9PSAtMSkge1xuICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIGZ1bGxQYXRoOiBcIiArIGZ1bGxQYXRoICsgXCIvXCIgKyB3aXRoaW4gKyBcIi9cIiArIHRlbXBsYXRlTmFtZSArIFwiL1wiICsgZGVmYXVsdFZhbHVlICsgXCIvXCIgKyBvdmVycmlkZURlZmF1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vZGVsTmFtZSA9IGZ1bGxQYXRoLnN1YnN0cigxLCBwIC0gMSk7XG4gICAgICBwYXRoID0gZnVsbFBhdGguc3Vic3RyKHAgKyAxKTtcbiAgICAgIC8vIFRPRE8gcmVmYWN0b3IgbWUgcGxlYXNlXG4gICAgICBpZiAobW9kZWxOYW1lID09ICd0aGVtZScpIHtcbiAgICAgICAgdmFyIHAyID0gcGF0aC5pbmRleE9mKCcuJyk7XG4gICAgICAgIG1vZGVsTmFtZSA9IHBhdGguc3Vic3RyKDAsIHAyKTtcbiAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyKHAyICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBcIlVuZXhwZWN0ZWQgJCBzZXF1ZW5jZTogXCIgKyBtb2RlbE5hbWUgKyBcIiBpbiBcIiArIGZ1bGxQYXRoO1xuICAgICAgfVxuICAgICAgcmVzID0gXCIkcm9vdC5jb250ZW50KCkudGhlbWUoKS5cIiArIG1vZGVsTmFtZSArIFwiKCkuXCIgKyBwYXRoLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXC4nLCAnZycpLCAnKCkuJyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGZ1bGxQYXRoLnN1YnN0cigwLCAxKSA9PSAnIycpIHtcbiAgICBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEICMgaW4gYmluZGluZ1Byb3ZpZGVyOiBcIiwgZnVsbFBhdGgsIHRlbXBsYXRlTmFtZSk7XG4gICAgbW9kZWxOYW1lID0gcm9vdE1vZGVsTmFtZTtcbiAgICBwYXRoID0gZnVsbFBhdGguc3Vic3RyKDEpO1xuICAgIHJlcyA9IFwiJHJvb3QuY29udGVudCgpLlwiICsgcGF0aC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFwuJywgJ2cnKSwgJygpLicpO1xuICB9IGVsc2UgaWYgKGZ1bGxQYXRoLnN1YnN0cigwLCA4KSA9PSAnX3RoZW1lXy4nKSB7XG4gICAgdmFyIHAzID0gZnVsbFBhdGguaW5kZXhPZignLicsIDgpO1xuICAgIG1vZGVsTmFtZSA9IGZ1bGxQYXRoLnN1YnN0cig4LCBwMyAtIDgpO1xuICAgIHBhdGggPSBmdWxsUGF0aC5zdWJzdHIocDMgKyAxKTtcbiAgICByZXMgPSBcIiRyb290LmNvbnRlbnQoKS50aGVtZSgpLlwiICsgbW9kZWxOYW1lICsgXCIoKS5cIiArIHBhdGgucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcLicsICdnJyksICcoKS4nKTtcbiAgfSBlbHNlIGlmIChmdWxsUGF0aC5zdWJzdHIoMCwgNykgPT0gJ19yb290Xy4nKSB7XG4gICAgbW9kZWxOYW1lID0gcm9vdE1vZGVsTmFtZTtcbiAgICBwYXRoID0gZnVsbFBhdGguc3Vic3RyKDcpO1xuICAgIHJlcyA9IFwiJHJvb3QuY29udGVudCgpLlwiICsgcGF0aC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFwuJywgJ2cnKSwgJygpLicpO1xuICB9IGVsc2Uge1xuICAgIG1vZGVsTmFtZSA9IHRlbXBsYXRlTmFtZTtcbiAgICBwYXRoID0gd2l0aGluICsgZnVsbFBhdGg7XG4gICAgcmVzID0gZnVsbFBhdGgucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcLicsICdnJyksICcoKS4nKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZGVmc1ttb2RlbE5hbWVdID09PSAndW5kZWZpbmVkJykgdGhyb3cgXCJDYW5ub3QgZmluZCBtb2RlbCBkZWYgZm9yIFtcIiArIG1vZGVsTmFtZSArIFwiXVwiO1xuXG4gIHZhciBwcm9wUG9zID0gcGF0aC5pbmRleE9mKCcuJyk7XG4gIHZhciBwcm9wTmFtZSA9IHByb3BQb3MgPT0gLTEgPyBwYXRoIDogcGF0aC5zdWJzdHIoMCwgcHJvcFBvcyk7XG5cbiAgaWYgKG1vZGVsTmFtZS5pbmRleE9mKCctJykgIT0gLTEpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRVJST1IgY2Fubm90IHVzZSAtIGZvciBibG9jayBuYW1lc1wiLCBtb2RlbE5hbWUpO1xuICAgIHRocm93IFwiRVJST1IgdW5leHBlY3RlZCBjaGFyIGluIGJsb2NrIG5hbWU6IFwiICsgbW9kZWxOYW1lO1xuICB9XG4gIGlmIChwcm9wTmFtZS5pbmRleE9mKCctJykgIT0gLTEpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRVJST1IgY2Fubm90IHVzZSAtIGZvciBwcm9wZXJ0eSBuYW1lc1wiLCBwcm9wTmFtZSk7XG4gICAgdGhyb3cgXCJFUlJPUiB1bmV4cGVjdGVkIGNoYXIgaW4gcHJvcGVydHkgbmFtZTogXCIgKyBtb2RlbE5hbWU7XG4gIH1cblxuICAvLyBGYXN0cGF0aFxuICBpZiAocmVhZG9ubHkpIHtcbiAgICBpZiAodHlwZW9mIGRlZnNbbW9kZWxOYW1lXS5fZ2xvYmFsU3R5bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdICE9PSAndW5kZWZpbmVkJyAmJiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdLl9jYXRlZ29yeSA9PSAnc3R5bGUnKSB7XG4gICAgICByZXMgKz0gJy5fZGVmYXVsdENvbXB1dGVkJztcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8vIGdldHMgdGhlIHdyaXRhYmxlIG1vZGVsIHdoZW4gXCIhcmVhZG9ubHlcIiBvciB0aGUgcmVhZG9ubHkgbW9kZWwgb3RoZXJ3aXNlXG4gIHZhciBtb2RlbDtcbiAgaWYgKHJlYWRvbmx5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnKSB0aHJvdyBcIkNhbm5vdCB1c2UgZGVmYXVsdFZhbHVlIGluIHJlYWRvbmx5IG1vZGUhXCI7XG4gICAgaWYgKG92ZXJyaWRlRGVmYXVsdCkgdGhyb3cgXCJDYW5ub3QgdXNlIG92ZXJyaWRlRGVmYXVsdCBpbiByZWFkb25seSBtb2RlIGZvciBcIiArIG1vZGVsTmFtZSArIFwiL1wiICsgcGF0aCArIFwiL1wiICsgb3ZlcnJpZGVEZWZhdWx0ICsgXCIhXCI7XG4gICAgaWYgKHR5cGVvZiBzZXRjYXRlZ29yeSAhPT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiQ2Fubm90IHNldCBjYXRlZ29yeSBmb3IgXCIgKyBtb2RlbE5hbWUgKyBcIi9cIiArIHBhdGggKyBcIi9cIiArIHNldGNhdGVnb3J5ICsgXCIgaW4gcmVhZG9ubHkgbW9kZSFcIjtcbiAgICBtb2RlbCA9IF9nZXRNb2RlbERlZihkZWZzLCBtb2RlbE5hbWUsIGZhbHNlLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVmc1ttb2RlbE5hbWVdLl93cml0ZWFibGUgPT09IGZhbHNlKSBjb25zb2xlLmxvZyhcIlRPRE8gZGVidWcgdXNlIGNhc2VzIGZvciB0aGlzIGNvbmRpdGlvblwiLCBtb2RlbE5hbWUsIHBhdGgpO1xuICAgIG1vZGVsID0gX2dldE1vZGVsRGVmKGRlZnMsIG1vZGVsTmFtZSwgZGVmc1ttb2RlbE5hbWVdLl93cml0ZWFibGUgPT09IGZhbHNlKTtcbiAgfVxuXG4gIGlmIChtb2RlbCA9PT0gbnVsbCkgdGhyb3cgXCJVbmV4cGVjdGVkIG1vZGVsIGZvciBbXCIgKyBtb2RlbE5hbWUgKyBcIl1cIjtcblxuICAvLyBpZiB0aGUgcHJvcGVydHkgZG9lcyBub3QgZXhpc3RzIHdlIGhhdmUgdG8gY3JlYXRlIGl0LlxuICBpZiAodHlwZW9mIG1vZGVsW3Byb3BOYW1lXSA9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIHdoZW4gaW4gcmVhZG9ubHkgbW9kZSB0aGlzIGNhbm5vdCBiZSBkb25lIVxuICAgIGlmIChyZWFkb25seSkgdGhyb3cgXCJDYW5ub3QgZmluZCBwYXRoIFwiICsgcHJvcE5hbWUgKyBcIiBmb3IgXCIgKyBtb2RlbE5hbWUgKyBcIiFcIjtcbiAgICBfbW9kZWxDcmVhdGVPclVwZGF0ZUJsb2NrRGVmKGRlZnMsIG1vZGVsTmFtZSwgcHJvcE5hbWUpO1xuICAgIG1vZGVsID0gX2dldE1vZGVsRGVmKGRlZnMsIG1vZGVsTmFtZSwgZmFsc2UpO1xuICB9XG5cbiAgLy8gTmVlZHMgdG8gZG8gdGhpcyBhZ2FpbiwgYmVjYXVzZSBcIl9tb2RlbENyZWF0ZU9yVXBkYXRlQmxvY2tEZWZcIiBjb3VsZCBoYXZlIGJlZW4ganVzdCBjcmVhdGVkIHRoZSBwcm9wZXJ0eSAoZS5nOiBiYWNrZ3JvdW5kQ29sb3IgYnV0dG9uQmxvY2sgbm90IGdldHRpbmcgZGVmYXVsdENvbXB1dGVkIGluIHRlbXBsYXRlLWxtKVxuICBpZiAodHlwZW9mIGRlZnNbbW9kZWxOYW1lXS5fZ2xvYmFsU3R5bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdICE9PSAndW5kZWZpbmVkJyAmJiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdICE9PSBudWxsICYmIGRlZnNbbW9kZWxOYW1lXVtwcm9wTmFtZV0uX2NhdGVnb3J5ID09ICdzdHlsZScpIHtcbiAgICByZXMgKz0gJy5fZGVmYXVsdENvbXB1dGVkJztcbiAgfVxuXG4gIHZhciBjaGlsZE1vZGVsID0gbW9kZWw7XG4gIHRyeSB7XG4gICAgX2luY3JlYXNlVXNlQ291bnQocmVhZG9ubHksIGNoaWxkTW9kZWwpO1xuICAgIGlmIChwcm9wUG9zICE9IC0xKSB7XG4gICAgICB2YXIgbXlwYXRoID0gcGF0aDtcbiAgICAgIGRvIHtcbiAgICAgICAgdmFyIHByb3AgPSBteXBhdGguc3Vic3RyKDAsIHByb3BQb3MpO1xuICAgICAgICBpZiAodHlwZW9mIGNoaWxkTW9kZWxbcHJvcF0gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBcIkZvdW5kIGFuIHVuZXhwZWN0ZWQgcHJvcCBcIiArIHByb3AgKyBcIiBmb3IgbW9kZWwgXCIgKyBtb2RlbE5hbWUgKyBcIiBmb3IgXCIgKyBwYXRoO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hpbGRNb2RlbCA9IGNoaWxkTW9kZWxbcHJvcF07XG4gICAgICAgIF9pbmNyZWFzZVVzZUNvdW50KHJlYWRvbmx5LCBjaGlsZE1vZGVsKTtcbiAgICAgICAgbXlwYXRoID0gbXlwYXRoLnN1YnN0cihwcm9wUG9zICsgMSk7XG4gICAgICAgIHByb3BQb3MgPSBteXBhdGguaW5kZXhPZignLicpO1xuICAgICAgfSB3aGlsZSAocHJvcFBvcyAhPSAtMSk7XG5cbiAgICAgIGlmICh0eXBlb2YgY2hpbGRNb2RlbFtteXBhdGhdID09ICd1bmRlZmluZWQnIHx8IGNoaWxkTW9kZWxbbXlwYXRoXSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBcIkZvdW5kIGFuIHVuZXhwZWN0ZWQgcGF0aCB0ZXJtaW5hdGlvbiBcIiArIG15cGF0aCArIFwiIGZvciBtb2RlbCBcIiArIG1vZGVsTmFtZSArIFwiIGZvciBcIiArIHBhdGg7XG4gICAgICB9XG4gICAgICBjaGlsZE1vZGVsID0gY2hpbGRNb2RlbFtteXBhdGhdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZE1vZGVsID0gY2hpbGRNb2RlbFtwYXRoXTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGNoaWxkTW9kZWwgPT09ICd1bmRlZmluZWQnIHx8IGNoaWxkTW9kZWwgPT09IG51bGwpIHRocm93IFwiVW5leHBlY3RlZCBudWxsIG1vZGVsIGZvciBcIiArIG1vZGVsTmFtZSArIFwiL1wiICsgd2l0aGluICsgXCIvXCIgKyBmdWxsUGF0aDtcblxuICAgIGlmICh0eXBlb2Ygc2V0Y2F0ZWdvcnkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjaGlsZE1vZGVsLl9jYXRlZ29yeSA9IHNldGNhdGVnb3J5O1xuICAgIH1cblxuICAgIF9pbmNyZWFzZVVzZUNvdW50KHJlYWRvbmx5LCBjaGlsZE1vZGVsKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJUT0RPIEVSUk9SIFByb3BlcnR5IGxvb2t1cCBleGNlcHRpb25cIiwgZSwgbW9kZWxOYW1lLCBwYXRoLCB0ZW1wbGF0ZU5hbWUsIGZ1bGxQYXRoLCBkZWZzKTtcbiAgICB0aHJvdyBlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBkZWZzW21vZGVsTmFtZV0uX2dsb2JhbFN0eWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXSA9PSAnb2JqZWN0JyAmJiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdICE9PSBudWxsICYmIHR5cGVvZiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdLl9jYXRlZ29yeSAhPSAndW5kZWZpbmVkJyAmJiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdLl9jYXRlZ29yeSA9PSAnc3R5bGUnKSB7XG4gICAgLy8gVE9ETyBjYW4gSSByZXN0cmljdCB0aGlzIGNvZGUgdG8gIXJlYWRvbmx5IG1vZGU/XG4gICAgdmFyIGdzQmluZGluZ1Byb3ZpZGVyID0gbW9kZWxFbnN1cmVQYXRoQW5kR2V0QmluZFZhbHVlLmJpbmQodW5kZWZpbmVkLCByZWFkb25seSwgZGVmcywgdGhlbWVVcGRhdGVyLCByb290TW9kZWxOYW1lLCB0ZW1wbGF0ZU5hbWUsICcnKTtcblxuICAgIHZhciBzdWJQYXRoID0gcGF0aC5pbmRleE9mKCcuJykgIT0gLTEgPyBwYXRoLnN1YnN0cihwYXRoLmluZGV4T2YoJy4nKSkgOiAnJztcblxuICAgIC8vIFRoZSBuZXh0IGNvZGUgc3VwcG9ydHMgb25seSBwcm9wZXJ0aWVzIHdpdGggb25lIGRvdCAob2JqZWN0LnByb3BlcnR5KS5cbiAgICBpZiAoc3ViUGF0aC5pbmRleE9mKCcuJywgMSkgIT0gLTEpIHRocm93IFwiVE9ETyB1bnN1cHBvcnRlZCBvYmplY3QgbmVzdGluZyEgXCIgKyBwYXRoO1xuXG4gICAgdmFyIGdzUGF0aCA9IGRlZnNbbW9kZWxOYW1lXS5fZ2xvYmFsU3R5bGUgKyAnLicgKyBwcm9wTmFtZTtcbiAgICBpZiAodHlwZW9mIGRlZnNbbW9kZWxOYW1lXVtwcm9wTmFtZV0gPT0gJ29iamVjdCcgJiYgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXSAhPT0gbnVsbCAmJiB0eXBlb2YgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXS5fZ2xvYmFsU3R5bGUgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGdzUGF0aCA9IGRlZnNbbW9kZWxOYW1lXVtwcm9wTmFtZV0uX2dsb2JhbFN0eWxlO1xuICAgIH1cblxuICAgIGVuc3VyZUdsb2JhbFN0eWxlKGRlZnMsIHJlYWRvbmx5LCBnc0JpbmRpbmdQcm92aWRlciwgbW9kZWxOYW1lLCBwcm9wTmFtZSwgZ3NQYXRoLCB1bmRlZmluZWQsIGZhbHNlKTtcblxuICAgIHZhciBnc0Z1bGxQYXRoID0gZ3NQYXRoICsgc3ViUGF0aDtcblxuICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlID09ICd1bmRlZmluZWQnICYmIGRlZnNbbW9kZWxOYW1lXS5fZGVmYXVsdFZhbHVlc1twYXRoXSAhPT0gbnVsbCkgZGVmYXVsdFZhbHVlID0gZGVmc1ttb2RlbE5hbWVdLl9kZWZhdWx0VmFsdWVzW3BhdGhdO1xuXG4gICAgZW5zdXJlR2xvYmFsU3R5bGUoZGVmcywgcmVhZG9ubHksIGdzQmluZGluZ1Byb3ZpZGVyLCBtb2RlbE5hbWUsIHBhdGgsIGdzRnVsbFBhdGgsIGRlZmF1bHRWYWx1ZSwgb3ZlcnJpZGVEZWZhdWx0KTtcblxuICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHJlYWRvbmx5KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgc2V0IGEgbmV3IHRoZW1lIGRlZmF1bHQgdmFsdWVcIiwgZ3NGdWxsUGF0aC5zdWJzdHIoNyksIGRlZmF1bHRWYWx1ZSwgXCJ3aGlsZSBpbiByZWFkb25seSBtb2RlXCIpO1xuICAgICAgICB0aHJvdyBcIkNhbm5vdCBzZXQgYSBuZXcgdGhlbWUgZGVmYXVsdCB2YWx1ZSAoXCIgKyBkZWZhdWx0VmFsdWUgKyBcIikgZm9yIFwiICsgZ3NGdWxsUGF0aC5zdWJzdHIoNykgKyBcIiB3aGlsZSBpbiByZWFkb25seSBtb2RlIVwiO1xuICAgICAgfVxuICAgICAgdGhlbWVVcGRhdGVyKCdkZWZhdWx0JywgZ3NGdWxsUGF0aC5zdWJzdHIoNyksIGRlZmF1bHRWYWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETyBjb21wbGV4IHN0dWZmLiBJZiB0aGUgdGhlbWUgdXNlcyBpbmhlcml0YW5jZSB3ZSBlbmZvcmNlIGl0IHVzaW5nIHdpdGggdGhlIHNhbWUgdmFsdWUsIGJ1dCB0aGlzIGlzIGEgbGltaXQuXG4gICAgZGVmYXVsdFZhbHVlID0gbnVsbDtcblxuICB9XG5cbiAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGRlZnNbbW9kZWxOYW1lXS5fZGVmYXVsdFZhbHVlc1twYXRoXSA9PSAndW5kZWZpbmVkJyB8fCAodHlwZW9mIG92ZXJyaWRlRGVmYXVsdCAhPSAndW5kZWZpbmVkJyAmJiBvdmVycmlkZURlZmF1bHQpKSB7XG4gICAgICBpZiAocmVhZG9ubHkpIHRocm93IFwiQ2Fubm90IHNldCBuZXcgX2RlZmF1bHRWYWx1ZXMgWzFdIGZvciBcIiArIHBhdGggKyBcIiBpbiBcIiArIG1vZGVsTmFtZSArIFwiIVwiO1xuICAgICAgZGVmc1ttb2RlbE5hbWVdLl9kZWZhdWx0VmFsdWVzW3BhdGhdID0gZGVmYXVsdFZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIGlmIChyZWFkb25seSAmJiBkZWZzW21vZGVsTmFtZV0uX2RlZmF1bHRWYWx1ZXNbcGF0aF0gIT09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBcIkNhbm5vdCBzZXQgbmV3IF9kZWZhdWx0VmFsdWVzIFsyXSBmb3IgXCIgKyBwYXRoICsgXCIgaW4gXCIgKyBtb2RlbE5hbWUgKyBcIiFcIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIHJlbW92ZSBkZWZhdWx0IHZhbHVlLiBVZ2x5LiAoTmVlZHMgdGhpcyBmb3IgZGVmYXVsdHMgaW4gdGVtcGxhdGUtbG0gc29jaWFsTGlua3NJY29uKVxuICAgICAgICBkZWZzW21vZGVsTmFtZV0uX2RlZmF1bHRWYWx1ZXNbcGF0aF0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChkZWZzW21vZGVsTmFtZV0uX2RlZmF1bHRWYWx1ZXNbcGF0aF0gIT0gZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUT0RPIGVycm9yISEhIFRyeWluZyB0byBzZXQgYSBuZXcgZGVmYXVsdCB2YWx1ZSBmb3IgXCIgKyBtb2RlbE5hbWUgKyBcIiBcIiArIHBhdGggKyBcIiB3aGlsZSBpdCBhbHJlYWR5IGV4aXN0cyAoY3VycmVudDogXCIgKyBkZWZzW21vZGVsTmFtZV0uX2RlZmF1bHRWYWx1ZXNbcGF0aF0gKyBcIiwgbmV3OiBcIiArIGRlZmF1bHRWYWx1ZSArIFwiKVwiKTtcbiAgICAgICAgdGhyb3cgXCJUcnlpbmcgdG8gc2V0IGEgbmV3IGRlZmF1bHQgdmFsdWUgZm9yIFwiICsgbW9kZWxOYW1lICsgXCIgXCIgKyBwYXRoICsgXCIgd2hpbGUgaXQgYWxyZWFkeSBleGlzdHMgKGN1cnJlbnQ6IFwiICsgZGVmc1ttb2RlbE5hbWVdLmRlZmF1bHRWYWx1ZXNbcGF0aF0gKyBcIiwgbmV3OiBcIiArIGRlZmF1bHRWYWx1ZSArIFwiKVwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuXG52YXIgZ2VuZXJhdGVSZXN1bHRNb2RlbCA9IGZ1bmN0aW9uKHRlbXBsYXRlRGVmKSB7XG4gIHZhciBkZWZzID0gdGVtcGxhdGVEZWYuX2RlZnM7XG4gIHZhciB0ZW1wbGF0ZU5hbWUgPSB0ZW1wbGF0ZURlZi50ZW1wbGF0ZU5hbWU7XG5cbiAgdmFyIGZpbmFsTW9kZWxDb250ZW50ID0gX2dlbmVyYXRlTW9kZWwoZGVmcywgdGVtcGxhdGVOYW1lKTtcblxuICAvLyBUT0RPIHVnbHkgdG8gYWRkIHRoaXMgbWFudWFsbHlcbiAgaWYgKHR5cGVvZiBkZWZzWyd0aGVtZSddICE9PSAndW5kZWZpbmVkJykge1xuICAgIGZpbmFsTW9kZWxDb250ZW50LnRoZW1lID0gX2dlbmVyYXRlTW9kZWwoZGVmcywgJ3RoZW1lJyk7XG4gIH1cblxuICByZXR1cm4gZmluYWxNb2RlbENvbnRlbnQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgLy8gdXNlZCB0byBjb21waWxlIHRoZSB0ZW1wbGF0ZVxuICBlbnN1cmVQYXRoQW5kR2V0QmluZFZhbHVlOiBtb2RlbEVuc3VyZVBhdGhBbmRHZXRCaW5kVmFsdWUuYmluZCh1bmRlZmluZWQsIGZhbHNlKSxcbiAgLy8gdXNlZCBpbiBydW50aW1lIHRoZSB0ZW1wbGF0ZVxuICBnZXRCaW5kVmFsdWU6IG1vZGVsRW5zdXJlUGF0aEFuZEdldEJpbmRWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgdHJ1ZSksXG4gIGdlbmVyYXRlTW9kZWw6IF9nZW5lcmF0ZU1vZGVsLFxuICBnZW5lcmF0ZVJlc3VsdE1vZGVsOiBnZW5lcmF0ZVJlc3VsdE1vZGVsLFxuICBnZXREZWY6IF9nZXREZWYsXG4gIGNyZWF0ZU9yVXBkYXRlQmxvY2tEZWY6IF9tb2RlbENyZWF0ZU9yVXBkYXRlQmxvY2tEZWZcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWwgZ2xvYmFsOiBmYWxzZSAqL1xuXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xudmFyIGNvbnZlcnRlclV0aWxzID0gcmVxdWlyZShcIi4vdXRpbHMuanNcIik7XG52YXIgZWxhYm9yYXRlRGVjbGFyYXRpb25zID0gcmVxdWlyZShcIi4vZGVjbGFyYXRpb25zLmpzXCIpO1xudmFyIHByb2Nlc3NTdHlsZXNoZWV0UnVsZXMgPSByZXF1aXJlKFwiLi9zdHlsZXNoZWV0LmpzXCIpO1xudmFyIG1vZGVsRGVmID0gcmVxdWlyZShcIi4vbW9kZWwuanNcIik7XG52YXIgZG9tdXRpbHMgPSByZXF1aXJlKFwiLi9kb211dGlscy5qc1wiKTtcblxudmFyIHdyYXBFbGVtZW50V2l0aENvbmRpdGlvbiA9IGZ1bmN0aW9uKGF0dHJpYnV0ZSwgZWxlbWVudCwgYmluZGluZ1Byb3ZpZGVyKSB7XG4gIHZhciBjb25kID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZSk7XG5cbiAgdHJ5IHtcbiAgICB2YXIgYmluZGluZyA9IGNvbnZlcnRlclV0aWxzLmNvbmRpdGlvbkJpbmRpbmcoY29uZCwgYmluZGluZ1Byb3ZpZGVyKTtcbiAgICAkKGVsZW1lbnQpLmJlZm9yZSgnPCEtLSBrbyBpZjogJyArIGJpbmRpbmcgKyAnIC0tPicpO1xuICAgICQoZWxlbWVudCkuYWZ0ZXIoJzwhLS0gL2tvIC0tPicpO1xuICAgIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKFwiTW9kZWwgZW5zdXJlIHBhdGggZmFpbGVkIGluIGlmL3ZhcmlhbnRcIiwgZWxlbWVudCwgY29uZCwgYXR0cmlidXRlKTtcbiAgICB0aHJvdyBlO1xuICB9XG5cbn07XG5cbnZhciByZXBsYWNlZEF0dHJpYnV0ZXMgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGVOYW1lKSB7XG4gIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgXCJyZXBsYWNlZFwiICsgYXR0cmlidXRlTmFtZSkpO1xufTtcblxudmFyIHByb2Nlc3NTdHlsZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBiaW5kaW5nUHJvdmlkZXIsIGFkZFVuaXF1ZUlkKSB7XG4gIHZhciBzdHlsZSA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAncmVwbGFjZWRzdHlsZScpO1xuICB2YXIgbmV3U3R5bGUgPSBudWxsO1xuICB2YXIgbmV3QmluZGluZ3M7XG4gIGlmIChhZGRVbmlxdWVJZCkgbmV3QmluZGluZ3MgPSB7XG4gICAgdW5pcXVlSWQ6ICckZGF0YScsXG4gICAgYXR0cjoge1xuICAgICAgaWQ6ICdpZCdcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJlbW92ZURpc3BsYXlOb25lID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLWRpc3BsYXknKSAhPT0gbnVsbDtcblxuICBuZXdTdHlsZSA9IGVsYWJvcmF0ZURlY2xhcmF0aW9ucyhzdHlsZSwgdW5kZWZpbmVkLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgYmluZGluZ1Byb3ZpZGVyLCBlbGVtZW50LCBuZXdCaW5kaW5ncywgcmVtb3ZlRGlzcGxheU5vbmUpO1xuXG4gIC8vIG9ubHkgd2hlbiB1c2luZyBcInJlcGxhY2VkXCJcbiAgaWYgKG5ld1N0eWxlID09PSBudWxsKSB7XG4gICAgbmV3U3R5bGUgPSBzdHlsZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBiaW5kaW5ncyB3ZSBrZWVwIHJlcGxhY2Vkc3R5bGUgdG8gYmUgdXNlZCBieSBJRSBkdXJpbmcgb3V0cHV0XG4gICAgLy8gb3RoZXJ3aXNlIEkgcmVtb3ZlIGl0IGJlY2F1c2UgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB2aXJ0dWFsQXR0clN0eWxlIGJpbmRpbmcuXG4gICAgLy8gVE9ETyBtYXliZSB3ZSBiZXR0ZXIgdXNlIGRpZmZlcmVudCBuYW1lcyBmb3IgXCJyZXBsYWNlZFwiIHVzZWQgZHVyaW5nIHRlbXBsYXRlIGNvbnZlcnNpb25cbiAgICAvLyBhbmQgdGhlIG9uZXMgdXNlZCB0byBjcmVhdGUgdGhlIG91dHB1dC5cbiAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgJ3JlcGxhY2Vkc3R5bGUnKTtcbiAgfVxuXG4gIGlmIChuZXdTdHlsZSAhPT0gbnVsbCkge1xuICAgIGlmIChuZXdTdHlsZS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgZG9tdXRpbHMuc2V0QXR0cmlidXRlKGVsZW1lbnQsICdzdHlsZScsIG5ld1N0eWxlKTtcbiAgICB9IGVsc2UgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdzdHlsZScpO1xuICB9XG59O1xuXG5cbi8vIFRPRE8gZml4aW5nIFVSTHMgaXMgYWxzbyBuZWVkZWQgd2hlcmUgc3R5bGVzIHVzZXMgcGF0aCAoZS5nOiBiYWNrZ3JvdW5kLWltYWdlLCBAaW1wb3J0KVxudmFyIF9maXhSZWxhdGl2ZVBhdGggPSBmdW5jdGlvbihhdHRyaWJ1dGUsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBpbmRleCwgZWxlbWVudCkge1xuICB2YXIgdXJsID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZSk7XG4gIHZhciBuZXdVcmwgPSB0ZW1wbGF0ZVVybENvbnZlcnRlcih1cmwpO1xuICBpZiAobmV3VXJsICE9PSBudWxsKSB7XG4gICAgZG9tdXRpbHMuc2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZSwgbmV3VXJsKTtcbiAgfVxufTtcblxuXG52YXIgcHJvY2Vzc0Jsb2NrID0gZnVuY3Rpb24oZWxlbWVudCwgZGVmcywgdGhlbWVVcGRhdGVyLCBibG9ja1B1c2hlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIGNvbnRleHROYW1lLCByb290TW9kZWxOYW1lLCBjb250YWluZXJOYW1lLCBnZW5lcmF0ZVVuaXF1ZUlkLCB0ZW1wbGF0ZUNyZWF0b3IpIHtcblxuICB0cnkge1xuXG4gIHZhciB0ZW1wbGF0ZU5hbWU7XG4gIHZhciB2YXJpYW50TmFtZSA9ICcnLFxuICAgIHZhcmlhbnREZWYgPSAnJztcbiAgaWYgKGNvbnRleHROYW1lID09ICdibG9jaycpIHtcbiAgICB0ZW1wbGF0ZU5hbWUgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tYmxvY2snKTtcbiAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tYmxvY2snKTtcbiAgfSBlbHNlIGlmIChjb250ZXh0TmFtZSA9PSAndGVtcGxhdGUnKSB7XG4gICAgdGVtcGxhdGVOYW1lID0gcm9vdE1vZGVsTmFtZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBcIlVuZXhwZWN0ZWQgY29udGV4dCBuYW1lIHdoaWxlIHByb2Nlc3NpbmcgYmxvY2s6IFwiICsgY29udGV4dE5hbWU7XG4gIH1cblxuICAvLyBjb25zb2xlLmxvZyhcInByb2Nlc3NCbG9ja1wiLCBjb250ZXh0TmFtZSwgcm9vdE1vZGVsTmFtZSwgY29udGFpbmVyTmFtZSwgdGVtcGxhdGVOYW1lKTtcblxuICAvLyBSZW1vdmUgZWxlbWVudFxuICAkKCdbZGF0YS1rby1yZW1vdmVdJywgZWxlbWVudCkucmVtb3ZlKCk7XG5cbiAgdmFyIGZpeGVkQmxvY2tzID0gJCgnW2RhdGEta28tYmxvY2tdJywgZWxlbWVudCkucmVwbGFjZVdpdGgoJzxyZXBsYWNlZGJsb2NrPicpO1xuXG4gIC8vIFVybHMgaW4gdGhlc2UgYXR0cmlidXRlcyBuZWVkcyBcInJlbGF0aXZpemF0aW9uXCJcbiAgdmFyIHVybGF0dHJzID0gWydocmVmJywgJ3NyYycsICdkYXRhLWtvLXBsYWNlaG9sZGVyLXNyYycsICdiYWNrZ3JvdW5kJ107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdXJsYXR0cnMubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBmYWNjaW8gaWwgYmluZCBwZXIgbm9uIGRlZmluaXJlIGZ1bnppb25pIGluIHVuIGxvb3AgKGpzaGludClcbiAgICB2YXIgZnVuYyA9IF9maXhSZWxhdGl2ZVBhdGguYmluZCh1bmRlZmluZWQsIHVybGF0dHJzW2ldLCB0ZW1wbGF0ZVVybENvbnZlcnRlcik7XG4gICAgJCgnWycgKyB1cmxhdHRyc1tpXSArICddJywgZWxlbWVudCkuZWFjaChmdW5jKTtcbiAgfVxuXG4gIHZhciBkYXRhRGVmcyA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1wcm9wZXJ0aWVzJyk7XG4gIGlmIChkYXRhRGVmcyA9PT0gbnVsbCkgZGF0YURlZnMgPSBcIlwiO1xuICAkKFwiW2RhdGEta28tcHJvcGVydGllc11cIiwgZWxlbWVudCkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgIGlmIChkYXRhRGVmcy5sZW5ndGggPiAwKSBkYXRhRGVmcyA9IGRhdGFEZWZzICsgXCIgXCI7XG4gICAgZGF0YURlZnMgPSBkYXRhRGVmcyArIGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1wcm9wZXJ0aWVzJyk7XG4gICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXByb3BlcnRpZXMnKTtcbiAgfSk7XG5cbiAgbW9kZWxEZWYuY3JlYXRlT3JVcGRhdGVCbG9ja0RlZihkZWZzLCB0ZW1wbGF0ZU5hbWUsIGRhdGFEZWZzLCB7IGNvbnRleHROYW1lOiBjb250ZXh0TmFtZSB9KTtcblxuICB2YXIgYmluZGluZ1Byb3ZpZGVyID0gbW9kZWxEZWYuZW5zdXJlUGF0aEFuZEdldEJpbmRWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgZGVmcywgdGhlbWVVcGRhdGVyLCByb290TW9kZWxOYW1lLCB0ZW1wbGF0ZU5hbWUsICcnKTtcbiAgaWYgKGNvbnRleHROYW1lID09ICdibG9jaycpIGJpbmRpbmdQcm92aWRlcignaWQnLCAnJyk7XG5cbiAgJCgnc3R5bGUnLCBlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgdmFyIHN0eWxlID0gZG9tdXRpbHMuZ2V0SW5uZXJIdG1sKGVsZW1lbnQpO1xuXG4gICAgdmFyIGJsb2NrRGVmc1VwZGF0ZXIgPSBtb2RlbERlZi5jcmVhdGVPclVwZGF0ZUJsb2NrRGVmLmJpbmQodW5kZWZpbmVkLCBkZWZzKTtcbiAgICB2YXIgbG9jYWxXaXRoQmluZGluZ1Byb3ZpZGVyID0gbW9kZWxEZWYuZW5zdXJlUGF0aEFuZEdldEJpbmRWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgZGVmcywgdGhlbWVVcGRhdGVyLCByb290TW9kZWxOYW1lKTtcbiAgICB2YXIgbmV3U3R5bGUgPSBwcm9jZXNzU3R5bGVzaGVldFJ1bGVzKHN0eWxlLCB1bmRlZmluZWQsIGxvY2FsV2l0aEJpbmRpbmdQcm92aWRlciwgYmxvY2tEZWZzVXBkYXRlciwgdGhlbWVVcGRhdGVyLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgcm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lKTtcblxuICAgIGlmIChuZXdTdHlsZSAhPSBzdHlsZSkge1xuICAgICAgaWYgKG5ld1N0eWxlLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgdmFyIHRtcE5hbWUgPSB0ZW1wbGF0ZUNyZWF0b3IobmV3U3R5bGUpO1xuICAgICAgICBkb211dGlscy5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtYmluZCcsICd0ZW1wbGF0ZTogeyBuYW1lOiBcXCcnICsgdG1wTmFtZSArICdcXCcgfScpO1xuICAgICAgICAvLyBobyBjcmVhdG8gaWwgdGVtcGxhdGUgcXVpbmRpIHBvc3NvIHN2dW90YXJlIGlsIHNvcmdlbnRlLlxuICAgICAgICBkb211dGlscy5zZXRDb250ZW50KGVsZW1lbnQsICcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlbW92ZSBlbXB0eSBzdHlsZXMgYmxvY2tzXG4gICAgICAgIGRvbXV0aWxzLnJlbW92ZUVsZW1lbnRzKCQoZWxlbWVudCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcHJvY2Vzc1N0eWxlKGVsZW1lbnQsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBiaW5kaW5nUHJvdmlkZXIsIGdlbmVyYXRlVW5pcXVlSWQpO1xuXG4gIC8vIFRPRE8gaHJlZiBzaG91bGQgYmUgc3VwcG9ydGVkLiBkYXRhLWtvLWRpc3BsYXkgYW5kIGRhdGEta28td3JhcCBzaG91bGQgbmV2ZXIgaGFwcGVuIGluIGhlcmUuXG4gIHZhciBub3RzdXBwb3J0ZWQgPSBbJ2RhdGEta28tZGlzcGxheScsICdkYXRhLWtvLWVkaXRhYmxlJywgJ2RhdGEta28td3JhcCcsICdocmVmJ107XG4gIGZvciAodmFyIGogPSAwOyBqIDwgbm90c3VwcG9ydGVkLmxlbmd0aDsgaisrKSB7XG4gICAgdmFyIGF0dHIgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgbm90c3VwcG9ydGVkW2pdKTtcbiAgICBpZiAoYXR0cikge1xuICAgICAgY29uc29sZS53YXJuKFwiRVJST1I6IFVuc3VwcG9ydGVkIFwiICsgbm90c3VwcG9ydGVkW2pdICsgXCIgdXNlZCB0b2dldGhlciB3aXRoIGRhdGEta28tYmxvY2tcIiwgZWxlbWVudCk7XG4gICAgICB0aHJvdyBcIkVSUk9SOiBVbnN1cHBvcnRlZCBcIiArIG5vdHN1cHBvcnRlZFtqXSArIFwiIHVzZWQgdG9nZXRoZXIgd2l0aCBkYXRhLWtvLWJsb2NrXCI7XG4gICAgfVxuICB9XG5cbiAgLy8gc2ltcGx5IHByZXByb2Nlc3NlZCBhcyBkYXRhLWtvLXdyYXAgKyAta28tYXR0ci1ocmVmXG4gICQoXCJbZGF0YS1rby1saW5rXVwiLCBlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgdmFyIHVybFZhciA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1saW5rJyk7XG4gICAgdmFyIHJlcFN0eWxlID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdyZXBsYWNlZHN0eWxlJyk7XG4gICAgaWYgKHR5cGVvZiByZXBTdHlsZSA9PSAndW5kZWZpbmVkJyB8fCByZXBTdHlsZSA9PT0gbnVsbCkgcmVwU3R5bGUgPSAnJztcbiAgICBpZiAocmVwU3R5bGUgIT09ICcnKSByZXBTdHlsZSA9ICcta28tYXR0ci1ocmVmOiBAJyArIHVybFZhciArIFwiOyBcIiArIHJlcFN0eWxlO1xuICAgIGVsc2UgcmVwU3R5bGUgPSAnLWtvLWF0dHItaHJlZjogQCcgKyB1cmxWYXI7XG4gICAgZG9tdXRpbHMuc2V0QXR0cmlidXRlKGVsZW1lbnQsICdyZXBsYWNlZHN0eWxlJywgcmVwU3R5bGUpO1xuICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby13cmFwJywgdXJsVmFyKTtcbiAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tbGluaycpO1xuICB9KTtcblxuICAkKFwiW3JlcGxhY2Vkc3R5bGVdXCIsIGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICBwcm9jZXNzU3R5bGUoZWxlbWVudCwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIGJpbmRpbmdQcm92aWRlciwgZmFsc2UpO1xuICB9KTtcblxuICAkKFwiW3JlcGxhY2VkaHR0cC1lcXVpdl1cIiwgZWxlbWVudCkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgIHJlcGxhY2VkQXR0cmlidXRlcyhlbGVtZW50LCBcImh0dHAtZXF1aXZcIik7XG4gIH0pO1xuXG4gICQoXCJbZGF0YS1rby1kaXNwbGF5XVwiLCBlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgd3JhcEVsZW1lbnRXaXRoQ29uZGl0aW9uKCdkYXRhLWtvLWRpc3BsYXknLCBlbGVtZW50LCBiaW5kaW5nUHJvdmlkZXIpO1xuICB9KTtcblxuICAkKFwiW2RhdGEta28tZWRpdGFibGVdXCIsIGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICB2YXIgbmV3QmluZGluZywgZGVmYXVsdFZhbHVlLCBtb2RlbCwgY3VycmVudEJpbmRpbmdzLCBkYXRhQmluZDtcblxuXG4gICAgdmFyIGRhdGFFZGl0YWJsZSA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCBcImRhdGEta28tZWRpdGFibGVcIik7XG5cbiAgICAvLyBUT0RPIGFkZCB2YWxpZGF0aW9uIG9mIHRoZSBlZGl0YWJsZVxuXG4gICAgdmFyIGl0ZW1CaW5kVmFsdWU7XG4gICAgdmFyIHNlbGVjdEJpbmRpbmc7XG4gICAgaWYgKGRhdGFFZGl0YWJsZS5sYXN0SW5kZXhPZignLicpID4gMCkge1xuICAgICAgdmFyIHN1YnMgPSBkYXRhRWRpdGFibGUuc3Vic3RyKDAsIGRhdGFFZGl0YWJsZS5sYXN0SW5kZXhPZignLicpKTtcbiAgICAgIGl0ZW1CaW5kVmFsdWUgPSBiaW5kaW5nUHJvdmlkZXIoc3Vicyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZW1CaW5kVmFsdWUgPSBiaW5kaW5nUHJvdmlkZXIoZGF0YUVkaXRhYmxlKTtcbiAgICB9XG4gICAgc2VsZWN0QmluZGluZyA9IFwid3lzaXd5Z0NsaWNrOiBmdW5jdGlvbihvYmosIGV2dCkgeyAkcm9vdC5zZWxlY3RJdGVtKFwiICsgaXRlbUJpbmRWYWx1ZSArIFwiLCAkZGF0YSk7IHJldHVybiBmYWxzZSB9LCBjbGlja0J1YmJsZTogZmFsc2UsIHd5c2l3eWdDc3M6IHsgc2VsZWN0ZWRpdGVtOiAkcm9vdC5pc1NlbGVjdGVkSXRlbShcIiArIGl0ZW1CaW5kVmFsdWUgKyBcIikgfSwgc2Nyb2xsSW50b1ZpZXc6ICRyb290LmlzU2VsZWN0ZWRJdGVtKFwiICsgaXRlbUJpbmRWYWx1ZSArIFwiKVwiO1xuXG4gICAgaWYgKGRvbXV0aWxzLmdldExvd2VyVGFnTmFtZShlbGVtZW50KSAhPSAnaW1nJykge1xuXG5cbiAgICAgIGRlZmF1bHRWYWx1ZSA9IGRvbXV0aWxzLmdldElubmVySHRtbChlbGVtZW50KTtcbiAgICAgIHZhciBtb2RlbEJpbmRWYWx1ZSA9IGJpbmRpbmdQcm92aWRlcihkYXRhRWRpdGFibGUsIGRlZmF1bHRWYWx1ZSwgdHJ1ZSwgJ3d5c2l3eWcnKTtcbiAgICAgIG5ld0JpbmRpbmcgPSBcIlwiO1xuXG4gICAgICBpZiAoIWRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCBcImlkXCIpKSB7XG4gICAgICAgIG5ld0JpbmRpbmcgKz0gXCJ3eXNpd3lnSWQ6IGlkKCkrJ19cIiArIGRhdGFFZGl0YWJsZS5yZXBsYWNlKCcuJywgJ18nKSArIFwiJywgXCI7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZWN0QmluZGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbmV3QmluZGluZyArPSBzZWxlY3RCaW5kaW5nICsgXCIsIFwiO1xuICAgICAgfVxuXG4gICAgICBuZXdCaW5kaW5nICs9IFwid3lzaXd5Z09ySHRtbDogXCIgKyBtb2RlbEJpbmRWYWx1ZTtcblxuICAgICAgaWYgKGRvbXV0aWxzLmdldExvd2VyVGFnTmFtZShlbGVtZW50KSA9PSAndGQnKSB7XG4gICAgICAgIHZhciB3cmFwcGluZ0RpdiA9ICQoJzxkaXYgZGF0YS1rby13cmFwPVwiZmFsc2VcIiBzdHlsZT1cIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCVcIj48L2Rpdj4nKVswXTtcbiAgICAgICAgZG9tdXRpbHMuc2V0QXR0cmlidXRlKHdyYXBwaW5nRGl2LCAnZGF0YS1iaW5kJywgbmV3QmluZGluZyk7XG4gICAgICAgIHZhciBuZXdDb250ZW50ID0gZG9tdXRpbHMuZ2V0SW5uZXJIdG1sKCQoJzxkaXY+PC9kaXY+JykuYXBwZW5kKHdyYXBwaW5nRGl2KSk7XG4gICAgICAgIGRvbXV0aWxzLnNldENvbnRlbnQoZWxlbWVudCwgbmV3Q29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50QmluZGluZ3MgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtYmluZCcpO1xuICAgICAgICBkYXRhQmluZCA9IChjdXJyZW50QmluZGluZ3MgIT09IG51bGwgPyBjdXJyZW50QmluZGluZ3MgKyBcIiwgXCIgOiBcIlwiKSArIG5ld0JpbmRpbmc7XG4gICAgICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1iaW5kJywgZGF0YUJpbmQpO1xuICAgICAgICBkb211dGlscy5zZXRDb250ZW50KGVsZW1lbnQsICcnKTtcbiAgICAgIH1cbiAgICAgIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1lZGl0YWJsZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgd2lkdGggPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ3dpZHRoJyk7XG4gICAgICBpZiAod2lkdGggPT09ICcnKSB3aWR0aCA9IG51bGw7XG4gICAgICBpZiAod2lkdGggPT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVSUk9SOiBkYXRhLWtvLWVkaXRhYmxlIGltYWdlcyBtdXN0IGRlY2xhcmUgYSBXSURUSCBhdHRyaWJ1dGUhXCIsIGVsZW1lbnQpO1xuICAgICAgICB0aHJvdyBcIkVSUk9SOiBkYXRhLWtvLWVkaXRhYmxlIGltYWdlcyBtdXN0IGRlY2xhcmUgYSBXSURUSCBhdHRyaWJ1dGUhXCI7XG4gICAgICB9XG4gICAgICB2YXIgaGVpZ2h0ID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdoZWlnaHQnKTtcbiAgICAgIGlmIChoZWlnaHQgPT09ICcnKSBoZWlnaHQgPSBudWxsO1xuXG4gICAgICB2YXIgYWxpZ24gPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2FsaWduJyk7XG5cbiAgICAgIGN1cnJlbnRCaW5kaW5ncyA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1iaW5kJyk7XG5cbiAgICAgIC8vIFRPRE8gdGhpcyBpcyB1Z2x5Li4uIG1heWJlIGEgYmV0dGVyIHN0cmF0ZWd5IGlzIHRvIHBhc3MgdGhpcyBhcm91bmQgdXNpbmcgXCJkYXRhLVwiIGF0dHJpYnV0ZXNcbiAgICAgIHZhciBkeW5IZWlnaHQgPSBjdXJyZW50QmluZGluZ3MgJiYgY3VycmVudEJpbmRpbmdzLm1hdGNoKC92aXJ0dWFsQXR0cjoge1tefV0qIGhlaWdodDogKFteLH1dKilbLH1dLyk7XG4gICAgICBpZiAoZHluSGVpZ2h0KSBoZWlnaHQgPSBkeW5IZWlnaHRbMV07XG4gICAgICB2YXIgZHluV2lkdGggPSBjdXJyZW50QmluZGluZ3MgJiYgY3VycmVudEJpbmRpbmdzLm1hdGNoKC92aXJ0dWFsQXR0cjoge1tefV0qIHdpZHRoOiAoW14sfV0qKVssfV0vKTtcbiAgICAgIGlmIChkeW5XaWR0aCkgd2lkdGggPSBkeW5XaWR0aFsxXTtcblxuICAgICAgdmFyIG1ldGhvZDtcblxuICAgICAgZGVmYXVsdFZhbHVlID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXBsYWNlaG9sZGVyLXNyYycpO1xuICAgICAgLy8gVE9ETyBtYWtlIHN1cmUgdGhpcyBkZWZhdWx0IHZhbHVlIGlzIHRoZSBzYW1lIGFzIHRoZSBvbmUgY2hlY2tlZCBieSBpbWctd3lzaXd5ZyB0ZW1wbGF0ZS5cbiAgICAgIHZhciB2YWx1ZSA9ICcnO1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnc3JjJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZhdWx0VmFsdWUgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ3NyYycpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2l6ZTtcbiAgICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgICAgc2l6ZSA9IHdpZHRoICsgXCIrJ3gnK1wiICsgaGVpZ2h0O1xuICAgICAgfSBlbHNlIGlmICghaGVpZ2h0KSB7XG4gICAgICAgIHNpemUgPSBcIid3JytcIiArIHdpZHRoICsgXCIrJydcIjtcbiAgICAgIH0gZWxzZSBpZiAoIXdpZHRoKSB7XG4gICAgICAgIHNpemUgPSBcIidoJytcIiArIGhlaWdodCArIFwiKycnXCI7XG4gICAgICB9XG4gICAgICB2YXIgcGxhY2Vob2xkZXJzcmM7XG4gICAgICB2YXIgcGxoZWlnaHQgPSBoZWlnaHQgfHwgZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXBsYWNlaG9sZGVyLWhlaWdodCcpO1xuICAgICAgdmFyIHBsd2lkdGggPSB3aWR0aCB8fCBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tcGxhY2Vob2xkZXItd2lkdGgnKTtcblxuICAgICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdzcmMnKTtcbiAgICAgIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1lZGl0YWJsZScpO1xuICAgICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXBsYWNlaG9sZGVyLWhlaWdodCcpO1xuICAgICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXBsYWNlaG9sZGVyLXdpZHRoJyk7XG4gICAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tcGxhY2Vob2xkZXItc3JjJyk7XG5cbiAgICAgIGlmIChkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgcGxhY2Vob2xkZXJzcmMgPSBcInsgd2lkdGg6IFwiICsgcGx3aWR0aCArIFwiLCBoZWlnaHQ6IFwiICsgcGxoZWlnaHQgKyBcIiwgdGV4dDogXCIgKyBzaXplICsgXCJ9XCI7XG4gICAgICB9XG5cbiAgICAgIGlmICghcGx3aWR0aCB8fCAhcGxoZWlnaHQpIHtcbiAgICAgICAgLy8gVE9ETyByYWlzZSBhbiBleGNlcHRpb24/XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJTUcgZGF0YS1rby1lZGl0YWJsZSBtdXN0IGRlY2xhcmUgd2lkdGggYW5kIGhlaWdodCBhdHRyaWJ1dGVzLCBvciB0aGVpciBwbGFjZWhvbGRlciBjb3VudGVycGFydHMgZGF0YS1rby1wbGFjZWhvbGRlci13aWR0aC9kYXRhLWtvLXBsYWNlaG9sZGVyLWhlaWdodFwiLCBlbGVtZW50KTtcbiAgICAgICAgdGhyb3cgXCJFUlJPUjogSU1HIGRhdGEta28tZWRpdGFibGUgTVVTVCBkZWNsYXJlIHdpZHRoIGFuZCBoZWlnaHQgYXR0cmlidXRlcywgb3IgdGhlaXIgcGxhY2Vob2xkZXIgY291bnRlcnBhcnRzIGRhdGEta28tcGxhY2Vob2xkZXItd2lkdGgvZGF0YS1rby1wbGFjZWhvbGRlci1oZWlnaHRcIjtcbiAgICAgIH1cblxuICAgICAgdmFyIGJpbmRpbmdWYWx1ZSA9IGJpbmRpbmdQcm92aWRlcihkYXRhRWRpdGFibGUsIHZhbHVlLCBmYWxzZSwgJ3d5c2l3eWcnKTtcbiAgICAgIG5ld0JpbmRpbmcgPSBcInd5c2l3eWdTcmM6IHsgd2lkdGg6IFwiICsgd2lkdGggKyBcIiwgaGVpZ2h0OiBcIiArIGhlaWdodCArIFwiLCBzcmM6IFwiICsgYmluZGluZ1ZhbHVlICsgXCIsIHBsYWNlaG9sZGVyOiBcIiArIHBsYWNlaG9sZGVyc3JjICsgXCIgfVwiO1xuICAgICAgZGF0YUJpbmQgPSAoY3VycmVudEJpbmRpbmdzICE9PSBudWxsID8gY3VycmVudEJpbmRpbmdzICsgXCIsIFwiIDogXCJcIikgKyBuZXdCaW5kaW5nO1xuICAgICAgZG9tdXRpbHMuc2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWJpbmQnLCBkYXRhQmluZCk7XG5cbiAgICAgIHZhciB0bXBsTmFtZSA9IHRlbXBsYXRlQ3JlYXRvcihlbGVtZW50KTtcblxuICAgICAgdmFyIGNvbnRhaW5lckJpbmQgPSAneyB3aWR0aDogJyArIHdpZHRoO1xuICAgICAgaWYgKGFsaWduID09ICdsZWZ0JykgY29udGFpbmVyQmluZCArPSAnLCBmbG9hdDogXFwnbGVmdFxcJyc7XG4gICAgICBlbHNlIGlmIChhbGlnbiA9PSAncmlnaHQnKSBjb250YWluZXJCaW5kICs9ICcsIGZsb2F0OiBcXCdyaWdodFxcJyc7XG4gICAgICBlbHNlIGlmIChhbGlnbiA9PSAnY2VudGVyJykgY29uc29sZS5sb2coJ25vbiBzbyBjb3NhIGZhIGFsaWduPWNlbnRlciBzdSB1bmEgaW1nIGUgcXVpbmRpIG5vbiBzbyBjb21lIHNpbXVsYXJuZSBsXFwnZWRpdGluZycpO1xuICAgICAgZWxzZSBpZiAoYWxpZ24gPT0gJ3RvcCcpIGNvbnRhaW5lckJpbmQgKz0gJywgdmVydGljYWxBbGlnbjogXFwndG9wXFwnJztcbiAgICAgIGVsc2UgaWYgKGFsaWduID09ICdtaWRkbGUnKSBjb250YWluZXJCaW5kICs9ICcsIHZlcnRpY2FsQWxpZ246IFxcJ21pZGRsZVxcJyc7XG4gICAgICBlbHNlIGlmIChhbGlnbiA9PSAnYm90dG9tJykgY29udGFpbmVyQmluZCArPSAnLCB2ZXJ0aWNhbEFsaWduOiBcXCdib3R0b21cXCcnO1xuICAgICAgY29udGFpbmVyQmluZCArPSAnfSc7XG5cbiAgICAgICQoZWxlbWVudCkuYmVmb3JlKCc8IS0tIGtvIHd5c2l3eWdJbWc6IHsgX2RhdGE6ICRkYXRhLCBfaXRlbTogJyArIGl0ZW1CaW5kVmFsdWUgKyAnLCBfdGVtcGxhdGU6IFxcJycgKyB0bXBsTmFtZSArICdcXCcsIF9lZGl0VGVtcGxhdGU6IFxcJ2ltZy13eXNpd3lnXFwnLCBfc3JjOiAnICsgYmluZGluZ1ZhbHVlICsgJywgX3dpZHRoOiAnICsgd2lkdGggKyAnLCBfaGVpZ2h0OiAnICsgaGVpZ2h0ICsgJywgX2FsaWduOiAnICsgKGFsaWduID09PSBudWxsID8gdW5kZWZpbmVkIDogJ1xcJycgKyBhbGlnbiArICdcXCcnKSArICcsIF9zaXplOiAnICsgc2l6ZSArICcsIF9tZXRob2Q6ICcgKyBtZXRob2QgKyAnLCBfcGxhY2Vob2xkZXJzcmM6ICcgKyBwbGFjZWhvbGRlcnNyYyArICcsIF9zdHlsZWJpbmQ6ICcgKyBjb250YWluZXJCaW5kICsgJyB9IC0tPicpO1xuICAgICAgJChlbGVtZW50KS5hZnRlcignPCEtLSAva28gLS0+Jyk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIEFwcGxpZWQgYWZ0ZXIgdGhlIGRhdGEtZWRpdGFibGUgc28gdG8gYXZvaWQgcHJvY2Vzc2luZyBocmVmcyBmb3IgZWRpdGFibGUgY29udGVudFxuICAkKFwiW2hyZWZdXCIsIGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICB2YXIgYXR0clZhbHVlID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdocmVmJyk7XG4gICAgdmFyIG5ld0JpbmRpbmcgPSAnd3lzaXd5Z0hyZWY6IFxcJycgKyBjb252ZXJ0ZXJVdGlscy5hZGRTbGFzaGVzKGF0dHJWYWx1ZSkgKyAnXFwnJztcbiAgICB2YXIgY3VycmVudEJpbmRpbmdzID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWJpbmQnKTtcbiAgICB2YXIgZGF0YUJpbmQgPSAoY3VycmVudEJpbmRpbmdzICE9PSBudWxsID8gY3VycmVudEJpbmRpbmdzICsgXCIsIFwiIDogXCJcIikgKyBuZXdCaW5kaW5nO1xuICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1iaW5kJywgZGF0YUJpbmQpO1xuICB9KTtcblxuICAkKFwicmVwbGFjZWRibG9ja1wiLCBlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgdmFyIGJsb2NrRWxlbWVudCA9IGZpeGVkQmxvY2tzW2luZGV4XTtcblxuICAgIHZhciBibG9ja05hbWUgPSBwcm9jZXNzQmxvY2soYmxvY2tFbGVtZW50LCBkZWZzLCB0aGVtZVVwZGF0ZXIsIGJsb2NrUHVzaGVyLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgJ2Jsb2NrJywgdGVtcGxhdGVOYW1lLCBjb250YWluZXJOYW1lLCB0cnVlLCB0ZW1wbGF0ZUNyZWF0b3IpO1xuICAgIC8vIHJlcGxhY2VkIGJsb2NrcyBhcmUgZGVmaW5lZCBpbiB0aGUgbW9kZWwgcm9vdFxuICAgIHZhciBtb2RlbEJpbmRWYWx1ZSA9IG1vZGVsRGVmLmVuc3VyZVBhdGhBbmRHZXRCaW5kVmFsdWUoZGVmcywgdGhlbWVVcGRhdGVyLCByb290TW9kZWxOYW1lLCB0ZW1wbGF0ZU5hbWUsICcnLCBibG9ja05hbWUpO1xuXG4gICAgLy8gdGhpcyB3YXkgd2UgY2FsbCBibG9jay13eXNpd3lnIG9yIGJsb2NrLXNob3cgYW5kIG5vdCBkaXJlY3RseSB0aGUgcmlnaHQgYmxvY2tcbiAgICAkKGVsZW1lbnQpLmJlZm9yZSgnPCEtLSBrbyBibG9jazogeyBkYXRhOiAnICsgY29udmVydGVyVXRpbHMuYWRkU2xhc2hlcyhtb2RlbEJpbmRWYWx1ZSkgKyAnLCB0ZW1wbGF0ZTogXFwnYmxvY2tcXCcgfSAtLT4nKTtcbiAgICAkKGVsZW1lbnQpLmFmdGVyKCc8IS0tIC9rbyAtLT4nKTtcbiAgICAkKGVsZW1lbnQpLnJlbW92ZSgpO1xuICB9KTtcblxuICAvLyBUT0RPIGRvIHdlIHJlYWxseSBuZWVkIHRvIGxvb3AgaW4gcmV2ZXJzZSBvcmRlcj9cbiAgLy8gZGF0YS1rby13cmFwIGhhdmUgdG8gYmUgcHJvY2Vzc2VkIGF0IHRoZSBlbmQsIGV4cGVjaWFsbHkgYWZ0ZXIgXCJyZXBsYWNlYmxvY2tzXCJcbiAgLy8gb3RoZXJ3aXNlIGEgZGF0YS1rby13cmFwIHdyYXBwaW5nIGEgZGF0YS1rby1ibG9jayB3b3VsZCBicmVhayBldmVyeXRoaW5nLlxuICAkKCQoXCJbZGF0YS1rby13cmFwXVwiLCBlbGVtZW50KS5nZXQoKS5yZXZlcnNlKCksIGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICB2YXIgY29uZCA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby13cmFwJyk7XG4gICAgaWYgKHR5cGVvZiBjb25kID09PSAndW5kZWZpbmVkJyB8fCBjb25kID09PSAnJyB8fCBjb25kID09PSAndHJ1ZScpIHtcbiAgICAgIHRocm93IFwiVW5zdXBwb3J0ZWQgZW1wdHkgdmFsdWUgZm9yIGRhdGEta28td3JhcDogdXNlIGZhbHNlIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFsd2F5cyByZW1vdmUgdGhlIHRhZ1wiO1xuICAgIH1cblxuICAgIHZhciBjb25kQmluZGluZyA9IGNvbnZlcnRlclV0aWxzLmNvbmRpdGlvbkJpbmRpbmcoY29uZCwgYmluZGluZ1Byb3ZpZGVyKTtcblxuICAgIC8qXG4gICAgICAgICAgdmFyIGNvbmRCaW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25kID09PSAndW5kZWZpbmVkJyB8fCBjb25kID09PSAnJykge1xuICAgICAgICAgICAgdGhyb3cgXCJVbnN1cHBvcnRlZCBlbXB0eSB2YWx1ZSBmb3IgZGF0YS1rby13cmFwOiB1c2UgZmFsc2UgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWx3YXlzIHJlbW92ZSB0aGUgdGFnXCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb25kID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICBjb25kQmluZGluZyA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICB0aHJvdyBcIlVuc3VwcG9ydGVkIHRydWUgdmFsdWUgZm9yIGRhdGEta28td3JhcC4gVGhpcyBtYWtlcyBubyBzZW5zZTogdXNlIGZhbHNlIG9yIGEgdmFyaWFibGVcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uZEJpbmRpbmcgPSBiaW5kaW5nUHJvdmlkZXIoY29uZCkrJygpJztcbiAgICAgICAgICB9XG4gICAgKi9cblxuICAgIHZhciBkYXRhQmluZCA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1iaW5kJyk7XG5cbiAgICB2YXIgaW5uZXJUbXBsTmFtZSwgb3V0ZXJUbXBsTmFtZTtcbiAgICAvLyBUT0RPIHVnbHkgaGFyZGNvZGVkIGhhbmRsaW5nOiBhdCB0aGUgdmVyeSBsZWFzdCB0aGlzIHNob3VsZCBiZSBpbnZva2VkIGJ5IHRoZSBkYXRhLWNvbnRhaW5lciBjYWxsZXIuXG4gICAgaWYgKGRhdGFCaW5kICE9PSAnJyAmJiBkYXRhQmluZCAhPT0gbnVsbCAmJiBkYXRhQmluZC5tYXRjaCgvKGJsb2NrfHd5c2l3eWdPckh0bWwpOi8pKSB7XG4gICAgICAvLyB3ZSBjYW4ndCBwdXQgdGhlIGNvbnRlbnQgaW4gYSB0ZW1wbGF0ZSBiZWNhdXNlIGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIGJpbmRpbmdcbiAgICAgIHZhciBpbm5lclRtcGxDb250ZW50ID0gJzwhLS0ga28gJyArIGRhdGFCaW5kICsgJyAtLT4nICsgZG9tdXRpbHMuZ2V0SW5uZXJIdG1sKGVsZW1lbnQpICsgJzwhLS0gL2tvIC0tPic7XG4gICAgICBpbm5lclRtcGxOYW1lID0gdGVtcGxhdGVDcmVhdG9yKGlubmVyVG1wbENvbnRlbnQpO1xuICAgICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXdyYXAnKTtcbiAgICAgIG91dGVyVG1wbE5hbWUgPSB0ZW1wbGF0ZUNyZWF0b3IoZWxlbWVudCk7XG4gICAgICBkb211dGlscy5yZXBsYWNlSHRtbChlbGVtZW50LCAnPCEtLSBrbyB0ZW1wbGF0ZTogLyogc3BlY2lhbCAqLyAodHlwZW9mIHRlbXBsYXRlTW9kZSAhPSBcXCd1bmRlZmluZWRcXCcgJiYgdGVtcGxhdGVNb2RlID09IFxcJ3d5c2l3eWdcXCcpIHx8ICcgKyBjb25kQmluZGluZyArICcgPyBcXCcnICsgb3V0ZXJUbXBsTmFtZSArICdcXCcgOiBcXCcnICsgaW5uZXJUbXBsTmFtZSArICdcXCcgLS0+PCEtLSAva28gLS0+Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHdlIHB1dCB0aGUgY29udGVudCBpbiBhIHRlbXBsYXRlIGFuZCB0aGUgZnJhbWUgaW4gYW5vdGhlciB0ZW1wbGF0ZSBpbmNsdWRpbmcgdGhpcyBvbmUuXG4gICAgICBpbm5lclRtcGxOYW1lID0gdGVtcGxhdGVDcmVhdG9yKGRvbXV0aWxzLmdldElubmVySHRtbChlbGVtZW50KSk7XG4gICAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28td3JhcCcpO1xuICAgICAgZG9tdXRpbHMuc2V0Q29udGVudChlbGVtZW50LCAnPCEtLSBrbyB0ZW1wbGF0ZTogXFwnJyArIGlubmVyVG1wbE5hbWUgKyAnXFwnIC0tPjwhLS0gL2tvIC0tPicpO1xuICAgICAgb3V0ZXJUbXBsTmFtZSA9IHRlbXBsYXRlQ3JlYXRvcihlbGVtZW50KTtcbiAgICAgIGRvbXV0aWxzLnJlcGxhY2VIdG1sKGVsZW1lbnQsICc8IS0tIGtvIHRlbXBsYXRlOiAodHlwZW9mIHRlbXBsYXRlTW9kZSAhPSBcXCd1bmRlZmluZWRcXCcgJiYgdGVtcGxhdGVNb2RlID09IFxcJ3d5c2l3eWdcXCcpIHx8ICcgKyBjb25kQmluZGluZyArICcgPyBcXCcnICsgb3V0ZXJUbXBsTmFtZSArICdcXCcgOiBcXCcnICsgaW5uZXJUbXBsTmFtZSArICdcXCcgLS0+PCEtLSAva28gLS0+Jyk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIHRlbXBsYXRlQ3JlYXRvcihlbGVtZW50LCB0ZW1wbGF0ZU5hbWUsICdzaG93Jyk7XG5cbiAgYmxvY2tQdXNoZXIocm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lLCBjb250ZXh0TmFtZSwgY29udGFpbmVyTmFtZSk7XG5cbiAgcmV0dXJuIHRlbXBsYXRlTmFtZTtcblxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkV4Y2VwdGlvbiB3aGlsZSBwYXJzaW5nIHRoZSB0ZW1wbGF0ZVwiLCBlLCBlbGVtZW50KTtcbiAgICB0aHJvdyBlO1xuICB9XG5cbn07XG5cbmZ1bmN0aW9uIGNvbmRpdGlvbmFsX3JlcGxhY2UoaHRtbCkge1xuICByZXR1cm4gaHRtbC5yZXBsYWNlKC88IS0tXFxbaWYgKFteXFxdXSopXFxdPigoPzooPyEtLSlbXFxzXFxTXSkqPyk8IVxcW2VuZGlmXFxdLS0+L2csIGZ1bmN0aW9uKG1hdGNoLCBjb25kaXRpb24sIGJvZHkpIHtcbiAgICB2YXIgZGQgPSAnPCEtLSBjYzpzdGFydCAtLT4nO1xuICAgIGRkICs9IGJvZHkucmVwbGFjZSgvPChbQS1aYS16Ol0rKS9nLCAnPCEtLSBjYzpibzokMSAtLT48Y2MnKSAvLyBiZWZvcmUgb3BlbiB0YWdcbiAgICAgICAgICAgLnJlcGxhY2UoLzxcXC8oW0EtWmEtejpdKyk+L2csJzwhLS0gY2M6YmM6JDEgLS0+PC9jYz48IS0tIGNjOmFjOiQxIC0tPicpIC8vIGJlZm9yZS9hZnRlciBjbG9zZSB0YWdcbiAgICAgICAgICAgLnJlcGxhY2UoL1xcLz4vZywnLz48IS0tIGNjOnNjIC0tPicpOyAvLyBzZWxmLWNsb3NlIHRhZ1xuICAgIGRkICs9ICc8IS0tIGNjOmVuZCAtLT4nO1xuICAgIHZhciBvdXRwdXQgPSAnPHJlcGxhY2VkY2MgY29uZGl0aW9uPVwiJytjb25kaXRpb24rJ1wiIHN0eWxlPVwiZGlzcGxheTogbm9uZVwiPic7XG4gICAgb3V0cHV0ICs9ICQoJzxkaXY+JykuYXBwZW5kKCQoZGQpKS5odG1sKClcbiAgICAgIC5yZXBsYWNlKC9ePCEtLSBjYzpzdGFydCAtLT4vLCAnJylcbiAgICAgIC5yZXBsYWNlKC88IS0tIGNjOmVuZCAtLT4kLywgJycpO1xuICAgIG91dHB1dCArPSAnPC9yZXBsYWNlZGNjPic7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSk7XG59XG5cblxudmFyIHRyYW5zbGF0ZVRlbXBsYXRlID0gZnVuY3Rpb24odGVtcGxhdGVOYW1lLCBodG1sLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgdGVtcGxhdGVDcmVhdG9yKSB7XG4gIHZhciBkZWZzID0ge307XG4gIHZhciByZXBsYWNlZEh0bWwgPSBjb25kaXRpb25hbF9yZXBsYWNlKGh0bWwucmVwbGFjZSgvKDxbXj5dK1xccykoc3R5bGV8aHR0cC1lcXVpdikoPVwiW15cIl0qXCJbXj5dKj4pL2dpLCBmdW5jdGlvbihtYXRjaCwgcDEsIHAyLCBwMykge1xuICAgIHJldHVybiBwMSArICdyZXBsYWNlZCcgKyBwMiArIHAzO1xuICB9KSk7XG4gIHZhciBjb250ZW50ID0gJChyZXBsYWNlZEh0bWwpO1xuICB2YXIgZWxlbWVudCA9IGNvbnRlbnRbMF07XG5cbiAgdmFyIGJsb2NrcyA9IFtdOyAvLyB7cm9vdE5hbWUsIGJsb2NrTmFtZSwgY29udGFpbmVyTmFtZX1cbiAgdmFyIF9ibG9ja1B1c2hlciA9IGZ1bmN0aW9uKHJvb3ROYW1lLCBibG9ja05hbWUsIGNvbnRleHROYW1lLCBjb250YWluZXJOYW1lKSB7XG4gICAgYmxvY2tzLnB1c2goe1xuICAgICAgcm9vdDogcm9vdE5hbWUsXG4gICAgICBibG9jazogYmxvY2tOYW1lLFxuICAgICAgY29udGV4dDogY29udGV4dE5hbWUsXG4gICAgICBjb250YWluZXI6IGNvbnRhaW5lck5hbWVcbiAgICB9KTtcbiAgfTtcblxuICAvLyBUT0RPIGhhdmUgdG8gYWNjZXB0IG51bGxzIGFzIHVuZGVmaW5lZHMgKGJlY2F1c2Ugb2YgbW9kZWwuanMgYmVoYXZpb3VyKVxuICB2YXIgdGhlbWVVcGRhdGVyID0gZnVuY3Rpb24obmFtZSwga2V5LCB2YWwpIHtcbiAgICBpZiAodHlwZW9mIGRlZnNbJ3RoZW1lcyddID09PSAndW5kZWZpbmVkJykgZGVmc1sndGhlbWVzJ10gPSB7fTtcbiAgICBpZiAodHlwZW9mIGRlZnNbJ3RoZW1lcyddW25hbWVdID09PSAndW5kZWZpbmVkJykgZGVmc1sndGhlbWVzJ11bbmFtZV0gPSB7fTtcbiAgICBpZiAodHlwZW9mIGRlZnNbJ3RoZW1lcyddW25hbWVdW2tleV0gPT09ICd1bmRlZmluZWQnIHx8IGRlZnNbJ3RoZW1lcyddW25hbWVdW2tleV0gPT09IG51bGwpIGRlZnNbJ3RoZW1lcyddW25hbWVdW2tleV0gPSB2YWw7XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgICB2YXIgcHJlY1ZhbCA9IGRlZnNbJ3RoZW1lcyddW25hbWVdW2tleV07XG4gICAgICBpZiAocHJlY1ZhbCAhPSB2YWwpIGNvbnNvbGUubG9nKFwiRXJyb3Igc2V0dGluZyBhIG5ldyBkZWZhdWx0IGZvciBwcm9wZXJ0eSBcIiArIGtleSArIFwiIGluIHRoZW1lIFwiICsgbmFtZSArIFwiLiBvbGQ6XCIgKyBwcmVjVmFsICsgXCIgbmV3OlwiICsgdmFsICsgXCIhXCIpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgY29udGFpbmVycyA9ICQoXCJbZGF0YS1rby1jb250YWluZXJdXCIsIGNvbnRlbnQpO1xuICB2YXIgY29udGFpbmVyc0RvbSA9IHt9O1xuICBjb250YWluZXJzLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICB2YXIgY29udGFpbmVyTmFtZSA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1jb250YWluZXInKSArIFwiQmxvY2tzXCI7XG5cbiAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tY29udGFpbmVyJyk7XG4gICAgZG9tdXRpbHMuc2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWJpbmQnLCAnYmxvY2s6ICcgKyBjb250YWluZXJOYW1lKTtcblxuICAgIHZhciBjb250YWluZXJCbG9ja3MgPSAkKFwiPiBbZGF0YS1rby1ibG9ja11cIiwgZWxlbWVudCk7XG4gICAgZG9tdXRpbHMucmVtb3ZlRWxlbWVudHMoY29udGFpbmVyQmxvY2tzLCB0cnVlKTtcblxuICAgIGNvbnRhaW5lcnNEb21bY29udGFpbmVyTmFtZV0gPSBjb250YWluZXJCbG9ja3M7XG4gIH0pO1xuXG4gIC8vIFRPRE8gcmVtb3ZlIGhhcmRjb2RlZCBwcm9wZXJ0aWVzOiB3ZSBuZWVkIHRoZW0gYmVjYXVzZSB3aXRob3V0IHRoZXNlIGxvYWRpbmcgYSBiYXNpYyB0ZW1wbGF0ZSBmYWlscy5cbiAgLy8gTmVlZGVkIGluIG9yZGVyIHRvIHVzZSBkYXRhLWtvLWJsb2NrXG4gIG1vZGVsRGVmLmNyZWF0ZU9yVXBkYXRlQmxvY2tEZWYoZGVmcywgJ2lkJyk7XG4gIC8vIE5lZWRlZCBhbHdheXMgYXMgaXQgaXMgdGhlIGRlZmF1bHQgdGhlbWUgc2VjdGlvbi5cbiAgbW9kZWxEZWYuY3JlYXRlT3JVcGRhdGVCbG9ja0RlZihkZWZzLCAnYm9keVRoZW1lJyk7XG4gIC8vIE5lZWRlZCBmb3IgZGF0YS1rby1jb250YWluZXJcbiAgbW9kZWxEZWYuY3JlYXRlT3JVcGRhdGVCbG9ja0RlZihkZWZzLCAnYmxvY2tzJywgJ2Jsb2Nrc1tdJyk7XG5cbiAgLy8gTmVlZGVkIGlmIHlvdSB3YW50IHRvIHVzZSBhIHRleHQgdmFyaWFibGU/IFRPRE8gdGhpcyBzaG91bGQgbm90IGJlIG5lZWRlZCFcbiAgbW9kZWxEZWYuY3JlYXRlT3JVcGRhdGVCbG9ja0RlZihkZWZzLCAndGV4dCcpO1xuXG4gIHByb2Nlc3NCbG9jayhlbGVtZW50LCBkZWZzLCB0aGVtZVVwZGF0ZXIsIF9ibG9ja1B1c2hlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsICd0ZW1wbGF0ZScsIHRlbXBsYXRlTmFtZSwgdW5kZWZpbmVkLCBmYWxzZSwgdGVtcGxhdGVDcmVhdG9yKTtcblxuICB2YXIgYmxvY2tQcm9jZXNzID0gZnVuY3Rpb24oY29udGFpbmVyTmFtZSwgaW5kZXgsIGVsZW1lbnQpIHtcbiAgICBwcm9jZXNzQmxvY2soZWxlbWVudCwgZGVmcywgdGhlbWVVcGRhdGVyLCBfYmxvY2tQdXNoZXIsIHRlbXBsYXRlVXJsQ29udmVydGVyLCAnYmxvY2snLCB0ZW1wbGF0ZU5hbWUsIGNvbnRhaW5lck5hbWUsIHRydWUsIHRlbXBsYXRlQ3JlYXRvcik7XG4gIH07XG5cbiAgZm9yICh2YXIgcHJvcCBpbiBjb250YWluZXJzRG9tKVxuICAgIGlmIChjb250YWluZXJzRG9tLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICB2YXIgY29udGFpbmVyQmxvY2tzID0gY29udGFpbmVyc0RvbVtwcm9wXTtcbiAgICAgIHZhciBjb250YWluZXJOYW1lID0gcHJvcDtcblxuICAgICAgbW9kZWxEZWYuZW5zdXJlUGF0aEFuZEdldEJpbmRWYWx1ZShkZWZzLCB0aGVtZVVwZGF0ZXIsIHRlbXBsYXRlTmFtZSwgdGVtcGxhdGVOYW1lLCAnJywgY29udGFpbmVyTmFtZSArIFwiLmJsb2Nrc1wiLCBcIltdXCIpO1xuXG4gICAgICBjb250YWluZXJCbG9ja3MuZWFjaChibG9ja1Byb2Nlc3MuYmluZCh1bmRlZmluZWQsIGNvbnRhaW5lck5hbWUpKTtcbiAgICB9XG5cbiAgdmFyIHRlbXBsYXRlRGVmID0ge1xuICAgIF9kZWZzOiBkZWZzLFxuICAgIHRlbXBsYXRlTmFtZTogdGVtcGxhdGVOYW1lLFxuICAgIF9ibG9ja3M6IGJsb2Nrc1xuICB9O1xuXG4gIGlmICh0eXBlb2YgZGVmc1t0ZW1wbGF0ZU5hbWVdLl92ZXJzaW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgIHRlbXBsYXRlRGVmLnZlcnNpb24gPSBkZWZzW3RlbXBsYXRlTmFtZV0uX3ZlcnNpb247XG4gIH1cblxuICByZXR1cm4gdGVtcGxhdGVEZWY7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gdHJhbnNsYXRlVGVtcGxhdGU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFBhcnNlcyBDU1Mvc3R5bGVzaGVldHMgZGVjbGFyYXRpb25zIC1rby1ibG9ja2RlZnMvLWtvLXRoZW1lc1xuLy8gSXQgcmV0dXJucyBLTyBiaW5kaW5ncyBidXQgZG9lc24ndCBkZXBlbmQgb24gS09cbi8vIE5lZWRzIGEgYmluZGluZ1Byb3ZpZGVyXG4vLyBBbHNvIHVzZXMgYSBibG9ja0RlZnNVcGRhdGVyIHRvIHVwZGF0ZSBkZWZpbml0aW9ucyB3aGlsZSBwYXJzaW5nIHRoZSBzdHlsZXNoZWV0LlxuXG52YXIgY3NzUGFyc2UgPSByZXF1aXJlKFwibWVuc2NoL2xpYi9wYXJzZXIuanNcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xudmFyIGNvbnZlcnRlclV0aWxzID0gcmVxdWlyZShcIi4vdXRpbHMuanNcIik7XG52YXIgZWxhYm9yYXRlRGVjbGFyYXRpb25zID0gcmVxdWlyZShcIi4vZGVjbGFyYXRpb25zLmpzXCIpO1xuXG4vKiBUZW1wb3JhcnkgZXhwZXJpbWVudGFsIGNvZGUgbm90IHVzZWRcbnZhciBfcHJvY2Vzc1N0eWxlU2hlZXRSdWxlc19wcm9jZXNzVGhlbWVzID0gZnVuY3Rpb24gKGJpbmRpbmdQcm92aWRlciwgdGhlbWVVcGRhdGVyLCBydWxlcykge1xuICB2YXIgc2VscywgZGVjbHMsIGksIGosIGs7XG4gIGZvciggaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChydWxlc1tpXS50eXBlID09ICdydWxlJykge1xuICAgICAgc2VscyA9IHJ1bGVzW2ldLnNlbGVjdG9ycztcbiAgICAgIGRlY2xzID0gcnVsZXNbaV0uZGVjbGFyYXRpb25zO1xuICAgICAgZm9yIChqID0gMDsgaiA8IHNlbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZm9yIChrID0gMDsgayA8IGRlY2xzLmxlbmd0aDsgaysrKSBpZiAoZGVjbHNba10udHlwZSA9PSAncHJvcGVydHknKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBiaW5kVmFsID0gYmluZGluZ1Byb3ZpZGVyKCckJytkZWNsc1trXS5uYW1lKTtcbiAgICAgICAgICAgIHRoZW1lVXBkYXRlcihzZWxzW2pdLCBkZWNsc1trXS5uYW1lLCBkZWNsc1trXS52YWx1ZSwgYmluZFZhbCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFeGNlcHRpb24gc2V0dGluZyB0aGVtZSBmb3JcIiwgZGVjbHNba10ubmFtZSwgZGVjbHNba10udmFsdWUsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbiovXG5cbnZhciBfcHJvY2Vzc1N0eWxlU2hlZXRSdWxlc19wcm9jZXNzQmxvY2tEZWYgPSBmdW5jdGlvbihibG9ja0RlZnNVcGRhdGVyLCBydWxlcykge1xuICB2YXIgcHJvcGVydGllcywgbmFtZWRQcm9wcywgZGVjbHM7XG4gIC8vIG5hbWUsIGNvbnRleHROYW1lLCBnbG9iYWxTdHlsZSwgdGhlbWVPdmVycmlkZSwgZXh0ZW5kLCBtaW4sIG1heCwgd2lkZ2V0LCBvcHRpb25zLCBjYXRlZ29yeSwgdmFyaWFudCwgaGVscCwgYmxvY2tEZXNjcmlwdGlvbiwgdmVyc2lvbiwgXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocnVsZXNbaV0udHlwZSA9PSAncnVsZScpIHtcbiAgICAgIHZhciBzZWxzID0gcnVsZXNbaV0uc2VsZWN0b3JzO1xuICAgICAgdmFyIGhhc0RlY2xhcmF0aW9ucyA9IGZhbHNlO1xuICAgICAgdmFyIGhhc1ByZXZpZXdzID0gZmFsc2U7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHNlbHNbal0ubWF0Y2goLzpwcmV2aWV3JC8pKSB7XG4gICAgICAgICAgaGFzUHJldmlld3MgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhhc0RlY2xhcmF0aW9ucyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChoYXNQcmV2aWV3cyAmJiBoYXNEZWNsYXJhdGlvbnMpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjYW5ub3QgbWl4IHNlbGVjdG9ycyB0eXBlICg6cHJldmlldyBhbmQgZGVjbGFyYXRpb25zKSBpbiBAc3VwcG9ydHMgLWtvLWJsb2NrZGVmcyBcIiwgc2Vscyk7XG4gICAgICAgIHRocm93IFwiQ2Fubm90IG1peCBzZWxlY3RvcnMgdHlwZSAoOnByZXZpZXcgYW5kIGRlY2xhcmF0aW9ucykgaW4gQHN1cHBvcnRzIC1rby1ibG9ja2RlZnNcIjtcbiAgICAgIH1cbiAgICAgIGlmICghaGFzUHJldmlld3MgJiYgIWhhc0RlY2xhcmF0aW9ucykge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNhbm5vdCBmaW5kIGtub3duIHNlbGVjdG9ycyBpbiBAc3VwcG9ydHMgLWtvLWJsb2NrZGVmcyBcIiwgc2Vscyk7XG4gICAgICAgIHRocm93IFwiQ2Fubm90IGZpbmQga25vd24gc2VsZWN0b3JzIGluIEBzdXBwb3J0cyAta28tYmxvY2tkZWZzXCI7XG4gICAgICB9XG4gICAgICBpZiAoaGFzRGVjbGFyYXRpb25zKSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSAnJztcbiAgICAgICAgbmFtZWRQcm9wcyA9IHt9O1xuXG4vKlxuICAgICAgICBuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICBjb250ZXh0TmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZ2xvYmFsU3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoZW1lT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGV4dGVuZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbWF4ID0gdW5kZWZpbmVkO1xuICAgICAgICBtaW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHdpZGdldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgb3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgICAgY2F0ZWdvcnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhcmlhbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGhlbHAgPSB1bmRlZmluZWQ7XG4gICAgICAgIGJsb2NrRGVzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHZlcnNpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICovXG4gICAgICAgIGRlY2xzID0gcnVsZXNbaV0uZGVjbGFyYXRpb25zO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRlY2xzLmxlbmd0aDsgaysrKSBpZiAoZGVjbHNba10udHlwZSA9PSAncHJvcGVydHknKSB7XG4gICAgICAgICAgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ2xhYmVsJykgbmFtZWRQcm9wcy5uYW1lID0gZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAnY29udGV4dCcpIG5hbWVkUHJvcHMuY29udGV4dE5hbWUgPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICdwcm9wZXJ0aWVzJykgcHJvcGVydGllcyA9IGRlY2xzW2tdLnZhbHVlO1xuICAgICAgICAgIGVsc2UgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ3RoZW1lJykgbmFtZWRQcm9wcy5nbG9iYWxTdHlsZSA9ICdfdGhlbWVfLicgKyBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICd0aGVtZU92ZXJyaWRlJykgbmFtZWRQcm9wcy50aGVtZU92ZXJyaWRlID0gU3RyaW5nKGRlY2xzW2tdLnZhbHVlKS50b0xvd2VyQ2FzZSgpID09ICd0cnVlJztcbiAgICAgICAgICAvLyBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICdleHRlbmQnKSBleHRlbmQgPSBkZWNsc1trXS52YWx1ZTtcblxuICAgICAgICAgIC8vIGVsc2UgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ21heCcpIG1heCA9IGRlY2xzW2tdLnZhbHVlO1xuICAgICAgICAgIC8vIGVsc2UgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ21pbicpIG1pbiA9IGRlY2xzW2tdLnZhbHVlO1xuICAgICAgICAgIC8vIGVsc2UgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ29wdGlvbnMnKSBvcHRpb25zID0gZGVjbHNba10udmFsdWU7XG5cbiAgICAgICAgICAvLyBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICd3aWRnZXQnKSB3aWRnZXQgPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICAvLyBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICdjYXRlZ29yeScpIGNhdGVnb3J5ID0gZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgLy8gZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAndmFyaWFudCcpIHZhcmlhbnQgPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICAvLyBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICdoZWxwJykgaGVscCA9IGRlY2xzW2tdLnZhbHVlO1xuICAgICAgICAgIC8vIGVsc2UgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ2Jsb2NrRGVzY3JpcHRpb24nKSBibG9ja0Rlc2NyaXB0aW9uID0gZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgLy8gZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAndmVyc2lvbicpIHZlcnNpb24gPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5hbWVkUHJvcHNbZGVjbHNba10ubmFtZV0gPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICAgIC8vIFRPRE8gaW4gcGFzdCB3ZSBkZXRlY3RlZCB1bnN1cHBvcnRlZCBwcm9wZXJ0aWVzLCB3aGlsZSBub3cgd2Ugc2ltcGxlIHB1c2ggZXZlcnkgZGVjbGFyYXRpb24gaW4gYSBuYW1lZFByb3BlcnR5LlxuICAgICAgICAgICAgLy8gVGhpcyBtYWtlIGl0IGhhcmRlciB0byBzcG90IGVycm9ycyBpbiBkZWNsYXJhdGlvbnMuXG4gICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oXCJVbmtub3duIHByb3BlcnR5IHByb2Nlc3NpbmcgQHN1cHBvcnRzIC1rby1ibG9ja2RlZnMgXCIsIGRlY2xzW2tdLCBzZWxzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBzZWxzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgYmxvY2tEZWZzVXBkYXRlcihzZWxzW2xdLCBwcm9wZXJ0aWVzLCBuYW1lZFByb3BzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGhhc1ByZXZpZXdzKSB7XG4gICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgc2Vscy5sZW5ndGg7IG0rKykge1xuICAgICAgICAgIHZhciBsb2NhbEJsb2NrTmFtZSA9IHNlbHNbbV0uc3Vic3RyKDAsIHNlbHNbbV0uaW5kZXhPZignOicpKTtcbiAgICAgICAgICB2YXIgcHJldmlld0JpbmRpbmdzID0gcnVsZXNbaV0uZGVjbGFyYXRpb25zO1xuICAgICAgICAgIGJsb2NrRGVmc1VwZGF0ZXIobG9jYWxCbG9ja05hbWUsIHVuZGVmaW5lZCwgeyBwcmV2aWV3QmluZGluZ3M6IHByZXZpZXdCaW5kaW5ncyB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElnbm9yaW5nIGNvbW1lbnRzIG9yIG90aGVyIGNvbnRlbnRcbiAgICB9XG4gIH1cbn07XG5cbnZhciBwcm9jZXNzU3R5bGVzaGVldFJ1bGVzID0gZnVuY3Rpb24oc3R5bGUsIHJ1bGVzLCBsb2NhbFdpdGhCaW5kaW5nUHJvdmlkZXIsIGJsb2NrRGVmc1VwZGF0ZXIsIHRoZW1lVXBkYXRlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSkge1xuICB2YXIgbmV3U3R5bGUgPSBzdHlsZTtcbiAgdmFyIGxhc3RTdGFydCA9IG51bGw7XG5cbiAgaWYgKHR5cGVvZiBydWxlcyA9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzdHlsZVNoZWV0ID0gY3NzUGFyc2Uoc3R5bGUsIHtcbiAgICAgIGNvbW1lbnRzOiB0cnVlLFxuICAgICAgcG9zaXRpb246IHRydWVcbiAgICB9KTtcbiAgICBpZiAoc3R5bGVTaGVldC50eXBlICE9ICdzdHlsZXNoZWV0JyB8fCB0eXBlb2Ygc3R5bGVTaGVldC5zdHlsZXNoZWV0ID09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInVuYWJsZSB0byBwcm9jZXNzIHN0eWxlU2hlZXRcIiwgc3R5bGVTaGVldCk7XG4gICAgICB0aHJvdyBcIlVuYWJsZSB0byBwYXJzZSBzdHlsZXNoZWV0XCI7XG4gICAgfVxuICAgIHJ1bGVzID0gc3R5bGVTaGVldC5zdHlsZXNoZWV0LnJ1bGVzO1xuICB9XG5cbiAgLy8gV0FSTiBjdXJyZW5sdHkgdGhpcyBwYXJzZXMgcnVsZXMgaW4gcmV2ZXJzZSBvcmRlciBzbyB0aGF0IHN0cmluZyByZXBsYWNlbWVudHMgd29ya3MgdXNpbmcgaW5wdXQgXCJwb3NpdGlvbnNcIlxuICAvLyBvdGhlcndpc2UgaXQgc2hvdWxkIGNvbXB1dGUgbmV3IG9mZnNldHMgb24gZXZlcnkgcmVwbGFjZW1lbnQuXG4gIC8vIEJ1dCB0aGlzIGNyZWF0ZSBpc3N1ZXMgYmVjYXVzZSBvZiBkZWZpbml0aW9ucyBiZWluZyBwYXJzZWQgaW4gcmV2ZXJzZSBvcmRlciwgc28gdGhpcyBpcyBub3QgYSBnb29kIGlkZWEuXG4gIC8vIFNvbWV0aW1lcywgdG8gd29yayBhcm91bmQgdGhpcyBpc3N1ZXMsIHlvdSBuZWVkIHRvIGNyZWF0ZSAyIGRpZmZlcmVudCA8c3R5bGU+IGJsb2Nrcy5cbiAgdmFyIGJpbmRpbmdQcm92aWRlcjtcblxuICBmb3IgKHZhciBpID0gcnVsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAocnVsZXNbaV0udHlwZSA9PSAnc3VwcG9ydHMnICYmIHJ1bGVzW2ldLm5hbWUgPT0gJy1rby1ibG9ja2RlZnMnKSB7XG4gICAgICBfcHJvY2Vzc1N0eWxlU2hlZXRSdWxlc19wcm9jZXNzQmxvY2tEZWYoYmxvY2tEZWZzVXBkYXRlciwgcnVsZXNbaV0ucnVsZXMpO1xuICAgICAgbmV3U3R5bGUgPSBjb252ZXJ0ZXJVdGlscy5yZW1vdmVTdHlsZShuZXdTdHlsZSwgcnVsZXNbaV0ucG9zaXRpb24uc3RhcnQsIGxhc3RTdGFydCwgMCwgMCwgMCwgJycpO1xuICAgICAgLyogdGVtcG9yYXJ5IGV4cGVyaW1lbnRhbCBjb2RlIG5vdCB1c2VkXG4gICAgICB9IGVsc2UgaWYgKHJ1bGVzW2ldLnR5cGUgPT0gJ3N1cHBvcnRzJyAmJiBydWxlc1tpXS5uYW1lID09ICcta28tdGhlbWVzJykge1xuICAgICAgICBiaW5kaW5nUHJvdmlkZXIgPSBsb2NhbFdpdGhCaW5kaW5nUHJvdmlkZXIuYmluZCh0aGlzLCAndGhlbWUnLCAnJyk7XG4gICAgICAgIF9wcm9jZXNzU3R5bGVTaGVldFJ1bGVzX3Byb2Nlc3NUaGVtZXMoYmluZGluZ1Byb3ZpZGVyLCB0aGVtZVVwZGF0ZXIsIHJ1bGVzW2ldLnJ1bGVzKTtcbiAgICAgICAgbmV3U3R5bGUgPSBjb252ZXJ0ZXJVdGlscy5yZW1vdmVTdHlsZShuZXdTdHlsZSwgcnVsZXNbaV0ucG9zaXRpb24uc3RhcnQsIGxhc3RTdGFydCwgMCwgMCwgMCwgJycpO1xuICAgICAgKi9cbiAgICB9IGVsc2UgaWYgKHJ1bGVzW2ldLnR5cGUgPT0gJ21lZGlhJyB8fCBydWxlc1tpXS50eXBlID09ICdzdXBwb3J0cycpIHtcbiAgICAgIG5ld1N0eWxlID0gcHJvY2Vzc1N0eWxlc2hlZXRSdWxlcyhuZXdTdHlsZSwgcnVsZXNbaV0ucnVsZXMsIGxvY2FsV2l0aEJpbmRpbmdQcm92aWRlciwgYmxvY2tEZWZzVXBkYXRlciwgdGhlbWVVcGRhdGVyLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgcm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lKTtcbiAgICB9IGVsc2UgaWYgKHJ1bGVzW2ldLnR5cGUgPT0gJ2NvbW1lbnQnKSB7XG4gICAgICAvLyBpZ25vcmUgY29tbWVudHNcbiAgICB9IGVsc2UgaWYgKHJ1bGVzW2ldLnR5cGUgPT0gJ3J1bGUnKSB7XG4gICAgICB2YXIgc2VscyA9IHJ1bGVzW2ldLnNlbGVjdG9ycztcbiAgICAgIHZhciBuZXdTZWwgPSBcIlwiO1xuICAgICAgdmFyIGZvdW5kQmxvY2tNYXRjaCA9IG51bGw7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKG5ld1NlbC5sZW5ndGggPiAwKSBuZXdTZWwgKz0gXCIsIFwiO1xuICAgICAgICB2YXIgbWF0Y2ggPSBzZWxzW2pdLm1hdGNoKC9cXFtkYXRhLWtvLWJsb2NrPShbXiBdKilcXF0vKTtcbiAgICAgICAgaWYgKG1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKGZvdW5kQmxvY2tNYXRjaCAhPT0gbnVsbCAmJiBmb3VuZEJsb2NrTWF0Y2ggIT0gbWF0Y2hbMV0pIHRocm93IFwiRm91bmQgbXVsdGlwbGUgYmxvY2stbWF0Y2ggYXR0cmlidXRlIHNlbGVjdG9yczogY2Fubm90IHRyYW5zbGF0ZSBpdCAoXCIgKyBmb3VuZEJsb2NrTWF0Y2ggKyBcIiB2cyBcIiArIG1hdGNoWzFdICsgXCIpXCI7XG4gICAgICAgICAgZm91bmRCbG9ja01hdGNoID0gbWF0Y2hbMV07XG4gICAgICAgIH1cbiAgICAgICAgbmV3U2VsICs9ICc8IS0tIGtvIHRleHQ6IHRlbXBsYXRlTW9kZSA9PVxcJ3d5c2l3eWdcXCcgPyBcXCcjbWFpbi13eXNpd3lnLWFyZWEgXFwnIDogXFwnXFwnIC0tPjwhLS0gL2tvIC0tPicgKyBzZWxzW2pdO1xuICAgICAgfVxuICAgICAgaWYgKGZvdW5kQmxvY2tNYXRjaCkge1xuICAgICAgICB2YXIgbG9vcFByZWZpeCA9ICc8IS0tIGtvIGZvcmVhY2g6ICRyb290LmZpbmRPYmplY3RzT2ZUeXBlKCRkYXRhLCBcXCcnICsgZm91bmRCbG9ja01hdGNoICsgJ1xcJykgLS0+JztcbiAgICAgICAgdmFyIGxvb3BQb3N0Zml4ID0gJzwhLS0gL2tvIC0tPic7XG4gICAgICAgIHZhciBlbmQgPSBsYXN0U3RhcnQ7XG4gICAgICAgIHZhciBzcGFjaW5nID0gXCIgXCI7XG4gICAgICAgIGlmIChydWxlc1tpXS5kZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmIChydWxlc1tpXS5kZWNsYXJhdGlvbnNbMF0ucG9zaXRpb24uc3RhcnQubGluZSAhPSBydWxlc1tpXS5wb3NpdGlvbi5lbmQubGluZSkge1xuICAgICAgICAgICAgc3BhY2luZyA9IFwiXFxuXCIgKyAobmV3IEFycmF5KHJ1bGVzW2ldLnBvc2l0aW9uLnN0YXJ0LmNvbCkpLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbmQgPSBydWxlc1tpXS5kZWNsYXJhdGlvbnNbcnVsZXNbaV0uZGVjbGFyYXRpb25zLmxlbmd0aCAtIDFdLnBvc2l0aW9uLmVuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kID09PSBudWxsKSBuZXdTdHlsZSArPSBzcGFjaW5nICsgbG9vcFBvc3RmaXg7XG4gICAgICAgIGVsc2UgaWYgKGVuZCA9PSBsYXN0U3RhcnQpIG5ld1N0eWxlID0gY29udmVydGVyVXRpbHMucmVtb3ZlU3R5bGUobmV3U3R5bGUsIGVuZCwgbGFzdFN0YXJ0LCAwLCAwLCAwLCBzcGFjaW5nICsgbG9vcFBvc3RmaXgpO1xuICAgICAgICBlbHNlIG5ld1N0eWxlID0gY29udmVydGVyVXRpbHMucmVtb3ZlU3R5bGUobmV3U3R5bGUsIGVuZCwgbGFzdFN0YXJ0LCAwLCAwLCAwLCBzcGFjaW5nICsgJ30nICsgc3BhY2luZyArIGxvb3BQb3N0Zml4KTtcbiAgICAgICAgbmV3U2VsID0gbG9vcFByZWZpeCArIHNwYWNpbmcgKyBuZXdTZWwucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcW2RhdGEta28tYmxvY2s9JyArIGZvdW5kQmxvY2tNYXRjaCArICdcXFxcXScsICdnJyksICc8IS0tIGtvIHRleHQ6IFxcJyNcXCcraWQoKSAtLT4nICsgZm91bmRCbG9ja01hdGNoICsgJzwhLS0gL2tvIC0tPicpO1xuXG4gICAgICAgIGJsb2NrRGVmc1VwZGF0ZXIoZm91bmRCbG9ja01hdGNoLCAnJywgeyBjb250ZXh0TmFtZTogJ2Jsb2NrJyB9KTtcbiAgICAgIH1cbiAgICAgIC8vIFRPRE8gbWVuc2NoIHVwZGF0ZSAodXNpbmcgb3JpZ2luYWwgbWVuc2NoIGxpYnJhcnkgd2UgbmVlZGVkIHRoaXMgbGluZSwgd2hpbGUgdGhlIHBhdGNoZWQgb25lIGRvZXNuJ3QgbmVlZCB0aGlzIGNvZGUpXG4gICAgICAvLyBuZXdTZWwgKz0gXCIge1wiO1xuICAgICAgdmFyIGxvY2FsQmxvY2tOYW1lID0gZm91bmRCbG9ja01hdGNoID8gZm91bmRCbG9ja01hdGNoIDogdGVtcGxhdGVOYW1lO1xuICAgICAgYmluZGluZ1Byb3ZpZGVyID0gbG9jYWxXaXRoQmluZGluZ1Byb3ZpZGVyLmJpbmQodGhpcywgbG9jYWxCbG9ja05hbWUsICcnKTtcbiAgICAgIHZhciBlbGFib3JhdGVkU3R5bGUgPSBlbGFib3JhdGVEZWNsYXJhdGlvbnMobmV3U3R5bGUsIHJ1bGVzW2ldLmRlY2xhcmF0aW9ucywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIGJpbmRpbmdQcm92aWRlcik7XG4gICAgICBpZiAoZWxhYm9yYXRlZFN0eWxlICE9PSBudWxsKSBuZXdTdHlsZSA9IGVsYWJvcmF0ZWRTdHlsZTtcblxuICAgICAgbmV3U3R5bGUgPSBjb252ZXJ0ZXJVdGlscy5yZW1vdmVTdHlsZShuZXdTdHlsZSwgcnVsZXNbaV0ucG9zaXRpb24uc3RhcnQsIHJ1bGVzW2ldLnBvc2l0aW9uLmVuZCwgMCwgMCwgMCwgbmV3U2VsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJVbmtub3duIHJ1bGUgdHlwZVwiLCBydWxlc1tpXS50eXBlLCBcIndoaWxlIHBhcnNpbmcgPHN0eWxlPiBydWxlc1wiKTtcbiAgICB9XG4gICAgbGFzdFN0YXJ0ID0gcnVsZXNbaV0ucG9zaXRpb24uc3RhcnQ7XG4gIH1cbiAgcmV0dXJuIG5ld1N0eWxlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwcm9jZXNzU3R5bGVzaGVldFJ1bGVzOyIsIlwidXNlIHN0cmljdFwiO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKCdjb25zb2xlJyk7XG52YXIganNlcCA9IHJlcXVpcmUoJ2pzZXAnKTtcblxuanNlcC5hZGRCaW5hcnlPcChcIm9yXCIsIDEpO1xuanNlcC5hZGRCaW5hcnlPcChcImFuZFwiLCAyKTtcbmpzZXAuYWRkQmluYXJ5T3AoXCJlcVwiLCA2KTtcbmpzZXAuYWRkQmluYXJ5T3AoXCJuZXFcIiwgNik7XG5qc2VwLmFkZEJpbmFyeU9wKFwibHRcIiwgNyk7XG5qc2VwLmFkZEJpbmFyeU9wKFwibHRlXCIsIDcpO1xuanNlcC5hZGRCaW5hcnlPcChcImd0XCIsIDcpO1xuanNlcC5hZGRCaW5hcnlPcChcImd0ZVwiLCA3KTtcblxudmFyIGFkZFNsYXNoZXMgPSBmdW5jdGlvbihzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFxcXFwiJ10vZywgJ1xcXFwkJicpLnJlcGxhY2UoL1xcdTAwMDAvZywgJ1xcXFwwJyk7XG59O1xuXG52YXIgcmVtb3ZlU3R5bGUgPSBmdW5jdGlvbihzdHlsZSwgc3RhcnRQb3MsIGVuZFBvcywgc2tpcFJvd3MsIHN0YXJ0T2Zmc2V0LCBlbmRPZmZzZXQsIGluc2VydCkge1xuICB2YXIgc3R5bGVSb3dzID0gc3R5bGUuc3BsaXQoXCJcXG5cIik7XG4gIHZhciBzdGFydCA9IHN0YXJ0T2Zmc2V0O1xuICB2YXIgZW5kID0gZW5kT2Zmc2V0O1xuICBmb3IgKHZhciByID0gMSArIHNraXBSb3dzOyByIDwgc3RhcnRQb3MubGluZTsgcisrKSBzdGFydCArPSBzdHlsZVJvd3NbciAtIDEgLSBza2lwUm93c10ubGVuZ3RoICsgMTtcbiAgc3RhcnQgKz0gc3RhcnRQb3MuY29sO1xuICBpZiAoZW5kUG9zICE9PSBudWxsKSB7XG4gICAgZm9yICh2YXIgcjIgPSAxICsgc2tpcFJvd3M7IHIyIDwgZW5kUG9zLmxpbmU7IHIyKyspIGVuZCArPSBzdHlsZVJvd3NbcjIgLSAxIC0gc2tpcFJvd3NdLmxlbmd0aCArIDE7XG4gICAgZW5kICs9IGVuZFBvcy5jb2w7XG4gIH0gZWxzZSBlbmQgKz0gc3R5bGUubGVuZ3RoICsgMTtcbiAgdmFyIG5ld1N0eWxlID0gc3R5bGUuc3Vic3RyKDAsIHN0YXJ0IC0gMSkgKyBpbnNlcnQgKyBzdHlsZS5zdWJzdHIoZW5kIC0gMSk7XG4gIHJldHVybiBuZXdTdHlsZTtcbn07XG5cbnZhciBleHByZXNzaW9uR2VuZXJhdG9yID0gZnVuY3Rpb24obm9kZSwgYmluZGluZ1Byb3ZpZGVyLCBkZWZWYWwpIHtcbiAgZnVuY3Rpb24gbWFwT3BlcmF0b3Iob3ApIHtcbiAgICBzd2l0Y2ggKG9wKSB7XG4gICAgICBjYXNlICdvcic6XG4gICAgICAgIHJldHVybiAnfHwnO1xuICAgICAgY2FzZSAnYW5kJzpcbiAgICAgICAgcmV0dXJuICcmJic7XG4gICAgICBjYXNlICdsdCc6XG4gICAgICAgIHJldHVybiAnPCc7XG4gICAgICBjYXNlICdsdGUnOlxuICAgICAgICByZXR1cm4gJzw9JztcbiAgICAgIGNhc2UgJ2d0JzpcbiAgICAgICAgcmV0dXJuICc+JztcbiAgICAgIGNhc2UgJ2d0ZSc6XG4gICAgICAgIHJldHVybiAnPj0nO1xuICAgICAgY2FzZSAnZXEnOlxuICAgICAgICByZXR1cm4gJz09JztcbiAgICAgIGNhc2UgJ25lcSc6XG4gICAgICAgIHJldHVybiAnIT0nO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG9wO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbihub2RlLCBiaW5kaW5nUHJvdmlkZXIsIGxvb2t1cG1lbWJlciwgZGVmVmFsKSB7XG4gICAgaWYgKHR5cGVvZiBsb29rdXBtZW1iZXIgPT0gJ3VuZGVmaW5lZCcpIGxvb2t1cG1lbWJlciA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIGRlZlZhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgbm9kZS50eXBlICE9PSBcIklkZW50aWZpZXJcIiAmJiBub2RlLnR5cGUgIT09IFwiTWVtYmVyRXhwcmVzc2lvblwiKSBjb25zb2xlLmxvZyhcIkNhbm5vdCBhcHBseSBkZWZhdWx0IHZhbHVlIHRvIHZhcmlhYmxlIHdoZW4gdXNpbmcgZXhwcmVzc2lvbnNcIik7XG5cbiAgICBpZiAobm9kZS50eXBlID09PSBcIkJpbmFyeUV4cHJlc3Npb25cIiB8fCBub2RlLnR5cGUgPT09IFwiTG9naWNhbEV4cHJlc3Npb25cIikge1xuICAgICAgcmV0dXJuICcoJyArIGdlbihub2RlLmxlZnQsIGJpbmRpbmdQcm92aWRlciwgbG9va3VwbWVtYmVyKSArICcgJyArIG1hcE9wZXJhdG9yKG5vZGUub3BlcmF0b3IpICsgJyAnICsgZ2VuKG5vZGUucmlnaHQsIGJpbmRpbmdQcm92aWRlciwgbG9va3VwbWVtYmVyKSArICcpJztcbiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gJ0NhbGxFeHByZXNzaW9uJykge1xuICAgICAgdmFyIGFyZ3MgPSBub2RlLmFyZ3VtZW50cy5tYXAoZnVuY3Rpb24obikge1xuICAgICAgICByZXR1cm4gZ2VuKG4sIGJpbmRpbmdQcm92aWRlciwgbG9va3VwbWVtYmVyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGdlbihub2RlLmNhbGxlZSwgYmluZGluZ1Byb3ZpZGVyLCBsb29rdXBtZW1iZXIpICsgJygnICsgYXJncy5qb2luKCcsICcpICsgJyknO1xuICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSBcIlVuYXJ5RXhwcmVzc2lvblwiKSB7XG4gICAgICByZXR1cm4gbm9kZS5vcGVyYXRvciArIGdlbihub2RlLmFyZ3VtZW50LCBiaW5kaW5nUHJvdmlkZXIsIGxvb2t1cG1lbWJlcik7XG4gICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT0gJ01lbWJlckV4cHJlc3Npb24nICYmIG5vZGUuY29tcHV0ZWQpIHtcbiAgICAgIHRocm93IFwiVW5leHBlY3RlZCBjb21wdXRlZCBtZW1iZXIgZXhwcmVzc2lvblwiO1xuICAgICAgLy8gcmV0dXJuIGdlbihub2RlLm9iamVjdCkgKyAnWycgKyBnZW4obm9kZS5wcm9wZXJ0eSkgKyAnXSc7XG4gICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT0gJ01lbWJlckV4cHJlc3Npb24nICYmICFub2RlLmNvbXB1dGVkKSB7XG4gICAgICB2YXIgbWUgPSBnZW4obm9kZS5vYmplY3QsIGJpbmRpbmdQcm92aWRlciwgZmFsc2UpICsgJy4nICsgZ2VuKG5vZGUucHJvcGVydHksIGJpbmRpbmdQcm92aWRlciwgZmFsc2UpO1xuICAgICAgaWYgKGxvb2t1cG1lbWJlciAmJiBub2RlLm9iamVjdC5uYW1lICE9PSAnTWF0aCcgJiYgbm9kZS5vYmplY3QubmFtZSAhPT0gJ0NvbG9yJykgcmV0dXJuIGJpbmRpbmdQcm92aWRlcihtZSwgZGVmVmFsKSArICcoKSc7XG4gICAgICByZXR1cm4gbWU7XG4gICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09IFwiTGl0ZXJhbFwiKSB7XG4gICAgICByZXR1cm4gbm9kZS5yYXc7XG4gICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICdJZGVudGlmaWVyJykge1xuICAgICAgdmFyIGlkID0gbm9kZS5uYW1lO1xuICAgICAgaWYgKGxvb2t1cG1lbWJlcikgcmV0dXJuIGJpbmRpbmdQcm92aWRlcihpZCwgZGVmVmFsKSArICcoKSc7XG4gICAgICBlbHNlIHJldHVybiBpZDtcbiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gJ0NvbmRpdGlvbmFsRXhwcmVzc2lvbicpIHtcbiAgICAgIHJldHVybiAnKCcgKyBnZW4obm9kZS50ZXN0LCBiaW5kaW5nUHJvdmlkZXIsIGxvb2t1cG1lbWJlcikgKyAnID8gJyArIGdlbihub2RlLmNvbnNlcXVlbnQsIGJpbmRpbmdQcm92aWRlciwgbG9va3VwbWVtYmVyKSArICcgOiAnICsgZ2VuKG5vZGUuYWx0ZXJuYXRlLCBiaW5kaW5nUHJvdmlkZXIsIGxvb2t1cG1lbWJlcikgKyAnKSc7XG4gICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICdDb21wb3VuZCcpIHtcbiAgICAgIHRocm93IFwiU3ludGF4IGVycm9yIGluIGV4cHJlc3Npb246IG9wZXJhdG9yIGV4cGVjdGVkIGFmdGVyIFwiICsgZ2VuKG5vZGUuYm9keVswXSwgYmluZGluZ1Byb3ZpZGVyLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiRm91bmQgYW4gdW5zdXBwb3J0ZWQgZXhwcmVzc2lvbiB0eXBlOiBcIiArIG5vZGUudHlwZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2VuKG5vZGUsIGJpbmRpbmdQcm92aWRlciwgdW5kZWZpbmVkLCBkZWZWYWwpO1xufTtcblxudmFyIGV4cHJlc3Npb25CaW5kaW5nID0gZnVuY3Rpb24oZXhwcmVzc2lvbiwgYmluZGluZ1Byb3ZpZGVyLCBkZWZhdWx0VmFsdWUpIHtcbiAgdmFyIG1hdGNoZXM7XG4gIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSAndW5kZWZpbmVkJyAmJiBkZWZhdWx0VmFsdWUgIT09IG51bGwpIHtcbiAgICB2YXIgY2hlY2sgPSBleHByZXNzaW9uLnRyaW0oKS5yZXBsYWNlKC9AXFxbKFteXFxdXSspXFxdfEAoW2EtekEtWjAtOVxcLl9dKylcXGIvZywgJyMjI3ZhciMjIycpO1xuICAgIGNoZWNrID0gY2hlY2sucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csIFwiXFxcXCQmXCIpO1xuICAgIGlmIChjaGVjayA9PSAnIyMjdmFyIyMjJykgbWF0Y2hlcyA9IFtudWxsLCBkZWZhdWx0VmFsdWVdO1xuICAgIGVsc2Uge1xuICAgICAgY2hlY2sgPSAnXicgKyBjaGVjay5yZXBsYWNlKC8jIyN2YXIjIyMvZywgJyguKyknKSArICckJztcbiAgICAgIG1hdGNoZXMgPSBkZWZhdWx0VmFsdWUudHJpbSgpLm1hdGNoKG5ldyBSZWdFeHAoY2hlY2spKTtcbiAgICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgICAvLyBUT0RPIHRocm93IGVycm9yP1xuICAgICAgICBjb25zb2xlLmxvZyhcIkNhbm5vdCBmaW5kIG1hdGNoZXNcIiwgbWF0Y2hlcywgXCJmb3JcIiwgZGVmYXVsdFZhbHVlLCBleHByZXNzaW9uLCBjaGVjaywgZXhwcmVzc2lvbik7XG4gICAgICAgIHRocm93IFwiQ2Fubm90IGZpbmQgZGVmYXVsdCB2YWx1ZSBmb3IgXCIgKyBleHByZXNzaW9uICsgXCIgaW4gXCIgKyBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHRyeSB7XG4gICAgdmFyIHZhcnMgPSAwO1xuICAgIHZhciByZXN1bHQgPSBcIidcIiArIGV4cHJlc3Npb24ucmVwbGFjZSgvQFxcWyhbXlxcXV0rKVxcXXxAKFthLXpBLVowLTlcXC5fXSspXFxifCgnKS9nLCBmdW5jdGlvbihtYXRjaCwgcDEsIHAyLCBwMykge1xuICAgICAgLy8gZXNjYXBpbmcuLlxuICAgICAgaWYgKHAzKSByZXR1cm4gXCJcXFxcXCIgKyBwMztcbiAgICAgIHZhcnMrKztcbiAgICAgIHZhciB2YXJOYW1lID0gcDEgfHwgcDI7XG4gICAgICB2YXIgZGVmVmFsO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtYXRjaGVzW3ZhcnNdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGRlZlZhbCA9IG1hdGNoZXNbdmFyc10udHJpbSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQUJaWlogQ2Fubm90IGZpbmQgZGVmYXVsdCB2YWx1ZSBmb3JcIiwgdmFyTmFtZSwgXCJpblwiLCBtYXRjaGVzLCBcImFzXCIsIHZhcnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBpbiBjYXNlIHdlIGZvdW5kIHAxIHdlIGFyZSBpbiBhIEBbc2VxdWVuY2VdIHNvIHdlIHN0YXJ0IGFuIGV4cHJlc3Npb24gcGFyc2VyXG4gICAgICBpZiAocDEpIHtcbiAgICAgICAgdmFyIHBhcnNldHJlZSA9IGpzZXAocDEpO1xuICAgICAgICB2YXIgZ2VudHJlZSA9IGV4cHJlc3Npb25HZW5lcmF0b3IocGFyc2V0cmVlLCBiaW5kaW5nUHJvdmlkZXIsIGRlZlZhbCk7XG4gICAgICAgIHJldHVybiBcIicrXCIgKyBnZW50cmVlICsgXCIrJ1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiJytcIiArIGJpbmRpbmdQcm92aWRlcih2YXJOYW1lLCBkZWZWYWwpICsgXCIoKSsnXCI7XG4gICAgfSkgKyBcIidcIjtcbiAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvKF58W15cXFxcXSknJ1xcKy9nLCAnJDEnKS5yZXBsYWNlKC9cXCsnJy9nLCAnJyk7XG5cbiAgICBpZiAodmFycyA9PT0gMCAmJiByZXN1bHQgIT09ICdmYWxzZScgJiYgcmVzdWx0ICE9PSAndHJ1ZScpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmV4cGVjdGVkIGV4cHJlc3Npb24gd2l0aCBubyB2YWxpZCBAdmFyaWFibGUgcmVmZXJlbmNlc1wiLCBleHByZXNzaW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IFwiRXhjZXB0aW9uIHBhcnNpbmcgZXhwcmVzc2lvbiBcIiArIGV4cHJlc3Npb24gKyBcIiBcIiArIGU7XG4gIH1cbn07XG5cbnZhciBjb25kaXRpb25CaW5kaW5nID0gZnVuY3Rpb24oY29uZGl0aW9uLCBiaW5kaW5nUHJvdmlkZXIpIHtcbiAgdmFyIHBhcnNldHJlZSA9IGpzZXAoY29uZGl0aW9uKTtcbiAgdmFyIGdlbnRyZWUgPSBleHByZXNzaW9uR2VuZXJhdG9yKHBhcnNldHJlZSwgYmluZGluZ1Byb3ZpZGVyKTtcbiAgcmV0dXJuIGdlbnRyZWU7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkU2xhc2hlczogYWRkU2xhc2hlcyxcbiAgcmVtb3ZlU3R5bGU6IHJlbW92ZVN0eWxlLFxuICBjb25kaXRpb25CaW5kaW5nOiBjb25kaXRpb25CaW5kaW5nLFxuICBleHByZXNzaW9uQmluZGluZzogZXhwcmVzc2lvbkJpbmRpbmdcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFRoaXMgaXMgY29tcGxleCBjb2RlIHRvIGhhbmRsZSBcImxpdmVcIiBtb2RlbCBpbnN0cnVtZW50YXRpb24gYW5kIGRlcGVuZGVuY3kgdHJhY2tpbmcuXG4vLyBUaGlzIGFkZHMgX3dyYXAgYW5kIF91bndyYXAgbWV0aG9kcyB0byB0aGUgbW9kZWwgYW5kIGFsc28gaW5zdHJ1bWVudCB0aGUgYmxvY2sgbGlzdCBzbyB0byBhdXRvbWF0aWNhbGx5XG4vLyB3cmFwL3Vwd3JhcCBvYmplY3RzIG9uIHNpbXBsZSBhcnJheSBtZXRob2RzIChwdXNoLCBzcGxpY2UpXG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBrb3dyYXAgPSByZXF1aXJlKFwia25vY2tvdXQud3JhcFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbnZhciBfZ2V0T3B0aW9uc09iamVjdCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgdmFyIG9wdGlvbnNDb3VwbGVzID0gb3B0aW9ucy5zcGxpdCgnfCcpO1xuICB2YXIgb3B0cyA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnNDb3VwbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIG9wdCA9IG9wdGlvbnNDb3VwbGVzW2ldLnNwbGl0KCc9Jyk7XG4gICAgb3B0c1tvcHRbMF1dID0gb3B0Lmxlbmd0aCA+IDEgPyBvcHRbMV0gOiBvcHRbMF07XG4gIH1cbiAgcmV0dXJuIG9wdHM7XG59O1xuXG4vLyBnZW5lcmF0ZSBhIGNvbXB1dGVkIHZhcmlhYmxlIGhhbmRsaW5nIHRoZSBmYWxsYmFjayB0byB0aGVtZSB2YXJpYWJsZVxudmFyIF9tYWtlQ29tcHV0ZWQgPSBmdW5jdGlvbih0YXJnZXQsIGRlZiwgbnVsbElmRXF1YWwsIHNjaGVtZVNlbGVjdG9yLCB0aGVtZVBhdGgsIHRoZW1lcykge1xuICB2YXIgcmVzID0ga28uY29tcHV0ZWQoe1xuICAgICdyZWFkJzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdmFsID0gdGFyZ2V0KCk7XG4gICAgICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgICAgIHZhciBzY2hlbWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHNjaGVtZVNlbGVjdG9yKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzY2hlbWUgPT0gJ3VuZGVmaW5lZCcgfHwgc2NoZW1lID09ICdjdXN0b20nKSB7XG4gICAgICAgICAgcmV0dXJuIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoZGVmKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhlbWVzW3NjaGVtZV1bdGhlbWVQYXRoXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9LFxuICAgICd3cml0ZSc6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgc2NoZW1lID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShzY2hlbWVTZWxlY3Rvcik7XG4gICAgICB2YXIgZGVmVmFsO1xuICAgICAgaWYgKHR5cGVvZiBzY2hlbWUgPT0gJ3VuZGVmaW5lZCcgfHwgc2NoZW1lID09ICdjdXN0b20nKSB7XG4gICAgICAgIGRlZlZhbCA9IGtvLnV0aWxzLnBlZWtPYnNlcnZhYmxlKGRlZik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZWYWwgPSB0aGVtZXNbc2NoZW1lXVt0aGVtZVBhdGhdO1xuICAgICAgfVxuXG4gICAgICBpZiAoISFudWxsSWZFcXVhbCkge1xuICAgICAgICBpZiAodmFsdWUgPT0gZGVmVmFsKSB0YXJnZXQobnVsbCk7XG4gICAgICAgIGVsc2UgdGFyZ2V0KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0ga28udXRpbHMucGVla09ic2VydmFibGUodGFyZ2V0KTtcbiAgICAgICAgaWYgKHZhbHVlICE9IGRlZlZhbCB8fCBjdXJyZW50ICE9PSBudWxsKSB0YXJnZXQodmFsdWUpO1xuICAgICAgfVxuXG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbnZhciBfbmV4dFZhcmlhbnRGdW5jdGlvbiA9IGZ1bmN0aW9uKGtvLCBwcm9wLCB2YXJpYW50cykge1xuICB2YXIgY3VycmVudFZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShwcm9wKTtcbiAgdmFyIHZhcmlhbnRWYWx1ZTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyaWFudFZhbHVlID0ga28udXRpbHMucGVla09ic2VydmFibGUodmFyaWFudHNbaV0pO1xuICAgIGlmICh2YXJpYW50VmFsdWUgPT0gY3VycmVudFZhbHVlKSBicmVhaztcbiAgfVxuXG4gIGlmIChpID09IHZhcmlhbnRzLmxlbmd0aCkge1xuICAgIGNvbnNvbGUud2FybihcIkRpZG4ndCBmaW5kIGEgdmFyaWFudCFcIiwgcHJvcCwgY3VycmVudFZhbHVlLCB2YXJpYW50cyk7XG4gICAgaSA9IHZhcmlhbnRzLmxlbmd0aCAtIDE7XG4gIH1cblxuICB2YXIgbmV4dFZhcmlhbnQgPSBpICsgMTtcbiAgaWYgKG5leHRWYXJpYW50ID09IHZhcmlhbnRzLmxlbmd0aCkgbmV4dFZhcmlhbnQgPSAwO1xuICB2YXIgbmV4dFZhbHVlID0ga28udXRpbHMucGVla09ic2VydmFibGUodmFyaWFudHNbbmV4dFZhcmlhbnRdKTtcblxuICBwcm9wKG5leHRWYWx1ZSk7XG59O1xuXG52YXIgX2dldFZhcmlhbnRzID0gZnVuY3Rpb24oZGVmKSB7XG4gIHZhciB2YXJpYW50UHJvcCA9IGRlZi5fdmFyaWFudDtcbiAgdmFyIHZhcmlhbnRPcHRpb25zO1xuICBpZiAodHlwZW9mIGRlZlt2YXJpYW50UHJvcF0gIT09ICdvYmplY3QnIHx8IHR5cGVvZiBkZWZbdmFyaWFudFByb3BdLl93aWRnZXQgPT09ICd1bmRlZmluZWQnIHx8ICh0eXBlb2YgZGVmW3ZhcmlhbnRQcm9wXS5fb3B0aW9ucyAhPT0gJ3N0cmluZycgJiYgZGVmW3ZhcmlhbnRQcm9wXS5fd2lkZ2V0ICE9PSAnYm9vbGVhbicpKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlVuZXhwZWN0ZWQgdmFyaWFudCBkZWNsYXJhdGlvblwiLCB2YXJpYW50UHJvcCwgZGVmW3ZhcmlhbnRQcm9wXSk7XG4gICAgdGhyb3cgXCJVbmV4cGVjdGVkIHZhcmlhbnQgZGVjbGFyYXRpb246IGNhbm5vdCBmaW5kIHByb3BlcnR5IFwiICsgdmFyaWFudFByb3AgKyBcIiBvciBpdHMgX29wdGlvbnMgc3RyaW5nIGFuZCBpdCBpcyBub3QgYSBib29sZWFuXCI7XG4gIH1cbiAgLy8gVE9ETyBJIHJlYWQgdGhlIFwia2V5c1wiIGJ1dCB0aGlzIGlzIG5vdCAxMDAlIGNvcnJlY3QgYmVjYXVzZSB0aGV5IGFyZSBub3QgZ2FyYW50ZWVkIHRvIGJlIHNvcnRlZCBhcyBpbiBkZWNsYXJhdGlvblxuICBpZiAodHlwZW9mIGRlZlt2YXJpYW50UHJvcF0uX29wdGlvbnMgPT0gJ3N0cmluZycpIHtcbiAgICB2YXJpYW50T3B0aW9ucyA9IE9iamVjdC5rZXlzKF9nZXRPcHRpb25zT2JqZWN0KGRlZlt2YXJpYW50UHJvcF0uX29wdGlvbnMpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXJpYW50T3B0aW9ucyA9IFt0cnVlLCBmYWxzZV07XG4gIH1cbiAgcmV0dXJuIHZhcmlhbnRPcHRpb25zO1xufTtcblxudmFyIF9tYWtlQ29tcHV0ZWRGdW5jdGlvbiA9IGZ1bmN0aW9uKGRlZiwgZGVmcywgdGhtcywga28sIGNvbnRlbnRNb2RlbCwgaXNDb250ZW50LCB0KSB7XG4gIGlmICh0eXBlb2YgZGVmID09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHQpLnR5cGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlRPRE8gRVJST1IgRm91bmQgYSBub24tdHlwZWQgZGVmIFwiLCBkZWYsIHQpO1xuICAgICAgdGhyb3cgXCJGb3VuZCBhIG5vbi10eXBlZCBkZWYgXCIgKyBkZWY7XG4gICAgfVxuICAgIHZhciB0eXBlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHQpLnR5cGUpO1xuICAgIGRlZiA9IGRlZnNbdHlwZV07XG4gICAgaWYgKHR5cGVvZiBkZWYgIT09ICdvYmplY3QnKSBjb25zb2xlLmxvZyhcIlRPRE8gRVJST1IgRm91bmQgYSBub24tb2JqZWN0IGRlZiBcIiwgZGVmLCBcImZvclwiLCB0eXBlKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgY29udGVudE1vZGVsID09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpc0NvbnRlbnQgIT0gJ3VuZGVmaW5lZCcgJiYgaXNDb250ZW50KSB7XG4gICAgY29udGVudE1vZGVsID0gdDtcbiAgfVxuXG4gIHZhciBzZWxmUGF0aCA9ICckcm9vdC5jb250ZW50KCkuJztcblxuICB2YXIgcHAgPSBkZWYuX2dsb2JhbFN0eWxlcztcbiAgaWYgKHR5cGVvZiBwcCAhPSAndW5kZWZpbmVkJylcbiAgICBmb3IgKHZhciBwIGluIHBwKVxuICAgICAgaWYgKHBwLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgIHZhciBzY2hlbWVQYXRoT3JpZyA9ICckcm9vdC5jb250ZW50KCkudGhlbWUoKS5zY2hlbWUnO1xuICAgICAgICB2YXIgc2NoZW1lUGF0aCwgdm0sIHBhdGg7XG5cbiAgICAgICAgaWYgKHBwW3BdLnN1YnN0cigwLCBzZWxmUGF0aC5sZW5ndGgpID09IHNlbGZQYXRoKSB7XG4gICAgICAgICAgcGF0aCA9IHBwW3BdLnN1YnN0cihzZWxmUGF0aC5sZW5ndGgpO1xuICAgICAgICAgIHZtID0gY29udGVudE1vZGVsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IFwiVU5FWFBFQ1RFRCBnbG9iYWxTdHlsZSBwYXRoIChcIiArIHBwW3BdICsgXCIpIG91dHNpZGUgc2VsZlBhdGggKFwiICsgc2VsZlBhdGggKyBcIilcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1lUGF0aE9yaWcuc3Vic3RyKDAsIHNlbGZQYXRoLmxlbmd0aCkgPT0gc2VsZlBhdGgpIHtcbiAgICAgICAgICBzY2hlbWVQYXRoID0gc2NoZW1lUGF0aE9yaWcuc3Vic3RyKHNlbGZQYXRoLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJJUyBUSElTIENPUlJFQ1Q/XCIsIHNjaGVtZVBhdGhPcmlnLCBzZWxmUGF0aCk7XG4gICAgICAgICAgc2NoZW1lUGF0aCA9IHNjaGVtZVBhdGhPcmlnO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNjaGVtZVNlbGVjdG9yID0gdm07XG5cbiAgICAgICAgdmFyIHBhdGhQYXJ0cyA9IHBhdGguc3BsaXQoJygpLicpO1xuICAgICAgICB2YXIgdGhlbWVQYXRoID0gJyc7XG4gICAgICAgIHZhciBza2lwID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2bSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodm0pW3BhdGhQYXJ0c1tpXV07XG4gICAgICAgICAgLy8gdWdseSB0aGluZyB0byBmaW5kIHRoZSBwYXRoIHRvIHRoZSBzY2hlbWEgY29sb3IgcHJvcGVydHkgKHNvbWV0aW1lcyB3ZSBoYXZlIHRoZW1lLmJvZHlUaGVtZSwgc29tZSBvdGhlciB3ZSBoYXZlIGNvbnRlbnQudGhlbWUuYm9keVRoZW1lLi4uKVxuICAgICAgICAgIGlmIChza2lwKSB7XG4gICAgICAgICAgICBpZiAocGF0aFBhcnRzW2ldID09ICd0aGVtZScpIHNraXAgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoZW1lUGF0aC5sZW5ndGggPiAwKSB0aGVtZVBhdGggKz0gJy4nO1xuICAgICAgICAgICAgdGhlbWVQYXRoICs9IHBhdGhQYXJ0c1tpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2NoZW1lUGFydHMgPSBzY2hlbWVQYXRoLnNwbGl0KCcoKS4nKTtcbiAgICAgICAgZm9yICh2YXIgaTMgPSAwOyBpMyA8IHNjaGVtZVBhcnRzLmxlbmd0aDsgaTMrKykge1xuICAgICAgICAgIHNjaGVtZVNlbGVjdG9yID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShzY2hlbWVTZWxlY3Rvcilbc2NoZW1lUGFydHNbaTNdXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBudWxsSWZFcXVhbCA9IHRydWU7XG4gICAgICAgIHZhciB0UGFydHMgPSBwLnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0O1xuICAgICAgICBmb3IgKHZhciBpMiA9IDA7IGkyIDwgdFBhcnRzLmxlbmd0aDsgaTIrKykge1xuICAgICAgICAgIHRhcmdldCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodGFyZ2V0KVt0UGFydHNbaTJdXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgha28uaXNPYnNlcnZhYmxlKHRhcmdldCkpIHRocm93IFwiVW5leHBlY3RlZCBub24gb2JzZXJ2YWJsZSB0YXJnZXQgXCIgKyBwICsgXCIvXCIgKyB0aGVtZVBhdGg7XG5cbiAgICAgICAgdGFyZ2V0Ll9kZWZhdWx0Q29tcHV0ZWQgPSBfbWFrZUNvbXB1dGVkKHRhcmdldCwgdm0sIG51bGxJZkVxdWFsLCBzY2hlbWVTZWxlY3RvciwgdGhlbWVQYXRoLCB0aG1zKTtcbiAgICAgIH1cblxuICBpZiAodHlwZW9mIGRlZi5fdmFyaWFudCAhPSAndW5kZWZpbmVkJykge1xuICAgIHZhciBwUGFydHMgPSBkZWYuX3ZhcmlhbnQuc3BsaXQoJy4nKTtcbiAgICAvLyBsb29rcyBpbiB0IGFuZCBub3QgY29udGVudE1vZGVsIGJlY2F1c2UgdmFyaWFudHMgYXJlIGRlY2xhcmVkIG9uIHNpbmdsZSBibG9ja3MuXG4gICAgdmFyIHBUYXJnZXQgPSB0O1xuICAgIHZhciBwUGFyZW50ID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh0KTtcbiAgICBmb3IgKHZhciBpNCA9IDA7IGk0IDwgcFBhcnRzLmxlbmd0aDsgaTQrKykge1xuICAgICAgcFRhcmdldCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUocFRhcmdldClbcFBhcnRzW2k0XV07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcFRhcmdldC5fZGVmYXVsdENvbXB1dGVkICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkZvdW5kIHZhcmlhbnQgb24gYSBzdHlsZSBwcm9wZXJ0eTogYmV3YXJlIHZhcmlhbnRzIHNob3VsZCBiZSBvbmx5IHVzZWQgb24gY29udGVudCBwcm9wZXJ0aWVzIGJlY2F1c2UgdGhleSBkb24ndCBtYXRjaCB0aGUgdGhlbWUgZmFsbGJhY2sgYmVoYXZpb3VyXCIsIGRlZi5fdmFyaWFudCk7XG4gICAgICBwVGFyZ2V0ID0gcFRhcmdldC5fZGVmYXVsdENvbXB1dGVkO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBUYXJnZXQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgbG9va2luZyBmb3IgdmFyaWFudCB0YXJnZXRcIiwgZGVmLl92YXJpYW50LCB0KTtcbiAgICAgIHRocm93IFwiRVJST1IgbG9va2luZyBmb3IgdmFyaWFudCB0YXJnZXQgXCIgKyBkZWYuX3ZhcmlhbnQ7XG4gICAgfVxuICAgIHBQYXJlbnQuX25leHRWYXJpYW50ID0gX25leHRWYXJpYW50RnVuY3Rpb24uYmluZChwVGFyZ2V0LCBrbywgcFRhcmdldCwgX2dldFZhcmlhbnRzKGRlZikpO1xuICB9XG5cbiAgZm9yICh2YXIgcHJvcDIgaW4gZGVmKVxuICAgIGlmIChkZWYuaGFzT3duUHJvcGVydHkocHJvcDIpKSB7XG4gICAgICB2YXIgdmFsID0gZGVmW3Byb3AyXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09ICdvYmplY3QnICYmIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsLl9jb250ZXh0ICE9ICd1bmRlZmluZWQnICYmIHZhbC5fY29udGV4dCA9PSAnYmxvY2snKSB7XG4gICAgICAgIHZhciBwcm9wVm0gPSBjb250ZW50TW9kZWxbcHJvcDJdKCk7XG4gICAgICAgIHZhciBuZXdWbSA9IF9tYWtlQ29tcHV0ZWRGdW5jdGlvbihkZWZzW3Byb3AyXSwgZGVmcywgdGhtcywga28sIGNvbnRlbnRNb2RlbCwgaXNDb250ZW50LCBwcm9wVm0pO1xuICAgICAgICB0W3Byb3AyXShuZXdWbSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT0gJ29iamVjdCcgJiYgdmFsICE9PSBudWxsICYmIHZhbC50eXBlID09ICdibG9ja3MnKSB7XG4gICAgICAgIHZhciBtYWluVm0gPSBjb250ZW50TW9kZWxbcHJvcDJdKCk7XG4gICAgICAgIHZhciBibG9ja3NWbSA9IG1haW5WbS5ibG9ja3MoKTtcbiAgICAgICAgdmFyIG9sZEJsb2NrLCBibG9ja1R5cGUsIG5ld0Jsb2NrO1xuICAgICAgICBmb3IgKHZhciBpYiA9IDA7IGliIDwgYmxvY2tzVm0ubGVuZ3RoOyBpYisrKSB7XG4gICAgICAgICAgb2xkQmxvY2sgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGJsb2Nrc1ZtW2liXSk7XG4gICAgICAgICAgYmxvY2tUeXBlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShvbGRCbG9jay50eXBlKTtcbiAgICAgICAgICBuZXdCbG9jayA9IF9tYWtlQ29tcHV0ZWRGdW5jdGlvbihkZWZzW2Jsb2NrVHlwZV0sIGRlZnMsIHRobXMsIGtvLCBjb250ZW50TW9kZWwsIGlzQ29udGVudCwgb2xkQmxvY2spO1xuICAgICAgICAgIGJsb2Nrc1ZtW2liXShuZXdCbG9jayk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYmxvY2tzT2JzID0gbWFpblZtLmJsb2NrcztcblxuICAgICAgICBfYXVnbWVudEJsb2Nrc09ic2VydmFibGUoYmxvY2tzT2JzLCBfYmxvY2tJbnN0cnVtZW50RnVuY3Rpb24uYmluZChtYWluVm0sIHVuZGVmaW5lZCwgZGVmcywgdGhtcywga28sIHVuZGVmaW5lZCwgY29udGVudE1vZGVsLCBpc0NvbnRlbnQpKTtcblxuICAgICAgICBjb250ZW50TW9kZWxbcHJvcDJdLl93cmFwID0gX21ha2VCbG9ja3NXcmFwLmJpbmQoY29udGVudE1vZGVsW3Byb3AyXSwgYmxvY2tzT2JzLl9pbnN0cnVtZW50QmxvY2spO1xuICAgICAgICBjb250ZW50TW9kZWxbcHJvcDJdLl91bndyYXAgPSBfdW53cmFwLmJpbmQoY29udGVudE1vZGVsW3Byb3AyXSk7XG4gICAgICB9XG4gICAgfVxuXG4gIHJldHVybiB0O1xufTtcblxudmFyIF9hdWdtZW50QmxvY2tzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uKGJsb2Nrc09icywgaW5zdHJ1bWVudCkge1xuICBibG9ja3NPYnMuX2luc3RydW1lbnRCbG9jayA9IGluc3RydW1lbnQ7XG4gIGlmICh0eXBlb2YgYmxvY2tzT2JzLm9yaWdQdXNoID09ICd1bmRlZmluZWQnKSB7XG4gICAgYmxvY2tzT2JzLm9yaWdQdXNoID0gYmxvY2tzT2JzLnB1c2g7XG4gICAgYmxvY2tzT2JzLnB1c2ggPSBfbWFrZVB1c2guYmluZChibG9ja3NPYnMpO1xuICAgIGJsb2Nrc09icy5vcmlnU3BsaWNlID0gYmxvY2tzT2JzLnNwbGljZTtcbiAgICBibG9ja3NPYnMuc3BsaWNlID0gX21ha2VTcGxpY2UuYmluZChibG9ja3NPYnMpO1xuICB9XG59O1xuXG52YXIgX21ha2VCbG9ja3NXcmFwID0gZnVuY3Rpb24oaW5zdHJ1bWVudCwgaW5wdXRNb2RlbCkge1xuICB2YXIgbW9kZWwgPSBrby50b0pTKGlucHV0TW9kZWwpO1xuICB2YXIgaW5wdXQgPSBtb2RlbC5ibG9ja3M7XG4gIG1vZGVsLmJsb2NrcyA9IFtdO1xuICB2YXIgcmVzID0ga293cmFwLmZyb21KUyhtb2RlbCwgdW5kZWZpbmVkLCB0cnVlKSgpO1xuICBfYXVnbWVudEJsb2Nrc09ic2VydmFibGUocmVzLmJsb2NrcywgaW5zdHJ1bWVudCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgb2JqID0ga28udG9KUyhpbnB1dFtpXSk7XG4gICAgLy8gY29uc29sZS5sb2coXCJfbWFrZUJsb2Nrc1dyYXAgc2V0IGJsb2NrSWRcIiwgb2JqLmlkLCAnYmxvY2tfJytpKTtcbiAgICBvYmouaWQgPSAnYmxvY2tfJyArIGk7XG4gICAgcmVzLmJsb2Nrcy5wdXNoKG9iaik7XG4gIH1cbiAgdGhpcyhyZXMpO1xufTtcblxudmFyIF9tYWtlUHVzaCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHRocm93IFwiQXJyYXkgcHVzaCB3aXRoIG11bHRpcGxlIGFyZ3VtZW50cyBub3QgaW1wbGVtZW50ZWRcIjtcbiAgLy8gdW53cmFwIG9ic2VydmFibGUgYmxvY2tzLCBvdGhlcndpc2UgdmlzaWJpbGl0eSAoZGVwZW5kZW5jeSkgaGFuZGxpbmcgYnJlYWtzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBrby5pc09ic2VydmFibGUoYXJndW1lbnRzWzBdKSkge1xuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdLl91bndyYXAgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYXJndW1lbnRzWzBdID0gYXJndW1lbnRzWzBdLl91bndyYXAoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJXQVJOOiBwdXNoaW5nIG9ic2VydmFibGUgd2l0aCBubyBfdW53cmFwIGZ1bmN0aW9uIChUT0RPIHJlbW92ZSBtZSwgZXhwZWN0ZWQgY29uZGl0aW9uKVwiKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFrby5pc09ic2VydmFibGUoYXJndW1lbnRzWzBdKSkge1xuICAgIHZhciBpbnN0cnVtZW50ZWQgPSB0aGlzLl9pbnN0cnVtZW50QmxvY2soYXJndW1lbnRzWzBdKTtcbiAgICByZXR1cm4gdGhpcy5vcmlnUHVzaC5hcHBseSh0aGlzLCBbaW5zdHJ1bWVudGVkXSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMub3JpZ1B1c2guYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxufTtcblxudmFyIF9tYWtlU3BsaWNlID0gZnVuY3Rpb24oKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMykgdGhyb3cgXCJBcnJheSBzcGxpY2Ugd2l0aCBtdWx0aXBsZSBvYmplY3RzIG5vdCBpbXBsZW1lbnRlZFwiO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYga28uaXNPYnNlcnZhYmxlKGFyZ3VtZW50c1syXSkpIHtcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1syXS5fdW53cmFwID09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFyZ3VtZW50c1syXSA9IGFyZ3VtZW50c1syXS5fdW53cmFwKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiV0FSTjogc3BsaWNpbmcgb2JzZXJ2YWJsZSB3aXRoIG5vIF91bndyYXAgZnVuY3Rpb24gKFRPRE8gcmVtb3ZlIG1lLCBleHBlY3RlZCBjb25kaXRpb24pXCIpO1xuICAgIH1cbiAgfVxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgIWtvLmlzT2JzZXJ2YWJsZShhcmd1bWVudHNbMl0pKSB7XG4gICAgdmFyIGluc3RydW1lbnRlZCA9IHRoaXMuX2luc3RydW1lbnRCbG9jayhhcmd1bWVudHNbMl0pO1xuICAgIHJldHVybiB0aGlzLm9yaWdTcGxpY2UuYXBwbHkodGhpcywgW2FyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdLCBpbnN0cnVtZW50ZWRdKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5vcmlnU3BsaWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbn07XG5cbi8vIGRlZiwgZGVmcyBhbmQgdGhlbWVzIGFyZSBib3VuZCBpbiBcIl9tb2RlbEluc3RydW1lbnRcIiB3aGlsZSB0aGUgbmV4dCBwYXJhbWV0ZXJzIGFyZSBleHBvc2VkIGJ5IHRoaXMgbW9kdWxlXG52YXIgX2Jsb2NrSW5zdHJ1bWVudEZ1bmN0aW9uID0gZnVuY3Rpb24oZGVmLCBkZWZzLCB0aGVtZXMsIGtub2Nrb3V0LCBzZWxmLCBtb2RlbENvbnRlbnQsIGlzQ29udGVudCwgc2VsZjIpIHtcbiAgLy8gdWdseTogc29tZXRpbWVzIHdlIGhhdmUgdG8gYmluZCBjb250ZW50IGJ1dCBub3Qgc2VsZiwgc28gd2UgcmVwZWF0IHNlbGYgYXQgdGhlIGVuZCBhcyBcInNlbGYyXCJcbiAgaWYgKHR5cGVvZiBzZWxmID09ICd1bmRlZmluZWQnKSBzZWxmID0gc2VsZjI7XG5cbiAgdmFyIGNvbXB1dGVkRnVuY3Rpb25zO1xuICBjb21wdXRlZEZ1bmN0aW9ucyA9IHtcbiAgICAnJzogX21ha2VDb21wdXRlZEZ1bmN0aW9uLmJpbmQoc2VsZiwgZGVmLCBkZWZzLCB0aGVtZXMsIGtub2Nrb3V0LCBtb2RlbENvbnRlbnQsIGlzQ29udGVudClcbiAgfTtcblxuICB2YXIgcmVzID0ga293cmFwLmZyb21KUyhzZWxmLCBjb21wdXRlZEZ1bmN0aW9ucywgdHJ1ZSk7XG4gIHJlcy5fdW53cmFwID0gX3Vud3JhcC5iaW5kKHJlcyk7XG4gIHJldHVybiByZXM7XG59O1xuXG52YXIgX3dyYXAgPSBmdW5jdGlvbihpbnN0cnVtZW50LCB1bndyYXBwZWQpIHtcbiAgdmFyIG5ld0NvbnRlbnQgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGluc3RydW1lbnQoa28sIHVud3JhcHBlZCwgdW5kZWZpbmVkLCB0cnVlKSk7XG4gIHRoaXMobmV3Q29udGVudCk7XG59O1xuXG52YXIgX3Vud3JhcCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ga28udG9KUyh0aGlzKTtcbn07XG5cbnZhciBfbW9kZWxJbnN0cnVtZW50ID0gZnVuY3Rpb24obW9kZWwsIG1vZGVsRGVmLCBkZWZzKSB7XG4gIHZhciBfaW5zdHJ1bWVudCA9IF9ibG9ja0luc3RydW1lbnRGdW5jdGlvbi5iaW5kKHVuZGVmaW5lZCwgbW9kZWxEZWYsIGRlZnMsIGRlZnNbJ3RoZW1lcyddKTtcbiAgdmFyIHJlcyA9IF9pbnN0cnVtZW50KGtvLCBtb2RlbCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgLy8gcmVzLl9pbnN0cnVtZW50ID0gX2luc3RydW1lbnQ7XG4gIHJlcy5fd3JhcCA9IF93cmFwLmJpbmQocmVzLCBfaW5zdHJ1bWVudCk7XG4gIHJlcy5fdW53cmFwID0gX3Vud3JhcC5iaW5kKHJlcyk7XG4gIHJldHVybiByZXM7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9tb2RlbEluc3RydW1lbnQ7IiwidmFyIHRpbnljb2xvciA9IHJlcXVpcmUoJ3Rpbnljb2xvcicpO1xuXG5mdW5jdGlvbiBDb2xvcih0aW55Y29sb3IpIHtcbiAgdGhpcy5nZXRCcmlnaHRuZXNzID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5nZXRCcmlnaHRuZXNzKCk7XG4gIH07XG4gIHRoaXMuaXNMaWdodCA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgcmV0dXJuIHRpbnljb2xvcihjb2xvcikuaXNMaWdodCgpO1xuICB9O1xuICB0aGlzLmlzRGFyayA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgcmV0dXJuIHRpbnljb2xvcihjb2xvcikuaXNEYXJrKCk7XG4gIH07XG4gIHRoaXMuZ2V0THVtaW5hbmNlID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5nZXRMdW1pbmFuY2UoKTtcbiAgfTtcblxuXG4gIHRoaXMubGlnaHRlbiA9IGZ1bmN0aW9uKGNvbG9yLCBhbW91bnQpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5saWdodGVuKGFtb3VudCkudG9IZXhTdHJpbmcoKTtcbiAgfTtcbiAgdGhpcy5icmlnaHRlbiA9IGZ1bmN0aW9uKGNvbG9yLCBhbW91bnQpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5icmlnaHRlbihhbW91bnQpLnRvSGV4U3RyaW5nKCk7XG4gIH07XG4gIHRoaXMuZGFya2VuID0gZnVuY3Rpb24oY29sb3IsIGFtb3VudCkge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLmRhcmtlbihhbW91bnQpLnRvSGV4U3RyaW5nKCk7XG4gIH07XG4gIHRoaXMuZGVzYXR1cmF0ZSA9IGZ1bmN0aW9uKGNvbG9yLCBhbW91bnQpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5kZXNhdHVyYXRlKGFtb3VudCkudG9IZXhTdHJpbmcoKTtcbiAgfTtcbiAgdGhpcy5zYXR1cmF0ZSA9IGZ1bmN0aW9uKGNvbG9yLCBhbW91bnQpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5zYXR1cmF0ZShhbW91bnQpLnRvSGV4U3RyaW5nKCk7XG4gIH07XG4gIHRoaXMuZ3JleXNjYWxlID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5ncmV5c2NhbGUoKS50b0hleFN0cmluZygpO1xuICB9O1xuICB0aGlzLnNwaW4gPSBmdW5jdGlvbihjb2xvciwgYW1vdW50KSB7XG4gICAgcmV0dXJuIHRpbnljb2xvcihjb2xvcikuc3BpbihhbW91bnQpLnRvSGV4U3RyaW5nKCk7XG4gIH07XG4gIHRoaXMuY29tcGxlbWVudCA9IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgcmV0dXJuIHRpbnljb2xvcihjb2xvcikuY29tcGxlbWVudCgpLnRvSGV4U3RyaW5nKCk7XG4gIH07XG5cbiAgdGhpcy5taXggPSB0aW55Y29sb3IubWl4O1xuICB0aGlzLnJlYWRhYmlsaXR5ID0gdGlueWNvbG9yLnJlYWRhYmlsaXR5O1xuICB0aGlzLmlzUmVhZGFibGUgPSB0aW55Y29sb3IuaXNSZWFkYWJsZTtcbiAgdGhpcy5tb3N0UmVhZGFibGUgPSB0aW55Y29sb3IubW9zdFJlYWRhYmxlO1xufVxuXG52YXIgY29sb3JQbHVnaW4gPSBmdW5jdGlvbih2bSkge1xuICBnbG9iYWwuQ29sb3IgPSBuZXcgQ29sb3IodGlueWNvbG9yKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY29sb3JQbHVnaW47IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWwgZ2xvYmFsOiBmYWxzZSAqL1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBpbmxpbmVEb2N1bWVudCA9IHJlcXVpcmUoXCJqdWljZS9saWIvaW5saW5lXCIpKHt9KS5pbmxpbmVEb2N1bWVudDtcblxudmFyIGlubGluZXJQbHVnaW4gPSBmdW5jdGlvbih2bSkge1xuICB2bS5pbmxpbmUgPSBmdW5jdGlvbihkb2MpIHtcbiAgICAvLyB0aW55bWNlIG1heSBoYXZlIGFkZGVkIHN0eWxlIGF0dHJpYnV0ZXMgdG8gZWxlbWVudHMgdGhhdCB3aWxsIGFsc28gaGF2ZSBnbG9iYWwgc3R5bGVzIHRvIGJlIGlubGluZWRcbiAgICAkKCdbc3R5bGVdOm5vdChbcmVwbGFjZWRzdHlsZV0pJywgZG9jKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xuICAgICAgdmFyICRlbCA9ICQoZWwpO1xuICAgICAgJGVsLmF0dHIoJ3JlcGxhY2Vkc3R5bGUnLCAkZWwuYXR0cignc3R5bGUnKSk7XG4gICAgfSk7XG5cbiAgICB2YXIgc3R5bGUgPSBbXTtcbiAgICAkKCdzdHlsZVtkYXRhLWlubGluZT1cInRydWVcIl0nLCBkb2MpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgIHZhciBjb250ZW50ID0gJChlbGVtZW50KS5odG1sKCk7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC88IS0tIGtvICgoPyEtLSkuKSo/IC0tPi9nLCAnJyk7IC8vIHRoaXMgcmVwbGFjZXMgdGhlIGFib3ZlIHdpdGggYSBtb3JlIGZvcm1hbCAoYnV0IHNsb3dlcikgc29sdXRpb25cbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzwhLS0gXFwva28gLS0+L2csICcnKTtcbiAgICAgIHN0eWxlLnB1c2goY29udGVudCk7XG4gICAgICAkKGVsZW1lbnQpLnJlbW92ZUF0dHIoJ2RhdGEtaW5saW5lJyk7XG4gICAgfSk7XG4gICAgdmFyIHN0eWxlVGV4dCA9IHN0eWxlLmpvaW4oXCJcXG5cIik7XG4gICAgdmFyICRjb250ZXh0ID0gZnVuY3Rpb24oc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgICAgIGlmICh0eXBlb2YgY29udGV4dCA9PSAndW5kZWZpbmVkJykgY29udGV4dCA9IGRvYztcbiAgICAgIHJldHVybiAkKHNlbGVjdG9yLCBjb250ZXh0KTtcbiAgICB9O1xuICAgICRjb250ZXh0LnJvb3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkKCc6cm9vdCcsIGRvYyk7XG4gICAgfTtcbiAgICBpbmxpbmVEb2N1bWVudCgkY29udGV4dCwgc3R5bGVUZXh0LCB7IHN0eWxlQXR0cmlidXRlTmFtZTogJ3JlcGxhY2Vkc3R5bGUnIH0pO1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbmxpbmVyUGx1Z2luOyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbnZhciBsc0xvYWRlciA9IGZ1bmN0aW9uKGhhc2hfa2V5LCBlbWFpbFByb2Nlc3NvckJhY2tlbmQpIHtcbiAgdmFyIG1kU3RyID0gZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibWV0YWRhdGEtXCIgKyBoYXNoX2tleSk7XG4gIGlmIChtZFN0ciAhPT0gbnVsbCkge1xuICAgIHZhciBtb2RlbDtcbiAgICB2YXIgdGQgPSBnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0ZW1wbGF0ZS1cIiArIGhhc2hfa2V5KTtcbiAgICBpZiAodGQgIT09IG51bGwpIG1vZGVsID0gSlNPTi5wYXJzZSh0ZCk7XG4gICAgdmFyIG1kID0gSlNPTi5wYXJzZShtZFN0cik7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGFkYXRhOiBtZCxcbiAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgIGV4dGVuc2lvbjogbHNDb21tYW5kUGx1Z2luRmFjdG9yeShtZCwgZW1haWxQcm9jZXNzb3JCYWNrZW5kKVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgXCJDYW5ub3QgZmluZCBzdG9yZWQgZGF0YSBmb3IgXCIraGFzaF9rZXk7XG4gIH1cbn07XG5cbnZhciBsc0NvbW1hbmRQbHVnaW5GYWN0b3J5ID0gZnVuY3Rpb24obWQsIGVtYWlsUHJvY2Vzc29yQmFja2VuZCkge1xuICB2YXIgY29tbWFuZHNQbHVnaW4gPSBmdW5jdGlvbihtZGtleSwgbWRuYW1lLCB2aWV3TW9kZWwpIHtcblxuICAgIC8vIGNvbnNvbGUubG9nKFwibG9hZGluZyBmcm9tIG1ldGFkYXRhXCIsIG1kLCBtb2RlbCk7XG4gICAgdmFyIHNhdmVDbWQgPSB7XG4gICAgICBuYW1lOiAnU2F2ZScsIC8vIGwxMG4gaGFwcGVucyBpbiB0aGUgdGVtcGxhdGVcbiAgICAgIGVuYWJsZWQ6IGtvLm9ic2VydmFibGUodHJ1ZSlcbiAgICB9O1xuICAgIHNhdmVDbWQuZXhlY3V0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2F2ZUNtZC5lbmFibGVkKGZhbHNlKTtcbiAgICAgIHZpZXdNb2RlbC5tZXRhZGF0YS5jaGFuZ2VkID0gRGF0ZS5ub3coKTtcbiAgICAgIGlmICh0eXBlb2Ygdmlld01vZGVsLm1ldGFkYXRhLmtleSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gZmluZCBrZXQgaW4gbWV0YWRhdGEgb2JqZWN0Li4uXCIsIHZpZXdNb2RlbC5tZXRhZGF0YSk7XG4gICAgICAgIHZpZXdNb2RlbC5tZXRhZGF0YS5rZXkgPSBtZGtleTtcbiAgICAgIH1cbiAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm1ldGFkYXRhLVwiICsgbWRrZXksIHZpZXdNb2RlbC5leHBvcnRNZXRhZGF0YSgpKTtcbiAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRlbXBsYXRlLVwiICsgbWRrZXksIHZpZXdNb2RlbC5leHBvcnRKU09OKCkpO1xuICAgICAgc2F2ZUNtZC5lbmFibGVkKHRydWUpO1xuICAgIH07XG4gICAgdmFyIHRlc3RDbWQgPSB7XG4gICAgICBuYW1lOiAnVGVzdCcsIC8vIGwxMG4gaGFwcGVucyBpbiB0aGUgdGVtcGxhdGVcbiAgICAgIGVuYWJsZWQ6IGtvLm9ic2VydmFibGUodHJ1ZSlcbiAgICB9O1xuICAgIHZhciBkb3dubG9hZENtZCA9IHtcbiAgICAgIG5hbWU6ICdEb3dubG9hZCcsIC8vIGwxMG4gaGFwcGVucyBpbiB0aGUgdGVtcGxhdGVcbiAgICAgIGVuYWJsZWQ6IGtvLm9ic2VydmFibGUodHJ1ZSlcbiAgICB9O1xuICAgIHRlc3RDbWQuZXhlY3V0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGVzdENtZC5lbmFibGVkKGZhbHNlKTtcbiAgICAgIHZhciBlbWFpbCA9IGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRlc3RlbWFpbFwiKTtcbiAgICAgIGlmIChlbWFpbCA9PT0gbnVsbCB8fCBlbWFpbCA9PSAnbnVsbCcpIGVtYWlsID0gdmlld01vZGVsLnQoJ0luc2VydCBoZXJlIHRoZSByZWNpcGllbnQgZW1haWwgYWRkcmVzcycpO1xuICAgICAgZW1haWwgPSBnbG9iYWwucHJvbXB0KHZpZXdNb2RlbC50KFwiVGVzdCBlbWFpbCBhZGRyZXNzXCIpLCBlbWFpbCk7XG4gICAgICBpZiAoZW1haWwubWF0Y2goL0AvKSkge1xuICAgICAgICBnbG9iYWwubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0ZXN0ZW1haWxcIiwgZW1haWwpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRPRE8gdGVzdGluZy4uLlwiLCBlbWFpbCk7XG4gICAgICAgIHZhciBwb3N0VXJsID0gZW1haWxQcm9jZXNzb3JCYWNrZW5kID8gZW1haWxQcm9jZXNzb3JCYWNrZW5kIDogJy9kbC8nO1xuICAgICAgICB2YXIgcG9zdCA9ICQucG9zdChwb3N0VXJsLCB7XG4gICAgICAgICAgYWN0aW9uOiAnZW1haWwnLFxuICAgICAgICAgIHJjcHQ6IGVtYWlsLFxuICAgICAgICAgIHN1YmplY3Q6IFwiW3Rlc3RdIFwiICsgbWRrZXkgKyBcIiAtIFwiICsgbWRuYW1lLFxuICAgICAgICAgIGh0bWw6IHZpZXdNb2RlbC5leHBvcnRIVE1MKClcbiAgICAgICAgfSwgbnVsbCwgJ2h0bWwnKTtcbiAgICAgICAgcG9zdC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmFpbFwiLCBhcmd1bWVudHMpO1xuICAgICAgICAgIHZpZXdNb2RlbC5ub3RpZmllci5lcnJvcih2aWV3TW9kZWwudCgnVW5leHBlY3RlZCBlcnJvciB0YWxraW5nIHRvIHNlcnZlcjogY29udGFjdCB1cyEnKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBwb3N0LnN1Y2Nlc3MoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJzdWNjZXNzXCIsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgdmlld01vZGVsLm5vdGlmaWVyLnN1Y2Nlc3Modmlld01vZGVsLnQoXCJUZXN0IGVtYWlsIHNlbnQuLi5cIikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcG9zdC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGVzdENtZC5lbmFibGVkKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdsb2JhbC5hbGVydCh2aWV3TW9kZWwudCgnSW52YWxpZCBlbWFpbCBhZGRyZXNzJykpO1xuICAgICAgICB0ZXN0Q21kLmVuYWJsZWQodHJ1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBkb3dubG9hZENtZC5leGVjdXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICBkb3dubG9hZENtZC5lbmFibGVkKGZhbHNlKTtcbiAgICAgIHZpZXdNb2RlbC5ub3RpZmllci5pbmZvKHZpZXdNb2RlbC50KFwiRG93bmxvYWRpbmcuLi5cIikpO1xuICAgICAgdmlld01vZGVsLmV4cG9ydEhUTUx0b1RleHRhcmVhKCcjZG93bmxvYWRIdG1sVGV4dGFyZWEnKTtcbiAgICAgIHZhciBwb3N0VXJsID0gZW1haWxQcm9jZXNzb3JCYWNrZW5kID8gZW1haWxQcm9jZXNzb3JCYWNrZW5kIDogJy9kbC8nO1xuICAgICAgZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZEZvcm0nKS5zZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIiwgcG9zdFVybCk7XG4gICAgICBnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkRm9ybScpLnN1Ym1pdCgpO1xuICAgICAgZG93bmxvYWRDbWQuZW5hYmxlZCh0cnVlKTtcbiAgICB9O1xuXG4gICAgdmlld01vZGVsLnNhdmUgPSBzYXZlQ21kO1xuICAgIHZpZXdNb2RlbC50ZXN0ID0gdGVzdENtZDtcbiAgICB2aWV3TW9kZWwuZG93bmxvYWQgPSBkb3dubG9hZENtZDtcbiAgfS5iaW5kKHVuZGVmaW5lZCwgbWQua2V5LCBtZC5uYW1lKTtcblxuICByZXR1cm4gY29tbWFuZHNQbHVnaW47XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGxzTG9hZGVyOyIsIlwidXNlIHN0cmljdFwiO1xuXG5yZXF1aXJlKFwia25vY2tvdXQtc29ydGFibGVcIik7XG5cbnJlcXVpcmUoXCIuL2JpbmRpbmdzL2pxdWVyeXVpLXNwaW5uZXIuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9qcXVlcnl1aS10YWJzLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvY29sb3JwaWNrZXIuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9ibG9ja3MuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9jc3N0ZXh0LmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvYmluZC1pZnJhbWUuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9kcm9wcGFibGUuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9maWxldXBsb2FkLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvdmlydHVhbHMuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy93eXNpd3lncy5qc1wiKTtcbnJlcXVpcmUoXCIuL2JpbmRpbmdzL3Njcm9sbGZpeC5qc1wiKTtcbnJlcXVpcmUoXCIuL2JpbmRpbmdzL2lmLXN1YnMuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9leHRzb3J0YWJsZXMuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9ldmVudGFibGUuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy90b29sdGlwcy5qc1wiKTtcbnJlcXVpcmUoXCIuL2JpbmRpbmdzL2V4dGVuZGVyLXBhZ2luYXRpb24uanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy92YWxpZGF0ZWQtdmFsdWUuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9zY3JvbGxpbnRvdmlldy5qc1wiKTsiLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbCBnbG9iYWw6IGZhbHNlICovXG5cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBrb2pxdWkgPSByZXF1aXJlKFwia25vY2tvdXQtanF1ZXJ5dWlcIik7IC8vIGp1c3QgZm9yIHRoZSB3aWRnZXQgcGx1Z2luc1xudmFyIHRlbXBsYXRlQ29udmVydGVyID0gcmVxdWlyZShcIi4vY29udmVydGVyL21haW4uanNcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xudmFyIGluaXRpYWxpemVWaWV3bW9kZWwgPSByZXF1aXJlKFwiLi92aWV3bW9kZWwuanNcIik7XG52YXIgdGVtcGxhdGVTeXN0ZW0gPSByZXF1aXJlKCcuL2JpbmRpbmdzL2Nob29zZS10ZW1wbGF0ZS5qcycpO1xuXG4vLyBjYWxsIGEgZ2l2ZW4gbWV0aG9kIG9uIGV2ZXJ5IHBsdWdpbiBpbXBsZW1lbnRpbmcgaXQuXG4vLyBzdXBwb3J0cyBhIFwicmV2ZXJzZVwiIHBhcmFtZXRlciB0byBjYWxsIHRoZSBtZXRob2RzIGZyb20gdGhlIGxhc3Qgb25lIHRvIHRoZSBmaXJzdCBvbmUuXG52YXIgcGx1Z2luc0NhbGwgPSBmdW5jdGlvbihwbHVnaW5zLCBtZXRob2ROYW1lLCBhcmdzLCByZXZlcnNlKSB7XG4gIHZhciBzdGFydCwgZW5kLCBkaWZmLCByZXMsIHJlc3VsdHM7XG4gIHJlc3VsdHMgPSBbXTtcbiAgaWYgKHR5cGVvZiByZXZlcnNlICE9PSAndW5kZWZpbmVkJyAmJiByZXZlcnNlKSB7XG4gICAgc3RhcnQgPSBwbHVnaW5zLmxlbmd0aCAtIDE7XG4gICAgZW5kID0gMDtcbiAgICBkaWZmID0gLTE7XG4gIH0gZWxzZSB7XG4gICAgc3RhcnQgPSAwO1xuICAgIGVuZCA9IHBsdWdpbnMubGVuZ3RoIC0gMTtcbiAgICBkaWZmID0gMTtcbiAgfVxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgIT0gZW5kICsgZGlmZjsgaSArPSBkaWZmKSB7XG4gICAgaWYgKHR5cGVvZiBwbHVnaW5zW2ldW21ldGhvZE5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmVzID0gcGx1Z2luc1tpXVttZXRob2ROYW1lXS5hcHBseShwbHVnaW5zW2ldLCBhcmdzKTtcbiAgICAgIGlmICh0eXBlb2YgcmVzICE9PSAndW5kZWZpbmVkJykgcmVzdWx0cy5wdXNoKHJlcyk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gd29ya2Fyb3VuZCBmb3Iga25vY2tvdXQtanF1ZXJ5dWkncyBidXR0b25zZXQvYnV0dG9uIGRpc3Bvc2FsOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2d2YXMva25vY2tvdXQtanF1ZXJ5dWkvaXNzdWVzLzI1XG52YXIgb3JpZ0Rpc3Bvc2VDYWxsYmFjayA9IGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2s7XG5rby51dGlscy5kb21Ob2RlRGlzcG9zYWwuYWRkRGlzcG9zZUNhbGxiYWNrID0gZnVuY3Rpb24obm9kZSwgY2FsbGJhY2spIHtcbiAgdmFyIG5ld0NhbGxiYWNrID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHRyeSB7XG4gICAgICBjYWxsYmFjayhub2RlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImNvdWdodCBkaXNwb3NlIGNhbGxiYWNrIGV4Y2VwdGlvblwiLCBlKTtcbiAgICB9XG4gIH07XG4gIG9yaWdEaXNwb3NlQ2FsbGJhY2sobm9kZSwgbmV3Q2FsbGJhY2spO1xufTtcblxudmFyIGJpbmRpbmdQbHVnaW5NYWtlciA9IGZ1bmN0aW9uKHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIpIHtcbiAgcmV0dXJuIHtcbiAgICB2aWV3TW9kZWw6IGZ1bmN0aW9uKHZpZXdNb2RlbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGVyZm9ybWFuY2VBd2FyZUNhbGxlcignYXBwbHlCaW5kaW5ncycsIGtvLmFwcGx5QmluZGluZ3MuYmluZCh1bmRlZmluZWQsIHZpZXdNb2RlbCkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVyciwgZXJyLnN0YWNrKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyKCd1bmFwcGx5QmluZGluZ3MnLCBrby5jbGVhbk5vZGUuYmluZCh0aGlzLCBnbG9iYWwuZG9jdW1lbnQuYm9keSkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVyciwgZXJyLnN0YWNrKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbnZhciB0ZW1wbGF0ZUNyZWF0b3IgPSBmdW5jdGlvbih0ZW1wbGF0ZVBsdWdpbiwgaHRtbE9yRWxlbWVudCwgb3B0aW9uYWxOYW1lLCB0ZW1wbGF0ZU1vZGUpIHtcbiAgdmFyIHRtcE5hbWUgPSBvcHRpb25hbE5hbWU7XG4gIGlmICh0eXBlb2Ygb3B0aW9uYWxOYW1lICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0ZW1wbGF0ZU1vZGUgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGh0bWxPckVsZW1lbnQgIT0gJ29iamVjdCcgfHwgaHRtbE9yRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT0gJ3JlcGxhY2VkaHRtbCcpIHRtcE5hbWUgKz0gJy0nICsgdGVtcGxhdGVNb2RlO1xuICB9XG5cbiAgd2hpbGUgKHR5cGVvZiB0bXBOYW1lID09ICd1bmRlZmluZWQnIHx8IHRtcE5hbWUgPT09IG51bGwgfHwgdGVtcGxhdGVQbHVnaW4uZXhpc3RzKHRtcE5hbWUpKSB7XG4gICAgdG1wTmFtZSA9ICdhbm9ueW1vdXMtJyArIE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApICsgMSk7XG4gIH1cblxuICBpZiAodHlwZW9mIGh0bWxPckVsZW1lbnQgPT0gJ29iamVjdCcgJiYgaHRtbE9yRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ3JlcGxhY2VkaHRtbCcpIHtcbiAgICB2YXIgJGVsID0gJChodG1sT3JFbGVtZW50KTtcbiAgICB2YXIgJGhlYWQgPSAkKCdyZXBsYWNlZGhlYWQnLCAkZWwpO1xuICAgIHZhciAkYm9keSA9ICQoJ3JlcGxhY2VkYm9keScsICRlbCk7XG4gICAgdGVtcGxhdGVQbHVnaW4uYWRkZXIodG1wTmFtZSArICctaGVhZCcsICRoZWFkLmh0bWwoKSB8fCAnJyk7XG4gICAgdGVtcGxhdGVQbHVnaW4uYWRkZXIodG1wTmFtZSArICctc2hvdycsICRib2R5Lmh0bWwoKSB8fCAnJyk7XG4gICAgdGVtcGxhdGVQbHVnaW4uYWRkZXIodG1wTmFtZSArICctcHJldmlldycsICRlbC5odG1sKCkpO1xuICAgIHRlbXBsYXRlUGx1Z2luLmFkZGVyKHRtcE5hbWUgKyAnLXd5c2l3eWcnLCAkZWwuaHRtbCgpKTtcblxuICAgIC8vICRoZWFkLmF0dHIoJ2RhdGEtYmluZCcsICdibG9jazogY29udGVudCcpO1xuICAgICRoZWFkLmNoaWxkcmVuKCkuZGV0YWNoKCk7XG4gICAgJGhlYWQuaHRtbChcIjwhLS0ga28gYmxvY2s6IGNvbnRlbnQgLS0+PCEtLSAva28gLS0+XCIpO1xuICAgICRoZWFkLmJlZm9yZSgnPCEtLSBrbyB3aXRoUHJvcGVydGllczogeyB0ZW1wbGF0ZU1vZGU6IFxcJ2hlYWRcXCcgfSAtLT4nKTtcbiAgICAkaGVhZC5hZnRlcignPCEtLSAva28gLS0+Jyk7XG4gICAgJGJvZHkuaHRtbChcIjwhLS0ga28gYmxvY2s6IGNvbnRlbnQgLS0+PCEtLSAva28gLS0+XCIpO1xuXG4gICAgdGVtcGxhdGVQbHVnaW4uYWRkZXIodG1wTmFtZSArICctaWZyYW1lJywgJGVsWzBdLm91dGVySFRNTCk7XG5cbiAgfSBlbHNlIGlmICh0eXBlb2YgaHRtbE9yRWxlbWVudCA9PSAnb2JqZWN0Jykge1xuICAgIHRlbXBsYXRlUGx1Z2luLmFkZGVyKHRtcE5hbWUsIGh0bWxPckVsZW1lbnQub3V0ZXJIVE1MKTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wbGF0ZVBsdWdpbi5hZGRlcih0bXBOYW1lLCBodG1sT3JFbGVtZW50KTtcbiAgfVxuXG4gIHJldHVybiB0bXBOYW1lO1xufTtcblxuLy8gQWRhcHRlciB0byB0cmFuc2Zvcm0gXCJ2aWV3TW9kZWwgcGx1Z2luc1wiIGludG8gbW9yZSBnZW5lcmljIHBsdWdpbnMuXG5mdW5jdGlvbiBfdmlld01vZGVsUGx1Z2luSW5zdGFuY2UocGx1Z2luRnVuY3Rpb24pIHtcbiAgdmFyIGluc3RhbmNlO1xuICByZXR1cm4ge1xuICAgIHZpZXdNb2RlbDogZnVuY3Rpb24odmlld01vZGVsKSB7XG4gICAgICBpbnN0YW5jZSA9IHBsdWdpbkZ1bmN0aW9uKHZpZXdNb2RlbCk7XG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0eXBlb2YgaW5zdGFuY2UgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbnN0YW5jZS5pbml0ICE9PSAndW5kZWZpbmVkJykgaW5zdGFuY2UuaW5pdCgpO1xuICAgIH0sXG4gICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodHlwZW9mIGluc3RhbmNlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW5zdGFuY2UuZGlzcG9zZSAhPT0gJ3VuZGVmaW5lZCcpIGluc3RhbmNlLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBfdGVtcGxhdGVVcmxDb252ZXJ0ZXIgPSBmdW5jdGlvbihiYXNlUGF0aCwgdXJsKSB7XG4gIGlmICghdXJsLm1hdGNoKC9eW15cXC9dKjovKSAmJiAhdXJsLm1hdGNoKC9eXFwvLykgJiYgIXVybC5tYXRjaCgvXlxcWy8pICYmICF1cmwubWF0Y2goL14jPyQvKSkge1xuICAgIC8vIFRPRE8gdGhpcyBjb3VsZCBiZSBzbWFydGVyIGpvaW5pbmcgdGhlIHVybHMuLi5cbiAgICByZXR1cm4gYmFzZVBhdGggKyB1cmw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbnZhciB0ZW1wbGF0ZUxvYWRlciA9IGZ1bmN0aW9uKHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIsIHRlbXBsYXRlRmlsZU5hbWUsIHRlbXBsYXRlTWV0YWRhdGEsIGpzb3Jqc29uLCBleHRlbnNpb25zLCBnYWxsZXJ5VXJsKSB7XG4gIHZhciB0ZW1wbGF0ZUZpbGUgPSB0eXBlb2YgdGVtcGxhdGVGaWxlTmFtZSA9PSAnc3RyaW5nJyA/IHRlbXBsYXRlRmlsZU5hbWUgOiB0ZW1wbGF0ZU1ldGFkYXRhLnRlbXBsYXRlO1xuICB2YXIgdGVtcGxhdGVQYXRoID0gXCIuL1wiO1xuICB2YXIgcCA9IHRlbXBsYXRlRmlsZS5sYXN0SW5kZXhPZignLycpO1xuICBpZiAocCAhPSAtMSkge1xuICAgIHRlbXBsYXRlUGF0aCA9IHRlbXBsYXRlRmlsZS5zdWJzdHIoMCwgcCArIDEpO1xuICB9XG5cbiAgdmFyIHRlbXBsYXRlVXJsQ29udmVydGVyID0gX3RlbXBsYXRlVXJsQ29udmVydGVyLmJpbmQodW5kZWZpbmVkLCB0ZW1wbGF0ZVBhdGgpO1xuXG4gIHZhciBtZXRhZGF0YTtcbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZU1ldGFkYXRhID09ICd1bmRlZmluZWQnKSB7XG4gICAgbWV0YWRhdGEgPSB7XG4gICAgICB0ZW1wbGF0ZTogdGVtcGxhdGVGaWxlLFxuICAgICAgLy8gVE9ETyBsMTBuP1xuICAgICAgbmFtZTogJ05vIG5hbWUnLFxuICAgICAgY3JlYXRlZDogRGF0ZS5ub3coKVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgbWV0YWRhdGEgPSB0ZW1wbGF0ZU1ldGFkYXRhO1xuICB9XG5cbiAgJC5nZXQodGVtcGxhdGVGaWxlLCBmdW5jdGlvbih0ZW1wbGF0ZWNvZGUpIHtcbiAgICB2YXIgcmVzID0gdGVtcGxhdGVDb21waWxlcihwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgXCJ0ZW1wbGF0ZVwiLCB0ZW1wbGF0ZWNvZGUsIGpzb3Jqc29uLCBtZXRhZGF0YSwgZXh0ZW5zaW9ucywgZ2FsbGVyeVVybCk7XG4gICAgcmVzLmluaXQoKTtcbiAgfSk7XG59O1xuXG52YXIgdGVtcGxhdGVDb21waWxlciA9IGZ1bmN0aW9uKHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIsIHRlbXBsYXRlVXJsQ29udmVydGVyLCB0ZW1wbGF0ZU5hbWUsIHRlbXBsYXRlY29kZSwganNvcmpzb24sIG1ldGFkYXRhLCBleHRlbnNpb25zLCBnYWxsZXJ5VXJsKSB7XG4gIC8vIHdlIHN0cmlwIGNvbnRlbnQgYmVmb3JlIDxodG1sPiB0YWcgYW5kIGFmdGVyIDwvaHRtbD4gYmVjYXVzZSBqcXVlcnkgZG9lc24ndCBwYXJzZSBpdC5cbiAgLy8gd2UnbGwga2VlcCBpdCBcInJhd1wiIGFuZCB1c2UgaXQgaW4gdGhlIHByZXZpZXcvb3V0cHV0IG1ldGhvZHMuXG4gIHZhciByZXMgPSB0ZW1wbGF0ZWNvZGUubWF0Y2goL14oW1xcU1xcc10qKShbPF1odG1sW14+XSo+W1xcU1xcc10qPFxcL2h0bWw+KShbXFxTXFxzXSopJC9pKTtcbiAgaWYgKHJlcyA9PT0gbnVsbCkgdGhyb3cgXCJVbmFibGUgdG8gZmluZCA8aHRtbD4gb3BlbmluZyBhbmQgY2xvc2luZyB0YWdzIGluIHRoZSB0ZW1wbGF0ZVwiO1xuICB2YXIgcHJlZml4ID0gcmVzWzFdO1xuICAvLyB3ZSBwYXJzZSB0aGUgaHRtbCBjb250ZW50IGFmdGVyIHJlcGxhY2luZyB0aGUgdGFnIG5hbWUgZm9yIGh0bWwvaGVhZC9ib2R5IHNvIHRvIGF2b2lkIGpxdWVyeSBpc3N1ZXMgaW4gcGFyc2luZy5cbiAgdmFyIGJhc2ljU3RydWN0dXJlID0geyAnPGh0bWwnOiAwLCAnPGhlYWQnOiAwLCAnPGJvZHknOiAwLCAnPC9odG1sJzogMCwgJzwvYm9keSc6IDAsICc8L2hlYWQnOiAwIH07XG4gIHZhciBodG1sID0gcmVzWzJdLnJlcGxhY2UoLyg8XFwvPykoaHRtbHxoZWFkfGJvZHkpKFtePl0qPikvZ2ksIGZ1bmN0aW9uKG1hdGNoLCBwMSwgcDIsIHAzKSB7XG4gICAgYmFzaWNTdHJ1Y3R1cmVbKHAxK3AyKS50b0xvd2VyQ2FzZSgpXSArPSAxO1xuICAgIHJldHVybiBwMSArICdyZXBsYWNlZCcgKyBwMiArIHAzO1xuICB9KTtcbiAgZm9yICh2YXIgZWxlIGluIGJhc2ljU3RydWN0dXJlKSBpZiAoYmFzaWNTdHJ1Y3R1cmUuaGFzT3duUHJvcGVydHkoZWxlKSkgaWYgKGJhc2ljU3RydWN0dXJlW2VsZV0gIT0gMSkge1xuICAgIGlmIChiYXNpY1N0cnVjdHVyZVtlbGVdID09PSAwKSB0aHJvdyBcIkVSUk9SOiBtaXNzaW5nIG1hbmRhdG9yeSBlbGVtZW50IFwiK2VsZStcIj5cIjtcbiAgICBpZiAoYmFzaWNTdHJ1Y3R1cmVbZWxlXSA+IDEpIHRocm93IFwiRVJST1I6IG11bHRpcGxlIGVsZW1lbnQgXCIrZWxlK1wiPiBvY2NvdXJlbmNlcyBhcmUgbm90IHN1cHBvcnRlZCAoZm91bmQgXCIrYmFzaWNTdHJ1Y3R1cmVbZWxlXStcIiBvY2NvdXJlbmNlcylcIjtcbiAgfVxuICB2YXIgcG9zdGZpeCA9IHJlc1szXTtcbiAgdmFyIGJsb2NrRGVmcyA9IFtdO1xuICB2YXIgZW5hYmxlVW5kbyA9IHRydWU7XG4gIHZhciBlbmFibGVSZWNvcmRlciA9IHRydWU7XG4gIHZhciBiYXNlVGhyZXNob2xkID0gJyskcm9vdC5jb250ZW50TGlzdGVuZXJzKCknO1xuXG4gIHZhciBwbHVnaW5zID0gW107XG5cbiAgaWYgKHR5cGVvZiBleHRlbnNpb25zICE9PSAndW5kZWZpbmVkJykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXh0ZW5zaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBleHRlbnNpb25zW2ldID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcGx1Z2lucy5wdXNoKF92aWV3TW9kZWxQbHVnaW5JbnN0YW5jZShleHRlbnNpb25zW2ldKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwbHVnaW5zLnB1c2goZXh0ZW5zaW9uc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGNyZWF0ZWRUZW1wbGF0ZXMgPSBbXTtcbiAgdmFyIHRlbXBsYXRlc1BsdWdpbiA9IHtcbiAgICBhZGRlcjogZnVuY3Rpb24oaWQsIGh0bWwpIHtcbiAgICAgIGlmICh0eXBlb2YgaHRtbCAhPT0gJ3N0cmluZycpIHRocm93IFwiVGVtcGxhdGUgc3lzdGVtOiBjYW5ub3QgY3JlYXRlIG5ldyB0ZW1wbGF0ZSBcIiArIGlkO1xuICAgICAgdmFyIHRyYXNoID0gaHRtbC5tYXRjaCgvKGRhdGEpPy1rby1bXiA9Ol0qL2cpO1xuICAgICAgaWYgKHRyYXNoKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUjogZm91bmQgdW5leHBlY3RlZCAta28tIGF0dHJpYnV0ZSBpbiBjb21waWxlZCB0ZW1wbGF0ZVwiLCBpZCwgXCIsIHlvdSBwcm9iYWJseSBtaXNwZWxsZWQgaXQ6XCIsIHRyYXNoKTtcbiAgICAgIH1cbiAgICAgIHRlbXBsYXRlU3lzdGVtLmFkZFRlbXBsYXRlKGlkLCBodG1sKTtcbiAgICAgIGNyZWF0ZWRUZW1wbGF0ZXMucHVzaChpZCk7XG4gICAgfSxcbiAgICBleGlzdHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgZWwgPSB0ZW1wbGF0ZVN5c3RlbS5nZXRUZW1wbGF0ZUNvbnRlbnQoaWQpO1xuICAgICAgaWYgKHR5cGVvZiBlbCAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0cnVlO1xuICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSBjcmVhdGVkVGVtcGxhdGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHRlbXBsYXRlU3lzdGVtLnJlbW92ZVRlbXBsYXRlKGNyZWF0ZWRUZW1wbGF0ZXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBrby5iaW5kaW5nSGFuZGxlcnNbJ2Jsb2NrJ10udGVtcGxhdGVFeGlzdHMgPSB0ZW1wbGF0ZXNQbHVnaW4uZXhpc3RzO1xuXG4gIC8vIHRlbXBsYXRlY3JlYXRvciB0cmFja3MgY3JlYXRlZCB0ZW1wbGF0ZSAodmlhIHRlbXBsYXRlQWRkZXIpIHNvIHRvIGJlIGFibGUgdG8gZGlzcG9zZSB0aGVtIGxhdGVyXG4gIHZhciBteVRlbXBsYXRlQ3JlYXRvciA9IHRlbXBsYXRlQ3JlYXRvci5iaW5kKHVuZGVmaW5lZCwgdGVtcGxhdGVzUGx1Z2luKTtcblxuICAvLyBmaXJzdCBwYXNzOiB3ZSBcImNvbXBpbGVcIiB0aGUgdGVtcGxhdGUgaW50byBhIHRlcm1wbGF0ZURlZiBvYmplY3RcbiAgdmFyIHRlbXBsYXRlRGVmID0gcGVyZm9ybWFuY2VBd2FyZUNhbGxlcigndHJhbnNsYXRlVGVtcGxhdGUnLCB0ZW1wbGF0ZUNvbnZlcnRlci50cmFuc2xhdGVUZW1wbGF0ZS5iaW5kKHVuZGVmaW5lZCwgdGVtcGxhdGVOYW1lLCBodG1sLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgbXlUZW1wbGF0ZUNyZWF0b3IpKTtcblxuICAvLyBzZWNvbmQgcGFzczogZ2l2ZW4gdGhlIHRlbXBsYXRlRGVmIHdlIGNyZWF0ZSBhIGJhc2UgY29udGVudCBtb2RlbCBvYmplY3QgZm9yIHRoaXMgdGVtcGxhdGUuXG4gIHZhciBjb250ZW50ID0gcGVyZm9ybWFuY2VBd2FyZUNhbGxlcignZ2VuZXJhdGVNb2RlbCcsIHRlbXBsYXRlQ29udmVydGVyLndyYXBwZWRSZXN1bHRNb2RlbC5iaW5kKHVuZGVmaW5lZCwgdGVtcGxhdGVEZWYpKTtcblxuICAvLyB0aGlyZCBwYXNzOiB3ZSBjcmVhdGUgXCJzdHlsZS9jb250ZW50IGVkaXRvcnNcIiBmb3IgZXZlcnkgYmxvY2tcbiAgdmFyIHdpZGdldHMgPSB7fTtcbiAgdmFyIHdpZGdldFBsdWdpbnMgPSBwbHVnaW5zQ2FsbChwbHVnaW5zLCAnd2lkZ2V0JywgWyQsIGtvLCBrb2pxdWldKTtcbiAgZm9yICh2YXIgd2kgPSAwOyB3aSA8IHdpZGdldFBsdWdpbnMubGVuZ3RoOyB3aSsrKSB7XG4gICAgd2lkZ2V0c1t3aWRnZXRQbHVnaW5zW3dpXS53aWRnZXRdID0gd2lkZ2V0UGx1Z2luc1t3aV07XG4gIH1cbiAgYmxvY2tEZWZzLnB1c2guYXBwbHkoYmxvY2tEZWZzLCBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyKCdnZW5lcmF0ZUVkaXRvcnMnLCB0ZW1wbGF0ZUNvbnZlcnRlci5nZW5lcmF0ZUVkaXRvcnMuYmluZCh1bmRlZmluZWQsIHRlbXBsYXRlRGVmLCB3aWRnZXRzLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgbXlUZW1wbGF0ZUNyZWF0b3IsIGJhc2VUaHJlc2hvbGQpKSk7XG5cbiAgdmFyIGluY29tcGF0aWJsZVRlbXBsYXRlID0gZmFsc2U7XG4gIGlmICh0eXBlb2YganNvcmpzb24gIT09ICd1bmRlZmluZWQnICYmIGpzb3Jqc29uICE9PSBudWxsKSB7XG4gICAgdmFyIHVud3JhcHBlZDtcbiAgICBpZiAodHlwZW9mIGpzb3Jqc29uID09ICdzdHJpbmcnKSB7XG4gICAgICB1bndyYXBwZWQgPSBrby51dGlscy5wYXJzZUpzb24oanNvcmpzb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bndyYXBwZWQgPSBqc29yanNvbjtcbiAgICB9XG5cbiAgICAvLyB3ZSBydW4gYSBiYXNpYyBjb21wYXRpYmlsaXR5IGNoZWNrIGJldHdlZW4gdGhlIGNvbnRlbnQtbW9kZWwgd2UgZXhwZWN0IGFuZCB0aGUgaW5pdGlhbGl6YXRpb24gbW9kZWxcbiAgICB2YXIgY2hlY2tNb2RlbFJlcyA9IHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIoJ2NoZWNrTW9kZWwnLCB0ZW1wbGF0ZUNvbnZlcnRlci5jaGVja01vZGVsLmJpbmQodW5kZWZpbmVkLCBjb250ZW50Ll91bndyYXAoKSwgYmxvY2tEZWZzLCB1bndyYXBwZWQpKTtcbiAgICAvLyBpZiBjaGVja01vZGVsUmVzIGlzIDEgdGhlbiB0aGUgbW9kZWwgaXMgbm90IGZ1bGx5IGNvbXBhdGlibGUgYnV0IHdlIGZpeGVkIGl0XG4gICAgaWYgKGNoZWNrTW9kZWxSZXMgPT0gMikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlRyeWluZyB0byBjb21waWxlIGFuIGluY29tcGF0aWJsZSB0ZW1wbGF0ZSB2ZXJzaW9uIVwiLCBjb250ZW50Ll91bndyYXAoKSwgYmxvY2tEZWZzLCB1bndyYXBwZWQpO1xuICAgICAgaW5jb21wYXRpYmxlVGVtcGxhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb250ZW50Ll93cmFwKHVud3JhcHBlZCk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gaW5qZWN0IG1vZGVsIGNvbnRlbnQhXCIsIGV4KTtcbiAgICAgIGluY29tcGF0aWJsZVRlbXBsYXRlID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGJ1aWxkIHRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHByZXZpZXcvb3V0cHV0LCBidXQgY29uY2F0ZW5hdGluZyBwcmVmaXgsIHRlbXBsYXRlIGFuZCBjb250ZW50IGFuZCBzdHJpcHBpbmcgdGhlIFwicmVwbGFjZWRcIiBwcmVmaXggYWRkZWQgdG8gXCJwcm9ibGVtYXRpY1wiIHRhZyAoaHRtbC9oZWFkL2JvZHkpXG4gIHZhciBpZnJhbWVUcGwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN5c3RlbS5nZXRUZW1wbGF0ZUNvbnRlbnQodGVtcGxhdGVOYW1lICsgJy1pZnJhbWUnKS5yZXBsYWNlKC8oPFxcLz8pcmVwbGFjZWQoaHRtbHxoZWFkfGJvZHkpKFtePl0qPikvZ2ksIGZ1bmN0aW9uKG1hdGNoLCBwMSwgcDIsIHAzKSB7XG4gICAgcmV0dXJuIHAxICsgcDIgKyBwMztcbiAgfSkgKyBwb3N0Zml4O1xuXG4gIC8vIHN0b3JlIHRoaXMgc28gdG8gcmVzdG9yZSBpdCBvbiBkaXNwb3NhbGVcbiAgdmFyIG9yaWdpRnJhbWVUcGwgPSBrby5iaW5kaW5nSGFuZGxlcnMuYmluZElmcmFtZS50cGw7XG4gIGtvLmJpbmRpbmdIYW5kbGVycy5iaW5kSWZyYW1lLnRwbCA9IGlmcmFtZVRwbDtcbiAgdmFyIGlGcmFtZVBsdWdpbiA9IHtcbiAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIGtvLmJpbmRpbmdIYW5kbGVycy5iaW5kSWZyYW1lLnRwbCA9IG9yaWdpRnJhbWVUcGw7XG4gICAgfVxuICB9O1xuXG4gIHBsdWdpbnMucHVzaChpRnJhbWVQbHVnaW4pO1xuICBwbHVnaW5zLnB1c2godGVtcGxhdGVzUGx1Z2luKTtcblxuICAvLyBpbml0aWFsaXplIHRoZSB2aWV3TW9kZWwgb2JqZWN0IGJhc2VkIG9uIHRoZSBjb250ZW50IG1vZGVsLlxuICB2YXIgdmlld01vZGVsID0gcGVyZm9ybWFuY2VBd2FyZUNhbGxlcignaW5pdGlhbGl6ZVZpZXdtb2RlbCcsIGluaXRpYWxpemVWaWV3bW9kZWwuYmluZCh0aGlzLCBjb250ZW50LCBibG9ja0RlZnMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBnYWxsZXJ5VXJsKSk7XG5cbiAgdmlld01vZGVsLm1ldGFkYXRhID0gbWV0YWRhdGE7XG4gIC8vIGxldCdzIHJ1biBzb21lIHZlcnNpb24gY2hlY2sgb24gdGVtcGxhdGUgYW5kIGVkaXRvciB1c2VkIHRvIGJ1aWxkIHRoZSBtb2RlbCBiZWluZyBsb2FkZWQuXG4gIHZhciBlZGl0dmVyID0gJzAuMTUuMCc7XG4gIGlmICh0eXBlb2Ygdmlld01vZGVsLm1ldGFkYXRhLmVkaXRvcnZlcnNpb24gIT09ICd1bmRlZmluZWQnICYmIHZpZXdNb2RlbC5tZXRhZGF0YS5lZGl0b3J2ZXJzaW9uICE9PSBlZGl0dmVyKSB7XG4gICAgY29uc29sZS53YXJuKFwiVGhlIG1vZGVsIGJlaW5nIGxvYWRlZCBoYXMgYmVlbiBjcmVhdGVkIHdpdGggYW4gb2xkZXIgZWRpdG9yIHZlcnNpb25cIiwgdmlld01vZGVsLm1ldGFkYXRhLmVkaXRvcnZlcnNpb24sIFwidnNcIiwgZWRpdHZlcik7XG4gIH1cbiAgdmlld01vZGVsLm1ldGFkYXRhLmVkaXRvcnZlcnNpb24gPSBlZGl0dmVyO1xuXG4gIGlmICh0eXBlb2YgdGVtcGxhdGVEZWYudmVyc2lvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIHZpZXdNb2RlbC5tZXRhZGF0YS50ZW1wbGF0ZXZlcnNpb24gIT09ICd1bmRlZmluZWQnICYmIHZpZXdNb2RlbC5tZXRhZGF0YS50ZW1wbGF0ZXZlcnNpb24gIT09IHRlbXBsYXRlRGVmLnZlcnNpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgbW9kZWwgYmVpbmcgbG9hZGVkIGhhcyBiZWVuIGNyZWF0ZWQgd2l0aCBhIGRpZmZlcmVudCB0ZW1wbGF0ZSB2ZXJzaW9uXCIsIHRlbXBsYXRlRGVmLnZlcnNpb24sIFwidnNcIiwgdmlld01vZGVsLm1ldGFkYXRhLnRlbXBsYXRldmVyc2lvbik7XG4gICAgfVxuICAgIHZpZXdNb2RlbC5tZXRhZGF0YS50ZW1wbGF0ZXZlcnNpb24gPSB0ZW1wbGF0ZURlZi52ZXJzaW9uO1xuICB9XG5cbiAgdGVtcGxhdGVTeXN0ZW0uaW5pdCgpO1xuXG4gIC8vIGV2ZXJ5dGhpbmcncyByZWFkeSwgc3RhcnQga25vY2tvdXQgYmluZGluZ3MuXG4gIHBsdWdpbnMucHVzaChiaW5kaW5nUGx1Z2luTWFrZXIocGVyZm9ybWFuY2VBd2FyZUNhbGxlcikpO1xuXG4gIHBsdWdpbnNDYWxsKHBsdWdpbnMsICd2aWV3TW9kZWwnLCBbdmlld01vZGVsXSk7XG5cbiAgaWYgKGluY29tcGF0aWJsZVRlbXBsYXRlKSB7XG4gICAgJCgnI2luY29tcGF0aWJsZS10ZW1wbGF0ZScpLmRpYWxvZyh7XG4gICAgICBtb2RhbDogdHJ1ZSxcbiAgICAgIGFwcGVuZFRvOiAnI21vLWJvZHknLFxuICAgICAgYnV0dG9uczoge1xuICAgICAgICBPazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJCh0aGlzKS5kaWFsb2coXCJjbG9zZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb2RlbDogdmlld01vZGVsLFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcGx1Z2luc0NhbGwocGx1Z2lucywgJ2luaXQnLCB1bmRlZmluZWQsIHRydWUpO1xuICAgIH0sXG4gICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICBwbHVnaW5zQ2FsbChwbHVnaW5zLCAnZGlzcG9zZScsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG59O1xuXG5cbnZhciBjaGVja0ZlYXR1cmUgPSBmdW5jdGlvbihmZWF0dXJlLCBmdW5jKSB7XG4gIGlmICghZnVuYygpKSB7XG4gICAgY29uc29sZS53YXJuKFwiTWlzc2luZyBmZWF0dXJlXCIsIGZlYXR1cmUpO1xuICAgIHRocm93IFwiTWlzc2luZyBmZWF0dXJlIFwiICsgZmVhdHVyZTtcbiAgfVxufTtcblxudmFyIGlzQ29tcGF0aWJsZSA9IGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIC8vIHdpbmRvdy5tc01hdGNoTWVkaWEgd291bGQgbWF0Y2ggYWxzbyBJRTlcbiAgICAvLyBJRTkgd291bGRuJ3QgYmUgc28gaGFyZCB0byBzdXBwb3J0LCBidXQgaXQgZG9lc24ndCB3b3J0aCBpdC4gKHByZXZpZXcgaWZyYW1lIGFuZCBhdXRvbWF0aWMgc2Nyb2xsIGFyZSAyIHRoaW5ncyBub3Qgd29ya2luZyBpbiBJRTkpXG4gICAgY2hlY2tGZWF0dXJlKCdtYXRjaE1lZGlhJywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGdsb2JhbC5tYXRjaE1lZGlhICE9ICd1bmRlZmluZWQnO1xuICAgIH0pO1xuICAgIGNoZWNrRmVhdHVyZSgnWE1MSHR0cFJlcXVlc3QgMicsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdYTUxIdHRwUmVxdWVzdCcgaW4gZ2xvYmFsICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBnbG9iYWwuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9KTtcbiAgICBjaGVja0ZlYXR1cmUoJ0VTNSBzdHJpY3QnLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsgLyogXCJ1c2Ugc3RyaWN0XCI7Ki9cbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzID09ICd1bmRlZmluZWQnO1xuICAgICAgfSgpO1xuICAgIH0pO1xuICAgIGNoZWNrRmVhdHVyZSgnQ1NTIGJvcmRlclJhZGl1cycsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBnbG9iYWwuZG9jdW1lbnQuYm9keS5zdHlsZVsnYm9yZGVyUmFkaXVzJ10gIT0gJ3VuZGVmaW5lZCc7XG4gICAgfSk7XG4gICAgY2hlY2tGZWF0dXJlKCdDU1MgYm94U2hhZG93JywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGdsb2JhbC5kb2N1bWVudC5ib2R5LnN0eWxlWydib3hTaGFkb3cnXSAhPSAndW5kZWZpbmVkJztcbiAgICB9KTtcbiAgICBjaGVja0ZlYXR1cmUoJ0NTUyBib3hTaXppbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZ2xvYmFsLmRvY3VtZW50LmJvZHkuc3R5bGVbJ2JveFNpemluZyddICE9ICd1bmRlZmluZWQnO1xuICAgIH0pO1xuICAgIGNoZWNrRmVhdHVyZSgnQ1NTIGJhY2tncm91bmRTaXplJywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGdsb2JhbC5kb2N1bWVudC5ib2R5LnN0eWxlWydiYWNrZ3JvdW5kU2l6ZSddICE9ICd1bmRlZmluZWQnO1xuICAgIH0pO1xuICAgIGNoZWNrRmVhdHVyZSgnQ1NTIGJhY2tncm91bmRPcmlnaW4nLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZ2xvYmFsLmRvY3VtZW50LmJvZHkuc3R5bGVbJ2JhY2tncm91bmRPcmlnaW4nXSAhPSAndW5kZWZpbmVkJztcbiAgICB9KTtcbiAgICBjaGVja0JhZEJyb3dzZXJFeHRlbnNpb25zKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxudmFyIGNoZWNrQmFkQnJvd3NlckV4dGVuc2lvbnMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGlkID0gJ2NoZWNrYmFkYnJvd3NlcnNmcmFtZSc7XG4gIHZhciBvcmlnVHBsID0ga28uYmluZGluZ0hhbmRsZXJzLmJpbmRJZnJhbWUudHBsO1xuICBrby5iaW5kaW5nSGFuZGxlcnMuYmluZElmcmFtZS50cGwgPSBcIjwhRE9DVFlQRSBodG1sPlxcclxcbjxodG1sPlxcclxcbjxoZWFkPjx0aXRsZT5BPC90aXRsZT5cXHJcXG48L2hlYWQ+XFxyXFxuPGJvZHk+PHAgc3R5bGU9XFxcImNvbG9yOiBibHVlXFxcIiBhbGlnbj1cXFwicmlnaHRcXFwiIGRhdGEtYmluZD1cXFwic3R5bGU6IHsgY29sb3I6ICdyZWQnIH1cXFwiPkI8L3A+PGRpdiBkYXRhLWJpbmQ9XFxcInRleHQ6IGNvbnRlbnRcXFwiPjwvZGl2PjwvYm9keT5cXHJcXG48L2h0bWw+XFxyXFxuXCI7XG4gICQoJ2JvZHknKS5hcHBlbmQoJzxpZnJhbWUgaWQ9XCInICsgaWQgKyAnXCIgZGF0YS1iaW5kPVwiYmluZElmcmFtZTogJGRhdGFcIj48L2lmcmFtZT4nKTtcbiAgdmFyIGZyYW1lRWwgPSBnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICBrby5hcHBseUJpbmRpbmdzKHsgY29udGVudDogXCJkdW1teSBjb250ZW50XCIgfSwgZnJhbWVFbCk7XG4gIC8vIE9ic29sZXRlIG1ldGhvZCBkaWRuJ3Qgd29yayBvbiBJRTExIHdoZW4gdXNpbmcgXCJIVE1MNSBkb2N0eXBlXCI6XG4gIC8vIHZhciBkb2NUeXBlID0gbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyhnbG9iYWwuZG9jdW1lbnQuZG9jdHlwZSk7XG4gIHZhciBub2RlID0gZnJhbWVFbC5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3R5cGU7XG4gIHZhciBkb2NUeXBlID0gXCI8IURPQ1RZUEUgXCIgKyBub2RlLm5hbWUgK1xuICAgIChub2RlLnB1YmxpY0lkID8gJyBQVUJMSUMgXCInICsgbm9kZS5wdWJsaWNJZCArICdcIicgOiAnJykgK1xuICAgICghbm9kZS5wdWJsaWNJZCAmJiBub2RlLnN5c3RlbUlkID8gJyBTWVNURU0nIDogJycpICtcbiAgICAobm9kZS5zeXN0ZW1JZCA/ICcgXCInICsgbm9kZS5zeXN0ZW1JZCArICdcIicgOiAnJykgKyAnPic7XG4gIHZhciBjb250ZW50ID0gZG9jVHlwZSArIFwiXFxuXCIgKyBmcmFtZUVsLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAga28uY2xlYW5Ob2RlKGZyYW1lRWwpO1xuICBrby5yZW1vdmVOb2RlKGZyYW1lRWwpO1xuICBrby5iaW5kaW5nSGFuZGxlcnMuYmluZElmcmFtZS50cGwgPSBvcmlnVHBsO1xuXG4gIHZhciBleHBlY3RlZCA9IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWw+PGhlYWQ+PHRpdGxlPkE8L3RpdGxlPlxcbjwvaGVhZD5cXG48Ym9keT48cCBhbGlnbj1cXFwicmlnaHRcXFwiIHN0eWxlPVxcXCJjb2xvcjogcmVkO1xcXCIgZGF0YS1iaW5kPVxcXCJzdHlsZTogeyBjb2xvcjogJ3JlZCcgfVxcXCI+QjwvcD48ZGl2IGRhdGEtYmluZD1cXFwidGV4dDogY29udGVudFxcXCI+ZHVtbXkgY29udGVudDwvZGl2PlxcblxcbjwvYm9keT48L2h0bWw+XCI7XG4gIHZhciBleHBlY3RlZDIgPSBcIjwhRE9DVFlQRSBodG1sPlxcbjxodG1sPjxoZWFkPjx0aXRsZT5BPC90aXRsZT5cXG48L2hlYWQ+XFxuPGJvZHk+PHAgc3R5bGU9XFxcImNvbG9yOiByZWQ7XFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7IGNvbG9yOiAncmVkJyB9XFxcIiBhbGlnbj1cXFwicmlnaHRcXFwiPkI8L3A+PGRpdiBkYXRhLWJpbmQ9XFxcInRleHQ6IGNvbnRlbnRcXFwiPmR1bW15IGNvbnRlbnQ8L2Rpdj5cXG5cXG48L2JvZHk+PC9odG1sPlwiO1xuICB2YXIgZXhwZWN0ZWQzID0gXCI8IURPQ1RZUEUgaHRtbD5cXG48aHRtbD48aGVhZD48dGl0bGU+QTwvdGl0bGU+XFxuPC9oZWFkPlxcbjxib2R5PjxwIHN0eWxlPVxcXCJjb2xvcjogcmVkO1xcXCIgYWxpZ249XFxcInJpZ2h0XFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7IGNvbG9yOiAncmVkJyB9XFxcIj5CPC9wPjxkaXYgZGF0YS1iaW5kPVxcXCJ0ZXh0OiBjb250ZW50XFxcIj5kdW1teSBjb250ZW50PC9kaXY+XFxuXFxuPC9ib2R5PjwvaHRtbD5cIjtcbiAgaWYgKGV4cGVjdGVkICE9PSBjb250ZW50ICYmIGV4cGVjdGVkMiAhPT0gY29udGVudCAmJiBleHBlY3RlZDMgIT09IGNvbnRlbnQpIHtcbiAgICBjb25zb2xlLmxvZyhcIkJhZEJyb3dzZXIuRnJhbWVDb250ZW50Q2hlY2tcIiwgY29udGVudC5sZW5ndGgsIGV4cGVjdGVkLmxlbmd0aCwgZXhwZWN0ZWQyLmxlbmd0aCwgZXhwZWN0ZWQzLmxlbmd0aCwgY29udGVudCA9PSBleHBlY3RlZCwgY29udGVudCA9PSBleHBlY3RlZDIsIGNvbnRlbnQgPT0gZXhwZWN0ZWQzKTtcbiAgICBjb25zb2xlLmxvZyhjb250ZW50KTtcbiAgICB0aHJvdyBcIlVuZXhwZWN0ZWQgZnJhbWUgY29udGVudC4gTWlzYmVoYXZpbmcgYnJvd3NlcjogXCIrY29udGVudC5sZW5ndGgrXCIvXCIrZXhwZWN0ZWQubGVuZ3RoK1wiL1wiK2V4cGVjdGVkMi5sZW5ndGgrXCIvXCIrZXhwZWN0ZWQzLmxlbmd0aDtcbiAgfVxufTtcblxudmFyIGZpeFBhZ2VFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgLy8gVGhpcyBpcyBnbG9iYWwgY29kZSB0byBwcmV2ZW50IGRyYWdnaW5nL2Ryb3BwaW5nIGluIHRoZSBwYWdlIHdoZXJlIHdlIGRvbid0IGRlYWwgd2l0aCBpdC5cbiAgLy8gSUU4IGRvZXNuJ3QgaGF2ZSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBkcmFnJmRyb3AgdG9vLlxuICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAvLyBwcmV2ZW50IGdlbmVyaWMgZmlsZSBkcm9wcHBpbmcgaW4gdGhlIHBhZ2VcbiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coXCJicm93c2VyIGlzIHVzaW5nIGRyYWcgbGlzdGVuZXIgb24gd2luZG93XCIpO1xuICAgICAgZSA9IGUgfHwgZ2xvYmFsLmV2ZW50O1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcImJyb3dzZXIgaXMgdXNpbmcgZHJhZ3N0YXJ0IGxpc3RlbmVyIG9uIHdpbmRvd1wiKTtcbiAgICAgIGUgPSBlIHx8IGdsb2JhbC5ldmVudDtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyB0aGlzIGlzIGNhbGxlZCBvbiBtb3VzZSBtb3ZlIG9uIGV2ZXJ5IHN1cHBvcnRlZCBicm93c2VyLlxuICAgICAgLy8gY29uc29sZS5sb2coXCJicm93c2VyIGlzIHVzaW5nIGRyYWdvdmVyIGxpc3RlbmVyIG9uIHdpbmRvd1wiKTtcbiAgICAgIGUgPSBlIHx8IGdsb2JhbC5ldmVudDtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiYnJvd3NlciBpcyB1c2luZyBkcm9wIGxpc3RlbmVyIG9uIHdpbmRvd1wiKTtcbiAgICAgIGUgPSBlIHx8IGdsb2JhbC5ldmVudDtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgZ2xvYmFsLmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIEkgYnJvd3NlciBzdXBwb3J0YXRpIGVudHJhdG8gdHV0dGkgcXVpIHF1YW5kbyBzaSBkcm9wcGEgcXVhbGNvc2Egc3VsIGJvZHlcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiYnJvd3NlciBpcyB1c2luZyBkcm9wIGxpc3RlbmVyIG9uIGJvZHkgdGFnXCIpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgfVxuICBpZiAoZ2xvYmFsLmRvY3VtZW50Lm9uZHJhZ3N0YXJ0KSB7XG4gICAgZ2xvYmFsLmRvY3VtZW50Lm9uZHJhZ3N0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcImJyb3dzZXIgY2FsbGVkIG9uZHJhZ3N0YXJ0LiByZXR1cm4gZmFsc2UhXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb21waWxlOiB0ZW1wbGF0ZUNvbXBpbGVyLFxuICBsb2FkOiB0ZW1wbGF0ZUxvYWRlcixcbiAgaXNDb21wYXRpYmxlOiBpc0NvbXBhdGlibGUsXG4gIGZpeFBhZ2VFdmVudHM6IGZpeFBhZ2VFdmVudHNcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbnZhciBfY2FsbCA9IGZ1bmN0aW9uKHdoYXRUb0NhbGwpIHtcbiAgcmV0dXJuIHdoYXRUb0NhbGwoKTtcbn07XG5cbnZhciBsb2dzID0gW107XG5cbnZhciBfdGltZWRDYWxsID0gZnVuY3Rpb24obmFtZSwgd2hhdFRvQ2FsbCkge1xuICB2YXIgcmVzO1xuICB2YXIgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgaWYgKHR5cGVvZiBjb25zb2xlID09ICdvYmplY3QnICYmIGNvbnNvbGUudGltZSkgY29uc29sZS50aW1lKG5hbWUpO1xuICByZXMgPSBfY2FsbCh3aGF0VG9DYWxsKTtcbiAgaWYgKHR5cGVvZiBjb25zb2xlID09ICdvYmplY3QnICYmIGNvbnNvbGUudGltZSkgY29uc29sZS50aW1lRW5kKG5hbWUpO1xuICB2YXIgZGlmZiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnQ7XG4gIGlmICh0eXBlb2YgY29uc29sZSA9PSAnb2JqZWN0JyAmJiAhY29uc29sZS50aW1lKSBjb25zb2xlLmxvZyhuYW1lLCBcInRvb2tcIiwgZGlmZiwgXCJtc1wiKTtcbiAgbG9ncy5wdXNoKHtcbiAgICBuYW1lOiBuYW1lLFxuICAgIHRpbWU6IGRpZmZcbiAgfSk7XG4gIC8vIG1heCBsb2dzXG4gIGlmIChsb2dzLmxlbmd0aCA+IDEwMCkgbG9ncy51bnNoaWZ0KCk7XG4gIHJldHVybiByZXM7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdGltZWRDYWxsOiBfdGltZWRDYWxsLFxuICBsb2dzOiBsb2dzXG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgdW5kb01hbmFnZXIgPSByZXF1aXJlKCdrbm9ja291dC11bmRvbWFuYWdlcicpO1xudmFyIHVuZG9zZXJpYWxpemVyID0gcmVxdWlyZShcIi4vdW5kb3NlcmlhbGl6ZXIuanNcIik7XG5cbnZhciBhZGRVbmRvU3RhY2tFeHRlbnNpb25NYWtlciA9IGZ1bmN0aW9uKHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZpZXdNb2RlbCkge1xuXG4gICAgdmlld01vZGVsLmNvbnRlbnRMaXN0ZW5lcnModmlld01vZGVsLmNvbnRlbnRMaXN0ZW5lcnMoKSArIDIpO1xuXG4gICAgLy8gVE9ETyB0aGUgbGFiZWxzIHNob3VsZCBiZSBjb21wdXRlZCBvYnNlcnZhYmxlcyAobmVlZHMgY2hhbmdlcyBpbiB1bmRvbWFuYWdlciBwcm9qZWN0cylcbiAgICB2YXIgdW5kb1JlZG9TdGFjayA9IHVuZG9NYW5hZ2VyKHZpZXdNb2RlbC5jb250ZW50LCB7XG4gICAgICBsZXZlbHM6IDEwMCxcbiAgICAgIHVuZG9MYWJlbDoga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7IHJldHVybiB2aWV3TW9kZWwudChcIlVuZG8gKCNDT1VOVCMpXCIpOyB9KSxcbiAgICAgIHJlZG9MYWJlbDoga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7IHJldHVybiB2aWV3TW9kZWwudChcIlJlZG9cIik7IH0pXG4gICAgfSk7XG4gICAgdmlld01vZGVsLnVuZG8gPSB1bmRvUmVkb1N0YWNrLnVuZG9Db21tYW5kO1xuICAgIHZpZXdNb2RlbC51bmRvLmV4ZWN1dGUgPSBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyLmJpbmQodmlld01vZGVsLCAndW5kbycsIHZpZXdNb2RlbC51bmRvLmV4ZWN1dGUpO1xuICAgIHZpZXdNb2RlbC5yZWRvID0gdW5kb1JlZG9TdGFjay5yZWRvQ29tbWFuZDtcbiAgICB2aWV3TW9kZWwucmVkby5leGVjdXRlID0gcGVyZm9ybWFuY2VBd2FyZUNhbGxlci5iaW5kKHZpZXdNb2RlbCwgJ3JlZG8nLCB2aWV3TW9kZWwucmVkby5leGVjdXRlKTtcbiAgICB2aWV3TW9kZWwudW5kb1Jlc2V0ID0gcGVyZm9ybWFuY2VBd2FyZUNhbGxlci5iaW5kKHZpZXdNb2RlbCwgJ3VuZG9SZXNldCcsIHVuZG9SZWRvU3RhY2sucmVzZXQpO1xuICAgIHZpZXdNb2RlbC5zZXRVbmRvTW9kZU1lcmdlID0gdW5kb1JlZG9TdGFjay5zZXRNb2RlTWVyZ2U7XG4gICAgdmlld01vZGVsLnNldFVuZG9Nb2RlT25jZSA9IHVuZG9SZWRvU3RhY2suc2V0TW9kZU9uY2U7XG4gICAgdW5kb1JlZG9TdGFjay5zZXRNb2RlSWdub3JlKCk7XG4gICAgdW5kb1JlZG9TdGFjay5zZXRVbmRvQWN0aW9uTWFrZXIodW5kb3NlcmlhbGl6ZXIubWFrZVVuZG9BY3Rpb24uYmluZCh1bmRlZmluZWQsIHZpZXdNb2RlbC5jb250ZW50KSk7XG4gICAgdW5kb3NlcmlhbGl6ZXIud2F0Y2hFbmFibGVkKHRydWUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdXNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdW5kb1JlZG9TdGFjay5zZXRNb2RlSWdub3JlKCk7XG4gICAgICB9LFxuICAgICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdW5kb1JlZG9TdGFjay5zZXRNb2RlT25jZSgpO1xuICAgICAgfSxcbiAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB1bmRvUmVkb1N0YWNrLnNldE1vZGVPbmNlKCk7XG4gICAgICB9LFxuICAgICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZpZXdNb2RlbC5jb250ZW50TGlzdGVuZXJzKHZpZXdNb2RlbC5jb250ZW50TGlzdGVuZXJzKCkgLSAyKTtcbiAgICAgICAgdW5kb3NlcmlhbGl6ZXIud2F0Y2hFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgdW5kb1JlZG9TdGFjay5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBhZGRVbmRvU3RhY2tFeHRlbnNpb25NYWtlcjsiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG4vLyBUaGlzIG1vZHVsZSBkZWFscyB3aXRoIHNlcmlhbGl6YXRpb24vZGVzZXJpYWxpemF0aW9uIG9mIGEgXCJ0cmVlLXBhdGhcIiByZXByZXNlbnRpbmcgdGhlIHBhdGggdG8gcmVhY2ggdGhlIGdpdmVuIGxlYWYuXG4vLyBJbiBvcmRlciB0byBiZSBjb3JyZWN0bHkgc2VyaWFsaXplZCB3ZSBoYXZlIHRvIG1vdmUgZnJvbSBcInJlZmVyZW5jZVwiIHRvIFwic3RyaW5nXCIgYW5kIHZpY2V2ZXJzYS5cblxudmFyIF9yZWZlcmVuY2UgPSBmdW5jdGlvbihtb2RlbCwgcGF0aCkge1xuICB2YXIgcCA9IDA7XG4gIHZhciBwMSwgcDI7XG4gIHZhciBtID0gbW9kZWw7XG4gIHdoaWxlIChwIDwgcGF0aC5sZW5ndGgpIHtcbiAgICBzd2l0Y2ggKHBhdGguY2hhckF0KHApKSB7XG4gICAgICBjYXNlICcoJzpcbiAgICAgICAgaWYgKHBhdGguY2hhckF0KHAgKyAxKSA9PSAnKScpIHtcbiAgICAgICAgICBtID0gbSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRPRE8gZXJyb3JcbiAgICAgICAgfVxuICAgICAgICBwICs9IDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnWyc6XG4gICAgICAgIHAyID0gcGF0aC5pbmRleE9mKCddJywgcCk7XG4gICAgICAgIG0gPSBtW3BhdGguc3Vic3RyaW5nKHAgKyAxLCBwMildO1xuICAgICAgICBwID0gcDIgKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy4nOlxuICAgICAgICBwMSA9IHBhdGguaW5kZXhPZignKCcsIHApO1xuICAgICAgICBpZiAocDEgPT0gLTEpIHAxID0gcGF0aC5sZW5ndGg7XG4gICAgICAgIHAyID0gcGF0aC5pbmRleE9mKCdbJywgcCk7XG4gICAgICAgIGlmIChwMiA9PSAtMSkgcDIgPSBwYXRoLmxlbmd0aDtcbiAgICAgICAgcDIgPSBNYXRoLm1pbihwMSwgcDIpO1xuICAgICAgICBtID0gbVtwYXRoLnN1YnN0cmluZyhwICsgMSwgcDIpXTtcbiAgICAgICAgcCA9IHAyO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIFRPRE8gZXJyb3JcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG07XG59O1xuXG52YXIgX2dldFBhdGggPSBmdW5jdGlvbihwYXJlbnRzLCBjaGlsZCkge1xuICB2YXIgcGF0aCA9IFwiXCI7XG4gIHZhciBwO1xuICBmb3IgKHZhciBrID0gMDsgayA8PSBwYXJlbnRzLmxlbmd0aDsgaysrKSB7XG4gICAgcCA9IGsgPCBwYXJlbnRzLmxlbmd0aCA/IHBhcmVudHNba10gOiBjaGlsZDtcbiAgICBpZiAoa28uaXNPYnNlcnZhYmxlKHApKSBwYXRoICs9ICcoKSc7XG4gICAgaWYgKHR5cGVvZiBwLl9maWVsZE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBwYXRoICs9IFwiLlwiICsgcC5fZmllbGROYW1lO1xuICAgIH0gZWxzZSBpZiAoayA+IDAgJiYgdHlwZW9mIHBhcmVudHNbayAtIDFdLnBvcCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgcGFyZW50QXJyYXkgPSBrby5pc09ic2VydmFibGUocGFyZW50c1trIC0gMV0pID8ga28udXRpbHMucGVla09ic2VydmFibGUocGFyZW50c1trIC0gMV0pIDogcGFyZW50c1trIC0gMV07XG4gICAgICB2YXIgcG9zID0ga28udXRpbHMuYXJyYXlJbmRleE9mKHBhcmVudEFycmF5LCBwKTtcbiAgICAgIGlmIChwb3MgIT0gLTEpIHtcbiAgICAgICAgcGF0aCArPSBcIltcIiArIHBvcyArIFwiXVwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTk9URSB0aGlzIGhhcHBlbiwgc29tZXRpbWVzIHdoZW4gVGlueU1DRSBzZW5kcyB1cGRhdGVzIGZvciBvYmplY3RzIGFscmVhZHkgcmVtb3ZlZC5cbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuZXhwZWN0ZWQgb2JqZWN0IG5vdCBmb3VuZCBpbiBwYXJlbnQgYXJyYXlcIiwgcGFyZW50QXJyYXksIHAsIGssIHBhcmVudHMubGVuZ3RoLCBrby50b0pTKHBhcmVudEFycmF5KSwga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShwKSk7XG4gICAgICAgIHRocm93IFwiVW5leHBlY3RlZCBvYmplY3Qgbm90IGZvdW5kIGluIHBhcmVudCBhcnJheVwiO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiVW5leHBlY3RlZCBwYXJlbnQgd2l0aCBubyBfZmllbGROYW1lIGFuZCBubyBwYXJlbnQgYXJyYXlcIiwgaywgcGFyZW50cyk7XG4gICAgICB0aHJvdyBcIlVuZXhwZWN0ZWQgcGFyZW50IHdpdGggbm8gX2ZpZWxkTmFtZSBhbmQgbm8gcGFyZW50IGFycmF5XCI7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXRoO1xufTtcblxudmFyIG1ha2VEZXJlZmVyZW5jZWRVbmRvQWN0aW9uID0gZnVuY3Rpb24odW5kb0Z1bmMsIG1vZGVsLCBwYXRoLCB2YWx1ZSwgaXRlbSkge1xuICB2YXIgY2hpbGQgPSBfcmVmZXJlbmNlKG1vZGVsLCBwYXRoKTtcbiAgdW5kb0Z1bmMoY2hpbGQsIHZhbHVlLCBpdGVtKTtcbn07XG5cbnZhciBsaXN0ZW5lcjtcblxudmFyIF9zZXRMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmZ1bmMpIHtcbiAgbGlzdGVuZXIgPSBsaXN0ZW5mdW5jO1xufTtcblxuLyogZGVyZWZlcmVuY2luZyBwYXRoIGFuZCBjaGFuZ2luZyB2YWx1ZSB3aXRoIFwidG9KU1wiICovXG52YXIgbWFrZVVuZG9BY3Rpb25EZXJlZmVyZW5jZWQgPSBmdW5jdGlvbihtb2RlbCwgdW5kb0Z1bmMsIHBhcmVudHMsIGNoaWxkLCBvbGRWYWwsIGl0ZW0pIHtcbiAgdHJ5IHtcbiAgICB2YXIgcGF0aCA9IF9nZXRQYXRoKHBhcmVudHMsIGNoaWxkKTtcblxuICAgIC8vIFRyYW5zZm9ybSBhY3Rpb25zIGluIHNpbXBsZSBKUyBvYmplY3RzLlxuICAgIGlmICh0eXBlb2Ygb2xkVmFsID09PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2xkVmFsID09PSAnZnVuY3Rpb24nKSBvbGRWYWwgPSBrby50b0pTKG9sZFZhbCk7XG4gICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJyAmJiAodHlwZW9mIGl0ZW0udmFsdWUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBpdGVtLnZhbHVlID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgdmFyIG5ld0l0ZW0gPSBrby50b0pTKGl0ZW0pO1xuICAgICAgaXRlbSA9IG5ld0l0ZW07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpc3RlbmVyKHBhdGgsIGNoaWxkLCBvbGRWYWwsIGl0ZW0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlVuZG9zZXJpYWxpemVyIGlnbm9yaW5nIGV4Y2VwdGlvbiBpbiBsaXN0ZW5lciBjYWxsYmFja1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWFrZURlcmVmZXJlbmNlZFVuZG9BY3Rpb24uYmluZCh1bmRlZmluZWQsIHVuZG9GdW5jLCBtb2RlbCwgcGF0aCwgb2xkVmFsLCBpdGVtKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIE5PVEUgdGhpcyBoYXBwZW5zLCBmcm9tIHRpbWUgdG8gdGltZSwgd2hlbiBUaW55TUNFIHNlbmRzIHVwZGF0ZXMgZm9yIGRlbGV0ZWQgY29udGVudC5cbiAgICBjb25zb2xlLmVycm9yKFwiRXhjZXB0aW9uIHByb2Nlc3NpbmcgdW5kb1wiLCBlLCBwYXJlbnRzLCBjaGlsZCwgaXRlbSk7XG4gIH1cbn07XG5cbnZhciB3YXRjaEVuYWJsZWQ7XG52YXIgX3dhdGNoRW5hYmxlZCA9IGZ1bmN0aW9uKG5ld1ZhbCkge1xuICBpZiAodHlwZW9mIG5ld1ZhbCAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgd2F0Y2hFbmFibGVkID0gbmV3VmFsO1xuICBlbHNlXG4gICAgcmV0dXJuIHdhdGNoRW5hYmxlZDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBkZXJlZmVyZW5jZTogX2dldFBhdGgsXG4gIHJlZmVyZW5jZTogX3JlZmVyZW5jZSxcbiAgbWFrZVVuZG9BY3Rpb246IG1ha2VVbmRvQWN0aW9uRGVyZWZlcmVuY2VkLFxuICBzZXRMaXN0ZW5lcjogX3NldExpc3RlbmVyLFxuICB3YXRjaEVuYWJsZWQ6IF93YXRjaEVuYWJsZWRcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWwgZ2xvYmFsOiBmYWxzZSAqL1xuXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xudmFyIHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIgPSByZXF1aXJlKFwiLi90aW1lZC1jYWxsLmpzXCIpLnRpbWVkQ2FsbDtcblxudmFyIHRvYXN0ciA9IHJlcXVpcmUoXCJ0b2FzdHJcIik7XG50b2FzdHIub3B0aW9ucyA9IHtcbiAgXCJjbG9zZUJ1dHRvblwiOiBmYWxzZSxcbiAgXCJkZWJ1Z1wiOiBmYWxzZSxcbiAgXCJwb3NpdGlvbkNsYXNzXCI6IFwidG9hc3QtYm90dG9tLWZ1bGwtd2lkdGhcIixcbiAgXCJ0YXJnZXRcIjogXCIjbW8tYm9keVwiLFxuICBcIm9uY2xpY2tcIjogbnVsbCxcbiAgXCJzaG93RHVyYXRpb25cIjogXCIzMDBcIixcbiAgXCJoaWRlRHVyYXRpb25cIjogXCIxMDAwXCIsXG4gIFwidGltZU91dFwiOiBcIjUwMDBcIixcbiAgXCJleHRlbmRlZFRpbWVPdXRcIjogXCIxMDAwXCIsXG4gIFwic2hvd0Vhc2luZ1wiOiBcInN3aW5nXCIsXG4gIFwiaGlkZUVhc2luZ1wiOiBcImxpbmVhclwiLFxuICBcInNob3dNZXRob2RcIjogXCJmYWRlSW5cIixcbiAgXCJoaWRlTWV0aG9kXCI6IFwiZmFkZU91dFwiXG59O1xuXG4vKiBOT1RFOiB0cmFuc2xhdGlvbnMgbW92ZWQgdG8gXCJwbHVnaW5cIlxudmFyIHN0cmluZ3MgPSB7XG4gICdzaG93IHByZXZpZXcgYW5kIHNlbmQgdGVzdCc6ICdWaXN1YWxpenphIHVuYSBhbnRlcHJpbWEgZSBmYWkgdW4gaW52aW8gZGkgdGVzdCcsXG4gIC8vIFN0cmluZ3MgZm9yIGFwcC5qc1xuICAnRG93bmxvYWQnOiAnRG93bmxvYWQnLFxuICAnVGVzdCc6ICdUZXN0JyxcbiAgJ1NhdmUnOiAnU2FsdmEnLFxuICAnRG93bmxvYWRpbmcuLi4nOiBcIkRvd25sb2FkIGluIGNvcnNvLi4uXCIsXG4gICdJbnZhbGlkIGVtYWlsIGFkZHJlc3MnOiBcIkluZGlyaXp6byBlbWFpbCBpbnZhbGlkb1wiLFxuICBcIlRlc3QgZW1haWwgc2VudC4uLlwiOiBcIkVtYWlsIGRpIHRlc3QgaW52aWF0YS4uLlwiLFxuICAnVW5leHBlY3RlZCBlcnJvciB0YWxraW5nIHRvIHNlcnZlcjogY29udGFjdCB1cyEnOiAnRXJyb3JlIGRpIGNvbXVuaWNhemlvbmUgY29uIGlsIHNlcnZlcjogY29udGF0dGFjaSEnLFxuICAnSW5zZXJ0IGhlcmUgdGhlIHJlY2lwaWVudCBlbWFpbCBhZGRyZXNzJzogJ0luc2VyaXNjaSBxdWkgbFxcJ2luZGlyaXp6byBlbWFpbCBhIGN1aSBzcGVkaXJlJyxcbiAgXCJUZXN0IGVtYWlsIGFkZHJlc3NcIjogXCJJbmRpcml6em8gZW1haWwgZGkgdGVzdFwiLFxuICAvLyB2aWV3TW9kZWxcbiAgJ0Jsb2NrIHJlbW92ZWQ6IHVzZSB1bmRvIGJ1dHRvbiB0byByZXN0b3JlIGl0Li4uJzogJ0Jsb2NjbyBlbGltaW5hdG86IHVzYSBpbCBwdWxzYW50ZSBhbm51bGxhIHBlciByZWN1cGVyYXJsby4uLicsXG4gICdOZXcgYmxvY2sgYWRkZWQgYWZ0ZXIgdGhlIHNlbGVjdGVkIG9uZSAoX19wb3NfXyknOiAnTnVvdm8gYmxvY2NvIGFnZ2l1bnRvIHNvdHRvIGEgcXVlbGxvIHNlbGV6aW9uYXRvIChfX3Bvc19fKScsXG4gICdOZXcgYmxvY2sgYWRkZWQgYXQgdGhlIG1vZGVsIGJvdHRvbSAoX19wb3NfXyknOiAnTnVvdm8gYmxvY2NvIGFnZ2l1bnRvIGluIGZvbmRvIGFsIG1vZGVsbG8gKF9fcG9zX18pJyxcbiAgLy8gdW5kb21haW4uanNcbiAgJ1VuZG8gKCNDT1VOVCMpJzogJ0FubnVsbGEgKCNDT1VOVCMpJyxcbiAgJ1JlZG8nOiAnUmlwcmlzdGluYScsXG4gIC8vIGVkaXRvci5qc1xuICAnU2VsZWN0ZWQgZWxlbWVudCBoYXMgbm8gZWRpdGFibGUgcHJvcGVydGllcyc6ICdMXFwnZWxlbWVudG8gc2VsZXppb25hdG8gbm9uIGZvcm5pc2NlIHByb3ByaWV0w6AgZWRpdGFiaWxpJyxcbiAgJ1RoaXMgc3R5bGUgaXMgc3BlY2lmaWMgZm9yIHRoaXMgYmxvY2s6IGNsaWNrIGhlcmUgdG8gcmVtb3ZlIHRoZSBjdXN0b20gc3R5bGUgYW5kIHJldmVydCB0byB0aGUgdGhlbWUgdmFsdWUnOiAnUXVlc3RvIHN0aWxlIMOoIHNwZWNpZmljbyBkaSBxdWVzdG8gYmxvY2NvOiBjbGljY2EgcXVpIHBlciBhbm51bGxhcmUgbG8gc3RpbGUgcGVyc29uYWxpenphdG8nLFxuICAnU3dpdGNoIGJldHdlZW4gZ2xvYmFsIGFuZCBibG9jayBsZXZlbCBzdHlsZXMgZWRpdGluZyc6ICdQZXJtZXR0ZSBkaSBzcGVjaWZpY2FyZSBzZSBzaSB2dW9sZSBtb2RpZmljYXJlIGxvIHN0aWxlIGdlbmVyYWxlIG8gc29sYW1lbnRlIHF1ZWxsbyBzcGVjaWZpY28gZGVsIGJsb2NjbyBzZWxlemlvbmF0bycsXG4gIC8vIG1haW4udHBsLmh0bWxcbiAgJ1VuZG8gbGFzdCBvcGVyYXRpb24nOiAnQW5udWxsYSB1bHRpbWEgb3BlcmF6aW9uZScsXG4gICdSZWRvIGxhc3Qgb3BlcmF0aW9uJzogJ1JpcGV0aSBvcGVyYXppb25lIGFubnVsbGF0YScsXG4gICdTaG93IGltYWdlIGdhbGxlcnknOiAnVmlzdWFsaXp6YSBnYWxsZXJpYSBpbW1hZ2luaScsXG4gICdHYWxsZXJ5JzogJ0dhbGxlcmlhJyxcbiAgJ1ByZXZpZXcnOiAnQW50ZXByaW1hJyxcbiAgJ1Nob3cgbGl2ZSBwcmV2aWV3JzogJ01vc3RyYSBhbnRlcHJpbWEgbGl2ZScsXG4gICdMYXJnZSBzY3JlZW4nOiAnU2NoZXJtbyBncmFuZGUnLFxuICAnVGFibGV0JzogJ1RhYmxldCcsXG4gICdTbWFydHBob25lJzogJ1NtYXJ0cGhvbmUnLFxuICAnU2hvdyBwcmV2aWV3IGFuZCBzZW5kIHRlc3QnOiAnVmlzdWFsaXp6YSB1bmEgYW50ZXByaW1hIGUgZmFpIHVuIGludmlvIGRpIHRlc3QnLFxuICAnRG93bmxvYWQgdGVtcGxhdGUnOiAnU2NhcmljYSBpbCB0ZW1wbGF0ZScsXG4gICdTYXZlIHRlbXBsYXRlJzogJ1NhbHZhIGlsIHRlbXBsYXRlJyxcbiAgJ1NhdmVkIG1vZGVsIGlzIG9ic29sZXRlJzogJ01vZGVsbG8gc2FsdmF0byBvYnNvbGV0bycsXG4gICc8cD5UaGUgc2F2ZWQgbW9kZWwgaGFzIGJlZW4gY3JlYXRlZCB3aXRoIGEgcHJldmlvdXMsIG5vbiBjb21wbGV0ZWx5IGNvbXBhdGlibGUgdmVyc2lvbiwgb2YgdGhlIHRlbXBsYXRlPC9wPjxwPlNvbWUgY29udGVudCBvciBzdHlsZSBpbiB0aGUgbW9kZWwgPGI+Q09VTEQgQkUgTE9TVDwvYj4gaWYgeW91IHdpbGwgPGI+c2F2ZTwvYj48L3A+PHA+Q29udGFjdCB1cyBmb3IgbW9yZSBpbmZvcm1hdGlvbnMhPC9wPic6ICc8cD5JbCBtb2RlbGxvIHNhbHZhdG8gw6ggc3RhdG8gY3JlYXRvIGNvbiB1bmEgdmVyc2lvbmUgcHJlY2VkZW50ZSBkZWwgdGVtcGxhdGUgbm9uIGRlbCB0dXR0byBjb21wYXRpYmlsZTwvcD48cD5BbGN1bmkgY29udGVudXRpIG8gc3RpbGkgZGVsIG1vZGVsbG8gPGI+UE9UUkVCQkVSTyBFU1NFUkUgUEVSU0k8L2I+IHNlIHByb2NlZGVyYWkgZSBkZWNpZGVyYWkgZGkgPGI+c2FsdmFyZTwvYj48L3A+PHA+Q29udGF0dGFjaSBzZSBoYWkgZGVpIGR1YmJpITwvcD4nLFxuXG4gIC8vIFRPRE8gdGhpcyBjYW5ub3QgYmUgZG9uZSBpbiBrbm9ja291dCBhcyB3aXRoIHVuY29tcGF0aWJsZSBicm93c2VycyB3ZSBkb24ndCBpbml0aWFsaXplXG4gIC8vICdVc3VwcG9ydGVkIGJyb3dzZXInOiAnQnJvd3NlciBub24gY29tcGF0aWJpbGUnLFxuICAvLyAnPHA+WW91ciBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQuPC9wPjxwPlVzZSBhIGRpZmZlcmVudCBicm93c2VyIG9yIHRyeSB1cGRhcmluZyB5b3VyIGJyb3dzZXIuPC9wPjxwPlN1cHBvcnRlZCBicm93c2VyczogPHVsPjxsaT5JbnRlcm5ldCBFeHBsb3JlciAmZ3Q7PSAxMDwvbGk+PGxpPkdvb2dsZSBDaHJvbWUgJmd0Oz0gMzA8L2xpPjxsaT5BcHBsZSBTYWZhcmkgJmd0Oz0gNTwvbGk+PGxpPk1vemlsbGEgRmlyZWZpeCAmZ3Q7PSAyMDwvbGk+PC91bD48L3A+JzogJzxwPklsIHR1byBicm93c2VyIG5vbiDDqCBzdXBwb3J0YXRvLjwvcD48cD5BY2NlZGkgY29uIHVuIGJyb3dzZXIgZGlmZmVyZW50ZSBvIHByb3ZhIGFkIGFnZ2lvcm5hcmUgaWwgdHVvIGJyb3dzZXIuPC9wPjxwPkJyb3dzZXIgc3VwcG9ydGF0aTogPHVsPjxsaT5JbnRlcm5ldCBFeHBsb3JlciAmZ3Q7PSAxMDwvbGk+PGxpPkdvb2dsZSBDaHJvbWUgJmd0Oz0gMzA8L2xpPjxsaT5BcHBsZSBTYWZhcmkgJmd0Oz0gNTwvbGk+PGxpPk1vemlsbGEgRmlyZWZpeCAmZ3Q7PSAyMDwvbGk+PC91bD48L3A+JyxcblxuICAvLyB0b29sYm94XG4gICdCbG9ja3MnOiAnQmxvY2NoaScsXG4gICdCbG9ja3MgcmVhZHkgdG8gYmUgYWRkZWQgdG8gdGhlIHRlbXBsYXRlJzogJ0VsZW5jbyBjb250ZW51dGkgYWdnaXVuZ2liaWxpIGFsIG1lc3NhZ2dpbycsXG4gICdDb250ZW50JzogJ0NvbnRlbnV0bycsXG4gICdFZGl0IGNvbnRlbnQgb3B0aW9ucyc6ICdNb2RpZmljYSBvcHppb25pIGNvbnRlbnV0aScsXG4gICdTdHlsZSc6ICdTdGlsZScsXG4gICdFZGl0IHN0eWxlIG9wdGlvbnMnOiAnTW9kaWZpY2Egb3B6aW9uaSBncmFmaWNoZScsXG4gICdCbG9jayBfX25hbWVfXyc6ICdCbG9jY28gX19uYW1lX18nLFxuICAnQ2xpY2sgb3IgZHJhZyB0byBhZGQgdGhpcyBibG9jayB0byB0aGUgdGVtcGxhdGUnOiAnQ2xpY2NhIG8gdHJhc2NpbmEgcGVyIGFnZ2l1bmdlcmUgYWwgbWVzc2FnZ2lvJyxcbiAgJ0FkZCc6ICdBZ2dpdW5naScsXG4gICdCeSBjbGlja2luZyBvbiBtZXNzYWdlIHBhcnRzIHlvdSB3aWxsIHNlbGVjdCBhIGJsb2NrIGFuZCBjb250ZW50IG9wdGlvbnMsIGlmIGFueSwgd2lsbCBzaG93IGhlcmUnOiAnQ2xpY2NhbmRvIHN1IGFsY3VuZSBwYXJ0aSBkZWwgbWVzc2FnZ2lvIHNlbGV6aW9uZXJhaSB1biBibG9jY28gZSBsZSBvcHppb25pIGNvbnRlbnV0aXN0aWNoZSwgc2UgZGlzcG9uaWJpbGksIGNvbXBhcmlyYW5ubyBxdWknLFxuICAnQnkgY2xpY2tpbmcgb24gbWVzc2FnZSBwYXJ0cyB5b3Ugd2lsbCBzZWxlY3QgYSBibG9jayBhbmQgc3R5bGUgb3B0aW9ucywgaWYgYXZhaWxhYmxlLCB3aWxsIHNob3cgaGVyZSc6ICdDbGljY2FuZG8gc3UgYWxjdW5lIHBhcnRpIGRlbCBtZXNzYWdnaW8gc2VsZXppb25lcmFpIHVuIGJsb2NjbyBlIGxlIG9wemlvbmkgZGkgc3RpbGUsIHNlIGRpc3BvbmliaWxpLCBjb21wYXJpcmFubm8gcXVpJyxcbiAgJ0NsaWNrIG9yIGRyYWcgZmlsZXMgaGVyZSc6ICdDbGljY2EgbyB0cmFzY2luYSBpIGZpbGUgcXVpIScsXG4gICdObyBpbWFnZXMgdXBsb2FkZWQsIHlldCc6ICdOb24gaGFpIGFuY29yYSBjYXJpY2F0byBpbW1hZ2luaScsXG4gICdTaG93IGltYWdlcyBmcm9tIHRoZSBnYWxsZXJ5JzogJ1Zpc3VhbGl6emEgbGUgaW1tYWdpbmkgY2FyaWNhdGUgbmVsbGEgdHVhIGFyZWEnLFxuICAnTG9hZGluZy4uLic6ICdDYXJpY2FtZW50by4uLicsXG4gICdMb2FkIGdhbGxlcnknOiAnQ2FyaWNhIGdhbGxlcmlhJyxcbiAgJ0xvYWRpbmcgZ2FsbGVyeS4uLic6ICdDYXJpY2FtZW50byBpbiBjb3Jzby4uLicsXG4gICdUaGUgZ2FsbGVyeSBpcyBlbXB0eSc6ICdOZXNzdW5hIGltbWFnaW5lIG5lbGxhIGdhbGxlcmlhJyxcbiAgLy8gaW1nLXd5c2l3eWcudG1scFxuICAnUmVtb3ZlIGltYWdlJzogJ1JpbXVvdmkgaW1tYWdpbmUnLFxuICAnT3BlbiB0aGUgaW1hZ2UgZWRpdGluZyB0b29sJzogJ0F2dmlhIHN0cnVtZW50byBtb2RpZmljYSBpbW1hZ2luZScsXG4gICdVcGxvYWQgYSBuZXcgaW1hZ2UnOiAnQ2FyaWNhIHVuYSBudW92YSBpbW1hZ2luZScsXG4gICdEcm9wIGFuIGltYWdlIGhlcmUnOiAnVHJhc2NpbmEgdW5hIGltbWFnaW5lIHF1aScsXG4gICdEcm9wIGFuIGltYWdlIGhlcmUgb3IgY2xpY2sgdGhlIHVwbG9hZCBidXR0b24nOiAnVHJhc2NpbmEgdW5hIGltbWFnaW5lIHF1aSBvIGNsaWNjYSBzdWwgcHVsc2FudGUgZGkgY2FyaWNhbWVudG8nLFxuICAvLyBnYWxsZXJ5XG4gICdEcmFnIHRoaXMgaW1hZ2UgYW5kIGRyb3AgaXQgb24gYW55IHRlbXBsYXRlIGltYWdlIHBsYWNlaG9sZGVyJzogJ1RyYXNjaW5hIHF1ZXN0YSBpbW1hZ2luZSBzdWxsYSBwb3NpemlvbmUgaW4gY3VpIHZ1b2kgaW5zZXJpcmxhJyxcbiAgJ0dhbGxlcnk6JzogJ0dhbGxlcmlhOicsXG4gICdTZXNzaW9uIGltYWdlcyc6ICdJbW1hZ2luaSBkaSBzZXNzaW9uZScsXG4gICdSZWNlbnRzJzogJ1JlY2VudGknLFxuICAnUmVtb3RlIGdhbGxlcnknOiAnR2FsbGVyaWEgcmVtb3RhJyxcblxuICAvLyBjdXN0b21zdHlsZVxuICAnQ3VzdG9taXplZCBibG9jay48dWw+PGxpPkluIHRoaXMgc3RhdHVzIGNoYW5nZXMgdG8gcHJvcGVydGllcyB3aWxsIGJlIHNwZWNpZmljIHRvIHRoZSBjdXJyZW50IGJsb2NrIChpbnN0ZWFkIG9mIGJlaW5nIGdsb2JhbCB0byBhbGwgYmxvY2tzIGluIHRoZSBzYW1lIHNlY3Rpb24pPC9saT48bGk+QSA8c3BhbiBjbGFzcz1cImN1c3RvbVN0eWxlZFwiPjxzcGFuPlwic21hbGwgY3ViZVwiIDwvc3Bhbj48L3NwYW4+IGljb24gYmVzaWRlIHRoZSBwcm9wZXJ0eSB3aWxsIG1hcmsgdGhlIGN1c3RvbWl6YXRpb24uIEJ5IGNsaWNraW5nIHRoaXMgaWNvbiB0aGUgcHJvcGVydHkgdmFsdWUgd2lsbCBiZSByZXZlcnRlZCB0byB0aGUgdmFsdWUgZGVmaW5lZCBmb3IgdGhlIHNlY3Rpb24uPC9saT48L3VsPic6ICdCbG9jY28gcGVyc29uYWxpenphdG8uPHVsPjxsaT5JbiBxdWVzdGEgbW9kYWxpdMOgIHNlIGNhbWJpIHVuYSBwcm9wcmlldMOgIHZlcnLDoCBtb2RpZmljYXRhIHNvbGFtZW50ZSBwZXIgcXVlc3RvIHNwZWNpZmljbyBibG9jY28gKGludmVjZSBjaGUgcGVyIHR1dHRpIGkgYmxvY2NoaSBkZWxsYSBzdGVzc2Egc2V6aW9uZSkuPC9saT48bGk+UGVyIHNlZ25hbGFyZSBsYSBwZXJzb25hbGl6emF6aW9uZSBhcHBhcmlyw6AgbFxcJ2ljb25hIDxzcGFuIGNsYXNzPVwiY3VzdG9tU3R5bGVkXCI+PHNwYW4+IGRlbCBcImN1YmV0dG9cIjwvc3Bhbj48L3NwYW4+IGEgZmlhbmNvIGRlbGxlIHByb3ByaWV0w6AuIENsaWNjYW5kbyBxdWVzdGEgaWNvbmEgdG9ybmVyYWkgYWwgdmFsb3JlIGNvbXVuZS48L2xpPjwvdWw+JyxcbiAgLy8gYmxvY2tzLXd5c2l3eWdcbiAgJ0Ryb3AgaGVyZSBibG9ja3MgZnJvbSB0aGUgXCJCbG9ja3NcIiB0YWInOiAnVHJhc2NpbmEgcXVpIGkgYmxvY2NoaSBkYWxsYSBzY2hlZGEgXFwnQmxvY2NoaVxcJycsXG4gIC8vIGJsb2NrLXd5c2l3eWdcbiAgJ0RyYWcgdGhpcyBoYW5kbGUgdG8gbW92ZSB0aGUgYmxvY2snOiAnVHJhc2NpbmEgcGVyIHNwb3N0YXJlIGlsIGJsb2NjbyBhbHRyb3ZlJyxcbiAgJ01vdmUgdGhpcyBibG9jayB1cHNpZGUnOiAnU3Bvc3RhIGlsIGJsb2NjbyBpbiBzdScsXG4gICdNb3ZlIHRoaXMgYmxvY2sgZG93bnNpZGUnOiAnU3Bvc3RhIGlsIGJsb2NjbyBpbiBnaXUnLFxuICAnRGVsZXRlIGJsb2NrJzogJ0VsaW1pbmEgYmxvY2NvJyxcbiAgJ0R1cGxpY2F0ZSBibG9jayc6ICdEdXBsaWNhIGJsb2NjbycsXG4gICdTd2l0Y2ggYmxvY2sgdmFyaWFudCc6ICdDYW1iaWEgdmFyaWFudGUgYmxvY2NvJyxcbiAgLy8gY29sb3JwaWNrZXJcbiAgJ1RoZW1lIENvbG9ycyxTdGFuZGFyZCBDb2xvcnMsV2ViIENvbG9ycyxUaGVtZSBDb2xvcnMsQmFjayB0byBQYWxldHRlLEhpc3RvcnksTm8gaGlzdG9yeSB5ZXQuJzogJ0NvbG9yaSBUZW1hLENvbG9yaSBTdGFuZGFyZCxDb2xvcmkgV2ViLENvbG9yaSBUZW1hLFRvcm5hIGFsbGEgdGF2b2xvenphLFN0b3JpY28sc3RvcmljbyBjb2xvcmkgdnVvdG8nLFxuXG4gICdEcm9wIGhlcmUnOiAnUmlsYXNjaWEgcXVpJyxcblxufTtcbiovXG5cbmZ1bmN0aW9uIGluaXRpYWxpemVFZGl0b3IoY29udGVudCwgYmxvY2tEZWZzLCB0aHVtYlBhdGhDb252ZXJ0ZXIsIGdhbGxlcnlVcmwpIHtcblxuICB2YXIgdmlld01vZGVsID0ge1xuICAgIGdhbGxlcnlSZWNlbnQ6IGtvLm9ic2VydmFibGVBcnJheShbXSkuZXh0ZW5kKHtcbiAgICAgIHBhZ2luZzogMTZcbiAgICB9KSxcbiAgICBnYWxsZXJ5UmVtb3RlOiBrby5vYnNlcnZhYmxlQXJyYXkoW10pLmV4dGVuZCh7XG4gICAgICBwYWdpbmc6IDE2XG4gICAgfSksXG4gICAgc2VsZWN0ZWRCbG9jazoga28ub2JzZXJ2YWJsZShudWxsKSxcbiAgICBzZWxlY3RlZEl0ZW06IGtvLm9ic2VydmFibGUobnVsbCksXG4gICAgc2VsZWN0ZWRUb29sOiBrby5vYnNlcnZhYmxlKDApLFxuICAgIHNlbGVjdGVkSW1hZ2VUYWI6IGtvLm9ic2VydmFibGUoMCksXG4gICAgZHJhZ2dpbmc6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIGRyYWdnaW5nSW1hZ2U6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIGdhbGxlcnlMb2FkZWQ6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIHNob3dQcmV2aWV3RnJhbWU6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIHByZXZpZXdNb2RlOiBrby5vYnNlcnZhYmxlKCdtb2JpbGUnKSxcbiAgICBzaG93VG9vbGJveDoga28ub2JzZXJ2YWJsZSh0cnVlKSxcbiAgICBzaG93VGhlbWU6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIHNob3dHYWxsZXJ5OiBrby5vYnNlcnZhYmxlKGZhbHNlKSxcbiAgICBkZWJ1Zzoga28ub2JzZXJ2YWJsZShmYWxzZSksXG4gICAgY29udGVudExpc3RlbmVyczoga28ub2JzZXJ2YWJsZSgwKSxcblxuICAgIGxvZ29QYXRoOiAnaW1nL21vc2FpY28zMi5wbmcnLFxuICAgIGxvZ29Vcmw6ICcuJyxcbiAgICBsb2dvQWx0OiAnbW9zYWljbydcbiAgfTtcblxuICAvLyB2aWV3TW9kZWwuY29udGVudCA9IGNvbnRlbnQuX2luc3RydW1lbnQoa28sIGNvbnRlbnQsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gIHZpZXdNb2RlbC5jb250ZW50ID0gY29udGVudDtcbiAgdmlld01vZGVsLmJsb2NrRGVmcyA9IGJsb2NrRGVmcztcblxuICB2aWV3TW9kZWwubm90aWZpZXIgPSB0b2FzdHI7XG5cbiAgLy8gRG9lcyB0b2tlbiBzdWJzdGl0dXRpb24gaW4gaTE4bmV4dCBzdHlsZVxuICB2aWV3TW9kZWwudHQgPSBmdW5jdGlvbihrZXksIHBhcmFtT2JqKSB7XG4gICAgaWYgKHR5cGVvZiBwYXJhbU9iaiAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICBmb3IgKHZhciBwcm9wIGluIHBhcmFtT2JqKVxuICAgICAgICBpZiAocGFyYW1PYmouaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICBrZXkgPSBrZXkucmVwbGFjZShuZXcgUmVnRXhwKCdfXycgKyBwcm9wICsgJ19fJywgJ2cnKSwgcGFyYW1PYmpbcHJvcF0pO1xuICAgICAgICB9XG4gICAgcmV0dXJuIGtleTtcbiAgfTtcblxuICAvLyBTaW1wbHkgbWFwcyB0byB0dDogbGFuZ3VhZ2UgcGx1Z2lucyBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gZGVmaW5lIHRoZWlyIG93biBsYW5ndWFnZVxuICAvLyBoYW5kbGluZy5cbiAgLy8gSWYgdGhpcyBtZXRob2QgaW52b2tlcyBhbiBvYnNlcnZhYmxlIChlLmc6IHZpZXdNb2RlbC5sYW5nKCkpIHRoZW4gdGhlIFVJIGxhbmd1YWdlIHdpbGwgYXV0b21hdGljYWxseVxuICAvLyB1cGRhdGUgd2hlbiB0aGUgXCJsYW5nXCIgb2JzZXJ2YWJsZSBjaGFuZ2VzLlxuICB2aWV3TW9kZWwudCA9IHZpZXdNb2RlbC50dDtcblxuICAvLyBjdXJyZW50bHkgY2FsbGVkIGJ5IGVkaXRvci5odG1sIHRvIHRyYW5zbGF0ZSB0ZW1wbGF0ZS1kZWZpbmVkIGtleXMgKGxhYmVsLCBoZWxwLCBkZXNjcmlwdGlvbnMpXG4gIC8vIHRoZSBlZGl0b3IgYWx3YXlzIHVzZXMgdGhlIFwidGVtcGxhdGVcIiBjYXRlZ29yeSBmb3IgdGhhdCBzdHJpbmdzLlxuICAvLyB5b3UgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGFzIHlvdSBsaWtlIGluIG9yZGVyIHRvIHByb3ZpZGUgdHJhbnNsYXRpb24gb3IgY2hhbmdlIHRoZSBzdHJpbmdzIGluIGFueSB3YXkuXG4gIHZpZXdNb2RlbC51dCA9IGZ1bmN0aW9uKGNhdGVnb3J5LCBrZXkpIHtcbiAgICByZXR1cm4ga2V5O1xuICB9O1xuXG4gIHZpZXdNb2RlbC50ZW1wbGF0ZVBhdGggPSB0aHVtYlBhdGhDb252ZXJ0ZXI7XG5cbiAgdmlld01vZGVsLnJlbW90ZVVybFByb2Nlc3NvciA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHJldHVybiB1cmw7XG4gIH07XG5cbiAgdmlld01vZGVsLnJlbW90ZUZpbGVQcm9jZXNzb3IgPSBmdW5jdGlvbihmaWxlT2JqKSB7XG4gICAgaWYgKHR5cGVvZiBmaWxlT2JqLnVybCAhPT0gJ3VuZGVmaW5lZCcpIGZpbGVPYmoudXJsID0gdmlld01vZGVsLnJlbW90ZVVybFByb2Nlc3NvcihmaWxlT2JqLnVybCk7XG4gICAgaWYgKHR5cGVvZiBmaWxlT2JqLnRodW1ibmFpbFVybCAhPT0gJ3VuZGVmaW5lZCcpIGZpbGVPYmoudGh1bWJuYWlsVXJsID0gdmlld01vZGVsLnJlbW90ZVVybFByb2Nlc3NvcihmaWxlT2JqLnRodW1ibmFpbFVybCk7XG4gICAgLy8gZGVsZXRlVXJsP1xuICAgIHJldHVybiBmaWxlT2JqO1xuICB9O1xuXG4gIC8vIHRvb2xib3gudG1wbC5odG1sXG4gIHZpZXdNb2RlbC5sb2FkR2FsbGVyeSA9IGZ1bmN0aW9uKCkge1xuICAgIHZpZXdNb2RlbC5nYWxsZXJ5TG9hZGVkKCdsb2FkaW5nJyk7XG4gICAgdmFyIHVybCA9IGdhbGxlcnlVcmwgPyBnYWxsZXJ5VXJsIDogJy91cGxvYWQvJztcbiAgICAvLyByZXRyaWV2ZSB0aGUgZnVsbCBsaXN0IG9mIHJlbW90ZSBmaWxlc1xuICAgICQuZ2V0SlNPTih1cmwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5maWxlcy5sZW5ndGg7IGkrKykgZGF0YS5maWxlc1tpXSA9IHZpZXdNb2RlbC5yZW1vdGVGaWxlUHJvY2Vzc29yKGRhdGEuZmlsZXNbaV0pO1xuICAgICAgdmlld01vZGVsLmdhbGxlcnlMb2FkZWQoZGF0YS5maWxlcy5sZW5ndGgpO1xuICAgICAgLy8gVE9ETyBkbyBJIHdhbnQgdGhpcyBjYWxsIHRvIHJldHVybiByZWxhdGl2ZSBwYXRocz8gT3IganVzdCBhYnNvbHV0ZSBwYXRocz9cbiAgICAgIHZpZXdNb2RlbC5nYWxsZXJ5UmVtb3RlKGRhdGEuZmlsZXMucmV2ZXJzZSgpKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgdmlld01vZGVsLmdhbGxlcnlMb2FkZWQoZmFsc2UpO1xuICAgICAgdmlld01vZGVsLm5vdGlmaWVyLmVycm9yKHZpZXdNb2RlbC50KCdVbmV4cGVjdGVkIGVycm9yIGxpc3RpbmcgZmlsZXMnKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gaW1nLXd5c2l3eWcudG1wbC5odG1sXG4gIHZpZXdNb2RlbC5maWxlVG9JbWFnZSA9IGZ1bmN0aW9uKG9iaiwgZXZlbnQsIHVpKSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJmaWxlVG9JbWFnZVwiLCBvYmopO1xuICAgIHJldHVybiBvYmoudXJsO1xuICB9O1xuXG4gIC8vIGJsb2NrLXd5c2l3eWcudG1wbC5odG1sXG4gIHZpZXdNb2RlbC5yZW1vdmVCbG9jayA9IGZ1bmN0aW9uKGRhdGEsIHBhcmVudCkge1xuICAgIC8vIGxldCdzIHVuc2VsZWN0IHRoZSBibG9ja1xuICAgIGlmIChrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZpZXdNb2RlbC5zZWxlY3RlZEJsb2NrKSA9PSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGRhdGEpKSB7XG4gICAgICB2aWV3TW9kZWwuc2VsZWN0QmxvY2sobnVsbCwgdHJ1ZSk7XG4gICAgfVxuICAgIHZhciByZXMgPSBwYXJlbnQuYmxvY2tzLnJlbW92ZShkYXRhKTtcbiAgICAvLyBUT0RPIFRoaXMgbWVzc2FnZSBzaG91bGQgYmUgZGlmZmVyZW50IGRlcGVuZGluZyBvbiB1bmRvIHBsdWdpbiBwcmVzZW5jZS5cbiAgICB2aWV3TW9kZWwubm90aWZpZXIuaW5mbyh2aWV3TW9kZWwudCgnQmxvY2sgcmVtb3ZlZDogdXNlIHVuZG8gYnV0dG9uIHRvIHJlc3RvcmUgaXQuLi4nKSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfTtcblxuICAvLyBibG9jay13eXNpd3lnLnRtcGwuaHRtbFxuICB2aWV3TW9kZWwuZHVwbGljYXRlQmxvY2sgPSBmdW5jdGlvbihpbmRleCwgcGFyZW50KSB7XG4gICAgdmFyIGlkeCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoaW5kZXgpO1xuICAgIC8vIERlaW5zdHJ1bWVudC9kZW9ic2VydmUgdGhlIG9iamVjdFxuICAgIHZhciB1bndyYXBwZWQgPSBrby50b0pTKGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUocGFyZW50LmJsb2NrcylbaWR4XSk7XG4gICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGlkIHNvIHRoYXQgYSBuZXcgb25lIHdpbGwgYmUgYXNzaWduZWQgdG8gdGhlIGNsb25lXG4gICAgaWYgKHR5cGVvZiB1bndyYXBwZWQuaWQgIT09ICd1bmRlZmluZWQnKSB1bndyYXBwZWQuaWQgPSAnJztcbiAgICAvLyBpbnNlcnQgdGhlIGNsb25lZCBibG9ja1xuICAgIHBhcmVudC5ibG9ja3Muc3BsaWNlKGlkeCArIDEsIDAsIHVud3JhcHBlZCk7XG4gIH07XG5cbiAgLy8gYmxvY2std3lzaXd5Zy50bXBsLmh0bWxcbiAgdmlld01vZGVsLm1vdmVCbG9jayA9IGZ1bmN0aW9uKGluZGV4LCBwYXJlbnQsIHVwKSB7XG4gICAgdmFyIGlkeCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoaW5kZXgpO1xuICAgIHZhciBwYXJlbnRCbG9ja3MgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHBhcmVudC5ibG9ja3MpO1xuICAgIGlmICgodXAgJiYgaWR4ID4gMCkgfHwgKCF1cCAmJiBpZHggPCBwYXJlbnRCbG9ja3MubGVuZ3RoIC0gMSkpIHtcbiAgICAgIHZhciBkZXN0SW5kZXggPSBpZHggKyAodXAgPyAtMSA6IDEpO1xuICAgICAgdmFyIGRlc3RCbG9jayA9IHBhcmVudEJsb2Nrc1tkZXN0SW5kZXhdO1xuICAgICAgdmlld01vZGVsLnN0YXJ0TXVsdGlwbGUoKTtcbiAgICAgIHBhcmVudC5ibG9ja3Muc3BsaWNlKGRlc3RJbmRleCwgMSk7XG4gICAgICBwYXJlbnQuYmxvY2tzLnNwbGljZShpZHgsIDAsIGRlc3RCbG9jayk7XG4gICAgICB2aWV3TW9kZWwuc3RvcE11bHRpcGxlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIHRlc3QgbWV0aG9kLCBjb21tYW5kIGxpbmUgdXNlIG9ubHlcbiAgdmlld01vZGVsLmxvYWREZWZhdWx0QmxvY2tzID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gY2xvbmluZyB0aGUgd2hvbGUgXCJtYWluQmxvY2tzXCIgb2JqZWN0IHNvIHRoYXQgdW5kb21hbmFnZXIgd2lsbFxuICAgIC8vIHNlZSBpdCBhcyBhIHNpbmdsZSBvcGVyYXRpb24gKG1heWJlIEkgY291bGQgdXNlIFwic3RhcnRNdWx0aXBsZVwiL1wic3RvcE11bHRpcGxlXCIuXG4gICAgdmFyIHJlcyA9IGtvLnRvSlModmlld01vZGVsLmNvbnRlbnQoKS5tYWluQmxvY2tzKTtcbiAgICByZXMuYmxvY2tzID0gW107XG4gICAgdmFyIGlucHV0ID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2aWV3TW9kZWwuYmxvY2tEZWZzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgb2JqID0ga28udG9KUyhpbnB1dFtpXSk7XG4gICAgICAvLyBnZW5lcmF0aW5nIGlkcyBmb3IgYmxvY2tzLCBtYXliZSB0aGlzIHdvdWxkIHdvcmsgYWxzbyBsZWF2aW5nIGl0IGVtcHR5LlxuICAgICAgb2JqLmlkID0gJ2Jsb2NrXycgKyBpO1xuICAgICAgcmVzLmJsb2Nrcy5wdXNoKG9iaik7XG4gICAgfVxuICAgIHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIoJ3NldE1haW5CbG9ja3MnLCB2aWV3TW9kZWwuY29udGVudCgpLm1haW5CbG9ja3MuX3dyYXAuYmluZCh2aWV3TW9kZWwuY29udGVudCgpLm1haW5CbG9ja3MsIHJlcykpO1xuICB9O1xuXG4gIC8vIGdhbGxlcnktaW1hZ2VzLnRtcGwuaHRtbFxuICB2aWV3TW9kZWwuYWRkSW1hZ2UgPSBmdW5jdGlvbihpbWcpIHtcbiAgICB2YXIgc2VsZWN0ZWRJbWcgPSAkKCcjbWFpbi13eXNpd3lnLWFyZWEgLnNlbGVjdGFibGUtaW1nLnNlbGVjdGVkaXRlbScpO1xuICAgIGlmIChzZWxlY3RlZEltZy5sZW5ndGggPT0gMSAmJiB0eXBlb2YgaW1nID09ICdvYmplY3QnICYmIHR5cGVvZiBpbWcudXJsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAga28uY29udGV4dEZvcihzZWxlY3RlZEltZ1swXSkuX3NyYyhpbWcudXJsKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8vIHRvb2xib3gudG1wbC5odG1sXG4gIHZpZXdNb2RlbC5hZGRCbG9jayA9IGZ1bmN0aW9uKG9iaiwgZXZlbnQpIHtcbiAgICAvLyBpZiB0aGVyZSBpcyBhIHNlbGVjdGVkIGJsb2NrIHdlIHRyeSB0byBhZGQgdGhlIGJsb2NrIGp1c3QgYWZ0ZXIgdGhlIHNlbGVjdGVkIG9uZS5cbiAgICB2YXIgc2VsZWN0ZWQgPSB2aWV3TW9kZWwuc2VsZWN0ZWRCbG9jaygpO1xuICAgIC8vIHNlYXJjaCB0aGUgc2VsZWN0ZWQgYmxvY2sgcG9zaXRpb24uXG4gICAgdmFyIGZvdW5kO1xuICAgIGlmIChzZWxlY3RlZCAhPT0gbnVsbCkge1xuICAgICAgLy8gVE9ETyBcIm1haW5CbG9ja3NcIiBpcyBhbiBoYXJkY29kZWQgdGhpbmcuXG4gICAgICBmb3IgKHZhciBpID0gdmlld01vZGVsLmNvbnRlbnQoKS5tYWluQmxvY2tzKCkuYmxvY2tzKCkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKHZpZXdNb2RlbC5jb250ZW50KCkubWFpbkJsb2NrcygpLmJsb2NrcygpW2ldKCkgPT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgICBmb3VuZCA9IGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHBvcztcbiAgICBpZiAodHlwZW9mIGZvdW5kICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcG9zID0gZm91bmQgKyAxO1xuICAgICAgdmlld01vZGVsLmNvbnRlbnQoKS5tYWluQmxvY2tzKCkuYmxvY2tzLnNwbGljZShwb3MsIDAsIG9iaik7XG4gICAgICB2aWV3TW9kZWwubm90aWZpZXIuaW5mbyh2aWV3TW9kZWwudCgnTmV3IGJsb2NrIGFkZGVkIGFmdGVyIHRoZSBzZWxlY3RlZCBvbmUgKF9fcG9zX18pJywge1xuICAgICAgICBwb3M6IHBvc1xuICAgICAgfSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2aWV3TW9kZWwuY29udGVudCgpLm1haW5CbG9ja3MoKS5ibG9ja3MucHVzaChvYmopO1xuICAgICAgcG9zID0gdmlld01vZGVsLmNvbnRlbnQoKS5tYWluQmxvY2tzKCkuYmxvY2tzKCkubGVuZ3RoIC0gMTtcbiAgICAgIHZpZXdNb2RlbC5ub3RpZmllci5pbmZvKHZpZXdNb2RlbC50KCdOZXcgYmxvY2sgYWRkZWQgYXQgdGhlIG1vZGVsIGJvdHRvbSAoX19wb3NfXyknLCB7XG4gICAgICAgIHBvczogcG9zXG4gICAgICB9KSk7XG4gICAgfVxuICAgIC8vIGZpbmQgdGhlIG5ld2x5IGFkZGVkIGJsb2NrIGFuZCBzZWxlY3QgaXQhXG4gICAgdmFyIGFkZGVkID0gdmlld01vZGVsLmNvbnRlbnQoKS5tYWluQmxvY2tzKCkuYmxvY2tzKClbcG9zXSgpO1xuICAgIHZpZXdNb2RlbC5zZWxlY3RCbG9jayhhZGRlZCwgdHJ1ZSk7XG4gICAgLy8gcHJldmVudCBjbGljayBwcm9wYWdhdGlvbiAobG9zaW5nIHVybCBoYXNoIC0gc2VlICM0MylcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gVXNlZCBieSBzdHlsZXNoZWV0LmpzIHRvIGNyZWF0ZSBtdWx0aXBsZSBzdHlsZXNcbiAgdmlld01vZGVsLmZpbmRPYmplY3RzT2ZUeXBlID0gZnVuY3Rpb24oZGF0YSwgdHlwZSkge1xuICAgIHZhciByZXMgPSBbXTtcbiAgICB2YXIgb2JqID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShkYXRhKTtcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iailcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgdmFyIHZhbCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUob2JqW3Byb3BdKTtcbiAgICAgICAgLy8gVE9ETyB0aGlzIGlzIG5vdCB0aGUgcmlnaHQgd2F5IHRvIGRlYWwgd2l0aCBcImJsb2NrIGxpc3RcIiBvYmplY3RzLlxuICAgICAgICBpZiAocHJvcC5tYXRjaCgvQmxvY2tzJC8pKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnRzID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWwuYmxvY2tzKTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoY29udGVudHNbaV0pO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IG51bGwgfHwga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShjLnR5cGUpID09IHR5cGUpIHJlcy5wdXNoKGMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBUT0RPIGludmVzdGlnYXRlIHdoaWNoIGNvbmRpdGlvbiBwcm92aWRlIGEgbnVsbCB2YWx1ZS5cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09ICdvYmplY3QnICYmIHZhbCAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlID09PSBudWxsIHx8IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsLnR5cGUpID09IHR5cGUpIHJlcy5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIC8qXG4gIHZpZXdNb2RlbC5wbGFjZWhvbGRlckhlbHBlciA9ICdzb3J0YWJsZS1wbGFjZWhvbGRlcic7XG4gIGlmIChmYWxzZSkge1xuICAgIHZpZXdNb2RlbC5wbGFjZWhvbGRlckhlbHBlciA9IHtcbiAgICAgIGVsZW1lbnQ6IGZ1bmN0aW9uKGN1cnJlbnRJdGVtKSB7XG4gICAgICAgIHJldHVybiAkKCc8ZGl2IC8+JykucmVtb3ZlQ2xhc3MoJ3VpLWRyYWdnYWJsZScpLmFkZENsYXNzKCdzb3J0YWJsZS1wbGFjZWhvbGRlcicpLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKS5jc3MoJ3dpZHRoJywgJzEwMCUnKS5jc3MoJ2hlaWdodCcsIGN1cnJlbnRJdGVtLmNzcygnaGVpZ2h0JykpLmNzcygnb3BhY2l0eScsICcuOCcpWzBdO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZTogZnVuY3Rpb24oY29udGFpbmVyLCBwKSB7XG4gICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgKi9cblxuICAvLyBBdHRlbXB0IHRvIGluc2VydCB0aGUgYmxvY2sgaW4gdGhlIGRlc3RpbmF0aW9uIGxheW91dCBkdXJpbmcgZHJhZ2dpbmdcbiAgdmlld01vZGVsLnBsYWNlaG9sZGVySGVscGVyID0ge1xuICAgIGVsZW1lbnQ6IGZ1bmN0aW9uKGN1cnJlbnRJdGVtKSB7XG4gICAgICByZXR1cm4gJChjdXJyZW50SXRlbVswXS5vdXRlckhUTUwpLnJlbW92ZUNsYXNzKCd1aS1kcmFnZ2FibGUnKS5hZGRDbGFzcygnc29ydGFibGUtcGxhY2Vob2xkZXInKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKS5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJykuY3NzKCd3aWR0aCcsICcxMDAlJykuY3NzKCdoZWlnaHQnLCAnYXV0bycpLmNzcygnb3BhY2l0eScsICcuOCcpWzBdO1xuICAgIH0sXG4gICAgdXBkYXRlOiBmdW5jdGlvbihjb250YWluZXIsIHApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgLy8gVE9ETyB0aGUgdW5kdW1hbmFnZXIgc2hvdWxkIGJlIHBsdWdnYWJsZS5cbiAgLy8gVXNlZCBieSBcIm1vdmVCbG9ja1wiIGFuZCBibG9ja3Mtd3lzaXd5Zy50bXBsLmh0bWwgdG8gXCJtZXJnZVwiIGRyYWcvZHJvcCBvcGVyYXRpb25zIGludG8gYSBzaW5nbGUgdW5kby9yZWRvIG9wLlxuICB2aWV3TW9kZWwuc3RhcnRNdWx0aXBsZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0eXBlb2Ygdmlld01vZGVsLnNldFVuZG9Nb2RlTWVyZ2UgIT09ICd1bmRlZmluZWQnKSB2aWV3TW9kZWwuc2V0VW5kb01vZGVNZXJnZSgpO1xuICB9O1xuICB2aWV3TW9kZWwuc3RvcE11bHRpcGxlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB2aWV3TW9kZWwuc2V0VW5kb01vZGVPbmNlICE9PSAndW5kZWZpbmVkJykgdmlld01vZGVsLnNldFVuZG9Nb2RlT25jZSgpO1xuICB9O1xuXG4gIC8vIFVzZWQgYnkgY29kZSBnZW5lcmF0ZWQgYnkgZWRpdG9yLmpzXG4gIHZpZXdNb2RlbC5sb2NhbEdsb2JhbFN3aXRjaCA9IGZ1bmN0aW9uKHByb3AsIGdsb2JhbFByb3ApIHtcbiAgICB2YXIgY3VycmVudCA9IHByb3AoKTtcbiAgICBpZiAoY3VycmVudCA9PT0gbnVsbCkgcHJvcChnbG9iYWxQcm9wKCkpO1xuICAgIGVsc2UgcHJvcChudWxsKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gVXNlZCBieSBlZGl0b3IgYW5kIG1haW4gXCJjb252ZXJ0ZXJcIiB0byBzdXBwb3J0IGl0ZW0gc2VsZWN0aW9uXG4gIHZpZXdNb2RlbC5zZWxlY3RJdGVtID0gZnVuY3Rpb24odmFsdWVBY2Nlc3NvciwgaXRlbSwgYmxvY2spIHtcbiAgICB2YXIgdmFsID0ga28udXRpbHMucGVla09ic2VydmFibGUodmFsdWVBY2Nlc3Nvcik7XG4gICAgaWYgKHR5cGVvZiBibG9jayAhPT0gJ3VuZGVmaW5lZCcpIHZpZXdNb2RlbC5zZWxlY3RCbG9jayhibG9jaywgZmFsc2UsIHRydWUpO1xuICAgIGlmICh2YWwgIT0gaXRlbSkge1xuICAgICAgdmFsdWVBY2Nlc3NvcihpdGVtKTtcbiAgICAgIC8vIE9uIHNlbGVjdEl0ZW0gaWYgd2Ugd2VyZSBvbiBcIkJsb2Nrc1wiIHRvb2xib3ggdGFiIHdlIG1vdmUgdG8gXCJDb250ZW50XCIgdG9vbGJveCB0YWIuXG4gICAgICBpZiAoaXRlbSAhPT0gbnVsbCAmJiB2aWV3TW9kZWwuc2VsZWN0ZWRUb29sKCkgPT09IDApIHZpZXdNb2RlbC5zZWxlY3RlZFRvb2woMSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfS5iaW5kKHZpZXdNb2RlbCwgdmlld01vZGVsLnNlbGVjdGVkSXRlbSk7XG5cbiAgdmlld01vZGVsLmlzU2VsZWN0ZWRJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICAgIHJldHVybiB2aWV3TW9kZWwuc2VsZWN0ZWRJdGVtKCkgPT0gaXRlbTtcbiAgfTtcblxuICB2aWV3TW9kZWwuc2VsZWN0QmxvY2sgPSBmdW5jdGlvbih2YWx1ZUFjY2Vzc29yLCBpdGVtLCBkb05vdFNlbGVjdCwgZG9Ob3RVbnNlbGVjdEl0ZW0pIHtcbiAgICB2YXIgdmFsID0ga28udXRpbHMucGVla09ic2VydmFibGUodmFsdWVBY2Nlc3Nvcik7XG4gICAgaWYgKCFkb05vdFVuc2VsZWN0SXRlbSkgdmlld01vZGVsLnNlbGVjdEl0ZW0obnVsbCk7XG4gICAgaWYgKHZhbCAhPSBpdGVtKSB7XG4gICAgICB2YWx1ZUFjY2Vzc29yKGl0ZW0pO1xuICAgICAgLy8gaGlkZSBnYWxsZXJ5IG9uIGJsb2NrIHNlbGVjdGlvblxuICAgICAgdmlld01vZGVsLnNob3dHYWxsZXJ5KGZhbHNlKTtcbiAgICAgIGlmIChpdGVtICE9PSBudWxsICYmICFkb05vdFNlbGVjdCAmJiB2aWV3TW9kZWwuc2VsZWN0ZWRUb29sKCkgPT09IDApIHZpZXdNb2RlbC5zZWxlY3RlZFRvb2woMSk7XG4gICAgfVxuICB9LmJpbmQodmlld01vZGVsLCB2aWV3TW9kZWwuc2VsZWN0ZWRCbG9jayk7XG5cbiAgLy8gREVCVUdcbiAgdmlld01vZGVsLmNvdW50U3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uKG1vZGVsLCBkZWJ1Zykge1xuICAgIHZhciByZXMgPSAwO1xuICAgIGZvciAodmFyIHByb3AgaW4gbW9kZWwpXG4gICAgICBpZiAobW9kZWwuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgdmFyIHAgPSBtb2RlbFtwcm9wXTtcbiAgICAgICAgaWYgKGtvLmlzT2JzZXJ2YWJsZShwKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcC5fZGVmYXVsdENvbXB1dGVkICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRlYnVnICE9ICd1bmRlZmluZWQnKSBjb25zb2xlLmxvZyhkZWJ1ZyArIFwiL1wiICsgcHJvcCArIFwiL19cIiwgcC5fZGVmYXVsdENvbXB1dGVkLmdldFN1YnNjcmlwdGlvbnNDb3VudCgpKTtcbiAgICAgICAgICAgIHJlcyArPSBwLl9kZWZhdWx0Q29tcHV0ZWQuZ2V0U3Vic2NyaXB0aW9uc0NvdW50KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2YgZGVidWcgIT0gJ3VuZGVmaW5lZCcpIGNvbnNvbGUubG9nKGRlYnVnICsgXCIvXCIgKyBwcm9wICsgXCIvLVwiLCBwLmdldFN1YnNjcmlwdGlvbnNDb3VudCgpKTtcbiAgICAgICAgICByZXMgKz0gcC5nZXRTdWJzY3JpcHRpb25zQ291bnQoKTtcbiAgICAgICAgICBwID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHAgPT0gJ29iamVjdCcgJiYgcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHZhciB0b3QgPSB2aWV3TW9kZWwuY291bnRTdWJzY3JpcHRpb25zKHAsIHR5cGVvZiBkZWJ1ZyAhPSAndW5kZWZpbmVkJyA/IGRlYnVnICsgJy8nICsgcHJvcCArIFwiQFwiIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICBpZiAodHlwZW9mIGRlYnVnICE9ICd1bmRlZmluZWQnKSBjb25zb2xlLmxvZyhkZWJ1ZyArIFwiL1wiICsgcHJvcCArIFwiQFwiLCB0b3QpO1xuICAgICAgICAgIHJlcyArPSB0b3Q7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIC8vIERFQlVHXG4gIHZpZXdNb2RlbC5sb29wU3Vic2NyaXB0aW9uc0NvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvdW50ID0gdmlld01vZGVsLmNvdW50U3Vic2NyaXB0aW9ucyh2aWV3TW9kZWwuY29udGVudCgpKTtcbiAgICBnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1YnNjcmlwdGlvbnNDb3VudCcpLmlubmVySFRNTCA9IGNvdW50O1xuICAgIGdsb2JhbC5zZXRUaW1lb3V0KHZpZXdNb2RlbC5sb29wU3Vic2NyaXB0aW9uc0NvdW50LCAxMDAwKTtcbiAgfTtcblxuICB2aWV3TW9kZWwuZXhwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbnRlbnQgPSBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyKFwiZXhwb3J0SFRNTFwiLCB2aWV3TW9kZWwuZXhwb3J0SFRNTCk7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29uZGl0aW9uYWxfcmVzdG9yZShodG1sKSB7XG4gICAgcmV0dXJuIGh0bWwucmVwbGFjZSgvPHJlcGxhY2VkY2NbXj5dKiBjb25kaXRpb249XCIoW15cIl0qKVwiW14+XSo+KFtcXHNcXFNdKj8pPFxcL3JlcGxhY2VkY2M+L2csIGZ1bmN0aW9uKG1hdGNoLCBjb25kaXRpb24sIGJvZHkpIHtcbiAgICAgIHZhciBkZCA9ICc8IS0tW2lmICcrY29uZGl0aW9uLnJlcGxhY2UoLyZhbXA7LywgJyYnKSsnXT4nO1xuICAgICAgZGQgKz0gYm9keS5yZXBsYWNlKC88IS0tIGNjOmJjOihbQS1aYS16Ol0qKSAtLT4oPFxcL2NjPik/PCEtLSBjYzphYzpcXDEgLS0+L2csICc8LyQxPicpIC8vIHJlc3RvcmUgY2xvc2luZyB0YWdzIChpbmNsdWRpbmcgbG9zdCB0YWdzKVxuICAgICAgICAgICAgLnJlcGxhY2UoLz48XFwvY2M+PCEtLSBjYzpzYyAtLT4vZywgJy8+JykgLy8gcmVzdG9yZSBzZWxmY2xvc2luZyB0YWdzXG4gICAgICAgICAgICAucmVwbGFjZSgvPCEtLSBjYzpibzooW0EtWmEtejpdKikgLS0+PGNjL2csICc8JDEnKSAvLyByZXN0b3JlIG9wZW4gdGFnc1xuICAgICAgICAgICAgLnJlcGxhY2UoL14uKjwhLS0gY2M6c3RhcnQgLS0+LywnJykgLy8gcmVtb3ZlIGNvbnRlbnQgYmVmb3JlIHN0YXJ0XG4gICAgICAgICAgICAucmVwbGFjZSgvPCEtLSBjYzplbmQgLS0+LiokLywnJyk7IC8vIHJlbW92ZSBjb250ZW50IGFmdGVyIGVuZFxuICAgICAgZGQgKz0gJzwhW2VuZGlmXS0tPic7XG4gICAgICByZXR1cm4gZGQ7XG4gICAgfSk7XG4gIH1cblxuICB2aWV3TW9kZWwuZXhwb3J0SFRNTCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZCA9ICdleHBvcnRmcmFtZSc7XG4gICAgJCgnYm9keScpLmFwcGVuZCgnPGlmcmFtZSBpZD1cIicgKyBpZCArICdcIiBkYXRhLWJpbmQ9XCJiaW5kSWZyYW1lOiAkZGF0YVwiPjwvaWZyYW1lPicpO1xuICAgIHZhciBmcmFtZUVsID0gZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBrby5hcHBseUJpbmRpbmdzKHZpZXdNb2RlbCwgZnJhbWVFbCk7XG5cbiAgICBrby5jbGVhbk5vZGUoZnJhbWVFbCk7XG5cbiAgICBpZiAodmlld01vZGVsLmlubGluZSkgdmlld01vZGVsLmlubGluZShmcmFtZUVsLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpO1xuXG4gICAgLy8gT2Jzb2xldGUgbWV0aG9kIGRpZG4ndCB3b3JrIG9uIElFMTEgd2hlbiB1c2luZyBcIkhUTUw1IGRvY3R5cGVcIjpcbiAgICAvLyB2YXIgZG9jVHlwZSA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZ2xvYmFsLmRvY3VtZW50LmRvY3R5cGUpO1xuICAgIHZhciBub2RlID0gZnJhbWVFbC5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3R5cGU7XG4gICAgdmFyIGRvY1R5cGUgPSBcIjwhRE9DVFlQRSBcIiArIG5vZGUubmFtZSArXG4gICAgICAobm9kZS5wdWJsaWNJZCA/ICcgUFVCTElDIFwiJyArIG5vZGUucHVibGljSWQgKyAnXCInIDogJycpICtcbiAgICAgICghbm9kZS5wdWJsaWNJZCAmJiBub2RlLnN5c3RlbUlkID8gJyBTWVNURU0nIDogJycpICtcbiAgICAgIChub2RlLnN5c3RlbUlkID8gJyBcIicgKyBub2RlLnN5c3RlbUlkICsgJ1wiJyA6ICcnKSArICc+JztcbiAgICB2YXIgY29udGVudCA9IGRvY1R5cGUgKyBcIlxcblwiICsgZnJhbWVFbC5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUw7XG4gICAga28ucmVtb3ZlTm9kZShmcmFtZUVsKTtcblxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzxzY3JpcHQgKFtePl0qICk/dHlwZT1cInRleHRcXC9odG1sXCJbXj5dKj5bXFxzXFxTXSo/PFxcL3NjcmlwdD4vZ20sICcnKTtcbiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC88IS0tIGtvIC4qPyAtLT4vZywgJycpOyAvLyBzb21ldGltZXMgd2UgaGF2ZSBleHByZXNzaW9ucyBsaWtlICg8IS0tIGtvIHZhciA+IDIgLS0+KVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzwhLS0ga28gKCg/IS0tKS4pKj8gLS0+L2csICcnKTsgLy8gdGhpcyByZXBsYWNlcyB0aGUgYWJvdmUgd2l0aCBhIG1vcmUgZm9ybWFsIChidXQgc2xvd2VyKSBzb2x1dGlvblxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzwhLS0gXFwva28gLS0+L2csICcnKTtcbiAgICAvLyBSZW1vdmUgZGF0YS1iaW5kL2RhdGEtYmxvY2sgYXR0cmlidXRlc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyBkYXRhLWJpbmQ9XCJbXlwiXSpcIi9nbSwgJycpO1xuICAgIC8vIFJlbW92ZSB0cmFzaCBsZWZ0b3ZlciBieSBUaW55TUNFXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvIGRhdGEtbWNlLShocmVmfHNyY3xzdHlsZSk9XCJbXlwiXSpcIi9nbSwgJycpO1xuXG4gICAgLy8gUmVwbGFjZSBcInJlcGxhY2Vkc3R5bGVcIiB0byBcInN0eWxlXCIgYXR0cmlidXRlcyAoY2hyb21lIHB1dHMgcmVwbGFjZWRzdHlsZSBhZnRlciBzdHlsZSlcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8gc3R5bGU9XCJbXlwiXSpcIihbXj5dKikgcmVwbGFjZWQoc3R5bGU9XCJbXlwiXSpcIikvZ20sICckMSAkMicpO1xuICAgIC8vIFJlcGxhY2UgXCJyZXBsYWNlZHN0eWxlXCIgdG8gXCJzdHlsZVwiIGF0dHJpYnV0ZXMgKGllL2ZmIGhhdmUgcmV2ZXJzZSBvcmRlcilcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8gcmVwbGFjZWQoc3R5bGU9XCJbXlwiXSpcIikoW14+XSopIHN0eWxlPVwiW15cIl0qXCIvZ20sICcgJDEkMicpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyByZXBsYWNlZChzdHlsZT1cIlteXCJdKlwiKS9nbSwgJyAkMScpO1xuXG4gICAgLy8gc2FtZSBhcyBzdHlsZSwgYnV0IGZvciBodHRwLWVxdWl2IChzb21lIGJyb3dzZXIgYnJlYWsgaXQgaWYgd2UgZG9uJ3QgcmVwbGFjZSwgYnV0IHRoZW4gd2UgZmluZCBpdCBkdXBsaWNhdGVkKVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyBodHRwLWVxdWl2PVwiW15cIl0qXCIoW14+XSopIHJlcGxhY2VkKGh0dHAtZXF1aXY9XCJbXlwiXSpcIikvZ20sICckMSAkMicpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyByZXBsYWNlZChodHRwLWVxdWl2PVwiW15cIl0qXCIpKFtePl0qKSBodHRwLWVxdWl2PVwiW15cIl0qXCIvZ20sICcgJDEkMicpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyByZXBsYWNlZChodHRwLWVxdWl2PVwiW15cIl0qXCIpL2dtLCAnICQxJyk7XG5cbiAgICAvLyBXZSBhbHJlYWR5IHJlcGxhY2Ugc3R5bGUgYW5kIGh0dHAtZXF1aXYgYW5kIHdlIGRvbid0IG5lZWQgdGhpcy5cbiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8gcmVwbGFjZWQoW149IF0qPSkvZ20sICcgJDEnKTtcbiAgICAvLyBSZXN0b3JlIGNvbmRpdGlvbmFsIGNvbW1lbnRzXG4gICAgY29udGVudCA9IGNvbmRpdGlvbmFsX3Jlc3RvcmUoY29udGVudCk7XG4gICAgdmFyIHRyYXNoID0gY29udGVudC5tYXRjaCgvIGRhdGEtW14gPV0rKD1cIlteXCJdK1wiKT8gLykgfHwgY29udGVudC5tYXRjaCgvIHJlcGxhY2VkKFtePSBdKj0pLyk7XG4gICAgaWYgKHRyYXNoKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJPdXRwdXQgSFRNTCBjb250YWlucyB1bmV4cGVjdGVkIGRhdGEtIGF0dHJpYnV0ZXMgb3IgcmVwbGFjZWQgYXR0cmlidXRlc1wiLCB0cmFzaCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH07XG5cbiAgdmlld01vZGVsLmV4cG9ydEhUTUx0b1RleHRhcmVhID0gZnVuY3Rpb24odGV4dGFyZWFpZCkge1xuICAgICQodGV4dGFyZWFpZCkudmFsKHZpZXdNb2RlbC5leHBvcnRIVE1MKCkpO1xuICB9O1xuXG4gIHZpZXdNb2RlbC5leHBvcnRKU09OdG9UZXh0YXJlYSA9IGZ1bmN0aW9uKHRleHRhcmVhaWQpIHtcbiAgICAkKHRleHRhcmVhaWQpLnZhbCh2aWV3TW9kZWwuZXhwb3J0SlNPTigpKTtcbiAgfTtcblxuICB2aWV3TW9kZWwuaW1wb3J0SlNPTmZyb21UZXh0YXJlYSA9IGZ1bmN0aW9uKHRleHRhcmVhaWQpIHtcbiAgICB2aWV3TW9kZWwuaW1wb3J0SlNPTigkKHRleHRhcmVhaWQpLnZhbCgpKTtcbiAgfTtcblxuICB2aWV3TW9kZWwuZXhwb3J0TWV0YWRhdGEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIganNvbiA9IGtvLnRvSlNPTih2aWV3TW9kZWwubWV0YWRhdGEpO1xuICAgIHJldHVybiBqc29uO1xuICB9O1xuXG4gIHZpZXdNb2RlbC5leHBvcnRKU09OID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGpzb24gPSBrby50b0pTT04odmlld01vZGVsLmNvbnRlbnQpO1xuICAgIHJldHVybiBqc29uO1xuICB9O1xuXG4gIHZpZXdNb2RlbC5leHBvcnRKUyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBrby50b0pTKHZpZXdNb2RlbC5jb250ZW50KTtcbiAgfTtcblxuICB2aWV3TW9kZWwuaW1wb3J0SlNPTiA9IGZ1bmN0aW9uKGpzb24pIHtcbiAgICB2YXIgdW53cmFwcGVkID0ga28udXRpbHMucGFyc2VKc29uKGpzb24pO1xuICAgIHZpZXdNb2RlbC5jb250ZW50Ll93cmFwKHVud3JhcHBlZCk7XG4gIH07XG5cbiAgdmlld01vZGVsLmV4cG9ydFRoZW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZsYXQgPSB7fTtcbiAgICB2YXIgbW9kID0gdmlld01vZGVsLmNvbnRlbnQoKS50aGVtZSgpO1xuXG4gICAgdmFyIF9leHBvcnQgPSBmdW5jdGlvbihwcmVmaXgsIGZsYXQsIG1vZCkge1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBtb2QpXG4gICAgICAgIGlmIChtb2QuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICB2YXIgYSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUobW9kW3Byb3BdKTtcbiAgICAgICAgICBpZiAoYSAhPT0gbnVsbCAmJiB0eXBlb2YgYSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgX2V4cG9ydChwcm9wICsgJy4nLCBmbGF0LCBhKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmxhdFtwcmVmaXggKyBwcm9wXSA9IGE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9leHBvcnQoJycsIGZsYXQsIG1vZCk7XG5cbiAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgZm9yICh2YXIgcHJvcCBpbiBmbGF0KVxuICAgICAgaWYgKGZsYXQuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgcHJvcCAhPSAndHlwZScpIHtcbiAgICAgICAgb3V0cHV0ICs9IHByb3AgKyBcIjogXCIgKyBmbGF0W3Byb3BdICsgXCI7XCIgKyBcIlxcblwiO1xuICAgICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvLyBtb3hpZW1hbmFnZXIgKG9yIGZpbGUgYnJvd3Nlci9pbWFnZWVkaXRvcikgZXh0ZW5zaW9uIHBvaW50cy5cbiAgLy8gSnVzdCBpbXBsZW1lbnQgZWRpdEltYWdlIG9yIGxpbmtEaWFsb2cgbWV0aG9kc1xuICAvLyB2aWV3TW9kZWwuZWRpdEltYWdlID0gZnVuY3Rpb24oc3JjLCBkb25lKSB7fSA6IGltcGxlbWVudCB0aGlzIG1ldGhvZCB0byBlbmFibGUgaW1hZ2UgZWRpdGluZyAoc3JjIGlzIGEgd2lydGFibGVPYnNlcnZhYmxlKS5cbiAgLy8gdmlld01vZGVsLmxpbmtEaWFsb2cgPSBmdW5jdGlvbigpIHt9OiBpbXBsZW1lbnQgdGhpcyBtZXRob2QgdXNpbmcgXCJ0aGlzXCIgdG8gZmluZCB0aGUgaW5wdXQgZWxlbWVudCAkKHRoaXMpLnZhbCBpcyBhIHdyaXRhYmxlT2JzZXJ2YWJsZS5cblxuICB2aWV3TW9kZWwubG9hZEltYWdlID0gZnVuY3Rpb24oaW1nKSB7XG4gICAgLy8gcHVzaCBpbWFnZSBhdCB0b3Agb2YgXCJyZWNlbnRcIiBnYWxsZXJ5XG4gICAgdmlld01vZGVsLmdhbGxlcnlSZWNlbnQudW5zaGlmdChpbWcpO1xuICAgIC8vIHNlbGVjdCByZWNlbnQgZ2FsbGVyeSB0YWJcbiAgICB2aWV3TW9kZWwuc2VsZWN0ZWRJbWFnZVRhYigwKTtcbiAgfTtcblxuICB2aWV3TW9kZWwuZGlhbG9nID0gZnVuY3Rpb24oc2VsZWN0b3IsIG9wdGlvbnMpIHtcbiAgICAkKHNlbGVjdG9yKS5kaWFsb2cob3B0aW9ucyk7XG4gIH07XG5cbiAgLy8gRHVtbXkgbG9nIG1ldGhvZCBvdmVycmlkZGVuIGJ5IGV4dGVuc2lvbnNcbiAgdmlld01vZGVsLmxvZyA9IGZ1bmN0aW9uKGNhdGVnb3J5LCBtc2cpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcInZpZXdNb2RlbC5sb2dcIiwgY2F0ZWdvcnksIG1zZyk7XG4gIH07XG5cbiAgLy8gYXV0b21hdGljYWxseSBsb2FkIHRoZSBnYWxsZXJ5IHdoZW4gdGhlIGdhbGxlcnkgdGFiIGlzIHNlbGVjdGVkXG4gIHZpZXdNb2RlbC5zZWxlY3RlZEltYWdlVGFiLnN1YnNjcmliZShmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgIGlmIChuZXdWYWx1ZSA9PSAxICYmIHZpZXdNb2RlbC5nYWxsZXJ5TG9hZGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICB2aWV3TW9kZWwubG9hZEdhbGxlcnkoKTtcbiAgICB9XG4gIH0sIHZpZXdNb2RlbCwgJ2NoYW5nZScpO1xuXG4gIHJldHVybiB2aWV3TW9kZWw7XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbml0aWFsaXplRWRpdG9yO1xuIl19
